var li=Object.defineProperty;var hi=(e,r,t)=>r in e?li(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t;var Ne=(e,r,t)=>(hi(e,typeof r!="symbol"?r+"":r,t),t);(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function makeMap(e,r){const t=Object.create(null),n=e.split(",");for(let i=0;i<n.length;i++)t[n[i]]=!0;return r?i=>!!t[i.toLowerCase()]:i=>!!t[i]}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(e){return!!e||e===""}function normalizeStyle(e){if(isArray$1(e)){const r={};for(let t=0;t<e.length;t++){const n=e[t],i=isString(n)?parseStringStyle(n):normalizeStyle(n);if(i)for(const s in i)r[s]=i[s]}return r}else{if(isString(e))return e;if(isObject(e))return e}}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:(.+)/;function parseStringStyle(e){const r={};return e.split(listDelimiterRE).forEach(t=>{if(t){const n=t.split(propertyDelimiterRE);n.length>1&&(r[n[0].trim()]=n[1].trim())}}),r}function normalizeClass(e){let r="";if(isString(e))r=e;else if(isArray$1(e))for(let t=0;t<e.length;t++){const n=normalizeClass(e[t]);n&&(r+=n+" ")}else if(isObject(e))for(const t in e)e[t]&&(r+=t+" ");return r.trim()}const toDisplayString=e=>isString(e)?e:e==null?"":isArray$1(e)||isObject(e)&&(e.toString===objectToString||!isFunction(e.toString))?JSON.stringify(e,replacer,2):String(e),replacer=(e,r)=>r&&r.__v_isRef?replacer(e,r.value):isMap(r)?{[`Map(${r.size})`]:[...r.entries()].reduce((t,[n,i])=>(t[`${n} =>`]=i,t),{})}:isSet(r)?{[`Set(${r.size})`]:[...r.values()]}:isObject(r)&&!isArray$1(r)&&!isPlainObject(r)?String(r):r,EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,onRE=/^on[^a-z]/,isOn=e=>onRE.test(e),isModelListener=e=>e.startsWith("onUpdate:"),extend=Object.assign,remove=(e,r)=>{const t=e.indexOf(r);t>-1&&e.splice(t,1)},hasOwnProperty$3=Object.prototype.hasOwnProperty,hasOwn=(e,r)=>hasOwnProperty$3.call(e,r),isArray$1=Array.isArray,isMap=e=>toTypeString(e)==="[object Map]",isSet=e=>toTypeString(e)==="[object Set]",isFunction=e=>typeof e=="function",isString=e=>typeof e=="string",isSymbol=e=>typeof e=="symbol",isObject=e=>e!==null&&typeof e=="object",isPromise=e=>isObject(e)&&isFunction(e.then)&&isFunction(e.catch),objectToString=Object.prototype.toString,toTypeString=e=>objectToString.call(e),toRawType=e=>toTypeString(e).slice(8,-1),isPlainObject=e=>toTypeString(e)==="[object Object]",isIntegerKey=e=>isString(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=e=>{const r=Object.create(null);return t=>r[t]||(r[t]=e(t))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(e=>e.replace(camelizeRE,(r,t)=>t?t.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(e=>e.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(e=>e.charAt(0).toUpperCase()+e.slice(1)),toHandlerKey=cacheStringFunction(e=>e?`on${capitalize(e)}`:""),hasChanged=(e,r)=>!Object.is(e,r),invokeArrayFns=(e,r)=>{for(let t=0;t<e.length;t++)e[t](r)},def=(e,r,t)=>{Object.defineProperty(e,r,{configurable:!0,enumerable:!1,value:t})},toNumber=e=>{const r=parseFloat(e);return isNaN(r)?e:r};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let activeEffectScope;class EffectScope{constructor(r=!1){this.active=!0,this.effects=[],this.cleanups=[],!r&&activeEffectScope&&(this.parent=activeEffectScope,this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}run(r){if(this.active){const t=activeEffectScope;try{return activeEffectScope=this,r()}finally{activeEffectScope=t}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(r){if(this.active){let t,n;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);if(this.parent&&!r){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.active=!1}}}function recordEffectScope(e,r=activeEffectScope){r&&r.active&&r.effects.push(e)}const createDep=e=>{const r=new Set(e);return r.w=0,r.n=0,r},wasTracked=e=>(e.w&trackOpBit)>0,newTracked=e=>(e.n&trackOpBit)>0,initDepMarkers=({deps:e})=>{if(e.length)for(let r=0;r<e.length;r++)e[r].w|=trackOpBit},finalizeDepMarkers=e=>{const{deps:r}=e;if(r.length){let t=0;for(let n=0;n<r.length;n++){const i=r[n];wasTracked(i)&&!newTracked(i)?i.delete(e):r[t++]=i,i.w&=~trackOpBit,i.n&=~trackOpBit}r.length=t}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(r,t=null,n){this.fn=r,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,n)}run(){if(!this.active)return this.fn();let r=activeEffect,t=shouldTrack;for(;r;){if(r===this)return;r=r.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=t,this.parent=void 0,this.deferStop&&this.stop()}}stop(){activeEffect===this?this.deferStop=!0:this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(e){const{deps:r}=e;if(r.length){for(let t=0;t<r.length;t++)r[t].delete(e);r.length=0}}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const e=trackStack.pop();shouldTrack=e===void 0?!0:e}function track(e,r,t){if(shouldTrack&&activeEffect){let n=targetMap.get(e);n||targetMap.set(e,n=new Map);let i=n.get(t);i||n.set(t,i=createDep()),trackEffects(i)}}function trackEffects(e,r){let t=!1;effectTrackDepth<=maxMarkerBits?newTracked(e)||(e.n|=trackOpBit,t=!wasTracked(e)):t=!e.has(activeEffect),t&&(e.add(activeEffect),activeEffect.deps.push(e))}function trigger(e,r,t,n,i,s){const o=targetMap.get(e);if(!o)return;let a=[];if(r==="clear")a=[...o.values()];else if(t==="length"&&isArray$1(e))o.forEach((u,l)=>{(l==="length"||l>=n)&&a.push(u)});else switch(t!==void 0&&a.push(o.get(t)),r){case"add":isArray$1(e)?isIntegerKey(t)&&a.push(o.get("length")):(a.push(o.get(ITERATE_KEY)),isMap(e)&&a.push(o.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray$1(e)||(a.push(o.get(ITERATE_KEY)),isMap(e)&&a.push(o.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(e)&&a.push(o.get(ITERATE_KEY));break}if(a.length===1)a[0]&&triggerEffects(a[0]);else{const u=[];for(const l of a)l&&u.push(...l);triggerEffects(createDep(u))}}function triggerEffects(e,r){const t=isArray$1(e)?e:[...e];for(const n of t)n.computed&&triggerEffect(n);for(const n of t)n.computed||triggerEffect(n)}function triggerEffect(e,r){(e!==activeEffect||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(isSymbol)),get=createGetter(),shallowGet=createGetter(!1,!0),readonlyGet=createGetter(!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const e={};return["includes","indexOf","lastIndexOf"].forEach(r=>{e[r]=function(...t){const n=toRaw(this);for(let s=0,o=this.length;s<o;s++)track(n,"get",s+"");const i=n[r](...t);return i===-1||i===!1?n[r](...t.map(toRaw)):i}}),["push","pop","shift","unshift","splice"].forEach(r=>{e[r]=function(...t){pauseTracking();const n=toRaw(this)[r].apply(this,t);return resetTracking(),n}}),e}function createGetter(e=!1,r=!1){return function(n,i,s){if(i==="__v_isReactive")return!e;if(i==="__v_isReadonly")return e;if(i==="__v_isShallow")return r;if(i==="__v_raw"&&s===(e?r?shallowReadonlyMap:readonlyMap:r?shallowReactiveMap:reactiveMap).get(n))return n;const o=isArray$1(n);if(!e&&o&&hasOwn(arrayInstrumentations,i))return Reflect.get(arrayInstrumentations,i,s);const a=Reflect.get(n,i,s);return(isSymbol(i)?builtInSymbols.has(i):isNonTrackableKeys(i))||(e||track(n,"get",i),r)?a:isRef(a)?o&&isIntegerKey(i)?a:a.value:isObject(a)?e?readonly(a):reactive(a):a}}const set=createSetter(),shallowSet=createSetter(!0);function createSetter(e=!1){return function(t,n,i,s){let o=t[n];if(isReadonly(o)&&isRef(o)&&!isRef(i))return!1;if(!e&&(!isShallow(i)&&!isReadonly(i)&&(o=toRaw(o),i=toRaw(i)),!isArray$1(t)&&isRef(o)&&!isRef(i)))return o.value=i,!0;const a=isArray$1(t)&&isIntegerKey(n)?Number(n)<t.length:hasOwn(t,n),u=Reflect.set(t,n,i,s);return t===toRaw(s)&&(a?hasChanged(i,o)&&trigger(t,"set",n,i):trigger(t,"add",n,i)),u}}function deleteProperty(e,r){const t=hasOwn(e,r);e[r];const n=Reflect.deleteProperty(e,r);return n&&t&&trigger(e,"delete",r,void 0),n}function has(e,r){const t=Reflect.has(e,r);return(!isSymbol(r)||!builtInSymbols.has(r))&&track(e,"has",r),t}function ownKeys(e){return track(e,"iterate",isArray$1(e)?"length":ITERATE_KEY),Reflect.ownKeys(e)}const mutableHandlers={get,set,deleteProperty,has,ownKeys},readonlyHandlers={get:readonlyGet,set(e,r){return!0},deleteProperty(e,r){return!0}},shallowReactiveHandlers=extend({},mutableHandlers,{get:shallowGet,set:shallowSet}),toShallow=e=>e,getProto=e=>Reflect.getPrototypeOf(e);function get$1(e,r,t=!1,n=!1){e=e.__v_raw;const i=toRaw(e),s=toRaw(r);t||(r!==s&&track(i,"get",r),track(i,"get",s));const{has:o}=getProto(i),a=n?toShallow:t?toReadonly:toReactive;if(o.call(i,r))return a(e.get(r));if(o.call(i,s))return a(e.get(s));e!==i&&e.get(r)}function has$1(e,r=!1){const t=this.__v_raw,n=toRaw(t),i=toRaw(e);return r||(e!==i&&track(n,"has",e),track(n,"has",i)),e===i?t.has(e):t.has(e)||t.has(i)}function size(e,r=!1){return e=e.__v_raw,!r&&track(toRaw(e),"iterate",ITERATE_KEY),Reflect.get(e,"size",e)}function add(e){e=toRaw(e);const r=toRaw(this);return getProto(r).has.call(r,e)||(r.add(e),trigger(r,"add",e,e)),this}function set$1(e,r){r=toRaw(r);const t=toRaw(this),{has:n,get:i}=getProto(t);let s=n.call(t,e);s||(e=toRaw(e),s=n.call(t,e));const o=i.call(t,e);return t.set(e,r),s?hasChanged(r,o)&&trigger(t,"set",e,r):trigger(t,"add",e,r),this}function deleteEntry(e){const r=toRaw(this),{has:t,get:n}=getProto(r);let i=t.call(r,e);i||(e=toRaw(e),i=t.call(r,e)),n&&n.call(r,e);const s=r.delete(e);return i&&trigger(r,"delete",e,void 0),s}function clear(){const e=toRaw(this),r=e.size!==0,t=e.clear();return r&&trigger(e,"clear",void 0,void 0),t}function createForEach(e,r){return function(n,i){const s=this,o=s.__v_raw,a=toRaw(o),u=r?toShallow:e?toReadonly:toReactive;return!e&&track(a,"iterate",ITERATE_KEY),o.forEach((l,h)=>n.call(i,u(l),u(h),s))}}function createIterableMethod(e,r,t){return function(...n){const i=this.__v_raw,s=toRaw(i),o=isMap(s),a=e==="entries"||e===Symbol.iterator&&o,u=e==="keys"&&o,l=i[e](...n),h=t?toShallow:r?toReadonly:toReactive;return!r&&track(s,"iterate",u?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:f,done:d}=l.next();return d?{value:f,done:d}:{value:a?[h(f[0]),h(f[1])]:h(f),done:d}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(e){return function(...r){return e==="delete"?!1:this}}function createInstrumentations(){const e={get(s){return get$1(this,s)},get size(){return size(this)},has:has$1,add,set:set$1,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},r={get(s){return get$1(this,s,!1,!0)},get size(){return size(this)},has:has$1,add,set:set$1,delete:deleteEntry,clear,forEach:createForEach(!1,!0)},t={get(s){return get$1(this,s,!0)},get size(){return size(this,!0)},has(s){return has$1.call(this,s,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},n={get(s){return get$1(this,s,!0,!0)},get size(){return size(this,!0)},has(s){return has$1.call(this,s,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{e[s]=createIterableMethod(s,!1,!1),t[s]=createIterableMethod(s,!0,!1),r[s]=createIterableMethod(s,!1,!0),n[s]=createIterableMethod(s,!0,!0)}),[e,t,r,n]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(e,r){const t=r?e?shallowReadonlyInstrumentations:shallowInstrumentations:e?readonlyInstrumentations:mutableInstrumentations;return(n,i,s)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?n:Reflect.get(hasOwn(t,i)&&i in n?t:n,i,s)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(e){return e.__v_skip||!Object.isExtensible(e)?0:targetTypeMap(toRawType(e))}function reactive(e){return isReadonly(e)?e:createReactiveObject(e,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(e){return createReactiveObject(e,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(e){return createReactiveObject(e,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(e,r,t,n,i){if(!isObject(e)||e.__v_raw&&!(r&&e.__v_isReactive))return e;const s=i.get(e);if(s)return s;const o=getTargetType(e);if(o===0)return e;const a=new Proxy(e,o===2?n:t);return i.set(e,a),a}function isReactive(e){return isReadonly(e)?isReactive(e.__v_raw):!!(e&&e.__v_isReactive)}function isReadonly(e){return!!(e&&e.__v_isReadonly)}function isShallow(e){return!!(e&&e.__v_isShallow)}function isProxy(e){return isReactive(e)||isReadonly(e)}function toRaw(e){const r=e&&e.__v_raw;return r?toRaw(r):e}function markRaw(e){return def(e,"__v_skip",!0),e}const toReactive=e=>isObject(e)?reactive(e):e,toReadonly=e=>isObject(e)?readonly(e):e;function trackRefValue(e){shouldTrack&&activeEffect&&(e=toRaw(e),trackEffects(e.dep||(e.dep=createDep())))}function triggerRefValue(e,r){e=toRaw(e),e.dep&&triggerEffects(e.dep)}function isRef(e){return!!(e&&e.__v_isRef===!0)}function ref(e){return createRef(e,!1)}function createRef(e,r){return isRef(e)?e:new RefImpl(e,r)}class RefImpl{constructor(r,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?r:toRaw(r),this._value=t?r:toReactive(r)}get value(){return trackRefValue(this),this._value}set value(r){const t=this.__v_isShallow||isShallow(r)||isReadonly(r);r=t?r:toRaw(r),hasChanged(r,this._rawValue)&&(this._rawValue=r,this._value=t?r:toReactive(r),triggerRefValue(this))}}function unref(e){return isRef(e)?e.value:e}const shallowUnwrapHandlers={get:(e,r,t)=>unref(Reflect.get(e,r,t)),set:(e,r,t,n)=>{const i=e[r];return isRef(i)&&!isRef(t)?(i.value=t,!0):Reflect.set(e,r,t,n)}};function proxyRefs(e){return isReactive(e)?e:new Proxy(e,shallowUnwrapHandlers)}var _a$4;class ComputedRefImpl{constructor(r,t,n,i){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this[_a$4]=!1,this._dirty=!0,this.effect=new ReactiveEffect(r,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=n}get value(){const r=toRaw(this);return trackRefValue(r),(r._dirty||!r._cacheable)&&(r._dirty=!1,r._value=r.effect.run()),r._value}set value(r){this._setter(r)}}_a$4="__v_isReadonly";function computed$1(e,r,t=!1){let n,i;const s=isFunction(e);return s?(n=e,i=NOOP):(n=e.get,i=e.set),new ComputedRefImpl(n,i,s||!i,t)}function callWithErrorHandling(e,r,t,n){let i;try{i=n?e(...n):e()}catch(s){handleError(s,r,t)}return i}function callWithAsyncErrorHandling(e,r,t,n){if(isFunction(e)){const s=callWithErrorHandling(e,r,t,n);return s&&isPromise(s)&&s.catch(o=>{handleError(o,r,t)}),s}const i=[];for(let s=0;s<e.length;s++)i.push(callWithAsyncErrorHandling(e[s],r,t,n));return i}function handleError(e,r,t,n=!0){const i=r?r.vnode:null;if(r){let s=r.parent;const o=r.proxy,a=t;for(;s;){const l=s.ec;if(l){for(let h=0;h<l.length;h++)if(l[h](e,o,a)===!1)return}s=s.parent}const u=r.appContext.config.errorHandler;if(u){callWithErrorHandling(u,null,10,[e,o,a]);return}}logError(e,t,i,n)}function logError(e,r,t,n=!0){console.error(e)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(e){const r=currentFlushPromise||resolvedPromise;return e?r.then(this?e.bind(this):e):r}function findInsertionIndex(e){let r=flushIndex+1,t=queue.length;for(;r<t;){const n=r+t>>>1;getId(queue[n])<e?r=n+1:t=n}return r}function queueJob(e){(!queue.length||!queue.includes(e,isFlushing&&e.allowRecurse?flushIndex+1:flushIndex))&&(e.id==null?queue.push(e):queue.splice(findInsertionIndex(e.id),0,e),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(e){const r=queue.indexOf(e);r>flushIndex&&queue.splice(r,1)}function queuePostFlushCb(e){isArray$1(e)?pendingPostFlushCbs.push(...e):(!activePostFlushCbs||!activePostFlushCbs.includes(e,e.allowRecurse?postFlushIndex+1:postFlushIndex))&&pendingPostFlushCbs.push(e),queueFlush()}function flushPreFlushCbs(e,r=isFlushing?flushIndex+1:0){for(;r<queue.length;r++){const t=queue[r];t&&t.pre&&(queue.splice(r,1),r--,t())}}function flushPostFlushCbs(e){if(pendingPostFlushCbs.length){const r=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...r);return}for(activePostFlushCbs=r,activePostFlushCbs.sort((t,n)=>getId(t)-getId(n)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=e=>e.id==null?1/0:e.id,comparator=(e,r)=>{const t=getId(e)-getId(r);if(t===0){if(e.pre&&!r.pre)return-1;if(r.pre&&!e.pre)return 1}return t};function flushJobs(e){isFlushPending=!1,isFlushing=!0,queue.sort(comparator);const r=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const t=queue[flushIndex];t&&t.active!==!1&&callWithErrorHandling(t,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}function emit$1(e,r,...t){if(e.isUnmounted)return;const n=e.vnode.props||EMPTY_OBJ;let i=t;const s=r.startsWith("update:"),o=s&&r.slice(7);if(o&&o in n){const h=`${o==="modelValue"?"model":o}Modifiers`,{number:f,trim:d}=n[h]||EMPTY_OBJ;d&&(i=t.map(_=>_.trim())),f&&(i=t.map(toNumber))}let a,u=n[a=toHandlerKey(r)]||n[a=toHandlerKey(camelize(r))];!u&&s&&(u=n[a=toHandlerKey(hyphenate(r))]),u&&callWithAsyncErrorHandling(u,e,6,i);const l=n[a+"Once"];if(l){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,callWithAsyncErrorHandling(l,e,6,i)}}function normalizeEmitsOptions(e,r,t=!1){const n=r.emitsCache,i=n.get(e);if(i!==void 0)return i;const s=e.emits;let o={},a=!1;if(!isFunction(e)){const u=l=>{const h=normalizeEmitsOptions(l,r,!0);h&&(a=!0,extend(o,h))};!t&&r.mixins.length&&r.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}return!s&&!a?(isObject(e)&&n.set(e,null),null):(isArray$1(s)?s.forEach(u=>o[u]=null):extend(o,s),isObject(e)&&n.set(e,o),o)}function isEmitListener(e,r){return!e||!isOn(r)?!1:(r=r.slice(2).replace(/Once$/,""),hasOwn(e,r[0].toLowerCase()+r.slice(1))||hasOwn(e,hyphenate(r))||hasOwn(e,r))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(e){const r=currentRenderingInstance;return currentRenderingInstance=e,currentScopeId=e&&e.type.__scopeId||null,r}function pushScopeId(e){currentScopeId=e}function popScopeId(){currentScopeId=null}function withCtx(e,r=currentRenderingInstance,t){if(!r||e._n)return e;const n=(...i)=>{n._d&&setBlockTracking(-1);const s=setCurrentRenderingInstance(r),o=e(...i);return setCurrentRenderingInstance(s),n._d&&setBlockTracking(1),o};return n._n=!0,n._c=!0,n._d=!0,n}function markAttrsAccessed(){}function renderComponentRoot(e){const{type:r,vnode:t,proxy:n,withProxy:i,props:s,propsOptions:[o],slots:a,attrs:u,emit:l,render:h,renderCache:f,data:d,setupState:_,ctx:v,inheritAttrs:m}=e;let E,A;const T=setCurrentRenderingInstance(e);try{if(t.shapeFlag&4){const R=i||n;E=normalizeVNode(h.call(R,R,f,s,_,d,v)),A=u}else{const R=r;E=normalizeVNode(R.length>1?R(s,{attrs:u,slots:a,emit:l}):R(s,null)),A=r.props?u:getFunctionalFallthrough(u)}}catch(R){blockStack.length=0,handleError(R,e,1),E=createVNode(Comment)}let C=E;if(A&&m!==!1){const R=Object.keys(A),{shapeFlag:b}=C;R.length&&b&7&&(o&&R.some(isModelListener)&&(A=filterModelListeners(A,o)),C=cloneVNode(C,A))}return t.dirs&&(C=cloneVNode(C),C.dirs=C.dirs?C.dirs.concat(t.dirs):t.dirs),t.transition&&(C.transition=t.transition),E=C,setCurrentRenderingInstance(T),E}const getFunctionalFallthrough=e=>{let r;for(const t in e)(t==="class"||t==="style"||isOn(t))&&((r||(r={}))[t]=e[t]);return r},filterModelListeners=(e,r)=>{const t={};for(const n in e)(!isModelListener(n)||!(n.slice(9)in r))&&(t[n]=e[n]);return t};function shouldUpdateComponent(e,r,t){const{props:n,children:i,component:s}=e,{props:o,children:a,patchFlag:u}=r,l=s.emitsOptions;if(r.dirs||r.transition)return!0;if(t&&u>=0){if(u&1024)return!0;if(u&16)return n?hasPropsChanged(n,o,l):!!o;if(u&8){const h=r.dynamicProps;for(let f=0;f<h.length;f++){const d=h[f];if(o[d]!==n[d]&&!isEmitListener(l,d))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:n===o?!1:n?o?hasPropsChanged(n,o,l):!0:!!o;return!1}function hasPropsChanged(e,r,t){const n=Object.keys(r);if(n.length!==Object.keys(e).length)return!0;for(let i=0;i<n.length;i++){const s=n[i];if(r[s]!==e[s]&&!isEmitListener(t,s))return!0}return!1}function updateHOCHostEl({vnode:e,parent:r},t){for(;r&&r.subTree===e;)(e=r.vnode).el=t,r=r.parent}const isSuspense=e=>e.__isSuspense;function queueEffectWithSuspense(e,r){r&&r.pendingBranch?isArray$1(e)?r.effects.push(...e):r.effects.push(e):queuePostFlushCb(e)}function provide(e,r){if(currentInstance){let t=currentInstance.provides;const n=currentInstance.parent&&currentInstance.parent.provides;n===t&&(t=currentInstance.provides=Object.create(n)),t[e]=r}}function inject(e,r,t=!1){const n=currentInstance||currentRenderingInstance;if(n){const i=n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides;if(i&&e in i)return i[e];if(arguments.length>1)return t&&isFunction(r)?r.call(n.proxy):r}}const INITIAL_WATCHER_VALUE={};function watch(e,r,t){return doWatch(e,r,t)}function doWatch(e,r,{immediate:t,deep:n,flush:i,onTrack:s,onTrigger:o}=EMPTY_OBJ){const a=currentInstance;let u,l=!1,h=!1;if(isRef(e)?(u=()=>e.value,l=isShallow(e)):isReactive(e)?(u=()=>e,n=!0):isArray$1(e)?(h=!0,l=e.some(A=>isReactive(A)||isShallow(A)),u=()=>e.map(A=>{if(isRef(A))return A.value;if(isReactive(A))return traverse(A);if(isFunction(A))return callWithErrorHandling(A,a,2)})):isFunction(e)?r?u=()=>callWithErrorHandling(e,a,2):u=()=>{if(!(a&&a.isUnmounted))return f&&f(),callWithAsyncErrorHandling(e,a,3,[d])}:u=NOOP,r&&n){const A=u;u=()=>traverse(A())}let f,d=A=>{f=E.onStop=()=>{callWithErrorHandling(A,a,4)}};if(isInSSRComponentSetup)return d=NOOP,r?t&&callWithAsyncErrorHandling(r,a,3,[u(),h?[]:void 0,d]):u(),NOOP;let _=h?[]:INITIAL_WATCHER_VALUE;const v=()=>{if(!!E.active)if(r){const A=E.run();(n||l||(h?A.some((T,C)=>hasChanged(T,_[C])):hasChanged(A,_)))&&(f&&f(),callWithAsyncErrorHandling(r,a,3,[A,_===INITIAL_WATCHER_VALUE?void 0:_,d]),_=A)}else E.run()};v.allowRecurse=!!r;let m;i==="sync"?m=v:i==="post"?m=()=>queuePostRenderEffect(v,a&&a.suspense):(v.pre=!0,a&&(v.id=a.uid),m=()=>queueJob(v));const E=new ReactiveEffect(u,m);return r?t?v():_=E.run():i==="post"?queuePostRenderEffect(E.run.bind(E),a&&a.suspense):E.run(),()=>{E.stop(),a&&a.scope&&remove(a.scope.effects,E)}}function instanceWatch(e,r,t){const n=this.proxy,i=isString(e)?e.includes(".")?createPathGetter(n,e):()=>n[e]:e.bind(n,n);let s;isFunction(r)?s=r:(s=r.handler,t=r);const o=currentInstance;setCurrentInstance(this);const a=doWatch(i,s.bind(n),t);return o?setCurrentInstance(o):unsetCurrentInstance(),a}function createPathGetter(e,r){const t=r.split(".");return()=>{let n=e;for(let i=0;i<t.length&&n;i++)n=n[t[i]];return n}}function traverse(e,r){if(!isObject(e)||e.__v_skip||(r=r||new Set,r.has(e)))return e;if(r.add(e),isRef(e))traverse(e.value,r);else if(isArray$1(e))for(let t=0;t<e.length;t++)traverse(e[t],r);else if(isSet(e)||isMap(e))e.forEach(t=>{traverse(t,r)});else if(isPlainObject(e))for(const t in e)traverse(e[t],r);return e}function useTransitionState(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{e.isMounted=!0}),onBeforeUnmount(()=>{e.isUnmounting=!0}),e}const TransitionHookValidator=[Function,Array],BaseTransitionImpl={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},setup(e,{slots:r}){const t=getCurrentInstance(),n=useTransitionState();let i;return()=>{const s=r.default&&getTransitionRawChildren(r.default(),!0);if(!s||!s.length)return;let o=s[0];if(s.length>1){for(const m of s)if(m.type!==Comment){o=m;break}}const a=toRaw(e),{mode:u}=a;if(n.isLeaving)return emptyPlaceholder(o);const l=getKeepAliveChild(o);if(!l)return emptyPlaceholder(o);const h=resolveTransitionHooks(l,a,n,t);setTransitionHooks(l,h);const f=t.subTree,d=f&&getKeepAliveChild(f);let _=!1;const{getTransitionKey:v}=l.type;if(v){const m=v();i===void 0?i=m:m!==i&&(i=m,_=!0)}if(d&&d.type!==Comment&&(!isSameVNodeType(l,d)||_)){const m=resolveTransitionHooks(d,a,n,t);if(setTransitionHooks(d,m),u==="out-in")return n.isLeaving=!0,m.afterLeave=()=>{n.isLeaving=!1,t.update()},emptyPlaceholder(o);u==="in-out"&&l.type!==Comment&&(m.delayLeave=(E,A,T)=>{const C=getLeavingNodesForType(n,d);C[String(d.key)]=d,E._leaveCb=()=>{A(),E._leaveCb=void 0,delete h.delayedLeave},h.delayedLeave=T})}return o}}},BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(e,r){const{leavingVNodes:t}=e;let n=t.get(r.type);return n||(n=Object.create(null),t.set(r.type,n)),n}function resolveTransitionHooks(e,r,t,n){const{appear:i,mode:s,persisted:o=!1,onBeforeEnter:a,onEnter:u,onAfterEnter:l,onEnterCancelled:h,onBeforeLeave:f,onLeave:d,onAfterLeave:_,onLeaveCancelled:v,onBeforeAppear:m,onAppear:E,onAfterAppear:A,onAppearCancelled:T}=r,C=String(e.key),R=getLeavingNodesForType(t,e),b=(M,D)=>{M&&callWithAsyncErrorHandling(M,n,9,D)},S=(M,D)=>{const G=D[1];b(M,D),isArray$1(M)?M.every(J=>J.length<=1)&&G():M.length<=1&&G()},B={mode:s,persisted:o,beforeEnter(M){let D=a;if(!t.isMounted)if(i)D=m||a;else return;M._leaveCb&&M._leaveCb(!0);const G=R[C];G&&isSameVNodeType(e,G)&&G.el._leaveCb&&G.el._leaveCb(),b(D,[M])},enter(M){let D=u,G=l,J=h;if(!t.isMounted)if(i)D=E||u,G=A||l,J=T||h;else return;let re=!1;const ne=M._enterCb=de=>{re||(re=!0,de?b(J,[M]):b(G,[M]),B.delayedLeave&&B.delayedLeave(),M._enterCb=void 0)};D?S(D,[M,ne]):ne()},leave(M,D){const G=String(e.key);if(M._enterCb&&M._enterCb(!0),t.isUnmounting)return D();b(f,[M]);let J=!1;const re=M._leaveCb=ne=>{J||(J=!0,D(),ne?b(v,[M]):b(_,[M]),M._leaveCb=void 0,R[G]===e&&delete R[G])};R[G]=e,d?S(d,[M,re]):re()},clone(M){return resolveTransitionHooks(M,r,t,n)}};return B}function emptyPlaceholder(e){if(isKeepAlive(e))return e=cloneVNode(e),e.children=null,e}function getKeepAliveChild(e){return isKeepAlive(e)?e.children?e.children[0]:void 0:e}function setTransitionHooks(e,r){e.shapeFlag&6&&e.component?setTransitionHooks(e.component.subTree,r):e.shapeFlag&128?(e.ssContent.transition=r.clone(e.ssContent),e.ssFallback.transition=r.clone(e.ssFallback)):e.transition=r}function getTransitionRawChildren(e,r=!1,t){let n=[],i=0;for(let s=0;s<e.length;s++){let o=e[s];const a=t==null?o.key:String(t)+String(o.key!=null?o.key:s);o.type===Fragment?(o.patchFlag&128&&i++,n=n.concat(getTransitionRawChildren(o.children,r,a))):(r||o.type!==Comment)&&n.push(a!=null?cloneVNode(o,{key:a}):o)}if(i>1)for(let s=0;s<n.length;s++)n[s].patchFlag=-2;return n}function defineComponent(e){return isFunction(e)?{setup:e,name:e.name}:e}const isAsyncWrapper=e=>!!e.type.__asyncLoader,isKeepAlive=e=>e.type.__isKeepAlive;function onActivated(e,r){registerKeepAliveHook(e,"a",r)}function onDeactivated(e,r){registerKeepAliveHook(e,"da",r)}function registerKeepAliveHook(e,r,t=currentInstance){const n=e.__wdc||(e.__wdc=()=>{let i=t;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(injectHook(r,n,t),t){let i=t.parent;for(;i&&i.parent;)isKeepAlive(i.parent.vnode)&&injectToKeepAliveRoot(n,r,t,i),i=i.parent}}function injectToKeepAliveRoot(e,r,t,n){const i=injectHook(r,e,n,!0);onUnmounted(()=>{remove(n[r],i)},t)}function injectHook(e,r,t=currentInstance,n=!1){if(t){const i=t[e]||(t[e]=[]),s=r.__weh||(r.__weh=(...o)=>{if(t.isUnmounted)return;pauseTracking(),setCurrentInstance(t);const a=callWithAsyncErrorHandling(r,t,e,o);return unsetCurrentInstance(),resetTracking(),a});return n?i.unshift(s):i.push(s),s}}const createHook=e=>(r,t=currentInstance)=>(!isInSSRComponentSetup||e==="sp")&&injectHook(e,r,t),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(e,r=currentInstance){injectHook("ec",e,r)}function invokeDirectiveHook(e,r,t,n){const i=e.dirs,s=r&&r.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let u=a.dir[n];u&&(pauseTracking(),callWithAsyncErrorHandling(u,t,8,[e.el,a,e,r]),resetTracking())}}const NULL_DYNAMIC_COMPONENT=Symbol();function renderList(e,r,t,n){let i;const s=t&&t[n];if(isArray$1(e)||isString(e)){i=new Array(e.length);for(let o=0,a=e.length;o<a;o++)i[o]=r(e[o],o,void 0,s&&s[o])}else if(typeof e=="number"){i=new Array(e);for(let o=0;o<e;o++)i[o]=r(o+1,o,void 0,s&&s[o])}else if(isObject(e))if(e[Symbol.iterator])i=Array.from(e,(o,a)=>r(o,a,void 0,s&&s[a]));else{const o=Object.keys(e);i=new Array(o.length);for(let a=0,u=o.length;a<u;a++){const l=o[a];i[a]=r(e[l],l,a,s&&s[a])}}else i=[];return t&&(t[n]=i),i}function renderSlot(e,r,t={},n,i){if(currentRenderingInstance.isCE||currentRenderingInstance.parent&&isAsyncWrapper(currentRenderingInstance.parent)&&currentRenderingInstance.parent.isCE)return createVNode("slot",r==="default"?null:{name:r},n&&n());let s=e[r];s&&s._c&&(s._d=!1),openBlock();const o=s&&ensureValidVNode(s(t)),a=createBlock(Fragment,{key:t.key||o&&o.key||`_${r}`},o||(n?n():[]),o&&e._===1?64:-2);return!i&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),s&&s._c&&(s._d=!0),a}function ensureValidVNode(e){return e.some(r=>isVNode(r)?!(r.type===Comment||r.type===Fragment&&!ensureValidVNode(r.children)):!0)?e:null}const getPublicInstance=e=>e?isStatefulComponent(e)?getExposeProxy(e)||e.proxy:getPublicInstance(e.parent):null,publicPropertiesMap=extend(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>getPublicInstance(e.parent),$root:e=>getPublicInstance(e.root),$emit:e=>e.emit,$options:e=>resolveMergedOptions(e),$forceUpdate:e=>e.f||(e.f=()=>queueJob(e.update)),$nextTick:e=>e.n||(e.n=nextTick.bind(e.proxy)),$watch:e=>instanceWatch.bind(e)}),PublicInstanceProxyHandlers={get({_:e},r){const{ctx:t,setupState:n,data:i,props:s,accessCache:o,type:a,appContext:u}=e;let l;if(r[0]!=="$"){const _=o[r];if(_!==void 0)switch(_){case 1:return n[r];case 2:return i[r];case 4:return t[r];case 3:return s[r]}else{if(n!==EMPTY_OBJ&&hasOwn(n,r))return o[r]=1,n[r];if(i!==EMPTY_OBJ&&hasOwn(i,r))return o[r]=2,i[r];if((l=e.propsOptions[0])&&hasOwn(l,r))return o[r]=3,s[r];if(t!==EMPTY_OBJ&&hasOwn(t,r))return o[r]=4,t[r];shouldCacheAccess&&(o[r]=0)}}const h=publicPropertiesMap[r];let f,d;if(h)return r==="$attrs"&&track(e,"get",r),h(e);if((f=a.__cssModules)&&(f=f[r]))return f;if(t!==EMPTY_OBJ&&hasOwn(t,r))return o[r]=4,t[r];if(d=u.config.globalProperties,hasOwn(d,r))return d[r]},set({_:e},r,t){const{data:n,setupState:i,ctx:s}=e;return i!==EMPTY_OBJ&&hasOwn(i,r)?(i[r]=t,!0):n!==EMPTY_OBJ&&hasOwn(n,r)?(n[r]=t,!0):hasOwn(e.props,r)||r[0]==="$"&&r.slice(1)in e?!1:(s[r]=t,!0)},has({_:{data:e,setupState:r,accessCache:t,ctx:n,appContext:i,propsOptions:s}},o){let a;return!!t[o]||e!==EMPTY_OBJ&&hasOwn(e,o)||r!==EMPTY_OBJ&&hasOwn(r,o)||(a=s[0])&&hasOwn(a,o)||hasOwn(n,o)||hasOwn(publicPropertiesMap,o)||hasOwn(i.config.globalProperties,o)},defineProperty(e,r,t){return t.get!=null?e._.accessCache[r]=0:hasOwn(t,"value")&&this.set(e,r,t.value,null),Reflect.defineProperty(e,r,t)}};let shouldCacheAccess=!0;function applyOptions(e){const r=resolveMergedOptions(e),t=e.proxy,n=e.ctx;shouldCacheAccess=!1,r.beforeCreate&&callHook(r.beforeCreate,e,"bc");const{data:i,computed:s,methods:o,watch:a,provide:u,inject:l,created:h,beforeMount:f,mounted:d,beforeUpdate:_,updated:v,activated:m,deactivated:E,beforeDestroy:A,beforeUnmount:T,destroyed:C,unmounted:R,render:b,renderTracked:S,renderTriggered:B,errorCaptured:M,serverPrefetch:D,expose:G,inheritAttrs:J,components:re,directives:ne,filters:de}=r;if(l&&resolveInjections(l,n,null,e.appContext.config.unwrapInjectedRef),o)for(const te in o){const ue=o[te];isFunction(ue)&&(n[te]=ue.bind(t))}if(i){const te=i.call(t,t);isObject(te)&&(e.data=reactive(te))}if(shouldCacheAccess=!0,s)for(const te in s){const ue=s[te],le=isFunction(ue)?ue.bind(t,t):isFunction(ue.get)?ue.get.bind(t,t):NOOP,O=!isFunction(ue)&&isFunction(ue.set)?ue.set.bind(t):NOOP,V=computed({get:le,set:O});Object.defineProperty(n,te,{enumerable:!0,configurable:!0,get:()=>V.value,set:Z=>V.value=Z})}if(a)for(const te in a)createWatcher(a[te],n,t,te);if(u){const te=isFunction(u)?u.call(t):u;Reflect.ownKeys(te).forEach(ue=>{provide(ue,te[ue])})}h&&callHook(h,e,"c");function z(te,ue){isArray$1(ue)?ue.forEach(le=>te(le.bind(t))):ue&&te(ue.bind(t))}if(z(onBeforeMount,f),z(onMounted,d),z(onBeforeUpdate,_),z(onUpdated,v),z(onActivated,m),z(onDeactivated,E),z(onErrorCaptured,M),z(onRenderTracked,S),z(onRenderTriggered,B),z(onBeforeUnmount,T),z(onUnmounted,R),z(onServerPrefetch,D),isArray$1(G))if(G.length){const te=e.exposed||(e.exposed={});G.forEach(ue=>{Object.defineProperty(te,ue,{get:()=>t[ue],set:le=>t[ue]=le})})}else e.exposed||(e.exposed={});b&&e.render===NOOP&&(e.render=b),J!=null&&(e.inheritAttrs=J),re&&(e.components=re),ne&&(e.directives=ne)}function resolveInjections(e,r,t=NOOP,n=!1){isArray$1(e)&&(e=normalizeInject(e));for(const i in e){const s=e[i];let o;isObject(s)?"default"in s?o=inject(s.from||i,s.default,!0):o=inject(s.from||i):o=inject(s),isRef(o)&&n?Object.defineProperty(r,i,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):r[i]=o}}function callHook(e,r,t){callWithAsyncErrorHandling(isArray$1(e)?e.map(n=>n.bind(r.proxy)):e.bind(r.proxy),r,t)}function createWatcher(e,r,t,n){const i=n.includes(".")?createPathGetter(t,n):()=>t[n];if(isString(e)){const s=r[e];isFunction(s)&&watch(i,s)}else if(isFunction(e))watch(i,e.bind(t));else if(isObject(e))if(isArray$1(e))e.forEach(s=>createWatcher(s,r,t,n));else{const s=isFunction(e.handler)?e.handler.bind(t):r[e.handler];isFunction(s)&&watch(i,s,e)}}function resolveMergedOptions(e){const r=e.type,{mixins:t,extends:n}=r,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=e.appContext,a=s.get(r);let u;return a?u=a:!i.length&&!t&&!n?u=r:(u={},i.length&&i.forEach(l=>mergeOptions(u,l,o,!0)),mergeOptions(u,r,o)),isObject(r)&&s.set(r,u),u}function mergeOptions(e,r,t,n=!1){const{mixins:i,extends:s}=r;s&&mergeOptions(e,s,t,!0),i&&i.forEach(o=>mergeOptions(e,o,t,!0));for(const o in r)if(!(n&&o==="expose")){const a=internalOptionMergeStrats[o]||t&&t[o];e[o]=a?a(e[o],r[o]):r[o]}return e}const internalOptionMergeStrats={data:mergeDataFn,props:mergeObjectOptions,emits:mergeObjectOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(e,r){return r?e?function(){return extend(isFunction(e)?e.call(this,this):e,isFunction(r)?r.call(this,this):r)}:r:e}function mergeInject(e,r){return mergeObjectOptions(normalizeInject(e),normalizeInject(r))}function normalizeInject(e){if(isArray$1(e)){const r={};for(let t=0;t<e.length;t++)r[e[t]]=e[t];return r}return e}function mergeAsArray(e,r){return e?[...new Set([].concat(e,r))]:r}function mergeObjectOptions(e,r){return e?extend(extend(Object.create(null),e),r):r}function mergeWatchOptions(e,r){if(!e)return r;if(!r)return e;const t=extend(Object.create(null),e);for(const n in r)t[n]=mergeAsArray(e[n],r[n]);return t}function initProps(e,r,t,n=!1){const i={},s={};def(s,InternalObjectKey,1),e.propsDefaults=Object.create(null),setFullProps(e,r,i,s);for(const o in e.propsOptions[0])o in i||(i[o]=void 0);t?e.props=n?i:shallowReactive(i):e.type.props?e.props=i:e.props=s,e.attrs=s}function updateProps(e,r,t,n){const{props:i,attrs:s,vnode:{patchFlag:o}}=e,a=toRaw(i),[u]=e.propsOptions;let l=!1;if((n||o>0)&&!(o&16)){if(o&8){const h=e.vnode.dynamicProps;for(let f=0;f<h.length;f++){let d=h[f];if(isEmitListener(e.emitsOptions,d))continue;const _=r[d];if(u)if(hasOwn(s,d))_!==s[d]&&(s[d]=_,l=!0);else{const v=camelize(d);i[v]=resolvePropValue(u,a,v,_,e,!1)}else _!==s[d]&&(s[d]=_,l=!0)}}}else{setFullProps(e,r,i,s)&&(l=!0);let h;for(const f in a)(!r||!hasOwn(r,f)&&((h=hyphenate(f))===f||!hasOwn(r,h)))&&(u?t&&(t[f]!==void 0||t[h]!==void 0)&&(i[f]=resolvePropValue(u,a,f,void 0,e,!0)):delete i[f]);if(s!==a)for(const f in s)(!r||!hasOwn(r,f)&&!0)&&(delete s[f],l=!0)}l&&trigger(e,"set","$attrs")}function setFullProps(e,r,t,n){const[i,s]=e.propsOptions;let o=!1,a;if(r)for(let u in r){if(isReservedProp(u))continue;const l=r[u];let h;i&&hasOwn(i,h=camelize(u))?!s||!s.includes(h)?t[h]=l:(a||(a={}))[h]=l:isEmitListener(e.emitsOptions,u)||(!(u in n)||l!==n[u])&&(n[u]=l,o=!0)}if(s){const u=toRaw(t),l=a||EMPTY_OBJ;for(let h=0;h<s.length;h++){const f=s[h];t[f]=resolvePropValue(i,u,f,l[f],e,!hasOwn(l,f))}}return o}function resolvePropValue(e,r,t,n,i,s){const o=e[t];if(o!=null){const a=hasOwn(o,"default");if(a&&n===void 0){const u=o.default;if(o.type!==Function&&isFunction(u)){const{propsDefaults:l}=i;t in l?n=l[t]:(setCurrentInstance(i),n=l[t]=u.call(null,r),unsetCurrentInstance())}else n=u}o[0]&&(s&&!a?n=!1:o[1]&&(n===""||n===hyphenate(t))&&(n=!0))}return n}function normalizePropsOptions(e,r,t=!1){const n=r.propsCache,i=n.get(e);if(i)return i;const s=e.props,o={},a=[];let u=!1;if(!isFunction(e)){const h=f=>{u=!0;const[d,_]=normalizePropsOptions(f,r,!0);extend(o,d),_&&a.push(..._)};!t&&r.mixins.length&&r.mixins.forEach(h),e.extends&&h(e.extends),e.mixins&&e.mixins.forEach(h)}if(!s&&!u)return isObject(e)&&n.set(e,EMPTY_ARR),EMPTY_ARR;if(isArray$1(s))for(let h=0;h<s.length;h++){const f=camelize(s[h]);validatePropName(f)&&(o[f]=EMPTY_OBJ)}else if(s)for(const h in s){const f=camelize(h);if(validatePropName(f)){const d=s[h],_=o[f]=isArray$1(d)||isFunction(d)?{type:d}:d;if(_){const v=getTypeIndex(Boolean,_.type),m=getTypeIndex(String,_.type);_[0]=v>-1,_[1]=m<0||v<m,(v>-1||hasOwn(_,"default"))&&a.push(f)}}}const l=[o,a];return isObject(e)&&n.set(e,l),l}function validatePropName(e){return e[0]!=="$"}function getType(e){const r=e&&e.toString().match(/^\s*function (\w+)/);return r?r[1]:e===null?"null":""}function isSameType(e,r){return getType(e)===getType(r)}function getTypeIndex(e,r){return isArray$1(r)?r.findIndex(t=>isSameType(t,e)):isFunction(r)&&isSameType(r,e)?0:-1}const isInternalKey=e=>e[0]==="_"||e==="$stable",normalizeSlotValue=e=>isArray$1(e)?e.map(normalizeVNode):[normalizeVNode(e)],normalizeSlot=(e,r,t)=>{if(r._n)return r;const n=withCtx((...i)=>normalizeSlotValue(r(...i)),t);return n._c=!1,n},normalizeObjectSlots=(e,r,t)=>{const n=e._ctx;for(const i in e){if(isInternalKey(i))continue;const s=e[i];if(isFunction(s))r[i]=normalizeSlot(i,s,n);else if(s!=null){const o=normalizeSlotValue(s);r[i]=()=>o}}},normalizeVNodeSlots=(e,r)=>{const t=normalizeSlotValue(r);e.slots.default=()=>t},initSlots=(e,r)=>{if(e.vnode.shapeFlag&32){const t=r._;t?(e.slots=toRaw(r),def(r,"_",t)):normalizeObjectSlots(r,e.slots={})}else e.slots={},r&&normalizeVNodeSlots(e,r);def(e.slots,InternalObjectKey,1)},updateSlots=(e,r,t)=>{const{vnode:n,slots:i}=e;let s=!0,o=EMPTY_OBJ;if(n.shapeFlag&32){const a=r._;a?t&&a===1?s=!1:(extend(i,r),!t&&a===1&&delete i._):(s=!r.$stable,normalizeObjectSlots(r,i)),o=r}else r&&(normalizeVNodeSlots(e,r),o={default:1});if(s)for(const a in i)!isInternalKey(a)&&!(a in o)&&delete i[a]};function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(e,r){return function(n,i=null){isFunction(n)||(n=Object.assign({},n)),i!=null&&!isObject(i)&&(i=null);const s=createAppContext(),o=new Set;let a=!1;const u=s.app={_uid:uid$1++,_component:n,_props:i,_container:null,_context:s,_instance:null,version:version$1,get config(){return s.config},set config(l){},use(l,...h){return o.has(l)||(l&&isFunction(l.install)?(o.add(l),l.install(u,...h)):isFunction(l)&&(o.add(l),l(u,...h))),u},mixin(l){return s.mixins.includes(l)||s.mixins.push(l),u},component(l,h){return h?(s.components[l]=h,u):s.components[l]},directive(l,h){return h?(s.directives[l]=h,u):s.directives[l]},mount(l,h,f){if(!a){const d=createVNode(n,i);return d.appContext=s,h&&r?r(d,l):e(d,l,f),a=!0,u._container=l,l.__vue_app__=u,getExposeProxy(d.component)||d.component.proxy}},unmount(){a&&(e(null,u._container),delete u._container.__vue_app__)},provide(l,h){return s.provides[l]=h,u}};return u}}function setRef(e,r,t,n,i=!1){if(isArray$1(e)){e.forEach((d,_)=>setRef(d,r&&(isArray$1(r)?r[_]:r),t,n,i));return}if(isAsyncWrapper(n)&&!i)return;const s=n.shapeFlag&4?getExposeProxy(n.component)||n.component.proxy:n.el,o=i?null:s,{i:a,r:u}=e,l=r&&r.r,h=a.refs===EMPTY_OBJ?a.refs={}:a.refs,f=a.setupState;if(l!=null&&l!==u&&(isString(l)?(h[l]=null,hasOwn(f,l)&&(f[l]=null)):isRef(l)&&(l.value=null)),isFunction(u))callWithErrorHandling(u,a,12,[o,h]);else{const d=isString(u),_=isRef(u);if(d||_){const v=()=>{if(e.f){const m=d?h[u]:u.value;i?isArray$1(m)&&remove(m,s):isArray$1(m)?m.includes(s)||m.push(s):d?(h[u]=[s],hasOwn(f,u)&&(f[u]=h[u])):(u.value=[s],e.k&&(h[e.k]=u.value))}else d?(h[u]=o,hasOwn(f,u)&&(f[u]=o)):_&&(u.value=o,e.k&&(h[e.k]=o))};o?(v.id=-1,queuePostRenderEffect(v,t)):v()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(e){return baseCreateRenderer(e)}function baseCreateRenderer(e,r){const t=getGlobalThis();t.__VUE__=!0;const{insert:n,remove:i,patchProp:s,createElement:o,createText:a,createComment:u,setText:l,setElementText:h,parentNode:f,nextSibling:d,setScopeId:_=NOOP,cloneNode:v,insertStaticContent:m}=e,E=(P,N,$,U=null,k=null,W=null,Q=!1,Y=null,K=!!N.dynamicChildren)=>{if(P===N)return;P&&!isSameVNodeType(P,N)&&(U=Ae(P),ee(P,k,W,!0),P=null),N.patchFlag===-2&&(K=!1,N.dynamicChildren=null);const{type:j,ref:se,shapeFlag:ie}=N;switch(j){case Text$1:A(P,N,$,U);break;case Comment:T(P,N,$,U);break;case Static:P==null&&C(N,$,U,Q);break;case Fragment:ne(P,N,$,U,k,W,Q,Y,K);break;default:ie&1?S(P,N,$,U,k,W,Q,Y,K):ie&6?de(P,N,$,U,k,W,Q,Y,K):(ie&64||ie&128)&&j.process(P,N,$,U,k,W,Q,Y,K,me)}se!=null&&k&&setRef(se,P&&P.ref,W,N||P,!N)},A=(P,N,$,U)=>{if(P==null)n(N.el=a(N.children),$,U);else{const k=N.el=P.el;N.children!==P.children&&l(k,N.children)}},T=(P,N,$,U)=>{P==null?n(N.el=u(N.children||""),$,U):N.el=P.el},C=(P,N,$,U)=>{[P.el,P.anchor]=m(P.children,N,$,U,P.el,P.anchor)},R=({el:P,anchor:N},$,U)=>{let k;for(;P&&P!==N;)k=d(P),n(P,$,U),P=k;n(N,$,U)},b=({el:P,anchor:N})=>{let $;for(;P&&P!==N;)$=d(P),i(P),P=$;i(N)},S=(P,N,$,U,k,W,Q,Y,K)=>{Q=Q||N.type==="svg",P==null?B(N,$,U,k,W,Q,Y,K):G(P,N,k,W,Q,Y,K)},B=(P,N,$,U,k,W,Q,Y)=>{let K,j;const{type:se,props:ie,shapeFlag:ae,transition:_e,patchFlag:Te,dirs:Ce}=P;if(P.el&&v!==void 0&&Te===-1)K=P.el=v(P.el);else{if(K=P.el=o(P.type,W,ie&&ie.is,ie),ae&8?h(K,P.children):ae&16&&D(P.children,K,null,U,k,W&&se!=="foreignObject",Q,Y),Ce&&invokeDirectiveHook(P,null,U,"created"),ie){for(const be in ie)be!=="value"&&!isReservedProp(be)&&s(K,be,null,ie[be],W,P.children,U,k,pe);"value"in ie&&s(K,"value",null,ie.value),(j=ie.onVnodeBeforeMount)&&invokeVNodeHook(j,U,P)}M(K,P,P.scopeId,Q,U)}Ce&&invokeDirectiveHook(P,null,U,"beforeMount");const xe=(!k||k&&!k.pendingBranch)&&_e&&!_e.persisted;xe&&_e.beforeEnter(K),n(K,N,$),((j=ie&&ie.onVnodeMounted)||xe||Ce)&&queuePostRenderEffect(()=>{j&&invokeVNodeHook(j,U,P),xe&&_e.enter(K),Ce&&invokeDirectiveHook(P,null,U,"mounted")},k)},M=(P,N,$,U,k)=>{if($&&_(P,$),U)for(let W=0;W<U.length;W++)_(P,U[W]);if(k){let W=k.subTree;if(N===W){const Q=k.vnode;M(P,Q,Q.scopeId,Q.slotScopeIds,k.parent)}}},D=(P,N,$,U,k,W,Q,Y,K=0)=>{for(let j=K;j<P.length;j++){const se=P[j]=Y?cloneIfMounted(P[j]):normalizeVNode(P[j]);E(null,se,N,$,U,k,W,Q,Y)}},G=(P,N,$,U,k,W,Q)=>{const Y=N.el=P.el;let{patchFlag:K,dynamicChildren:j,dirs:se}=N;K|=P.patchFlag&16;const ie=P.props||EMPTY_OBJ,ae=N.props||EMPTY_OBJ;let _e;$&&toggleRecurse($,!1),(_e=ae.onVnodeBeforeUpdate)&&invokeVNodeHook(_e,$,N,P),se&&invokeDirectiveHook(N,P,$,"beforeUpdate"),$&&toggleRecurse($,!0);const Te=k&&N.type!=="foreignObject";if(j?J(P.dynamicChildren,j,Y,$,U,Te,W):Q||le(P,N,Y,null,$,U,Te,W,!1),K>0){if(K&16)re(Y,N,ie,ae,$,U,k);else if(K&2&&ie.class!==ae.class&&s(Y,"class",null,ae.class,k),K&4&&s(Y,"style",ie.style,ae.style,k),K&8){const Ce=N.dynamicProps;for(let xe=0;xe<Ce.length;xe++){const be=Ce[xe],Oe=ie[be],Le=ae[be];(Le!==Oe||be==="value")&&s(Y,be,Oe,Le,k,P.children,$,U,pe)}}K&1&&P.children!==N.children&&h(Y,N.children)}else!Q&&j==null&&re(Y,N,ie,ae,$,U,k);((_e=ae.onVnodeUpdated)||se)&&queuePostRenderEffect(()=>{_e&&invokeVNodeHook(_e,$,N,P),se&&invokeDirectiveHook(N,P,$,"updated")},U)},J=(P,N,$,U,k,W,Q)=>{for(let Y=0;Y<N.length;Y++){const K=P[Y],j=N[Y],se=K.el&&(K.type===Fragment||!isSameVNodeType(K,j)||K.shapeFlag&70)?f(K.el):$;E(K,j,se,null,U,k,W,Q,!0)}},re=(P,N,$,U,k,W,Q)=>{if($!==U){for(const Y in U){if(isReservedProp(Y))continue;const K=U[Y],j=$[Y];K!==j&&Y!=="value"&&s(P,Y,j,K,Q,N.children,k,W,pe)}if($!==EMPTY_OBJ)for(const Y in $)!isReservedProp(Y)&&!(Y in U)&&s(P,Y,$[Y],null,Q,N.children,k,W,pe);"value"in U&&s(P,"value",$.value,U.value)}},ne=(P,N,$,U,k,W,Q,Y,K)=>{const j=N.el=P?P.el:a(""),se=N.anchor=P?P.anchor:a("");let{patchFlag:ie,dynamicChildren:ae,slotScopeIds:_e}=N;_e&&(Y=Y?Y.concat(_e):_e),P==null?(n(j,$,U),n(se,$,U),D(N.children,$,se,k,W,Q,Y,K)):ie>0&&ie&64&&ae&&P.dynamicChildren?(J(P.dynamicChildren,ae,$,k,W,Q,Y),(N.key!=null||k&&N===k.subTree)&&traverseStaticChildren(P,N,!0)):le(P,N,$,se,k,W,Q,Y,K)},de=(P,N,$,U,k,W,Q,Y,K)=>{N.slotScopeIds=Y,P==null?N.shapeFlag&512?k.ctx.activate(N,$,U,Q,K):q(N,$,U,k,W,Q,K):z(P,N,K)},q=(P,N,$,U,k,W,Q)=>{const Y=P.component=createComponentInstance(P,U,k);if(isKeepAlive(P)&&(Y.ctx.renderer=me),setupComponent(Y),Y.asyncDep){if(k&&k.registerDep(Y,te),!P.el){const K=Y.subTree=createVNode(Comment);T(null,K,N,$)}return}te(Y,P,N,$,k,W,Q)},z=(P,N,$)=>{const U=N.component=P.component;if(shouldUpdateComponent(P,N,$))if(U.asyncDep&&!U.asyncResolved){ue(U,N,$);return}else U.next=N,invalidateJob(U.update),U.update();else N.el=P.el,U.vnode=N},te=(P,N,$,U,k,W,Q)=>{const Y=()=>{if(P.isMounted){let{next:se,bu:ie,u:ae,parent:_e,vnode:Te}=P,Ce=se,xe;toggleRecurse(P,!1),se?(se.el=Te.el,ue(P,se,Q)):se=Te,ie&&invokeArrayFns(ie),(xe=se.props&&se.props.onVnodeBeforeUpdate)&&invokeVNodeHook(xe,_e,se,Te),toggleRecurse(P,!0);const be=renderComponentRoot(P),Oe=P.subTree;P.subTree=be,E(Oe,be,f(Oe.el),Ae(Oe),P,k,W),se.el=be.el,Ce===null&&updateHOCHostEl(P,be.el),ae&&queuePostRenderEffect(ae,k),(xe=se.props&&se.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(xe,_e,se,Te),k)}else{let se;const{el:ie,props:ae}=N,{bm:_e,m:Te,parent:Ce}=P,xe=isAsyncWrapper(N);if(toggleRecurse(P,!1),_e&&invokeArrayFns(_e),!xe&&(se=ae&&ae.onVnodeBeforeMount)&&invokeVNodeHook(se,Ce,N),toggleRecurse(P,!0),ie&&ve){const be=()=>{P.subTree=renderComponentRoot(P),ve(ie,P.subTree,P,k,null)};xe?N.type.__asyncLoader().then(()=>!P.isUnmounted&&be()):be()}else{const be=P.subTree=renderComponentRoot(P);E(null,be,$,U,P,k,W),N.el=be.el}if(Te&&queuePostRenderEffect(Te,k),!xe&&(se=ae&&ae.onVnodeMounted)){const be=N;queuePostRenderEffect(()=>invokeVNodeHook(se,Ce,be),k)}(N.shapeFlag&256||Ce&&isAsyncWrapper(Ce.vnode)&&Ce.vnode.shapeFlag&256)&&P.a&&queuePostRenderEffect(P.a,k),P.isMounted=!0,N=$=U=null}},K=P.effect=new ReactiveEffect(Y,()=>queueJob(j),P.scope),j=P.update=()=>K.run();j.id=P.uid,toggleRecurse(P,!0),j()},ue=(P,N,$)=>{N.component=P;const U=P.vnode.props;P.vnode=N,P.next=null,updateProps(P,N.props,U,$),updateSlots(P,N.children,$),pauseTracking(),flushPreFlushCbs(),resetTracking()},le=(P,N,$,U,k,W,Q,Y,K=!1)=>{const j=P&&P.children,se=P?P.shapeFlag:0,ie=N.children,{patchFlag:ae,shapeFlag:_e}=N;if(ae>0){if(ae&128){V(j,ie,$,U,k,W,Q,Y,K);return}else if(ae&256){O(j,ie,$,U,k,W,Q,Y,K);return}}_e&8?(se&16&&pe(j,k,W),ie!==j&&h($,ie)):se&16?_e&16?V(j,ie,$,U,k,W,Q,Y,K):pe(j,k,W,!0):(se&8&&h($,""),_e&16&&D(ie,$,U,k,W,Q,Y,K))},O=(P,N,$,U,k,W,Q,Y,K)=>{P=P||EMPTY_ARR,N=N||EMPTY_ARR;const j=P.length,se=N.length,ie=Math.min(j,se);let ae;for(ae=0;ae<ie;ae++){const _e=N[ae]=K?cloneIfMounted(N[ae]):normalizeVNode(N[ae]);E(P[ae],_e,$,null,k,W,Q,Y,K)}j>se?pe(P,k,W,!0,!1,ie):D(N,$,U,k,W,Q,Y,K,ie)},V=(P,N,$,U,k,W,Q,Y,K)=>{let j=0;const se=N.length;let ie=P.length-1,ae=se-1;for(;j<=ie&&j<=ae;){const _e=P[j],Te=N[j]=K?cloneIfMounted(N[j]):normalizeVNode(N[j]);if(isSameVNodeType(_e,Te))E(_e,Te,$,null,k,W,Q,Y,K);else break;j++}for(;j<=ie&&j<=ae;){const _e=P[ie],Te=N[ae]=K?cloneIfMounted(N[ae]):normalizeVNode(N[ae]);if(isSameVNodeType(_e,Te))E(_e,Te,$,null,k,W,Q,Y,K);else break;ie--,ae--}if(j>ie){if(j<=ae){const _e=ae+1,Te=_e<se?N[_e].el:U;for(;j<=ae;)E(null,N[j]=K?cloneIfMounted(N[j]):normalizeVNode(N[j]),$,Te,k,W,Q,Y,K),j++}}else if(j>ae)for(;j<=ie;)ee(P[j],k,W,!0),j++;else{const _e=j,Te=j,Ce=new Map;for(j=Te;j<=ae;j++){const Pe=N[j]=K?cloneIfMounted(N[j]):normalizeVNode(N[j]);Pe.key!=null&&Ce.set(Pe.key,j)}let xe,be=0;const Oe=ae-Te+1;let Le=!1,ze=0;const Ge=new Array(Oe);for(j=0;j<Oe;j++)Ge[j]=0;for(j=_e;j<=ie;j++){const Pe=P[j];if(be>=Oe){ee(Pe,k,W,!0);continue}let we;if(Pe.key!=null)we=Ce.get(Pe.key);else for(xe=Te;xe<=ae;xe++)if(Ge[xe-Te]===0&&isSameVNodeType(Pe,N[xe])){we=xe;break}we===void 0?ee(Pe,k,W,!0):(Ge[we-Te]=j+1,we>=ze?ze=we:Le=!0,E(Pe,N[we],$,null,k,W,Q,Y,K),be++)}const ke=Le?getSequence(Ge):EMPTY_ARR;for(xe=ke.length-1,j=Oe-1;j>=0;j--){const Pe=Te+j,we=N[Pe],je=Pe+1<se?N[Pe+1].el:U;Ge[j]===0?E(null,we,$,je,k,W,Q,Y,K):Le&&(xe<0||j!==ke[xe]?Z(we,$,je,2):xe--)}}},Z=(P,N,$,U,k=null)=>{const{el:W,type:Q,transition:Y,children:K,shapeFlag:j}=P;if(j&6){Z(P.component.subTree,N,$,U);return}if(j&128){P.suspense.move(N,$,U);return}if(j&64){Q.move(P,N,$,me);return}if(Q===Fragment){n(W,N,$);for(let ie=0;ie<K.length;ie++)Z(K[ie],N,$,U);n(P.anchor,N,$);return}if(Q===Static){R(P,N,$);return}if(U!==2&&j&1&&Y)if(U===0)Y.beforeEnter(W),n(W,N,$),queuePostRenderEffect(()=>Y.enter(W),k);else{const{leave:ie,delayLeave:ae,afterLeave:_e}=Y,Te=()=>n(W,N,$),Ce=()=>{ie(W,()=>{Te(),_e&&_e()})};ae?ae(W,Te,Ce):Ce()}else n(W,N,$)},ee=(P,N,$,U=!1,k=!1)=>{const{type:W,props:Q,ref:Y,children:K,dynamicChildren:j,shapeFlag:se,patchFlag:ie,dirs:ae}=P;if(Y!=null&&setRef(Y,null,$,P,!0),se&256){N.ctx.deactivate(P);return}const _e=se&1&&ae,Te=!isAsyncWrapper(P);let Ce;if(Te&&(Ce=Q&&Q.onVnodeBeforeUnmount)&&invokeVNodeHook(Ce,N,P),se&6)ce(P.component,$,U);else{if(se&128){P.suspense.unmount($,U);return}_e&&invokeDirectiveHook(P,null,N,"beforeUnmount"),se&64?P.type.remove(P,N,$,k,me,U):j&&(W!==Fragment||ie>0&&ie&64)?pe(j,N,$,!1,!0):(W===Fragment&&ie&384||!k&&se&16)&&pe(K,N,$),U&&oe(P)}(Te&&(Ce=Q&&Q.onVnodeUnmounted)||_e)&&queuePostRenderEffect(()=>{Ce&&invokeVNodeHook(Ce,N,P),_e&&invokeDirectiveHook(P,null,N,"unmounted")},$)},oe=P=>{const{type:N,el:$,anchor:U,transition:k}=P;if(N===Fragment){ge($,U);return}if(N===Static){b(P);return}const W=()=>{i($),k&&!k.persisted&&k.afterLeave&&k.afterLeave()};if(P.shapeFlag&1&&k&&!k.persisted){const{leave:Q,delayLeave:Y}=k,K=()=>Q($,W);Y?Y(P.el,W,K):K()}else W()},ge=(P,N)=>{let $;for(;P!==N;)$=d(P),i(P),P=$;i(N)},ce=(P,N,$)=>{const{bum:U,scope:k,update:W,subTree:Q,um:Y}=P;U&&invokeArrayFns(U),k.stop(),W&&(W.active=!1,ee(Q,P,N,$)),Y&&queuePostRenderEffect(Y,N),queuePostRenderEffect(()=>{P.isUnmounted=!0},N),N&&N.pendingBranch&&!N.isUnmounted&&P.asyncDep&&!P.asyncResolved&&P.suspenseId===N.pendingId&&(N.deps--,N.deps===0&&N.resolve())},pe=(P,N,$,U=!1,k=!1,W=0)=>{for(let Q=W;Q<P.length;Q++)ee(P[Q],N,$,U,k)},Ae=P=>P.shapeFlag&6?Ae(P.component.subTree):P.shapeFlag&128?P.suspense.next():d(P.anchor||P.el),Ee=(P,N,$)=>{P==null?N._vnode&&ee(N._vnode,null,null,!0):E(N._vnode||null,P,N,null,null,null,$),flushPreFlushCbs(),flushPostFlushCbs(),N._vnode=P},me={p:E,um:ee,m:Z,r:oe,mt:q,mc:D,pc:le,pbc:J,n:Ae,o:e};let he,ve;return r&&([he,ve]=r(me)),{render:Ee,hydrate:he,createApp:createAppAPI(Ee,he)}}function toggleRecurse({effect:e,update:r},t){e.allowRecurse=r.allowRecurse=t}function traverseStaticChildren(e,r,t=!1){const n=e.children,i=r.children;if(isArray$1(n)&&isArray$1(i))for(let s=0;s<n.length;s++){const o=n[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=cloneIfMounted(i[s]),a.el=o.el),t||traverseStaticChildren(o,a))}}function getSequence(e){const r=e.slice(),t=[0];let n,i,s,o,a;const u=e.length;for(n=0;n<u;n++){const l=e[n];if(l!==0){if(i=t[t.length-1],e[i]<l){r[n]=i,t.push(n);continue}for(s=0,o=t.length-1;s<o;)a=s+o>>1,e[t[a]]<l?s=a+1:o=a;l<e[t[s]]&&(s>0&&(r[n]=t[s-1]),t[s]=n)}}for(s=t.length,o=t[s-1];s-- >0;)t[s]=o,o=r[o];return t}const isTeleport=e=>e.__isTeleport,Fragment=Symbol(void 0),Text$1=Symbol(void 0),Comment=Symbol(void 0),Static=Symbol(void 0),blockStack=[];let currentBlock=null;function openBlock(e=!1){blockStack.push(currentBlock=e?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(e){isBlockTreeEnabled+=e}function setupBlock(e){return e.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(e),e}function createElementBlock(e,r,t,n,i,s){return setupBlock(createBaseVNode(e,r,t,n,i,s,!0))}function createBlock(e,r,t,n,i){return setupBlock(createVNode(e,r,t,n,i,!0))}function isVNode(e){return e?e.__v_isVNode===!0:!1}function isSameVNodeType(e,r){return e.type===r.type&&e.key===r.key}const InternalObjectKey="__vInternal",normalizeKey=({key:e})=>e!=null?e:null,normalizeRef=({ref:e,ref_key:r,ref_for:t})=>e!=null?isString(e)||isRef(e)||isFunction(e)?{i:currentRenderingInstance,r:e,k:r,f:!!t}:e:null;function createBaseVNode(e,r=null,t=null,n=0,i=null,s=e===Fragment?0:1,o=!1,a=!1){const u={__v_isVNode:!0,__v_skip:!0,type:e,props:r,key:r&&normalizeKey(r),ref:r&&normalizeRef(r),scopeId:currentScopeId,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null};return a?(normalizeChildren(u,t),s&128&&e.normalize(u)):t&&(u.shapeFlag|=isString(t)?8:16),isBlockTreeEnabled>0&&!o&&currentBlock&&(u.patchFlag>0||s&6)&&u.patchFlag!==32&&currentBlock.push(u),u}const createVNode=_createVNode;function _createVNode(e,r=null,t=null,n=0,i=null,s=!1){if((!e||e===NULL_DYNAMIC_COMPONENT)&&(e=Comment),isVNode(e)){const a=cloneVNode(e,r,!0);return t&&normalizeChildren(a,t),isBlockTreeEnabled>0&&!s&&currentBlock&&(a.shapeFlag&6?currentBlock[currentBlock.indexOf(e)]=a:currentBlock.push(a)),a.patchFlag|=-2,a}if(isClassComponent(e)&&(e=e.__vccOpts),r){r=guardReactiveProps(r);let{class:a,style:u}=r;a&&!isString(a)&&(r.class=normalizeClass(a)),isObject(u)&&(isProxy(u)&&!isArray$1(u)&&(u=extend({},u)),r.style=normalizeStyle(u))}const o=isString(e)?1:isSuspense(e)?128:isTeleport(e)?64:isObject(e)?4:isFunction(e)?2:0;return createBaseVNode(e,r,t,n,i,o,s,!0)}function guardReactiveProps(e){return e?isProxy(e)||InternalObjectKey in e?extend({},e):e:null}function cloneVNode(e,r,t=!1){const{props:n,ref:i,patchFlag:s,children:o}=e,a=r?mergeProps(n||{},r):n;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&normalizeKey(a),ref:r&&r.ref?t&&i?isArray$1(i)?i.concat(normalizeRef(r)):[i,normalizeRef(r)]:normalizeRef(r):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:r&&e.type!==Fragment?s===-1?16:s|16:s,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&cloneVNode(e.ssContent),ssFallback:e.ssFallback&&cloneVNode(e.ssFallback),el:e.el,anchor:e.anchor}}function createTextVNode(e=" ",r=0){return createVNode(Text$1,null,e,r)}function createCommentVNode(e="",r=!1){return r?(openBlock(),createBlock(Comment,null,e)):createVNode(Comment,null,e)}function normalizeVNode(e){return e==null||typeof e=="boolean"?createVNode(Comment):isArray$1(e)?createVNode(Fragment,null,e.slice()):typeof e=="object"?cloneIfMounted(e):createVNode(Text$1,null,String(e))}function cloneIfMounted(e){return e.el===null||e.memo?e:cloneVNode(e)}function normalizeChildren(e,r){let t=0;const{shapeFlag:n}=e;if(r==null)r=null;else if(isArray$1(r))t=16;else if(typeof r=="object")if(n&65){const i=r.default;i&&(i._c&&(i._d=!1),normalizeChildren(e,i()),i._c&&(i._d=!0));return}else{t=32;const i=r._;!i&&!(InternalObjectKey in r)?r._ctx=currentRenderingInstance:i===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?r._=1:(r._=2,e.patchFlag|=1024))}else isFunction(r)?(r={default:r,_ctx:currentRenderingInstance},t=32):(r=String(r),n&64?(t=16,r=[createTextVNode(r)]):t=8);e.children=r,e.shapeFlag|=t}function mergeProps(...e){const r={};for(let t=0;t<e.length;t++){const n=e[t];for(const i in n)if(i==="class")r.class!==n.class&&(r.class=normalizeClass([r.class,n.class]));else if(i==="style")r.style=normalizeStyle([r.style,n.style]);else if(isOn(i)){const s=r[i],o=n[i];o&&s!==o&&!(isArray$1(s)&&s.includes(o))&&(r[i]=s?[].concat(s,o):o)}else i!==""&&(r[i]=n[i])}return r}function invokeVNodeHook(e,r,t,n=null){callWithAsyncErrorHandling(e,r,7,[t,n])}const emptyAppContext=createAppContext();let uid$1$1=0;function createComponentInstance(e,r,t){const n=e.type,i=(r?r.appContext:e.appContext)||emptyAppContext,s={uid:uid$1$1++,vnode:e,type:n,parent:r,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:r?r.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(n,i),emitsOptions:normalizeEmitsOptions(n,i),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:n.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=r?r.root:s,s.emit=emit$1.bind(null,s),e.ce&&e.ce(s),s}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance,setCurrentInstance=e=>{currentInstance=e,e.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),currentInstance=null};function isStatefulComponent(e){return e.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(e,r=!1){isInSSRComponentSetup=r;const{props:t,children:n}=e.vnode,i=isStatefulComponent(e);initProps(e,t,i,r),initSlots(e,n);const s=i?setupStatefulComponent(e,r):void 0;return isInSSRComponentSetup=!1,s}function setupStatefulComponent(e,r){const t=e.type;e.accessCache=Object.create(null),e.proxy=markRaw(new Proxy(e.ctx,PublicInstanceProxyHandlers));const{setup:n}=t;if(n){const i=e.setupContext=n.length>1?createSetupContext(e):null;setCurrentInstance(e),pauseTracking();const s=callWithErrorHandling(n,e,0,[e.props,i]);if(resetTracking(),unsetCurrentInstance(),isPromise(s)){if(s.then(unsetCurrentInstance,unsetCurrentInstance),r)return s.then(o=>{handleSetupResult(e,o,r)}).catch(o=>{handleError(o,e,0)});e.asyncDep=s}else handleSetupResult(e,s,r)}else finishComponentSetup(e,r)}function handleSetupResult(e,r,t){isFunction(r)?e.type.__ssrInlineRender?e.ssrRender=r:e.render=r:isObject(r)&&(e.setupState=proxyRefs(r)),finishComponentSetup(e,t)}let compile;function finishComponentSetup(e,r,t){const n=e.type;if(!e.render){if(!r&&compile&&!n.render){const i=n.template||resolveMergedOptions(e).template;if(i){const{isCustomElement:s,compilerOptions:o}=e.appContext.config,{delimiters:a,compilerOptions:u}=n,l=extend(extend({isCustomElement:s,delimiters:a},o),u);n.render=compile(i,l)}}e.render=n.render||NOOP}setCurrentInstance(e),pauseTracking(),applyOptions(e),resetTracking(),unsetCurrentInstance()}function createAttrsProxy(e){return new Proxy(e.attrs,{get(r,t){return track(e,"get","$attrs"),r[t]}})}function createSetupContext(e){const r=n=>{e.exposed=n||{}};let t;return{get attrs(){return t||(t=createAttrsProxy(e))},slots:e.slots,emit:e.emit,expose:r}}function getExposeProxy(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(proxyRefs(markRaw(e.exposed)),{get(r,t){if(t in r)return r[t];if(t in publicPropertiesMap)return publicPropertiesMap[t](e)}}))}function isClassComponent(e){return isFunction(e)&&"__vccOpts"in e}const computed=(e,r)=>computed$1(e,r,isInSSRComponentSetup),version$1="3.2.39",svgNS="http://www.w3.org/2000/svg",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(e,r,t)=>{r.insertBefore(e,t||null)},remove:e=>{const r=e.parentNode;r&&r.removeChild(e)},createElement:(e,r,t,n)=>{const i=r?doc.createElementNS(svgNS,e):doc.createElement(e,t?{is:t}:void 0);return e==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:e=>doc.createTextNode(e),createComment:e=>doc.createComment(e),setText:(e,r)=>{e.nodeValue=r},setElementText:(e,r)=>{e.textContent=r},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>doc.querySelector(e),setScopeId(e,r){e.setAttribute(r,"")},cloneNode(e){const r=e.cloneNode(!0);return"_value"in e&&(r._value=e._value),r},insertStaticContent(e,r,t,n,i,s){const o=t?t.previousSibling:r.lastChild;if(i&&(i===s||i.nextSibling))for(;r.insertBefore(i.cloneNode(!0),t),!(i===s||!(i=i.nextSibling)););else{templateContainer.innerHTML=n?`<svg>${e}</svg>`:e;const a=templateContainer.content;if(n){const u=a.firstChild;for(;u.firstChild;)a.appendChild(u.firstChild);a.removeChild(u)}r.insertBefore(a,t)}return[o?o.nextSibling:r.firstChild,t?t.previousSibling:r.lastChild]}};function patchClass(e,r,t){const n=e._vtc;n&&(r=(r?[r,...n]:[...n]).join(" ")),r==null?e.removeAttribute("class"):t?e.setAttribute("class",r):e.className=r}function patchStyle(e,r,t){const n=e.style,i=isString(t);if(t&&!i){for(const s in t)setStyle(n,s,t[s]);if(r&&!isString(r))for(const s in r)t[s]==null&&setStyle(n,s,"")}else{const s=n.display;i?r!==t&&(n.cssText=t):r&&e.removeAttribute("style"),"_vod"in e&&(n.display=s)}}const importantRE=/\s*!important$/;function setStyle(e,r,t){if(isArray$1(t))t.forEach(n=>setStyle(e,r,n));else if(t==null&&(t=""),r.startsWith("--"))e.setProperty(r,t);else{const n=autoPrefix(e,r);importantRE.test(t)?e.setProperty(hyphenate(n),t.replace(importantRE,""),"important"):e[n]=t}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(e,r){const t=prefixCache[r];if(t)return t;let n=camelize(r);if(n!=="filter"&&n in e)return prefixCache[r]=n;n=capitalize(n);for(let i=0;i<prefixes.length;i++){const s=prefixes[i]+n;if(s in e)return prefixCache[r]=s}return r}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(e,r,t,n,i){if(n&&r.startsWith("xlink:"))t==null?e.removeAttributeNS(xlinkNS,r.slice(6,r.length)):e.setAttributeNS(xlinkNS,r,t);else{const s=isSpecialBooleanAttr(r);t==null||s&&!includeBooleanAttr(t)?e.removeAttribute(r):e.setAttribute(r,s?"":t)}}function patchDOMProp(e,r,t,n,i,s,o){if(r==="innerHTML"||r==="textContent"){n&&o(n,i,s),e[r]=t==null?"":t;return}if(r==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=t;const u=t==null?"":t;(e.value!==u||e.tagName==="OPTION")&&(e.value=u),t==null&&e.removeAttribute(r);return}let a=!1;if(t===""||t==null){const u=typeof e[r];u==="boolean"?t=includeBooleanAttr(t):t==null&&u==="string"?(t="",a=!0):u==="number"&&(t=0,a=!0)}try{e[r]=t}catch{}a&&e.removeAttribute(r)}const[_getNow,skipTimestampCheck]=(()=>{let e=Date.now,r=!1;if(typeof window<"u"){Date.now()>document.createEvent("Event").timeStamp&&(e=performance.now.bind(performance));const t=navigator.userAgent.match(/firefox\/(\d+)/i);r=!!(t&&Number(t[1])<=53)}return[e,r]})();let cachedNow=0;const p$1=Promise.resolve(),reset=()=>{cachedNow=0},getNow=()=>cachedNow||(p$1.then(reset),cachedNow=_getNow());function addEventListener(e,r,t,n){e.addEventListener(r,t,n)}function removeEventListener(e,r,t,n){e.removeEventListener(r,t,n)}function patchEvent(e,r,t,n,i=null){const s=e._vei||(e._vei={}),o=s[r];if(n&&o)o.value=n;else{const[a,u]=parseName(r);if(n){const l=s[r]=createInvoker(n,i);addEventListener(e,a,l,u)}else o&&(removeEventListener(e,a,o,u),s[r]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(e){let r;if(optionsModifierRE.test(e)){r={};let n;for(;n=e.match(optionsModifierRE);)e=e.slice(0,e.length-n[0].length),r[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):hyphenate(e.slice(2)),r]}function createInvoker(e,r){const t=n=>{const i=n.timeStamp||_getNow();(skipTimestampCheck||i>=t.attached-1)&&callWithAsyncErrorHandling(patchStopImmediatePropagation(n,t.value),r,5,[n])};return t.value=e,t.attached=getNow(),t}function patchStopImmediatePropagation(e,r){if(isArray$1(r)){const t=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{t.call(e),e._stopped=!0},r.map(n=>i=>!i._stopped&&n&&n(i))}else return r}const nativeOnRE=/^on[a-z]/,patchProp=(e,r,t,n,i=!1,s,o,a,u)=>{r==="class"?patchClass(e,n,i):r==="style"?patchStyle(e,t,n):isOn(r)?isModelListener(r)||patchEvent(e,r,t,n,o):(r[0]==="."?(r=r.slice(1),!0):r[0]==="^"?(r=r.slice(1),!1):shouldSetAsProp(e,r,n,i))?patchDOMProp(e,r,n,s,o,a,u):(r==="true-value"?e._trueValue=n:r==="false-value"&&(e._falseValue=n),patchAttr(e,r,n,i))};function shouldSetAsProp(e,r,t,n){return n?!!(r==="innerHTML"||r==="textContent"||r in e&&nativeOnRE.test(r)&&isFunction(t)):r==="spellcheck"||r==="draggable"||r==="translate"||r==="form"||r==="list"&&e.tagName==="INPUT"||r==="type"&&e.tagName==="TEXTAREA"||nativeOnRE.test(r)&&isString(t)?!1:r in e}const DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};BaseTransition.props;const rendererOptions=extend({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...e)=>{const r=ensureRenderer().createApp(...e),{mount:t}=r;return r.mount=n=>{const i=normalizeContainer(n);if(!i)return;const s=r._component;!isFunction(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.innerHTML="";const o=t(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},r};function normalizeContainer(e){return isString(e)?document.querySelector(e):e}const attack="/MTGCardbuilder/assets/attack.3b10321b.png",__vite_glob_0_0=Object.freeze(Object.defineProperty({__proto__:null,default:attack},Symbol.toStringTag,{value:"Module"})),defense="/MTGCardbuilder/assets/defense.ec3dce98.png",__vite_glob_0_1=Object.freeze(Object.defineProperty({__proto__:null,default:defense},Symbol.toStringTag,{value:"Module"})),intellect="/MTGCardbuilder/assets/intellect.b7cece7b.png",__vite_glob_0_2=Object.freeze(Object.defineProperty({__proto__:null,default:intellect},Symbol.toStringTag,{value:"Module"})),life="/MTGCardbuilder/assets/life.59011903.png",__vite_glob_0_3=Object.freeze(Object.defineProperty({__proto__:null,default:life},Symbol.toStringTag,{value:"Module"})),none="/MTGCardbuilder/assets/none.43e81e31.png",__vite_glob_0_4=Object.freeze(Object.defineProperty({__proto__:null,default:none},Symbol.toStringTag,{value:"Module"})),pitch="/MTGCardbuilder/assets/pitch.e9ed64ad.png",__vite_glob_0_5=Object.freeze(Object.defineProperty({__proto__:null,default:pitch},Symbol.toStringTag,{value:"Module"})),resource="/MTGCardbuilder/assets/resource.44d1dc00.png",__vite_glob_0_6=Object.freeze(Object.defineProperty({__proto__:null,default:resource},Symbol.toStringTag,{value:"Module"}));function finallyConstructor(e){var r=this.constructor;return this.then(function(t){return r.resolve(e()).then(function(){return t})},function(t){return r.resolve(e()).then(function(){return r.reject(t)})})}function allSettled(e){var r=this;return new r(function(t,n){if(!(e&&typeof e.length<"u"))return n(new TypeError(typeof e+" "+e+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var i=Array.prototype.slice.call(e);if(i.length===0)return t([]);var s=i.length;function o(u,l){if(l&&(typeof l=="object"||typeof l=="function")){var h=l.then;if(typeof h=="function"){h.call(l,function(f){o(u,f)},function(f){i[u]={status:"rejected",reason:f},--s===0&&t(i)});return}}i[u]={status:"fulfilled",value:l},--s===0&&t(i)}for(var a=0;a<i.length;a++)o(a,i[a])})}var setTimeoutFunc=setTimeout;function isArray(e){return Boolean(e&&typeof e.length<"u")}function noop(){}function bind(e,r){return function(){e.apply(r,arguments)}}function Promise$1(e){if(!(this instanceof Promise$1))throw new TypeError("Promises must be constructed via new");if(typeof e!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],doResolve(e,this)}function handle(e,r){for(;e._state===3;)e=e._value;if(e._state===0){e._deferreds.push(r);return}e._handled=!0,Promise$1._immediateFn(function(){var t=e._state===1?r.onFulfilled:r.onRejected;if(t===null){(e._state===1?resolve$1:reject)(r.promise,e._value);return}var n;try{n=t(e._value)}catch(i){reject(r.promise,i);return}resolve$1(r.promise,n)})}function resolve$1(e,r){try{if(r===e)throw new TypeError("A promise cannot be resolved with itself.");if(r&&(typeof r=="object"||typeof r=="function")){var t=r.then;if(r instanceof Promise$1){e._state=3,e._value=r,finale(e);return}else if(typeof t=="function"){doResolve(bind(t,r),e);return}}e._state=1,e._value=r,finale(e)}catch(n){reject(e,n)}}function reject(e,r){e._state=2,e._value=r,finale(e)}function finale(e){e._state===2&&e._deferreds.length===0&&Promise$1._immediateFn(function(){e._handled||Promise$1._unhandledRejectionFn(e._value)});for(var r=0,t=e._deferreds.length;r<t;r++)handle(e,e._deferreds[r]);e._deferreds=null}function Handler(e,r,t){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof r=="function"?r:null,this.promise=t}function doResolve(e,r){var t=!1;try{e(function(n){t||(t=!0,resolve$1(r,n))},function(n){t||(t=!0,reject(r,n))})}catch(n){if(t)return;t=!0,reject(r,n)}}Promise$1.prototype.catch=function(e){return this.then(null,e)};Promise$1.prototype.then=function(e,r){var t=new this.constructor(noop);return handle(this,new Handler(e,r,t)),t};Promise$1.prototype.finally=finallyConstructor;Promise$1.all=function(e){return new Promise$1(function(r,t){if(!isArray(e))return t(new TypeError("Promise.all accepts an array"));var n=Array.prototype.slice.call(e);if(n.length===0)return r([]);var i=n.length;function s(a,u){try{if(u&&(typeof u=="object"||typeof u=="function")){var l=u.then;if(typeof l=="function"){l.call(u,function(h){s(a,h)},t);return}}n[a]=u,--i===0&&r(n)}catch(h){t(h)}}for(var o=0;o<n.length;o++)s(o,n[o])})};Promise$1.allSettled=allSettled;Promise$1.resolve=function(e){return e&&typeof e=="object"&&e.constructor===Promise$1?e:new Promise$1(function(r){r(e)})};Promise$1.reject=function(e){return new Promise$1(function(r,t){t(e)})};Promise$1.race=function(e){return new Promise$1(function(r,t){if(!isArray(e))return t(new TypeError("Promise.race accepts an array"));for(var n=0,i=e.length;n<i;n++)Promise$1.resolve(e[n]).then(r,t)})};Promise$1._immediateFn=typeof setImmediate=="function"&&function(e){setImmediate(e)}||function(e){setTimeoutFunc(e,0)};Promise$1._unhandledRejectionFn=function(r){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",r)};var commonjsGlobal$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty$2=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function shouldUseNative(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var r={},t=0;t<10;t++)r["_"+String.fromCharCode(t)]=t;var n=Object.getOwnPropertyNames(r).map(function(s){return r[s]});if(n.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(s){i[s]=s}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var objectAssign=shouldUseNative()?Object.assign:function(e,r){for(var t,n=toObject(e),i,s=1;s<arguments.length;s++){t=Object(arguments[s]);for(var o in t)hasOwnProperty$2.call(t,o)&&(n[o]=t[o]);if(getOwnPropertySymbols){i=getOwnPropertySymbols(t);for(var a=0;a<i.length;a++)propIsEnumerable.call(t,i[a])&&(n[i[a]]=t[i[a]])}}return n};/*!
 * @pixi/polyfill - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/polyfill is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */typeof globalThis>"u"&&(typeof self<"u"?self.globalThis=self:typeof global<"u"&&(global.globalThis=global));globalThis.Promise||(globalThis.Promise=Promise$1);Object.assign||(Object.assign=objectAssign);var ONE_FRAME_TIME=16;Date.now&&Date.prototype.getTime||(Date.now=function(){return new Date().getTime()});if(!(globalThis.performance&&globalThis.performance.now)){var startTime_1=Date.now();globalThis.performance||(globalThis.performance={}),globalThis.performance.now=function(){return Date.now()-startTime_1}}var lastTime=Date.now(),vendors=["ms","moz","webkit","o"];for(var x=0;x<vendors.length&&!globalThis.requestAnimationFrame;++x){var p=vendors[x];globalThis.requestAnimationFrame=globalThis[p+"RequestAnimationFrame"],globalThis.cancelAnimationFrame=globalThis[p+"CancelAnimationFrame"]||globalThis[p+"CancelRequestAnimationFrame"]}globalThis.requestAnimationFrame||(globalThis.requestAnimationFrame=function(e){if(typeof e!="function")throw new TypeError(e+"is not a function");var r=Date.now(),t=ONE_FRAME_TIME+lastTime-r;return t<0&&(t=0),lastTime=r,globalThis.self.setTimeout(function(){lastTime=Date.now(),e(performance.now())},t)});globalThis.cancelAnimationFrame||(globalThis.cancelAnimationFrame=function(e){return clearTimeout(e)});Math.sign||(Math.sign=function(r){return r=Number(r),r===0||isNaN(r)?r:r>0?1:-1});Number.isInteger||(Number.isInteger=function(r){return typeof r=="number"&&isFinite(r)&&Math.floor(r)===r});globalThis.ArrayBuffer||(globalThis.ArrayBuffer=Array);globalThis.Float32Array||(globalThis.Float32Array=Array);globalThis.Uint32Array||(globalThis.Uint32Array=Array);globalThis.Uint16Array||(globalThis.Uint16Array=Array);globalThis.Uint8Array||(globalThis.Uint8Array=Array);globalThis.Int32Array||(globalThis.Int32Array=Array);/*!
 * @pixi/settings - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*!
 * @pixi/constants - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ENV$6;(function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"})(ENV$6||(ENV$6={}));var RENDERER_TYPE$6;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"})(RENDERER_TYPE$6||(RENDERER_TYPE$6={}));var BUFFER_BITS$6;(function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"})(BUFFER_BITS$6||(BUFFER_BITS$6={}));var BLEND_MODES$6;(function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"})(BLEND_MODES$6||(BLEND_MODES$6={}));var DRAW_MODES$6;(function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(DRAW_MODES$6||(DRAW_MODES$6={}));var FORMATS$6;(function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(FORMATS$6||(FORMATS$6={}));var TARGETS$6;(function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(TARGETS$6||(TARGETS$6={}));var TYPES$6;(function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"})(TYPES$6||(TYPES$6={}));var SAMPLER_TYPES$6;(function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"})(SAMPLER_TYPES$6||(SAMPLER_TYPES$6={}));var SCALE_MODES$6;(function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"})(SCALE_MODES$6||(SCALE_MODES$6={}));var WRAP_MODES$6;(function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(WRAP_MODES$6||(WRAP_MODES$6={}));var MIPMAP_MODES$6;(function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"})(MIPMAP_MODES$6||(MIPMAP_MODES$6={}));var ALPHA_MODES$6;(function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(ALPHA_MODES$6||(ALPHA_MODES$6={}));var CLEAR_MODES$6;(function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"})(CLEAR_MODES$6||(CLEAR_MODES$6={}));var GC_MODES$6;(function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"})(GC_MODES$6||(GC_MODES$6={}));var PRECISION$6;(function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"})(PRECISION$6||(PRECISION$6={}));var MASK_TYPES$6;(function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE",e[e.COLOR=4]="COLOR"})(MASK_TYPES$6||(MASK_TYPES$6={}));var COLOR_MASK_BITS$6;(function(e){e[e.RED=1]="RED",e[e.GREEN=2]="GREEN",e[e.BLUE=4]="BLUE",e[e.ALPHA=8]="ALPHA"})(COLOR_MASK_BITS$6||(COLOR_MASK_BITS$6={}));var MSAA_QUALITY$6;(function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"})(MSAA_QUALITY$6||(MSAA_QUALITY$6={}));var BUFFER_TYPE$6;(function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(BUFFER_TYPE$6||(BUFFER_TYPE$6={}));var BrowserAdapter$1={createCanvas:function(e,r){var t=document.createElement("canvas");return t.width=e,t.height=r,t},getWebGLRenderingContext:function(){return WebGLRenderingContext},getNavigator:function(){return navigator},getBaseUrl:function(){var e;return(e=document.baseURI)!==null&&e!==void 0?e:window.location.href},fetch:function(e,r){return fetch(e,r)}},appleIphone$1=/iPhone/i,appleIpod$1=/iPod/i,appleTablet$1=/iPad/i,appleUniversal$1=/\biOS-universal(?:.+)Mac\b/i,androidPhone$1=/\bAndroid(?:.+)Mobile\b/i,androidTablet$1=/Android/i,amazonPhone$1=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,amazonTablet$1=/Silk/i,windowsPhone$1=/Windows Phone/i,windowsTablet$1=/\bWindows(?:.+)ARM\b/i,otherBlackBerry$1=/BlackBerry/i,otherBlackBerry10$1=/BB10/i,otherOpera$1=/Opera Mini/i,otherChrome$1=/\b(CriOS|Chrome)(?:.+)Mobile/i,otherFirefox$1=/Mobile(?:.+)Firefox\b/i,isAppleTabletOnIos13$1=function(e){return typeof e<"u"&&e.platform==="MacIntel"&&typeof e.maxTouchPoints=="number"&&e.maxTouchPoints>1&&typeof MSStream>"u"};function createMatch$1(e){return function(r){return r.test(e)}}function isMobile$1$1(e){var r={userAgent:"",platform:"",maxTouchPoints:0};!e&&typeof navigator<"u"?r={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof e=="string"?r.userAgent=e:e&&e.userAgent&&(r={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0});var t=r.userAgent,n=t.split("[FBAN");typeof n[1]<"u"&&(t=n[0]),n=t.split("Twitter"),typeof n[1]<"u"&&(t=n[0]);var i=createMatch$1(t),s={apple:{phone:i(appleIphone$1)&&!i(windowsPhone$1),ipod:i(appleIpod$1),tablet:!i(appleIphone$1)&&(i(appleTablet$1)||isAppleTabletOnIos13$1(r))&&!i(windowsPhone$1),universal:i(appleUniversal$1),device:(i(appleIphone$1)||i(appleIpod$1)||i(appleTablet$1)||i(appleUniversal$1)||isAppleTabletOnIos13$1(r))&&!i(windowsPhone$1)},amazon:{phone:i(amazonPhone$1),tablet:!i(amazonPhone$1)&&i(amazonTablet$1),device:i(amazonPhone$1)||i(amazonTablet$1)},android:{phone:!i(windowsPhone$1)&&i(amazonPhone$1)||!i(windowsPhone$1)&&i(androidPhone$1),tablet:!i(windowsPhone$1)&&!i(amazonPhone$1)&&!i(androidPhone$1)&&(i(amazonTablet$1)||i(androidTablet$1)),device:!i(windowsPhone$1)&&(i(amazonPhone$1)||i(amazonTablet$1)||i(androidPhone$1)||i(androidTablet$1))||i(/\bokhttp\b/i)},windows:{phone:i(windowsPhone$1),tablet:i(windowsTablet$1),device:i(windowsPhone$1)||i(windowsTablet$1)},other:{blackberry:i(otherBlackBerry$1),blackberry10:i(otherBlackBerry10$1),opera:i(otherOpera$1),firefox:i(otherFirefox$1),chrome:i(otherChrome$1),device:i(otherBlackBerry$1)||i(otherBlackBerry10$1)||i(otherOpera$1)||i(otherFirefox$1)||i(otherChrome$1)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}var isMobile$2=isMobile$1$1(globalThis.navigator);function canUploadSameBuffer$1(){return!isMobile$2.apple.device}function maxRecommendedTextures$1(e){var r=!0;if(isMobile$2.tablet||isMobile$2.phone){if(isMobile$2.apple.device){var t=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(t){var n=parseInt(t[1],10);n<11&&(r=!1)}}if(isMobile$2.android.device){var t=navigator.userAgent.match(/Android\s([0-9.]*)/);if(t){var n=parseInt(t[1],10);n<7&&(r=!1)}}}return r?e:4}var settings$1={ADAPTER:BrowserAdapter$1,MIPMAP_TEXTURES:MIPMAP_MODES$6.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:MSAA_QUALITY$6.NONE,SPRITE_MAX_TEXTURES:maxRecommendedTextures$1(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:GC_MODES$6.AUTO,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:WRAP_MODES$6.CLAMP,SCALE_MODE:SCALE_MODES$6.LINEAR,PRECISION_VERTEX:PRECISION$6.HIGH,PRECISION_FRAGMENT:isMobile$2.apple.device?PRECISION$6.HIGH:PRECISION$6.MEDIUM,CAN_UPLOAD_SAME_BUFFER:canUploadSameBuffer$1(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},eventemitter3={exports:{}};(function(e){var r=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function i(u,l,h){this.fn=u,this.context=l,this.once=h||!1}function s(u,l,h,f,d){if(typeof h!="function")throw new TypeError("The listener must be a function");var _=new i(h,f||u,d),v=t?t+l:l;return u._events[v]?u._events[v].fn?u._events[v]=[u._events[v],_]:u._events[v].push(_):(u._events[v]=_,u._eventsCount++),u}function o(u,l){--u._eventsCount===0?u._events=new n:delete u._events[l]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],h,f;if(this._eventsCount===0)return l;for(f in h=this._events)r.call(h,f)&&l.push(t?f.slice(1):f);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(h)):l},a.prototype.listeners=function(l){var h=t?t+l:l,f=this._events[h];if(!f)return[];if(f.fn)return[f.fn];for(var d=0,_=f.length,v=new Array(_);d<_;d++)v[d]=f[d].fn;return v},a.prototype.listenerCount=function(l){var h=t?t+l:l,f=this._events[h];return f?f.fn?1:f.length:0},a.prototype.emit=function(l,h,f,d,_,v){var m=t?t+l:l;if(!this._events[m])return!1;var E=this._events[m],A=arguments.length,T,C;if(E.fn){switch(E.once&&this.removeListener(l,E.fn,void 0,!0),A){case 1:return E.fn.call(E.context),!0;case 2:return E.fn.call(E.context,h),!0;case 3:return E.fn.call(E.context,h,f),!0;case 4:return E.fn.call(E.context,h,f,d),!0;case 5:return E.fn.call(E.context,h,f,d,_),!0;case 6:return E.fn.call(E.context,h,f,d,_,v),!0}for(C=1,T=new Array(A-1);C<A;C++)T[C-1]=arguments[C];E.fn.apply(E.context,T)}else{var R=E.length,b;for(C=0;C<R;C++)switch(E[C].once&&this.removeListener(l,E[C].fn,void 0,!0),A){case 1:E[C].fn.call(E[C].context);break;case 2:E[C].fn.call(E[C].context,h);break;case 3:E[C].fn.call(E[C].context,h,f);break;case 4:E[C].fn.call(E[C].context,h,f,d);break;default:if(!T)for(b=1,T=new Array(A-1);b<A;b++)T[b-1]=arguments[b];E[C].fn.apply(E[C].context,T)}}return!0},a.prototype.on=function(l,h,f){return s(this,l,h,f,!1)},a.prototype.once=function(l,h,f){return s(this,l,h,f,!0)},a.prototype.removeListener=function(l,h,f,d){var _=t?t+l:l;if(!this._events[_])return this;if(!h)return o(this,_),this;var v=this._events[_];if(v.fn)v.fn===h&&(!d||v.once)&&(!f||v.context===f)&&o(this,_);else{for(var m=0,E=[],A=v.length;m<A;m++)(v[m].fn!==h||d&&!v[m].once||f&&v[m].context!==f)&&E.push(v[m]);E.length?this._events[_]=E.length===1?E[0]:E:o(this,_)}return this},a.prototype.removeAllListeners=function(l){var h;return l?(h=t?t+l:l,this._events[h]&&o(this,h)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,e.exports=a})(eventemitter3);const EventEmitter=eventemitter3.exports;var earcut$1={exports:{}};earcut$1.exports=earcut;earcut$1.exports.default=earcut;function earcut(e,r,t){t=t||2;var n=r&&r.length,i=n?r[0]*t:e.length,s=linkedList(e,0,i,t,!0),o=[];if(!s||s.next===s.prev)return o;var a,u,l,h,f,d,_;if(n&&(s=eliminateHoles(e,r,s,t)),e.length>80*t){a=l=e[0],u=h=e[1];for(var v=t;v<i;v+=t)f=e[v],d=e[v+1],f<a&&(a=f),d<u&&(u=d),f>l&&(l=f),d>h&&(h=d);_=Math.max(l-a,h-u),_=_!==0?32767/_:0}return earcutLinked(s,o,t,a,u,_,0),o}function linkedList(e,r,t,n,i){var s,o;if(i===signedArea(e,r,t,n)>0)for(s=r;s<t;s+=n)o=insertNode(s,e[s],e[s+1],o);else for(s=t-n;s>=r;s-=n)o=insertNode(s,e[s],e[s+1],o);return o&&equals(o,o.next)&&(removeNode(o),o=o.next),o}function filterPoints(e,r){if(!e)return e;r||(r=e);var t=e,n;do if(n=!1,!t.steiner&&(equals(t,t.next)||area(t.prev,t,t.next)===0)){if(removeNode(t),t=r=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==r);return r}function earcutLinked(e,r,t,n,i,s,o){if(!!e){!o&&s&&indexCurve(e,n,i,s);for(var a=e,u,l;e.prev!==e.next;){if(u=e.prev,l=e.next,s?isEarHashed(e,n,i,s):isEar(e)){r.push(u.i/t|0),r.push(e.i/t|0),r.push(l.i/t|0),removeNode(e),e=l.next,a=l.next;continue}if(e=l,e===a){o?o===1?(e=cureLocalIntersections(filterPoints(e),r,t),earcutLinked(e,r,t,n,i,s,2)):o===2&&splitEarcut(e,r,t,n,i,s):earcutLinked(filterPoints(e),r,t,n,i,s,1);break}}}}function isEar(e){var r=e.prev,t=e,n=e.next;if(area(r,t,n)>=0)return!1;for(var i=r.x,s=t.x,o=n.x,a=r.y,u=t.y,l=n.y,h=i<s?i<o?i:o:s<o?s:o,f=a<u?a<l?a:l:u<l?u:l,d=i>s?i>o?i:o:s>o?s:o,_=a>u?a>l?a:l:u>l?u:l,v=n.next;v!==r;){if(v.x>=h&&v.x<=d&&v.y>=f&&v.y<=_&&pointInTriangle(i,a,s,u,o,l,v.x,v.y)&&area(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function isEarHashed(e,r,t,n){var i=e.prev,s=e,o=e.next;if(area(i,s,o)>=0)return!1;for(var a=i.x,u=s.x,l=o.x,h=i.y,f=s.y,d=o.y,_=a<u?a<l?a:l:u<l?u:l,v=h<f?h<d?h:d:f<d?f:d,m=a>u?a>l?a:l:u>l?u:l,E=h>f?h>d?h:d:f>d?f:d,A=zOrder(_,v,r,t,n),T=zOrder(m,E,r,t,n),C=e.prevZ,R=e.nextZ;C&&C.z>=A&&R&&R.z<=T;){if(C.x>=_&&C.x<=m&&C.y>=v&&C.y<=E&&C!==i&&C!==o&&pointInTriangle(a,h,u,f,l,d,C.x,C.y)&&area(C.prev,C,C.next)>=0||(C=C.prevZ,R.x>=_&&R.x<=m&&R.y>=v&&R.y<=E&&R!==i&&R!==o&&pointInTriangle(a,h,u,f,l,d,R.x,R.y)&&area(R.prev,R,R.next)>=0))return!1;R=R.nextZ}for(;C&&C.z>=A;){if(C.x>=_&&C.x<=m&&C.y>=v&&C.y<=E&&C!==i&&C!==o&&pointInTriangle(a,h,u,f,l,d,C.x,C.y)&&area(C.prev,C,C.next)>=0)return!1;C=C.prevZ}for(;R&&R.z<=T;){if(R.x>=_&&R.x<=m&&R.y>=v&&R.y<=E&&R!==i&&R!==o&&pointInTriangle(a,h,u,f,l,d,R.x,R.y)&&area(R.prev,R,R.next)>=0)return!1;R=R.nextZ}return!0}function cureLocalIntersections(e,r,t){var n=e;do{var i=n.prev,s=n.next.next;!equals(i,s)&&intersects(i,n,n.next,s)&&locallyInside(i,s)&&locallyInside(s,i)&&(r.push(i.i/t|0),r.push(n.i/t|0),r.push(s.i/t|0),removeNode(n),removeNode(n.next),n=e=s),n=n.next}while(n!==e);return filterPoints(n)}function splitEarcut(e,r,t,n,i,s){var o=e;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&isValidDiagonal(o,a)){var u=splitPolygon(o,a);o=filterPoints(o,o.next),u=filterPoints(u,u.next),earcutLinked(o,r,t,n,i,s,0),earcutLinked(u,r,t,n,i,s,0);return}a=a.next}o=o.next}while(o!==e)}function eliminateHoles(e,r,t,n){var i=[],s,o,a,u,l;for(s=0,o=r.length;s<o;s++)a=r[s]*n,u=s<o-1?r[s+1]*n:e.length,l=linkedList(e,a,u,n,!1),l===l.next&&(l.steiner=!0),i.push(getLeftmost(l));for(i.sort(compareX),s=0;s<i.length;s++)t=eliminateHole(i[s],t);return t}function compareX(e,r){return e.x-r.x}function eliminateHole(e,r){var t=findHoleBridge(e,r);if(!t)return r;var n=splitPolygon(t,e);return filterPoints(n,n.next),filterPoints(t,t.next)}function findHoleBridge(e,r){var t=r,n=e.x,i=e.y,s=-1/0,o;do{if(i<=t.y&&i>=t.next.y&&t.next.y!==t.y){var a=t.x+(i-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(a<=n&&a>s&&(s=a,o=t.x<t.next.x?t:t.next,a===n))return o}t=t.next}while(t!==r);if(!o)return null;var u=o,l=o.x,h=o.y,f=1/0,d;t=o;do n>=t.x&&t.x>=l&&n!==t.x&&pointInTriangle(i<h?n:s,i,l,h,i<h?s:n,i,t.x,t.y)&&(d=Math.abs(i-t.y)/(n-t.x),locallyInside(t,e)&&(d<f||d===f&&(t.x>o.x||t.x===o.x&&sectorContainsSector(o,t)))&&(o=t,f=d)),t=t.next;while(t!==u);return o}function sectorContainsSector(e,r){return area(e.prev,e,r.prev)<0&&area(r.next,e,e.next)<0}function indexCurve(e,r,t,n){var i=e;do i.z===0&&(i.z=zOrder(i.x,i.y,r,t,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,sortLinked(i)}function sortLinked(e){var r,t,n,i,s,o,a,u,l=1;do{for(t=e,e=null,s=null,o=0;t;){for(o++,n=t,a=0,r=0;r<l&&(a++,n=n.nextZ,!!n);r++);for(u=l;a>0||u>0&&n;)a!==0&&(u===0||!n||t.z<=n.z)?(i=t,t=t.nextZ,a--):(i=n,n=n.nextZ,u--),s?s.nextZ=i:e=i,i.prevZ=s,s=i;t=n}s.nextZ=null,l*=2}while(o>1);return e}function zOrder(e,r,t,n,i){return e=(e-t)*i|0,r=(r-n)*i|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e|r<<1}function getLeftmost(e){var r=e,t=e;do(r.x<t.x||r.x===t.x&&r.y<t.y)&&(t=r),r=r.next;while(r!==e);return t}function pointInTriangle(e,r,t,n,i,s,o,a){return(i-o)*(r-a)>=(e-o)*(s-a)&&(e-o)*(n-a)>=(t-o)*(r-a)&&(t-o)*(s-a)>=(i-o)*(n-a)}function isValidDiagonal(e,r){return e.next.i!==r.i&&e.prev.i!==r.i&&!intersectsPolygon(e,r)&&(locallyInside(e,r)&&locallyInside(r,e)&&middleInside(e,r)&&(area(e.prev,e,r.prev)||area(e,r.prev,r))||equals(e,r)&&area(e.prev,e,e.next)>0&&area(r.prev,r,r.next)>0)}function area(e,r,t){return(r.y-e.y)*(t.x-r.x)-(r.x-e.x)*(t.y-r.y)}function equals(e,r){return e.x===r.x&&e.y===r.y}function intersects(e,r,t,n){var i=sign$1(area(e,r,t)),s=sign$1(area(e,r,n)),o=sign$1(area(t,n,e)),a=sign$1(area(t,n,r));return!!(i!==s&&o!==a||i===0&&onSegment(e,t,r)||s===0&&onSegment(e,n,r)||o===0&&onSegment(t,e,n)||a===0&&onSegment(t,r,n))}function onSegment(e,r,t){return r.x<=Math.max(e.x,t.x)&&r.x>=Math.min(e.x,t.x)&&r.y<=Math.max(e.y,t.y)&&r.y>=Math.min(e.y,t.y)}function sign$1(e){return e>0?1:e<0?-1:0}function intersectsPolygon(e,r){var t=e;do{if(t.i!==e.i&&t.next.i!==e.i&&t.i!==r.i&&t.next.i!==r.i&&intersects(t,t.next,e,r))return!0;t=t.next}while(t!==e);return!1}function locallyInside(e,r){return area(e.prev,e,e.next)<0?area(e,r,e.next)>=0&&area(e,e.prev,r)>=0:area(e,r,e.prev)<0||area(e,e.next,r)<0}function middleInside(e,r){var t=e,n=!1,i=(e.x+r.x)/2,s=(e.y+r.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==e);return n}function splitPolygon(e,r){var t=new Node(e.i,e.x,e.y),n=new Node(r.i,r.x,r.y),i=e.next,s=r.prev;return e.next=r,r.prev=e,t.next=i,i.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function insertNode(e,r,t,n){var i=new Node(e,r,t);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function removeNode(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Node(e,r,t){this.i=e,this.x=r,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}earcut.deviation=function(e,r,t,n){var i=r&&r.length,s=i?r[0]*t:e.length,o=Math.abs(signedArea(e,0,s,t));if(i)for(var a=0,u=r.length;a<u;a++){var l=r[a]*t,h=a<u-1?r[a+1]*t:e.length;o-=Math.abs(signedArea(e,l,h,t))}var f=0;for(a=0;a<n.length;a+=3){var d=n[a]*t,_=n[a+1]*t,v=n[a+2]*t;f+=Math.abs((e[d]-e[v])*(e[_+1]-e[d+1])-(e[d]-e[_])*(e[v+1]-e[d+1]))}return o===0&&f===0?0:Math.abs((f-o)/o)};function signedArea(e,r,t,n){for(var i=0,s=r,o=t-n;s<t;s+=n)i+=(e[o]-e[s])*(e[s+1]+e[o+1]),o=s;return i}earcut.flatten=function(e){for(var r=e[0][0].length,t={vertices:[],holes:[],dimensions:r},n=0,i=0;i<e.length;i++){for(var s=0;s<e[i].length;s++)for(var o=0;o<r;o++)t.vertices.push(e[i][s][o]);i>0&&(n+=e[i-1].length,t.holes.push(n))}return t};var punycode$1={exports:{}};/*! https://mths.be/punycode v1.3.2 by @mathias */(function(e,r){(function(t){var n=r&&!r.nodeType&&r,i=e&&!e.nodeType&&e,s=typeof commonjsGlobal$1=="object"&&commonjsGlobal$1;(s.global===s||s.window===s||s.self===s)&&(t=s);var o,a=2147483647,u=36,l=1,h=26,f=38,d=700,_=72,v=128,m="-",E=/^xn--/,A=/[^\x20-\x7E]/,T=/[\x2E\u3002\uFF0E\uFF61]/g,C={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},R=u-l,b=Math.floor,S=String.fromCharCode,B;function M(O){throw RangeError(C[O])}function D(O,V){for(var Z=O.length,ee=[];Z--;)ee[Z]=V(O[Z]);return ee}function G(O,V){var Z=O.split("@"),ee="";Z.length>1&&(ee=Z[0]+"@",O=Z[1]),O=O.replace(T,".");var oe=O.split("."),ge=D(oe,V).join(".");return ee+ge}function J(O){for(var V=[],Z=0,ee=O.length,oe,ge;Z<ee;)oe=O.charCodeAt(Z++),oe>=55296&&oe<=56319&&Z<ee?(ge=O.charCodeAt(Z++),(ge&64512)==56320?V.push(((oe&1023)<<10)+(ge&1023)+65536):(V.push(oe),Z--)):V.push(oe);return V}function re(O){return D(O,function(V){var Z="";return V>65535&&(V-=65536,Z+=S(V>>>10&1023|55296),V=56320|V&1023),Z+=S(V),Z}).join("")}function ne(O){return O-48<10?O-22:O-65<26?O-65:O-97<26?O-97:u}function de(O,V){return O+22+75*(O<26)-((V!=0)<<5)}function q(O,V,Z){var ee=0;for(O=Z?b(O/d):O>>1,O+=b(O/V);O>R*h>>1;ee+=u)O=b(O/R);return b(ee+(R+1)*O/(O+f))}function z(O){var V=[],Z=O.length,ee,oe=0,ge=v,ce=_,pe,Ae,Ee,me,he,ve,P,N,$;for(pe=O.lastIndexOf(m),pe<0&&(pe=0),Ae=0;Ae<pe;++Ae)O.charCodeAt(Ae)>=128&&M("not-basic"),V.push(O.charCodeAt(Ae));for(Ee=pe>0?pe+1:0;Ee<Z;){for(me=oe,he=1,ve=u;Ee>=Z&&M("invalid-input"),P=ne(O.charCodeAt(Ee++)),(P>=u||P>b((a-oe)/he))&&M("overflow"),oe+=P*he,N=ve<=ce?l:ve>=ce+h?h:ve-ce,!(P<N);ve+=u)$=u-N,he>b(a/$)&&M("overflow"),he*=$;ee=V.length+1,ce=q(oe-me,ee,me==0),b(oe/ee)>a-ge&&M("overflow"),ge+=b(oe/ee),oe%=ee,V.splice(oe++,0,ge)}return re(V)}function te(O){var V,Z,ee,oe,ge,ce,pe,Ae,Ee,me,he,ve=[],P,N,$,U;for(O=J(O),P=O.length,V=v,Z=0,ge=_,ce=0;ce<P;++ce)he=O[ce],he<128&&ve.push(S(he));for(ee=oe=ve.length,oe&&ve.push(m);ee<P;){for(pe=a,ce=0;ce<P;++ce)he=O[ce],he>=V&&he<pe&&(pe=he);for(N=ee+1,pe-V>b((a-Z)/N)&&M("overflow"),Z+=(pe-V)*N,V=pe,ce=0;ce<P;++ce)if(he=O[ce],he<V&&++Z>a&&M("overflow"),he==V){for(Ae=Z,Ee=u;me=Ee<=ge?l:Ee>=ge+h?h:Ee-ge,!(Ae<me);Ee+=u)U=Ae-me,$=u-me,ve.push(S(de(me+U%$,0))),Ae=b(U/$);ve.push(S(de(Ae,0))),ge=q(Z,N,ee==oe),Z=0,++ee}++Z,++V}return ve.join("")}function ue(O){return G(O,function(V){return E.test(V)?z(V.slice(4).toLowerCase()):V})}function le(O){return G(O,function(V){return A.test(V)?"xn--"+te(V):V})}if(o={version:"1.3.2",ucs2:{decode:J,encode:re},decode:z,encode:te,toASCII:le,toUnicode:ue},n&&i)if(e.exports==n)i.exports=o;else for(B in o)o.hasOwnProperty(B)&&(n[B]=o[B]);else t.punycode=o})(commonjsGlobal$1)})(punycode$1,punycode$1.exports);var util$5={isString:function(e){return typeof e=="string"},isObject:function(e){return typeof e=="object"&&e!==null},isNull:function(e){return e===null},isNullOrUndefined:function(e){return e==null}},querystring$1={};function hasOwnProperty$1(e,r){return Object.prototype.hasOwnProperty.call(e,r)}var decode$1=function(e,r,t,n){r=r||"&",t=t||"=";var i={};if(typeof e!="string"||e.length===0)return i;var s=/\+/g;e=e.split(r);var o=1e3;n&&typeof n.maxKeys=="number"&&(o=n.maxKeys);var a=e.length;o>0&&a>o&&(a=o);for(var u=0;u<a;++u){var l=e[u].replace(s,"%20"),h=l.indexOf(t),f,d,_,v;h>=0?(f=l.substr(0,h),d=l.substr(h+1)):(f=l,d=""),_=decodeURIComponent(f),v=decodeURIComponent(d),hasOwnProperty$1(i,_)?Array.isArray(i[_])?i[_].push(v):i[_]=[i[_],v]:i[_]=v}return i},stringifyPrimitive$1=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},encode$1=function(e,r,t,n){return r=r||"&",t=t||"=",e===null&&(e=void 0),typeof e=="object"?Object.keys(e).map(function(i){var s=encodeURIComponent(stringifyPrimitive$1(i))+t;return Array.isArray(e[i])?e[i].map(function(o){return s+encodeURIComponent(stringifyPrimitive$1(o))}).join(r):s+encodeURIComponent(stringifyPrimitive$1(e[i]))}).join(r):n?encodeURIComponent(stringifyPrimitive$1(n))+t+encodeURIComponent(stringifyPrimitive$1(e)):""};querystring$1.decode=querystring$1.parse=decode$1;querystring$1.encode=querystring$1.stringify=encode$1;var punycode=punycode$1.exports,util$4=util$5,parse=urlParse,resolve=urlResolve,format=urlFormat;function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,delims=["<",">",'"',"`"," ","\r",`
`,"	"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:!0,"javascript:":!0},hostlessProtocol={javascript:!0,"javascript:":!0},slashedProtocol={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},querystring=querystring$1;function urlParse(e,r,t){if(e&&util$4.isObject(e)&&e instanceof Url)return e;var n=new Url;return n.parse(e,r,t),n}Url.prototype.parse=function(e,r,t){if(!util$4.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),i=n!==-1&&n<e.indexOf("#")?"?":"#",s=e.split(i),o=/\\/g;s[0]=s[0].replace(o,"/"),e=s.join(i);var a=e;if(a=a.trim(),!t&&e.split("#").length===1){var u=simplePathPattern.exec(a);if(u)return this.path=a,this.href=a,this.pathname=u[1],u[2]?(this.search=u[2],r?this.query=querystring.parse(this.search.substr(1)):this.query=this.search.substr(1)):r&&(this.search="",this.query={}),this}var l=protocolPattern.exec(a);if(l){l=l[0];var h=l.toLowerCase();this.protocol=h,a=a.substr(l.length)}if(t||l||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var f=a.substr(0,2)==="//";f&&!(l&&hostlessProtocol[l])&&(a=a.substr(2),this.slashes=!0)}if(!hostlessProtocol[l]&&(f||l&&!slashedProtocol[l])){for(var d=-1,_=0;_<hostEndingChars.length;_++){var v=a.indexOf(hostEndingChars[_]);v!==-1&&(d===-1||v<d)&&(d=v)}var m,E;d===-1?E=a.lastIndexOf("@"):E=a.lastIndexOf("@",d),E!==-1&&(m=a.slice(0,E),a=a.slice(E+1),this.auth=decodeURIComponent(m)),d=-1;for(var _=0;_<nonHostChars.length;_++){var v=a.indexOf(nonHostChars[_]);v!==-1&&(d===-1||v<d)&&(d=v)}d===-1&&(d=a.length),this.host=a.slice(0,d),a=a.slice(d),this.parseHost(),this.hostname=this.hostname||"";var A=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!A)for(var T=this.hostname.split(/\./),_=0,C=T.length;_<C;_++){var R=T[_];if(!!R&&!R.match(hostnamePartPattern)){for(var b="",S=0,B=R.length;S<B;S++)R.charCodeAt(S)>127?b+="x":b+=R[S];if(!b.match(hostnamePartPattern)){var M=T.slice(0,_),D=T.slice(_+1),G=R.match(hostnamePartStart);G&&(M.push(G[1]),D.unshift(G[2])),D.length&&(a="/"+D.join(".")+a),this.hostname=M.join(".");break}}}this.hostname.length>hostnameMaxLen?this.hostname="":this.hostname=this.hostname.toLowerCase(),A||(this.hostname=punycode.toASCII(this.hostname));var J=this.port?":"+this.port:"",re=this.hostname||"";this.host=re+J,this.href+=this.host,A&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!unsafeProtocol[h])for(var _=0,C=autoEscape.length;_<C;_++){var ne=autoEscape[_];if(a.indexOf(ne)!==-1){var de=encodeURIComponent(ne);de===ne&&(de=escape(ne)),a=a.split(ne).join(de)}}var q=a.indexOf("#");q!==-1&&(this.hash=a.substr(q),a=a.slice(0,q));var z=a.indexOf("?");if(z!==-1?(this.search=a.substr(z),this.query=a.substr(z+1),r&&(this.query=querystring.parse(this.query)),a=a.slice(0,z)):r&&(this.search="",this.query={}),a&&(this.pathname=a),slashedProtocol[h]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var J=this.pathname||"",te=this.search||"";this.path=J+te}return this.href=this.format(),this};function urlFormat(e){return util$4.isString(e)&&(e=urlParse(e)),e instanceof Url?e.format():Url.prototype.format.call(e)}Url.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var r=this.protocol||"",t=this.pathname||"",n=this.hash||"",i=!1,s="";this.host?i=e+this.host:this.hostname&&(i=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&util$4.isObject(this.query)&&Object.keys(this.query).length&&(s=querystring.stringify(this.query));var o=this.search||s&&"?"+s||"";return r&&r.substr(-1)!==":"&&(r+=":"),this.slashes||(!r||slashedProtocol[r])&&i!==!1?(i="//"+(i||""),t&&t.charAt(0)!=="/"&&(t="/"+t)):i||(i=""),n&&n.charAt(0)!=="#"&&(n="#"+n),o&&o.charAt(0)!=="?"&&(o="?"+o),t=t.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),o=o.replace("#","%23"),r+i+t+o+n};function urlResolve(e,r){return urlParse(e,!1,!0).resolve(r)}Url.prototype.resolve=function(e){return this.resolveObject(urlParse(e,!1,!0)).format()};Url.prototype.resolveObject=function(e){if(util$4.isString(e)){var r=new Url;r.parse(e,!1,!0),e=r}for(var t=new Url,n=Object.keys(this),i=0;i<n.length;i++){var s=n[i];t[s]=this[s]}if(t.hash=e.hash,e.href==="")return t.href=t.format(),t;if(e.slashes&&!e.protocol){for(var o=Object.keys(e),a=0;a<o.length;a++){var u=o[a];u!=="protocol"&&(t[u]=e[u])}return slashedProtocol[t.protocol]&&t.hostname&&!t.pathname&&(t.path=t.pathname="/"),t.href=t.format(),t}if(e.protocol&&e.protocol!==t.protocol){if(!slashedProtocol[e.protocol]){for(var l=Object.keys(e),h=0;h<l.length;h++){var f=l[h];t[f]=e[f]}return t.href=t.format(),t}if(t.protocol=e.protocol,!e.host&&!hostlessProtocol[e.protocol]){for(var C=(e.pathname||"").split("/");C.length&&!(e.host=C.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),C[0]!==""&&C.unshift(""),C.length<2&&C.unshift(""),t.pathname=C.join("/")}else t.pathname=e.pathname;if(t.search=e.search,t.query=e.query,t.host=e.host||"",t.auth=e.auth,t.hostname=e.hostname||e.host,t.port=e.port,t.pathname||t.search){var d=t.pathname||"",_=t.search||"";t.path=d+_}return t.slashes=t.slashes||e.slashes,t.href=t.format(),t}var v=t.pathname&&t.pathname.charAt(0)==="/",m=e.host||e.pathname&&e.pathname.charAt(0)==="/",E=m||v||t.host&&e.pathname,A=E,T=t.pathname&&t.pathname.split("/")||[],C=e.pathname&&e.pathname.split("/")||[],R=t.protocol&&!slashedProtocol[t.protocol];if(R&&(t.hostname="",t.port=null,t.host&&(T[0]===""?T[0]=t.host:T.unshift(t.host)),t.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(C[0]===""?C[0]=e.host:C.unshift(e.host)),e.host=null),E=E&&(C[0]===""||T[0]==="")),m)t.host=e.host||e.host===""?e.host:t.host,t.hostname=e.hostname||e.hostname===""?e.hostname:t.hostname,t.search=e.search,t.query=e.query,T=C;else if(C.length)T||(T=[]),T.pop(),T=T.concat(C),t.search=e.search,t.query=e.query;else if(!util$4.isNullOrUndefined(e.search)){if(R){t.hostname=t.host=T.shift();var b=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;b&&(t.auth=b.shift(),t.host=t.hostname=b.shift())}return t.search=e.search,t.query=e.query,(!util$4.isNull(t.pathname)||!util$4.isNull(t.search))&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t}if(!T.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var S=T.slice(-1)[0],B=(t.host||e.host||T.length>1)&&(S==="."||S==="..")||S==="",M=0,D=T.length;D>=0;D--)S=T[D],S==="."?T.splice(D,1):S===".."?(T.splice(D,1),M++):M&&(T.splice(D,1),M--);if(!E&&!A)for(;M--;M)T.unshift("..");E&&T[0]!==""&&(!T[0]||T[0].charAt(0)!=="/")&&T.unshift(""),B&&T.join("/").substr(-1)!=="/"&&T.push("");var G=T[0]===""||T[0]&&T[0].charAt(0)==="/";if(R){t.hostname=t.host=G?"":T.length?T.shift():"";var b=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;b&&(t.auth=b.shift(),t.host=t.hostname=b.shift())}return E=E||t.host&&T.length,E&&!G&&T.unshift(""),T.length?t.pathname=T.join("/"):(t.pathname=null,t.path=null),(!util$4.isNull(t.pathname)||!util$4.isNull(t.search))&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=e.auth||t.auth,t.slashes=t.slashes||e.slashes,t.href=t.format(),t};Url.prototype.parseHost=function(){var e=this.host,r=portPattern.exec(e);r&&(r=r[0],r!==":"&&(this.port=r.substr(1)),e=e.substr(0,e.length-r.length)),e&&(this.hostname=e)};/*!
 * @pixi/constants - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ENV$5;(function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"})(ENV$5||(ENV$5={}));var RENDERER_TYPE$5;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"})(RENDERER_TYPE$5||(RENDERER_TYPE$5={}));var BUFFER_BITS$5;(function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"})(BUFFER_BITS$5||(BUFFER_BITS$5={}));var BLEND_MODES$5;(function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"})(BLEND_MODES$5||(BLEND_MODES$5={}));var DRAW_MODES$5;(function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(DRAW_MODES$5||(DRAW_MODES$5={}));var FORMATS$5;(function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(FORMATS$5||(FORMATS$5={}));var TARGETS$5;(function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(TARGETS$5||(TARGETS$5={}));var TYPES$5;(function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"})(TYPES$5||(TYPES$5={}));var SAMPLER_TYPES$5;(function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"})(SAMPLER_TYPES$5||(SAMPLER_TYPES$5={}));var SCALE_MODES$5;(function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"})(SCALE_MODES$5||(SCALE_MODES$5={}));var WRAP_MODES$5;(function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(WRAP_MODES$5||(WRAP_MODES$5={}));var MIPMAP_MODES$5;(function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"})(MIPMAP_MODES$5||(MIPMAP_MODES$5={}));var ALPHA_MODES$5;(function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(ALPHA_MODES$5||(ALPHA_MODES$5={}));var CLEAR_MODES$5;(function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"})(CLEAR_MODES$5||(CLEAR_MODES$5={}));var GC_MODES$5;(function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"})(GC_MODES$5||(GC_MODES$5={}));var PRECISION$5;(function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"})(PRECISION$5||(PRECISION$5={}));var MASK_TYPES$5;(function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE",e[e.COLOR=4]="COLOR"})(MASK_TYPES$5||(MASK_TYPES$5={}));var COLOR_MASK_BITS$5;(function(e){e[e.RED=1]="RED",e[e.GREEN=2]="GREEN",e[e.BLUE=4]="BLUE",e[e.ALPHA=8]="ALPHA"})(COLOR_MASK_BITS$5||(COLOR_MASK_BITS$5={}));var MSAA_QUALITY$5;(function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"})(MSAA_QUALITY$5||(MSAA_QUALITY$5={}));var BUFFER_TYPE$5;(function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(BUFFER_TYPE$5||(BUFFER_TYPE$5={}));/*!
 * @pixi/utils - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var url={parse,format,resolve};settings$1.RETINA_PREFIX=/@([0-9\.]+)x/;settings$1.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var saidHello=!1,VERSION$2="6.5.3";function sayHello(e){var r;if(!saidHello){if(settings$1.ADAPTER.getNavigator().userAgent.toLowerCase().indexOf("chrome")>-1){var t=[`
 %c %c %c PixiJS `+VERSION$2+" - \u2730 "+e+` \u2730  %c  %c  http://www.pixijs.com/  %c %c \u2665%c\u2665%c\u2665 

`,"background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(r=globalThis.console).log.apply(r,t)}else globalThis.console&&globalThis.console.log("PixiJS "+VERSION$2+" - "+e+" - http://www.pixijs.com/");saidHello=!0}}var supported;function isWebGLSupported(){return typeof supported>"u"&&(supported=function(){var r={stencil:!0,failIfMajorPerformanceCaveat:settings$1.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!settings$1.ADAPTER.getWebGLRenderingContext())return!1;var t=settings$1.ADAPTER.createCanvas(),n=t.getContext("webgl",r)||t.getContext("experimental-webgl",r),i=!!(n&&n.getContextAttributes().stencil);if(n){var s=n.getExtension("WEBGL_lose_context");s&&s.loseContext()}return n=null,i}catch{return!1}}()),supported}var aliceblue="#f0f8ff",antiquewhite="#faebd7",aqua="#00ffff",aquamarine="#7fffd4",azure="#f0ffff",beige="#f5f5dc",bisque="#ffe4c4",black="#000000",blanchedalmond="#ffebcd",blue="#0000ff",blueviolet="#8a2be2",brown="#a52a2a",burlywood="#deb887",cadetblue="#5f9ea0",chartreuse="#7fff00",chocolate="#d2691e",coral="#ff7f50",cornflowerblue="#6495ed",cornsilk="#fff8dc",crimson="#dc143c",cyan="#00ffff",darkblue="#00008b",darkcyan="#008b8b",darkgoldenrod="#b8860b",darkgray="#a9a9a9",darkgreen="#006400",darkgrey="#a9a9a9",darkkhaki="#bdb76b",darkmagenta="#8b008b",darkolivegreen="#556b2f",darkorange="#ff8c00",darkorchid="#9932cc",darkred="#8b0000",darksalmon="#e9967a",darkseagreen="#8fbc8f",darkslateblue="#483d8b",darkslategray="#2f4f4f",darkslategrey="#2f4f4f",darkturquoise="#00ced1",darkviolet="#9400d3",deeppink="#ff1493",deepskyblue="#00bfff",dimgray="#696969",dimgrey="#696969",dodgerblue="#1e90ff",firebrick="#b22222",floralwhite="#fffaf0",forestgreen="#228b22",fuchsia="#ff00ff",gainsboro="#dcdcdc",ghostwhite="#f8f8ff",goldenrod="#daa520",gold="#ffd700",gray="#808080",green="#008000",greenyellow="#adff2f",grey="#808080",honeydew="#f0fff0",hotpink="#ff69b4",indianred="#cd5c5c",indigo="#4b0082",ivory="#fffff0",khaki="#f0e68c",lavenderblush="#fff0f5",lavender="#e6e6fa",lawngreen="#7cfc00",lemonchiffon="#fffacd",lightblue="#add8e6",lightcoral="#f08080",lightcyan="#e0ffff",lightgoldenrodyellow="#fafad2",lightgray="#d3d3d3",lightgreen="#90ee90",lightgrey="#d3d3d3",lightpink="#ffb6c1",lightsalmon="#ffa07a",lightseagreen="#20b2aa",lightskyblue="#87cefa",lightslategray="#778899",lightslategrey="#778899",lightsteelblue="#b0c4de",lightyellow="#ffffe0",lime="#00ff00",limegreen="#32cd32",linen="#faf0e6",magenta="#ff00ff",maroon="#800000",mediumaquamarine="#66cdaa",mediumblue="#0000cd",mediumorchid="#ba55d3",mediumpurple="#9370db",mediumseagreen="#3cb371",mediumslateblue="#7b68ee",mediumspringgreen="#00fa9a",mediumturquoise="#48d1cc",mediumvioletred="#c71585",midnightblue="#191970",mintcream="#f5fffa",mistyrose="#ffe4e1",moccasin="#ffe4b5",navajowhite="#ffdead",navy="#000080",oldlace="#fdf5e6",olive="#808000",olivedrab="#6b8e23",orange="#ffa500",orangered="#ff4500",orchid="#da70d6",palegoldenrod="#eee8aa",palegreen="#98fb98",paleturquoise="#afeeee",palevioletred="#db7093",papayawhip="#ffefd5",peachpuff="#ffdab9",peru="#cd853f",pink="#ffc0cb",plum="#dda0dd",powderblue="#b0e0e6",purple="#800080",rebeccapurple="#663399",red="#ff0000",rosybrown="#bc8f8f",royalblue="#4169e1",saddlebrown="#8b4513",salmon="#fa8072",sandybrown="#f4a460",seagreen="#2e8b57",seashell="#fff5ee",sienna="#a0522d",silver="#c0c0c0",skyblue="#87ceeb",slateblue="#6a5acd",slategray="#708090",slategrey="#708090",snow="#fffafa",springgreen="#00ff7f",steelblue="#4682b4",tan="#d2b48c",teal="#008080",thistle="#d8bfd8",tomato="#ff6347",turquoise="#40e0d0",violet="#ee82ee",wheat="#f5deb3",white="#ffffff",whitesmoke="#f5f5f5",yellow="#ffff00",yellowgreen="#9acd32",cssColorNames={aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,goldenrod,gold,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavenderblush,lavender,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow,yellowgreen};function hex2rgb(e,r){return r===void 0&&(r=[]),r[0]=(e>>16&255)/255,r[1]=(e>>8&255)/255,r[2]=(e&255)/255,r}function hex2string(e){var r=e.toString(16);return r="000000".substring(0,6-r.length)+r,"#"+r}function string2hex(e){return typeof e=="string"&&(e=cssColorNames[e.toLowerCase()]||e,e[0]==="#"&&(e=e.slice(1))),parseInt(e,16)}function mapPremultipliedBlendModes$1(){for(var e=[],r=[],t=0;t<32;t++)e[t]=t,r[t]=t;e[BLEND_MODES$5.NORMAL_NPM]=BLEND_MODES$5.NORMAL,e[BLEND_MODES$5.ADD_NPM]=BLEND_MODES$5.ADD,e[BLEND_MODES$5.SCREEN_NPM]=BLEND_MODES$5.SCREEN,r[BLEND_MODES$5.NORMAL]=BLEND_MODES$5.NORMAL_NPM,r[BLEND_MODES$5.ADD]=BLEND_MODES$5.ADD_NPM,r[BLEND_MODES$5.SCREEN]=BLEND_MODES$5.SCREEN_NPM;var n=[];return n.push(r),n.push(e),n}var premultiplyBlendMode=mapPremultipliedBlendModes$1();function correctBlendMode(e,r){return premultiplyBlendMode[r?1:0][e]}function premultiplyRgba(e,r,t,n){return t=t||new Float32Array(4),n||n===void 0?(t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r):(t[0]=e[0],t[1]=e[1],t[2]=e[2]),t[3]=r,t}function premultiplyTint(e,r){if(r===1)return(r*255<<24)+e;if(r===0)return 0;var t=e>>16&255,n=e>>8&255,i=e&255;return t=t*r+.5|0,n=n*r+.5|0,i=i*r+.5|0,(r*255<<24)+(t<<16)+(n<<8)+i}function premultiplyTintToRgba(e,r,t,n){return t=t||new Float32Array(4),t[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(e&255)/255,(n||n===void 0)&&(t[0]*=r,t[1]*=r,t[2]*=r),t[3]=r,t}function createIndicesForQuads(e,r){r===void 0&&(r=null);var t=e*6;if(r=r||new Uint16Array(t),r.length!==t)throw new Error("Out buffer length is incorrect, got "+r.length+" and expected "+t);for(var n=0,i=0;n<t;n+=6,i+=4)r[n+0]=i+0,r[n+1]=i+1,r[n+2]=i+2,r[n+3]=i+0,r[n+4]=i+2,r[n+5]=i+3;return r}function getBufferType(e){if(e.BYTES_PER_ELEMENT===4)return e instanceof Float32Array?"Float32Array":e instanceof Uint32Array?"Uint32Array":"Int32Array";if(e.BYTES_PER_ELEMENT===2){if(e instanceof Uint16Array)return"Uint16Array"}else if(e.BYTES_PER_ELEMENT===1&&e instanceof Uint8Array)return"Uint8Array";return null}function nextPow2(e){return e+=e===0?1:0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1}function isPow2(e){return!(e&e-1)&&!!e}function log2(e){var r=(e>65535?1:0)<<4;e>>>=r;var t=(e>255?1:0)<<3;return e>>>=t,r|=t,t=(e>15?1:0)<<2,e>>>=t,r|=t,t=(e>3?1:0)<<1,e>>>=t,r|=t,r|e>>1}function removeItems(e,r,t){var n=e.length,i;if(!(r>=n||t===0)){t=r+t>n?n-r:t;var s=n-t;for(i=r;i<s;++i)e[i]=e[i+t];e.length=s}}function sign(e){return e===0?0:e<0?-1:1}var nextUid=0;function uid(){return++nextUid}var warnings$1={};function deprecation$1(e,r,t){if(t===void 0&&(t=3),!warnings$1[r]){var n=new Error().stack;typeof n>"u"?console.warn("PixiJS Deprecation Warning: ",r+`
Deprecated since v`+e):(n=n.split(`
`).splice(t).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",r+`
Deprecated since v`+e),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",r+`
Deprecated since v`+e),console.warn(n))),warnings$1[r]=!0}}var ProgramCache={},TextureCache=Object.create(null),BaseTextureCache=Object.create(null),CanvasRenderTarget=function(){function e(r,t,n){this.canvas=settings$1.ADAPTER.createCanvas(),this.context=this.canvas.getContext("2d"),this.resolution=n||settings$1.RESOLUTION,this.resize(r,t)}return e.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},e.prototype.resize=function(r,t){this.canvas.width=Math.round(r*this.resolution),this.canvas.height=Math.round(t*this.resolution)},e.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.canvas.width},set:function(r){this.canvas.width=Math.round(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.canvas.height},set:function(r){this.canvas.height=Math.round(r)},enumerable:!1,configurable:!0}),e}();function trimCanvas(e){var r=e.width,t=e.height,n=e.getContext("2d"),i=n.getImageData(0,0,r,t),s=i.data,o=s.length,a={top:null,left:null,right:null,bottom:null},u=null,l,h,f;for(l=0;l<o;l+=4)s[l+3]!==0&&(h=l/4%r,f=~~(l/4/r),a.top===null&&(a.top=f),(a.left===null||h<a.left)&&(a.left=h),(a.right===null||a.right<h)&&(a.right=h+1),(a.bottom===null||a.bottom<f)&&(a.bottom=f));return a.top!==null&&(r=a.right-a.left,t=a.bottom-a.top+1,u=n.getImageData(a.left,a.top,r,t)),{height:t,width:r,data:u}}var tempAnchor$1;function determineCrossOrigin(e,r){if(r===void 0&&(r=globalThis.location),e.indexOf("data:")===0)return"";r=r||globalThis.location,tempAnchor$1||(tempAnchor$1=document.createElement("a")),tempAnchor$1.href=e;var t=url.parse(tempAnchor$1.href),n=!t.port&&r.port===""||t.port===r.port;return t.hostname!==r.hostname||!n||t.protocol!==r.protocol?"anonymous":""}function getResolutionOfUrl(e,r){var t=settings$1.RETINA_PREFIX.exec(e);return t?parseFloat(t[1]):r!==void 0?r:1}/*!
 * @pixi/math - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var PI_2=Math.PI*2,RAD_TO_DEG=180/Math.PI,DEG_TO_RAD=Math.PI/180,SHAPES;(function(e){e[e.POLY=0]="POLY",e[e.RECT=1]="RECT",e[e.CIRC=2]="CIRC",e[e.ELIP=3]="ELIP",e[e.RREC=4]="RREC"})(SHAPES||(SHAPES={}));var Point=function(){function e(r,t){r===void 0&&(r=0),t===void 0&&(t=0),this.x=0,this.y=0,this.x=r,this.y=t}return e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.copyFrom=function(r){return this.set(r.x,r.y),this},e.prototype.copyTo=function(r){return r.set(this.x,this.y),r},e.prototype.equals=function(r){return r.x===this.x&&r.y===this.y},e.prototype.set=function(r,t){return r===void 0&&(r=0),t===void 0&&(t=r),this.x=r,this.y=t,this},e.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},e}(),tempPoints$1=[new Point,new Point,new Point,new Point],Rectangle=function(){function e(r,t,n,i){r===void 0&&(r=0),t===void 0&&(t=0),n===void 0&&(n=0),i===void 0&&(i=0),this.x=Number(r),this.y=Number(t),this.width=Number(n),this.height=Number(i),this.type=SHAPES.RECT}return Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(e,"EMPTY",{get:function(){return new e(0,0,0,0)},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copyFrom=function(r){return this.x=r.x,this.y=r.y,this.width=r.width,this.height=r.height,this},e.prototype.copyTo=function(r){return r.x=this.x,r.y=this.y,r.width=this.width,r.height=this.height,r},e.prototype.contains=function(r,t){return this.width<=0||this.height<=0?!1:r>=this.x&&r<this.x+this.width&&t>=this.y&&t<this.y+this.height},e.prototype.intersects=function(r,t){if(!t){var n=this.x<r.x?r.x:this.x,i=this.right>r.right?r.right:this.right;if(i<=n)return!1;var s=this.y<r.y?r.y:this.y,o=this.bottom>r.bottom?r.bottom:this.bottom;return o>s}var a=this.left,u=this.right,l=this.top,h=this.bottom;if(u<=a||h<=l)return!1;var f=tempPoints$1[0].set(r.left,r.top),d=tempPoints$1[1].set(r.left,r.bottom),_=tempPoints$1[2].set(r.right,r.top),v=tempPoints$1[3].set(r.right,r.bottom);if(_.x<=f.x||d.y<=f.y)return!1;var m=Math.sign(t.a*t.d-t.b*t.c);if(m===0||(t.apply(f,f),t.apply(d,d),t.apply(_,_),t.apply(v,v),Math.max(f.x,d.x,_.x,v.x)<=a||Math.min(f.x,d.x,_.x,v.x)>=u||Math.max(f.y,d.y,_.y,v.y)<=l||Math.min(f.y,d.y,_.y,v.y)>=h))return!1;var E=m*(d.y-f.y),A=m*(f.x-d.x),T=E*a+A*l,C=E*u+A*l,R=E*a+A*h,b=E*u+A*h;if(Math.max(T,C,R,b)<=E*f.x+A*f.y||Math.min(T,C,R,b)>=E*v.x+A*v.y)return!1;var S=m*(f.y-_.y),B=m*(_.x-f.x),M=S*a+B*l,D=S*u+B*l,G=S*a+B*h,J=S*u+B*h;return!(Math.max(M,D,G,J)<=S*f.x+B*f.y||Math.min(M,D,G,J)>=S*v.x+B*v.y)},e.prototype.pad=function(r,t){return r===void 0&&(r=0),t===void 0&&(t=r),this.x-=r,this.y-=t,this.width+=r*2,this.height+=t*2,this},e.prototype.fit=function(r){var t=Math.max(this.x,r.x),n=Math.min(this.x+this.width,r.x+r.width),i=Math.max(this.y,r.y),s=Math.min(this.y+this.height,r.y+r.height);return this.x=t,this.width=Math.max(n-t,0),this.y=i,this.height=Math.max(s-i,0),this},e.prototype.ceil=function(r,t){r===void 0&&(r=1),t===void 0&&(t=.001);var n=Math.ceil((this.x+this.width-t)*r)/r,i=Math.ceil((this.y+this.height-t)*r)/r;return this.x=Math.floor((this.x+t)*r)/r,this.y=Math.floor((this.y+t)*r)/r,this.width=n-this.x,this.height=i-this.y,this},e.prototype.enlarge=function(r){var t=Math.min(this.x,r.x),n=Math.max(this.x+this.width,r.x+r.width),i=Math.min(this.y,r.y),s=Math.max(this.y+this.height,r.y+r.height);return this.x=t,this.width=n-t,this.y=i,this.height=s-i,this},e.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},e}(),Circle=function(){function e(r,t,n){r===void 0&&(r=0),t===void 0&&(t=0),n===void 0&&(n=0),this.x=r,this.y=t,this.radius=n,this.type=SHAPES.CIRC}return e.prototype.clone=function(){return new e(this.x,this.y,this.radius)},e.prototype.contains=function(r,t){if(this.radius<=0)return!1;var n=this.radius*this.radius,i=this.x-r,s=this.y-t;return i*=i,s*=s,i+s<=n},e.prototype.getBounds=function(){return new Rectangle(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)},e.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},e}(),Ellipse=function(){function e(r,t,n,i){r===void 0&&(r=0),t===void 0&&(t=0),n===void 0&&(n=0),i===void 0&&(i=0),this.x=r,this.y=t,this.width=n,this.height=i,this.type=SHAPES.ELIP}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.contains=function(r,t){if(this.width<=0||this.height<=0)return!1;var n=(r-this.x)/this.width,i=(t-this.y)/this.height;return n*=n,i*=i,n+i<=1},e.prototype.getBounds=function(){return new Rectangle(this.x-this.width,this.y-this.height,this.width,this.height)},e.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},e}(),Polygon=function(){function e(){for(var r=arguments,t=[],n=0;n<arguments.length;n++)t[n]=r[n];var i=Array.isArray(t[0])?t[0]:t;if(typeof i[0]!="number"){for(var s=[],o=0,a=i.length;o<a;o++)s.push(i[o].x,i[o].y);i=s}this.points=i,this.type=SHAPES.POLY,this.closeStroke=!0}return e.prototype.clone=function(){var r=this.points.slice(),t=new e(r);return t.closeStroke=this.closeStroke,t},e.prototype.contains=function(r,t){for(var n=!1,i=this.points.length/2,s=0,o=i-1;s<i;o=s++){var a=this.points[s*2],u=this.points[s*2+1],l=this.points[o*2],h=this.points[o*2+1],f=u>t!=h>t&&r<(l-a)*((t-u)/(h-u))+a;f&&(n=!n)}return n},e.prototype.toString=function(){return"[@pixi/math:Polygon"+("closeStroke="+this.closeStroke)+("points="+this.points.reduce(function(r,t){return r+", "+t},"")+"]")},e}(),RoundedRectangle=function(){function e(r,t,n,i,s){r===void 0&&(r=0),t===void 0&&(t=0),n===void 0&&(n=0),i===void 0&&(i=0),s===void 0&&(s=20),this.x=r,this.y=t,this.width=n,this.height=i,this.radius=s,this.type=SHAPES.RREC}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height,this.radius)},e.prototype.contains=function(r,t){if(this.width<=0||this.height<=0)return!1;if(r>=this.x&&r<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){var n=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+n&&t<=this.y+this.height-n||r>=this.x+n&&r<=this.x+this.width-n)return!0;var i=r-(this.x+n),s=t-(this.y+n),o=n*n;if(i*i+s*s<=o||(i=r-(this.x+this.width-n),i*i+s*s<=o)||(s=t-(this.y+this.height-n),i*i+s*s<=o)||(i=r-(this.x+n),i*i+s*s<=o))return!0}return!1},e.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+("width="+this.width+" height="+this.height+" radius="+this.radius+"]")},e}(),ObservablePoint=function(){function e(r,t,n,i){n===void 0&&(n=0),i===void 0&&(i=0),this._x=n,this._y=i,this.cb=r,this.scope=t}return e.prototype.clone=function(r,t){return r===void 0&&(r=this.cb),t===void 0&&(t=this.scope),new e(r,t,this._x,this._y)},e.prototype.set=function(r,t){return r===void 0&&(r=0),t===void 0&&(t=r),(this._x!==r||this._y!==t)&&(this._x=r,this._y=t,this.cb.call(this.scope)),this},e.prototype.copyFrom=function(r){return(this._x!==r.x||this._y!==r.y)&&(this._x=r.x,this._y=r.y,this.cb.call(this.scope)),this},e.prototype.copyTo=function(r){return r.set(this._x,this._y),r},e.prototype.equals=function(r){return r.x===this._x&&r.y===this._y},e.prototype.toString=function(){return"[@pixi/math:ObservablePoint x="+0+" y="+0+" scope="+this.scope+"]"},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(r){this._x!==r&&(this._x=r,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(r){this._y!==r&&(this._y=r,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),e}(),Matrix=function(){function e(r,t,n,i,s,o){r===void 0&&(r=1),t===void 0&&(t=0),n===void 0&&(n=0),i===void 0&&(i=1),s===void 0&&(s=0),o===void 0&&(o=0),this.array=null,this.a=r,this.b=t,this.c=n,this.d=i,this.tx=s,this.ty=o}return e.prototype.fromArray=function(r){this.a=r[0],this.b=r[1],this.c=r[3],this.d=r[4],this.tx=r[2],this.ty=r[5]},e.prototype.set=function(r,t,n,i,s,o){return this.a=r,this.b=t,this.c=n,this.d=i,this.tx=s,this.ty=o,this},e.prototype.toArray=function(r,t){this.array||(this.array=new Float32Array(9));var n=t||this.array;return r?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n},e.prototype.apply=function(r,t){t=t||new Point;var n=r.x,i=r.y;return t.x=this.a*n+this.c*i+this.tx,t.y=this.b*n+this.d*i+this.ty,t},e.prototype.applyInverse=function(r,t){t=t||new Point;var n=1/(this.a*this.d+this.c*-this.b),i=r.x,s=r.y;return t.x=this.d*n*i+-this.c*n*s+(this.ty*this.c-this.tx*this.d)*n,t.y=this.a*n*s+-this.b*n*i+(-this.ty*this.a+this.tx*this.b)*n,t},e.prototype.translate=function(r,t){return this.tx+=r,this.ty+=t,this},e.prototype.scale=function(r,t){return this.a*=r,this.d*=t,this.c*=r,this.b*=t,this.tx*=r,this.ty*=t,this},e.prototype.rotate=function(r){var t=Math.cos(r),n=Math.sin(r),i=this.a,s=this.c,o=this.tx;return this.a=i*t-this.b*n,this.b=i*n+this.b*t,this.c=s*t-this.d*n,this.d=s*n+this.d*t,this.tx=o*t-this.ty*n,this.ty=o*n+this.ty*t,this},e.prototype.append=function(r){var t=this.a,n=this.b,i=this.c,s=this.d;return this.a=r.a*t+r.b*i,this.b=r.a*n+r.b*s,this.c=r.c*t+r.d*i,this.d=r.c*n+r.d*s,this.tx=r.tx*t+r.ty*i+this.tx,this.ty=r.tx*n+r.ty*s+this.ty,this},e.prototype.setTransform=function(r,t,n,i,s,o,a,u,l){return this.a=Math.cos(a+l)*s,this.b=Math.sin(a+l)*s,this.c=-Math.sin(a-u)*o,this.d=Math.cos(a-u)*o,this.tx=r-(n*this.a+i*this.c),this.ty=t-(n*this.b+i*this.d),this},e.prototype.prepend=function(r){var t=this.tx;if(r.a!==1||r.b!==0||r.c!==0||r.d!==1){var n=this.a,i=this.c;this.a=n*r.a+this.b*r.c,this.b=n*r.b+this.b*r.d,this.c=i*r.a+this.d*r.c,this.d=i*r.b+this.d*r.d}return this.tx=t*r.a+this.ty*r.c+r.tx,this.ty=t*r.b+this.ty*r.d+r.ty,this},e.prototype.decompose=function(r){var t=this.a,n=this.b,i=this.c,s=this.d,o=r.pivot,a=-Math.atan2(-i,s),u=Math.atan2(n,t),l=Math.abs(a+u);return l<1e-5||Math.abs(PI_2-l)<1e-5?(r.rotation=u,r.skew.x=r.skew.y=0):(r.rotation=0,r.skew.x=a,r.skew.y=u),r.scale.x=Math.sqrt(t*t+n*n),r.scale.y=Math.sqrt(i*i+s*s),r.position.x=this.tx+(o.x*t+o.y*i),r.position.y=this.ty+(o.x*n+o.y*s),r},e.prototype.invert=function(){var r=this.a,t=this.b,n=this.c,i=this.d,s=this.tx,o=r*i-t*n;return this.a=i/o,this.b=-t/o,this.c=-n/o,this.d=r/o,this.tx=(n*this.ty-i*s)/o,this.ty=-(r*this.ty-t*s)/o,this},e.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},e.prototype.clone=function(){var r=new e;return r.a=this.a,r.b=this.b,r.c=this.c,r.d=this.d,r.tx=this.tx,r.ty=this.ty,r},e.prototype.copyTo=function(r){return r.a=this.a,r.b=this.b,r.c=this.c,r.d=this.d,r.tx=this.tx,r.ty=this.ty,r},e.prototype.copyFrom=function(r){return this.a=r.a,this.b=r.b,this.c=r.c,this.d=r.d,this.tx=r.tx,this.ty=r.ty,this},e.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(e,"IDENTITY",{get:function(){return new e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"TEMP_MATRIX",{get:function(){return new e},enumerable:!1,configurable:!0}),e}(),ux=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],uy=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],vx=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],vy=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],rotationCayley=[],rotationMatrices=[],signum=Math.sign;function init(){for(var e=0;e<16;e++){var r=[];rotationCayley.push(r);for(var t=0;t<16;t++)for(var n=signum(ux[e]*ux[t]+vx[e]*uy[t]),i=signum(uy[e]*ux[t]+vy[e]*uy[t]),s=signum(ux[e]*vx[t]+vx[e]*vy[t]),o=signum(uy[e]*vx[t]+vy[e]*vy[t]),a=0;a<16;a++)if(ux[a]===n&&uy[a]===i&&vx[a]===s&&vy[a]===o){r.push(a);break}}for(var e=0;e<16;e++){var u=new Matrix;u.set(ux[e],uy[e],vx[e],vy[e],0,0),rotationMatrices.push(u)}}init();var groupD8={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(e){return ux[e]},uY:function(e){return uy[e]},vX:function(e){return vx[e]},vY:function(e){return vy[e]},inv:function(e){return e&8?e&15:-e&7},add:function(e,r){return rotationCayley[e][r]},sub:function(e,r){return rotationCayley[e][groupD8.inv(r)]},rotate180:function(e){return e^4},isVertical:function(e){return(e&3)===2},byDirection:function(e,r){return Math.abs(e)*2<=Math.abs(r)?r>=0?groupD8.S:groupD8.N:Math.abs(r)*2<=Math.abs(e)?e>0?groupD8.E:groupD8.W:r>0?e>0?groupD8.SE:groupD8.SW:e>0?groupD8.NE:groupD8.NW},matrixAppendRotationInv:function(e,r,t,n){t===void 0&&(t=0),n===void 0&&(n=0);var i=rotationMatrices[groupD8.inv(r)];i.tx=t,i.ty=n,e.append(i)}},Transform=function(){function e(){this.worldTransform=new Matrix,this.localTransform=new Matrix,this.position=new ObservablePoint(this.onChange,this,0,0),this.scale=new ObservablePoint(this.onChange,this,1,1),this.pivot=new ObservablePoint(this.onChange,this,0,0),this.skew=new ObservablePoint(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return e.prototype.onChange=function(){this._localID++},e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},e.prototype.toString=function(){return"[@pixi/math:Transform "+("position=("+this.position.x+", "+this.position.y+") ")+("rotation="+this.rotation+" ")+("scale=("+this.scale.x+", "+this.scale.y+") ")+("skew=("+this.skew.x+", "+this.skew.y+") ")+"]"},e.prototype.updateLocalTransform=function(){var r=this.localTransform;this._localID!==this._currentLocalID&&(r.a=this._cx*this.scale.x,r.b=this._sx*this.scale.x,r.c=this._cy*this.scale.y,r.d=this._sy*this.scale.y,r.tx=this.position.x-(this.pivot.x*r.a+this.pivot.y*r.c),r.ty=this.position.y-(this.pivot.x*r.b+this.pivot.y*r.d),this._currentLocalID=this._localID,this._parentID=-1)},e.prototype.updateTransform=function(r){var t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==r._worldID){var n=r.worldTransform,i=this.worldTransform;i.a=t.a*n.a+t.b*n.c,i.b=t.a*n.b+t.b*n.d,i.c=t.c*n.a+t.d*n.c,i.d=t.c*n.b+t.d*n.d,i.tx=t.tx*n.a+t.ty*n.c+n.tx,i.ty=t.tx*n.b+t.ty*n.d+n.ty,this._parentID=r._worldID,this._worldID++}},e.prototype.setFromMatrix=function(r){r.decompose(this),this._localID++},Object.defineProperty(e.prototype,"rotation",{get:function(){return this._rotation},set:function(r){this._rotation!==r&&(this._rotation=r,this.updateSkew())},enumerable:!1,configurable:!0}),e.IDENTITY=new e,e}();/*!
 * @pixi/display - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */settings$1.SORTABLE_CHILDREN=!1;var Bounds=function(){function e(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return e.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},e.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},e.prototype.getRectangle=function(r){return this.minX>this.maxX||this.minY>this.maxY?Rectangle.EMPTY:(r=r||new Rectangle(0,0,1,1),r.x=this.minX,r.y=this.minY,r.width=this.maxX-this.minX,r.height=this.maxY-this.minY,r)},e.prototype.addPoint=function(r){this.minX=Math.min(this.minX,r.x),this.maxX=Math.max(this.maxX,r.x),this.minY=Math.min(this.minY,r.y),this.maxY=Math.max(this.maxY,r.y)},e.prototype.addPointMatrix=function(r,t){var n=r.a,i=r.b,s=r.c,o=r.d,a=r.tx,u=r.ty,l=n*t.x+s*t.y+a,h=i*t.x+o*t.y+u;this.minX=Math.min(this.minX,l),this.maxX=Math.max(this.maxX,l),this.minY=Math.min(this.minY,h),this.maxY=Math.max(this.maxY,h)},e.prototype.addQuad=function(r){var t=this.minX,n=this.minY,i=this.maxX,s=this.maxY,o=r[0],a=r[1];t=o<t?o:t,n=a<n?a:n,i=o>i?o:i,s=a>s?a:s,o=r[2],a=r[3],t=o<t?o:t,n=a<n?a:n,i=o>i?o:i,s=a>s?a:s,o=r[4],a=r[5],t=o<t?o:t,n=a<n?a:n,i=o>i?o:i,s=a>s?a:s,o=r[6],a=r[7],t=o<t?o:t,n=a<n?a:n,i=o>i?o:i,s=a>s?a:s,this.minX=t,this.minY=n,this.maxX=i,this.maxY=s},e.prototype.addFrame=function(r,t,n,i,s){this.addFrameMatrix(r.worldTransform,t,n,i,s)},e.prototype.addFrameMatrix=function(r,t,n,i,s){var o=r.a,a=r.b,u=r.c,l=r.d,h=r.tx,f=r.ty,d=this.minX,_=this.minY,v=this.maxX,m=this.maxY,E=o*t+u*n+h,A=a*t+l*n+f;d=E<d?E:d,_=A<_?A:_,v=E>v?E:v,m=A>m?A:m,E=o*i+u*n+h,A=a*i+l*n+f,d=E<d?E:d,_=A<_?A:_,v=E>v?E:v,m=A>m?A:m,E=o*t+u*s+h,A=a*t+l*s+f,d=E<d?E:d,_=A<_?A:_,v=E>v?E:v,m=A>m?A:m,E=o*i+u*s+h,A=a*i+l*s+f,d=E<d?E:d,_=A<_?A:_,v=E>v?E:v,m=A>m?A:m,this.minX=d,this.minY=_,this.maxX=v,this.maxY=m},e.prototype.addVertexData=function(r,t,n){for(var i=this.minX,s=this.minY,o=this.maxX,a=this.maxY,u=t;u<n;u+=2){var l=r[u],h=r[u+1];i=l<i?l:i,s=h<s?h:s,o=l>o?l:o,a=h>a?h:a}this.minX=i,this.minY=s,this.maxX=o,this.maxY=a},e.prototype.addVertices=function(r,t,n,i){this.addVerticesMatrix(r.worldTransform,t,n,i)},e.prototype.addVerticesMatrix=function(r,t,n,i,s,o){s===void 0&&(s=0),o===void 0&&(o=s);for(var a=r.a,u=r.b,l=r.c,h=r.d,f=r.tx,d=r.ty,_=this.minX,v=this.minY,m=this.maxX,E=this.maxY,A=n;A<i;A+=2){var T=t[A],C=t[A+1],R=a*T+l*C+f,b=h*C+u*T+d;_=Math.min(_,R-s),m=Math.max(m,R+s),v=Math.min(v,b-o),E=Math.max(E,b+o)}this.minX=_,this.minY=v,this.maxX=m,this.maxY=E},e.prototype.addBounds=function(r){var t=this.minX,n=this.minY,i=this.maxX,s=this.maxY;this.minX=r.minX<t?r.minX:t,this.minY=r.minY<n?r.minY:n,this.maxX=r.maxX>i?r.maxX:i,this.maxY=r.maxY>s?r.maxY:s},e.prototype.addBoundsMask=function(r,t){var n=r.minX>t.minX?r.minX:t.minX,i=r.minY>t.minY?r.minY:t.minY,s=r.maxX<t.maxX?r.maxX:t.maxX,o=r.maxY<t.maxY?r.maxY:t.maxY;if(n<=s&&i<=o){var a=this.minX,u=this.minY,l=this.maxX,h=this.maxY;this.minX=n<a?n:a,this.minY=i<u?i:u,this.maxX=s>l?s:l,this.maxY=o>h?o:h}},e.prototype.addBoundsMatrix=function(r,t){this.addFrameMatrix(t,r.minX,r.minY,r.maxX,r.maxY)},e.prototype.addBoundsArea=function(r,t){var n=r.minX>t.x?r.minX:t.x,i=r.minY>t.y?r.minY:t.y,s=r.maxX<t.x+t.width?r.maxX:t.x+t.width,o=r.maxY<t.y+t.height?r.maxY:t.y+t.height;if(n<=s&&i<=o){var a=this.minX,u=this.minY,l=this.maxX,h=this.maxY;this.minX=n<a?n:a,this.minY=i<u?i:u,this.maxX=s>l?s:l,this.maxY=o>h?o:h}},e.prototype.pad=function(r,t){r===void 0&&(r=0),t===void 0&&(t=r),this.isEmpty()||(this.minX-=r,this.maxX+=r,this.minY-=t,this.maxY+=t)},e.prototype.addFramePad=function(r,t,n,i,s,o){r-=s,t-=o,n+=s,i+=o,this.minX=this.minX<r?this.minX:r,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<t?this.minY:t,this.maxY=this.maxY>i?this.maxY:i},e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$j=function(e,r){return extendStatics$j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},extendStatics$j(e,r)};function __extends$j(e,r){extendStatics$j(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var DisplayObject=function(e){__extends$j(r,e);function r(){var t=e.call(this)||this;return t.tempDisplayObjectParent=null,t.transform=new Transform,t.alpha=1,t.visible=!0,t.renderable=!0,t.cullable=!1,t.cullArea=null,t.parent=null,t.worldAlpha=1,t._lastSortedIndex=0,t._zIndex=0,t.filterArea=null,t.filters=null,t._enabledFilters=null,t._bounds=new Bounds,t._localBounds=null,t._boundsID=0,t._boundsRect=null,t._localBoundsRect=null,t._mask=null,t._maskRefCount=0,t._destroyed=!1,t.isSprite=!1,t.isMask=!1,t}return r.mixin=function(t){for(var n=Object.keys(t),i=0;i<n.length;++i){var s=n[i];Object.defineProperty(r.prototype,s,Object.getOwnPropertyDescriptor(t,s))}},Object.defineProperty(r.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),r.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},r.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},r.prototype.getBounds=function(t,n){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),n||(this._boundsRect||(this._boundsRect=new Rectangle),n=this._boundsRect),this._bounds.getRectangle(n)},r.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new Rectangle),t=this._localBoundsRect),this._localBounds||(this._localBounds=new Bounds);var n=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var s=this._bounds,o=this._boundsID;this._bounds=this._localBounds;var a=this.getBounds(!1,t);return this.parent=i,this.transform=n,this._bounds=s,this._bounds.updateID+=this._boundsID-o,a},r.prototype.toGlobal=function(t,n,i){return i===void 0&&(i=!1),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,n)},r.prototype.toLocal=function(t,n,i,s){return n&&(t=n.toGlobal(t,i,s)),s||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,i)},r.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},r.prototype.setTransform=function(t,n,i,s,o,a,u,l,h){return t===void 0&&(t=0),n===void 0&&(n=0),i===void 0&&(i=1),s===void 0&&(s=1),o===void 0&&(o=0),a===void 0&&(a=0),u===void 0&&(u=0),l===void 0&&(l=0),h===void 0&&(h=0),this.position.x=t,this.position.y=n,this.scale.x=i||1,this.scale.y=s||1,this.rotation=o,this.skew.x=a,this.skew.y=u,this.pivot.x=l,this.pivot.y=h,this},r.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()},Object.defineProperty(r.prototype,"_tempDisplayObjectParent",{get:function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new TemporaryDisplayObject),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),r.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},r.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(r.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"angle",{get:function(){return this.transform.rotation*RAD_TO_DEG},set:function(t){this.transform.rotation=t*DEG_TO_RAD},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mask",{get:function(){return this._mask},set:function(t){if(this._mask!==t){if(this._mask){var n=this._mask.isMaskData?this._mask.maskObject:this._mask;n&&(n._maskRefCount--,n._maskRefCount===0&&(n.renderable=!0,n.isMask=!1))}if(this._mask=t,this._mask){var n=this._mask.isMaskData?this._mask.maskObject:this._mask;n&&(n._maskRefCount===0&&(n.renderable=!1,n.isMask=!0),n._maskRefCount++)}}},enumerable:!1,configurable:!0}),r}(EventEmitter),TemporaryDisplayObject=function(e){__extends$j(r,e);function r(){var t=e!==null&&e.apply(this,arguments)||this;return t.sortDirty=null,t}return r}(DisplayObject);DisplayObject.prototype.displayObjectUpdateTransform=DisplayObject.prototype.updateTransform;/*!
 * @pixi/constants - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ENV$4;(function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"})(ENV$4||(ENV$4={}));var RENDERER_TYPE$4;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"})(RENDERER_TYPE$4||(RENDERER_TYPE$4={}));var BUFFER_BITS$4;(function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"})(BUFFER_BITS$4||(BUFFER_BITS$4={}));var BLEND_MODES$4;(function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"})(BLEND_MODES$4||(BLEND_MODES$4={}));var DRAW_MODES$4;(function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(DRAW_MODES$4||(DRAW_MODES$4={}));var FORMATS$4;(function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(FORMATS$4||(FORMATS$4={}));var TARGETS$4;(function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(TARGETS$4||(TARGETS$4={}));var TYPES$4;(function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"})(TYPES$4||(TYPES$4={}));var SAMPLER_TYPES$4;(function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"})(SAMPLER_TYPES$4||(SAMPLER_TYPES$4={}));var SCALE_MODES$4;(function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"})(SCALE_MODES$4||(SCALE_MODES$4={}));var WRAP_MODES$4;(function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(WRAP_MODES$4||(WRAP_MODES$4={}));var MIPMAP_MODES$4;(function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"})(MIPMAP_MODES$4||(MIPMAP_MODES$4={}));var ALPHA_MODES$4;(function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(ALPHA_MODES$4||(ALPHA_MODES$4={}));var CLEAR_MODES$4;(function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"})(CLEAR_MODES$4||(CLEAR_MODES$4={}));var GC_MODES$4;(function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"})(GC_MODES$4||(GC_MODES$4={}));var PRECISION$4;(function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"})(PRECISION$4||(PRECISION$4={}));var MASK_TYPES$4;(function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE",e[e.COLOR=4]="COLOR"})(MASK_TYPES$4||(MASK_TYPES$4={}));var COLOR_MASK_BITS$4;(function(e){e[e.RED=1]="RED",e[e.GREEN=2]="GREEN",e[e.BLUE=4]="BLUE",e[e.ALPHA=8]="ALPHA"})(COLOR_MASK_BITS$4||(COLOR_MASK_BITS$4={}));var MSAA_QUALITY$4;(function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"})(MSAA_QUALITY$4||(MSAA_QUALITY$4={}));var BUFFER_TYPE$4;(function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(BUFFER_TYPE$4||(BUFFER_TYPE$4={}));function sortChildren(e,r){return e.zIndex===r.zIndex?e._lastSortedIndex-r._lastSortedIndex:e.zIndex-r.zIndex}var Container=function(e){__extends$j(r,e);function r(){var t=e.call(this)||this;return t.children=[],t.sortableChildren=settings$1.SORTABLE_CHILDREN,t.sortDirty=!1,t}return r.prototype.onChildrenChange=function(t){},r.prototype.addChild=function(){for(var t=arguments,n=[],i=0;i<arguments.length;i++)n[i]=t[i];if(n.length>1)for(var s=0;s<n.length;s++)this.addChild(n[s]);else{var o=n[0];o.parent&&o.parent.removeChild(o),o.parent=this,this.sortDirty=!0,o.transform._parentID=-1,this.children.push(o),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",o,this,this.children.length-1),o.emit("added",this)}return n[0]},r.prototype.addChildAt=function(t,n){if(n<0||n>this.children.length)throw new Error(t+"addChildAt: The index "+n+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(n,0,t),this._boundsID++,this.onChildrenChange(n),t.emit("added",this),this.emit("childAdded",t,this,n),t},r.prototype.swapChildren=function(t,n){if(t!==n){var i=this.getChildIndex(t),s=this.getChildIndex(n);this.children[i]=n,this.children[s]=t,this.onChildrenChange(i<s?i:s)}},r.prototype.getChildIndex=function(t){var n=this.children.indexOf(t);if(n===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return n},r.prototype.setChildIndex=function(t,n){if(n<0||n>=this.children.length)throw new Error("The index "+n+" supplied is out of bounds "+this.children.length);var i=this.getChildIndex(t);removeItems(this.children,i,1),this.children.splice(n,0,t),this.onChildrenChange(n)},r.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},r.prototype.removeChild=function(){for(var t=arguments,n=[],i=0;i<arguments.length;i++)n[i]=t[i];if(n.length>1)for(var s=0;s<n.length;s++)this.removeChild(n[s]);else{var o=n[0],a=this.children.indexOf(o);if(a===-1)return null;o.parent=null,o.transform._parentID=-1,removeItems(this.children,a,1),this._boundsID++,this.onChildrenChange(a),o.emit("removed",this),this.emit("childRemoved",o,this,a)}return n[0]},r.prototype.removeChildAt=function(t){var n=this.getChildAt(t);return n.parent=null,n.transform._parentID=-1,removeItems(this.children,t,1),this._boundsID++,this.onChildrenChange(t),n.emit("removed",this),this.emit("childRemoved",n,this,t),n},r.prototype.removeChildren=function(t,n){t===void 0&&(t=0),n===void 0&&(n=this.children.length);var i=t,s=n,o=s-i,a;if(o>0&&o<=s){a=this.children.splice(i,o);for(var u=0;u<a.length;++u)a[u].parent=null,a[u].transform&&(a[u].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(var u=0;u<a.length;++u)a[u].emit("removed",this),this.emit("childRemoved",a[u],this,u);return a}else if(o===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},r.prototype.sortChildren=function(){for(var t=!1,n=0,i=this.children.length;n<i;++n){var s=this.children[n];s._lastSortedIndex=n,!t&&s.zIndex!==0&&(t=!0)}t&&this.children.length>1&&this.children.sort(sortChildren),this.sortDirty=!1},r.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,n=this.children.length;t<n;++t){var i=this.children[t];i.visible&&i.updateTransform()}},r.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var n=this.children[t];if(!(!n.visible||!n.renderable))if(n.calculateBounds(),n._mask){var i=n._mask.isMaskData?n._mask.maskObject:n._mask;i?(i.calculateBounds(),this._bounds.addBoundsMask(n._bounds,i._bounds)):this._bounds.addBounds(n._bounds)}else n.filterArea?this._bounds.addBoundsArea(n._bounds,n.filterArea):this._bounds.addBounds(n._bounds)}this._bounds.updateID=this._boundsID},r.prototype.getLocalBounds=function(t,n){n===void 0&&(n=!1);var i=e.prototype.getLocalBounds.call(this,t);if(!n)for(var s=0,o=this.children.length;s<o;++s){var a=this.children[s];a.visible&&a.updateTransform()}return i},r.prototype._calculateBounds=function(){},r.prototype._renderWithCulling=function(t){var n=t.renderTexture.sourceFrame;if(n.width>0&&n.height>0){var i,s;if(this.cullArea?(i=this.cullArea,s=this.worldTransform):this._render!==r.prototype._render&&(i=this.getBounds(!0)),i&&n.intersects(i,s))this._render(t);else if(this.cullArea)return;for(var o=0,a=this.children.length;o<a;++o){var u=this.children[o],l=u.cullable;u.cullable=l||!this.cullArea,u.render(t),u.cullable=l}}},r.prototype.render=function(t){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else if(this.cullable)this._renderWithCulling(t);else{this._render(t);for(var n=0,i=this.children.length;n<i;++n)this.children[n].render(t)}},r.prototype.renderAdvanced=function(t){var n=this.filters,i=this._mask;if(n){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var s=0;s<n.length;s++)n[s].enabled&&this._enabledFilters.push(n[s])}var o=n&&this._enabledFilters&&this._enabledFilters.length||i&&(!i.isMaskData||i.enabled&&(i.autoDetect||i.type!==MASK_TYPES$4.NONE));if(o&&t.batch.flush(),n&&this._enabledFilters&&this._enabledFilters.length&&t.filter.push(this,this._enabledFilters),i&&t.mask.push(this,this._mask),this.cullable)this._renderWithCulling(t);else{this._render(t);for(var s=0,a=this.children.length;s<a;++s)this.children[s].render(t)}o&&t.batch.flush(),i&&t.mask.pop(this),n&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},r.prototype._render=function(t){},r.prototype.destroy=function(t){e.prototype.destroy.call(this),this.sortDirty=!1;var n=typeof t=="boolean"?t:t&&t.children,i=this.removeChildren(0,this.children.length);if(n)for(var s=0;s<i.length;++s)i[s].destroy(t)},Object.defineProperty(r.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var n=this.getLocalBounds().width;n!==0?this.scale.x=t/n:this.scale.x=1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var n=this.getLocalBounds().height;n!==0?this.scale.y=t/n:this.scale.y=1,this._height=t},enumerable:!1,configurable:!0}),r}(DisplayObject);Container.prototype.containerUpdateTransform=Container.prototype.updateTransform;/*!
 * @pixi/extensions - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/extensions is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var __assign$1=function(){return __assign$1=Object.assign||function(r){for(var t=arguments,n,i=1,s=arguments.length;i<s;i++){n=t[i];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])}return r},__assign$1.apply(this,arguments)},ExtensionType;(function(e){e.Application="application",e.RendererPlugin="renderer-webgl-plugin",e.CanvasRendererPlugin="renderer-canvas-plugin",e.Loader="loader",e.LoadParser="load-parser",e.ResolveParser="resolve-parser",e.CacheParser="cache-parser",e.DetectionParser="detection-parser"})(ExtensionType||(ExtensionType={}));var normalizeExtension=function(e){if(typeof e=="function"||typeof e=="object"&&e.extension){if(!e.extension)throw new Error("Extension class must have an extension object");var r=typeof e.extension!="object"?{type:e.extension}:e.extension;e=__assign$1(__assign$1({},r),{ref:e})}if(typeof e=="object")e=__assign$1({},e);else throw new Error("Invalid extension type");return typeof e.type=="string"&&(e.type=[e.type]),e},extensions={_addHandlers:null,_removeHandlers:null,_queue:{},remove:function(){for(var e=arguments,r=this,t=[],n=0;n<arguments.length;n++)t[n]=e[n];return t.map(normalizeExtension).forEach(function(i){i.type.forEach(function(s){var o,a;return(a=(o=r._removeHandlers)[s])===null||a===void 0?void 0:a.call(o,i)})}),this},add:function(){for(var e=arguments,r=this,t=[],n=0;n<arguments.length;n++)t[n]=e[n];return t.map(normalizeExtension).forEach(function(i){i.type.forEach(function(s){var o=r._addHandlers,a=r._queue;o[s]?o[s](i):(a[s]=a[s]||[],a[s].push(i))})}),this},handle:function(e,r,t){var n=this._addHandlers=this._addHandlers||{},i=this._removeHandlers=this._removeHandlers||{};if(n[e]||i[e])throw new Error("Extension type "+e+" already has a handler");n[e]=r,i[e]=t;var s=this._queue;return s[e]&&(s[e].forEach(function(o){return r(o)}),delete s[e]),this},handleByMap:function(e,r){return this.handle(e,function(t){r[t.name]=t.ref},function(t){delete r[t.name]})},handleByList:function(e,r){return this.handle(e,function(t){var n,i;r.push(t.ref),e===ExtensionType.Loader&&((i=(n=t.ref).add)===null||i===void 0||i.call(n))},function(t){var n=r.indexOf(t.ref);n!==-1&&r.splice(n,1)})}};/*!
 * @pixi/runner - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/runner is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Runner=function(){function e(r){this.items=[],this._name=r,this._aliasCount=0}return e.prototype.emit=function(r,t,n,i,s,o,a,u){if(arguments.length>8)throw new Error("max arguments reached");var l=this,h=l.name,f=l.items;this._aliasCount++;for(var d=0,_=f.length;d<_;d++)f[d][h](r,t,n,i,s,o,a,u);return f===this.items&&this._aliasCount--,this},e.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},e.prototype.add=function(r){return r[this._name]&&(this.ensureNonAliasedItems(),this.remove(r),this.items.push(r)),this},e.prototype.remove=function(r){var t=this.items.indexOf(r);return t!==-1&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this},e.prototype.contains=function(r){return this.items.indexOf(r)!==-1},e.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},e.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(e.prototype,"empty",{get:function(){return this.items.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),e}();Object.defineProperties(Runner.prototype,{dispatch:{value:Runner.prototype.emit},run:{value:Runner.prototype.emit}});/*!
 * @pixi/ticker - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */settings$1.TARGET_FPMS=.06;var UPDATE_PRIORITY;(function(e){e[e.INTERACTION=50]="INTERACTION",e[e.HIGH=25]="HIGH",e[e.NORMAL=0]="NORMAL",e[e.LOW=-25]="LOW",e[e.UTILITY=-50]="UTILITY"})(UPDATE_PRIORITY||(UPDATE_PRIORITY={}));var TickerListener=function(){function e(r,t,n,i){t===void 0&&(t=null),n===void 0&&(n=0),i===void 0&&(i=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=r,this.context=t,this.priority=n,this.once=i}return e.prototype.match=function(r,t){return t===void 0&&(t=null),this.fn===r&&this.context===t},e.prototype.emit=function(r){this.fn&&(this.context?this.fn.call(this.context,r):this.fn(r));var t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},e.prototype.connect=function(r){this.previous=r,r.next&&(r.next.previous=this),this.next=r.next,r.next=this},e.prototype.destroy=function(r){r===void 0&&(r=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var t=this.next;return this.next=r?null:t,this.previous=null,t},e}(),Ticker=function(){function e(){var r=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new TickerListener(null,null,1/0),this.deltaMS=1/settings$1.TARGET_FPMS,this.elapsedMS=1/settings$1.TARGET_FPMS,this._tick=function(t){r._requestId=null,r.started&&(r.update(t),r.started&&r._requestId===null&&r._head.next&&(r._requestId=requestAnimationFrame(r._tick)))}}return e.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},e.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},e.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},e.prototype.add=function(r,t,n){return n===void 0&&(n=UPDATE_PRIORITY.NORMAL),this._addListener(new TickerListener(r,t,n))},e.prototype.addOnce=function(r,t,n){return n===void 0&&(n=UPDATE_PRIORITY.NORMAL),this._addListener(new TickerListener(r,t,n,!0))},e.prototype._addListener=function(r){var t=this._head.next,n=this._head;if(!t)r.connect(n);else{for(;t;){if(r.priority>t.priority){r.connect(n);break}n=t,t=t.next}r.previous||r.connect(n)}return this._startIfPossible(),this},e.prototype.remove=function(r,t){for(var n=this._head.next;n;)n.match(r,t)?n=n.destroy():n=n.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(e.prototype,"count",{get:function(){if(!this._head)return 0;for(var r=0,t=this._head;t=t.next;)r++;return r},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},e.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},e.prototype.destroy=function(){if(!this._protected){this.stop();for(var r=this._head.next;r;)r=r.destroy(!0);this._head.destroy(),this._head=null}},e.prototype.update=function(r){r===void 0&&(r=performance.now());var t;if(r>this.lastTime){if(t=this.elapsedMS=r-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){var n=r-this._lastFrame|0;if(n<this._minElapsedMS)return;this._lastFrame=r-n%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*settings$1.TARGET_FPMS;for(var i=this._head,s=i.next;s;)s=s.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=r},Object.defineProperty(e.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(r){var t=Math.min(this.maxFPS,r),n=Math.min(Math.max(0,t)/1e3,settings$1.TARGET_FPMS);this._maxElapsedMS=1/n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(r){if(r===0)this._minElapsedMS=0;else{var t=Math.max(this.minFPS,r);this._minElapsedMS=1/(t/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"shared",{get:function(){if(!e._shared){var r=e._shared=new e;r.autoStart=!0,r._protected=!0}return e._shared},enumerable:!1,configurable:!0}),Object.defineProperty(e,"system",{get:function(){if(!e._system){var r=e._system=new e;r.autoStart=!0,r._protected=!0}return e._system},enumerable:!1,configurable:!0}),e}(),TickerPlugin=function(){function e(){}return e.init=function(r){var t=this;r=Object.assign({autoStart:!0,sharedTicker:!1},r),Object.defineProperty(this,"ticker",{set:function(n){this._ticker&&this._ticker.remove(this.render,this),this._ticker=n,n&&n.add(this.render,this,UPDATE_PRIORITY.LOW)},get:function(){return this._ticker}}),this.stop=function(){t._ticker.stop()},this.start=function(){t._ticker.start()},this._ticker=null,this.ticker=r.sharedTicker?Ticker.shared:new Ticker,r.autoStart&&this.start()},e.destroy=function(){if(this._ticker){var r=this._ticker;this.ticker=null,r.destroy()}},e.extension=ExtensionType.Application,e}();/*!
 * @pixi/core - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */settings$1.PREFER_ENV=isMobile$2.any?ENV$5.WEBGL:ENV$5.WEBGL2;settings$1.STRICT_TEXTURE_CACHE=!1;var INSTALLED=[];function autoDetectResource(e,r){if(!e)return null;var t="";if(typeof e=="string"){var n=/\.(\w{3,4})(?:$|\?|#)/i.exec(e);n&&(t=n[1].toLowerCase())}for(var i=INSTALLED.length-1;i>=0;--i){var s=INSTALLED[i];if(s.test&&s.test(e,t))return new s(e,r)}throw new Error("Unrecognized source type to auto-detect Resource")}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$i=function(e,r){return extendStatics$i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},extendStatics$i(e,r)};function __extends$i(e,r){extendStatics$i(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var __assign=function(){return __assign=Object.assign||function(r){for(var t=arguments,n,i=1,s=arguments.length;i<s;i++){n=t[i];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])}return r},__assign.apply(this,arguments)};function __rest(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(t[n[i]]=e[n[i]]);return t}var Resource=function(){function e(r,t){r===void 0&&(r=0),t===void 0&&(t=0),this._width=r,this._height=t,this.destroyed=!1,this.internal=!1,this.onResize=new Runner("setRealSize"),this.onUpdate=new Runner("update"),this.onError=new Runner("onError")}return e.prototype.bind=function(r){this.onResize.add(r),this.onUpdate.add(r),this.onError.add(r),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},e.prototype.unbind=function(r){this.onResize.remove(r),this.onUpdate.remove(r),this.onError.remove(r)},e.prototype.resize=function(r,t){(r!==this._width||t!==this._height)&&(this._width=r,this._height=t,this.onResize.emit(r,t))},Object.defineProperty(e.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),e.prototype.update=function(){this.destroyed||this.onUpdate.emit()},e.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),e.prototype.style=function(r,t,n){return!1},e.prototype.dispose=function(){},e.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},e.test=function(r,t){return!1},e}(),BufferResource=function(e){__extends$i(r,e);function r(t,n){var i=this,s=n||{},o=s.width,a=s.height;if(!o||!a)throw new Error("BufferResource width or height invalid");return i=e.call(this,o,a)||this,i.data=t,i}return r.prototype.upload=function(t,n,i){var s=t.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===ALPHA_MODES$5.UNPACK);var o=n.realWidth,a=n.realHeight;return i.width===o&&i.height===a?s.texSubImage2D(n.target,0,0,0,o,a,n.format,i.type,this.data):(i.width=o,i.height=a,s.texImage2D(n.target,0,i.internalFormat,o,a,0,n.format,i.type,this.data)),!0},r.prototype.dispose=function(){this.data=null},r.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},r}(Resource),defaultBufferOptions={scaleMode:SCALE_MODES$5.NEAREST,format:FORMATS$5.RGBA,alphaMode:ALPHA_MODES$5.NPM},BaseTexture=function(e){__extends$i(r,e);function r(t,n){t===void 0&&(t=null),n===void 0&&(n=null);var i=e.call(this)||this;n=n||{};var s=n.alphaMode,o=n.mipmap,a=n.anisotropicLevel,u=n.scaleMode,l=n.width,h=n.height,f=n.wrapMode,d=n.format,_=n.type,v=n.target,m=n.resolution,E=n.resourceOptions;return t&&!(t instanceof Resource)&&(t=autoDetectResource(t,E),t.internal=!0),i.resolution=m||settings$1.RESOLUTION,i.width=Math.round((l||0)*i.resolution)/i.resolution,i.height=Math.round((h||0)*i.resolution)/i.resolution,i._mipmap=o!==void 0?o:settings$1.MIPMAP_TEXTURES,i.anisotropicLevel=a!==void 0?a:settings$1.ANISOTROPIC_LEVEL,i._wrapMode=f||settings$1.WRAP_MODE,i._scaleMode=u!==void 0?u:settings$1.SCALE_MODE,i.format=d||FORMATS$5.RGBA,i.type=_||TYPES$5.UNSIGNED_BYTE,i.target=v||TARGETS$5.TEXTURE_2D,i.alphaMode=s!==void 0?s:ALPHA_MODES$5.UNPACK,i.uid=uid(),i.touched=0,i.isPowerOfTwo=!1,i._refreshPOT(),i._glTextures={},i.dirtyId=0,i.dirtyStyleId=0,i.cacheId=null,i.valid=l>0&&h>0,i.textureCacheIds=[],i.destroyed=!1,i.resource=null,i._batchEnabled=0,i._batchLocation=0,i.parentTextureArray=null,i.setResource(t),i}return Object.defineProperty(r.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mipmap",{get:function(){return this._mipmap},set:function(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),r.prototype.setStyle=function(t,n){var i;return t!==void 0&&t!==this.scaleMode&&(this.scaleMode=t,i=!0),n!==void 0&&n!==this.mipmap&&(this.mipmap=n,i=!0),i&&this.dirtyStyleId++,this},r.prototype.setSize=function(t,n,i){return i=i||this.resolution,this.setRealSize(t*i,n*i,i)},r.prototype.setRealSize=function(t,n,i){return this.resolution=i||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(n)/this.resolution,this._refreshPOT(),this.update(),this},r.prototype._refreshPOT=function(){this.isPowerOfTwo=isPow2(this.realWidth)&&isPow2(this.realHeight)},r.prototype.setResolution=function(t){var n=this.resolution;return n===t?this:(this.resolution=t,this.valid&&(this.width=Math.round(this.width*n)/t,this.height=Math.round(this.height*n)/t,this.emit("update",this)),this._refreshPOT(),this)},r.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},r.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},r.prototype.onError=function(t){this.emit("error",this,t)},r.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete BaseTextureCache[this.cacheId],delete TextureCache[this.cacheId],this.cacheId=null),this.dispose(),r.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},r.prototype.dispose=function(){this.emit("dispose",this)},r.prototype.castToBaseTexture=function(){return this},r.from=function(t,n,i){i===void 0&&(i=settings$1.STRICT_TEXTURE_CACHE);var s=typeof t=="string",o=null;if(s)o=t;else{if(!t._pixiId){var a=n&&n.pixiIdPrefix||"pixiid";t._pixiId=a+"_"+uid()}o=t._pixiId}var u=BaseTextureCache[o];if(s&&i&&!u)throw new Error('The cacheId "'+o+'" does not exist in BaseTextureCache.');return u||(u=new r(t,n),u.cacheId=o,r.addToCache(u,o)),u},r.fromBuffer=function(t,n,i,s){t=t||new Float32Array(n*i*4);var o=new BufferResource(t,{width:n,height:i}),a=t instanceof Float32Array?TYPES$5.FLOAT:TYPES$5.UNSIGNED_BYTE;return new r(o,Object.assign(defaultBufferOptions,s||{width:n,height:i,type:a}))},r.addToCache=function(t,n){n&&(t.textureCacheIds.indexOf(n)===-1&&t.textureCacheIds.push(n),BaseTextureCache[n]&&console.warn("BaseTexture added to the cache with an id ["+n+"] that already had an entry"),BaseTextureCache[n]=t)},r.removeFromCache=function(t){if(typeof t=="string"){var n=BaseTextureCache[t];if(n){var i=n.textureCacheIds.indexOf(t);return i>-1&&n.textureCacheIds.splice(i,1),delete BaseTextureCache[t],n}}else if(t&&t.textureCacheIds){for(var s=0;s<t.textureCacheIds.length;++s)delete BaseTextureCache[t.textureCacheIds[s]];return t.textureCacheIds.length=0,t}return null},r._globalBatch=0,r}(EventEmitter),AbstractMultiResource=function(e){__extends$i(r,e);function r(t,n){var i=this,s=n||{},o=s.width,a=s.height;i=e.call(this,o,a)||this,i.items=[],i.itemDirtyIds=[];for(var u=0;u<t;u++){var l=new BaseTexture;i.items.push(l),i.itemDirtyIds.push(-2)}return i.length=t,i._load=null,i.baseTexture=null,i}return r.prototype.initFromArray=function(t,n){for(var i=0;i<this.length;i++)!t[i]||(t[i].castToBaseTexture?this.addBaseTextureAt(t[i].castToBaseTexture(),i):t[i]instanceof Resource?this.addResourceAt(t[i],i):this.addResourceAt(autoDetectResource(t[i],n),i))},r.prototype.dispose=function(){for(var t=0,n=this.length;t<n;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},r.prototype.addResourceAt=function(t,n){if(!this.items[n])throw new Error("Index "+n+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[n].setResource(t),this},r.prototype.bind=function(t){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");e.prototype.bind.call(this,t);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=t,this.items[n].on("update",t.update,t)},r.prototype.unbind=function(t){e.prototype.unbind.call(this,t);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=null,this.items[n].off("update",t.update,t)},r.prototype.load=function(){var t=this;if(this._load)return this._load;var n=this.items.map(function(s){return s.resource}).filter(function(s){return s}),i=n.map(function(s){return s.load()});return this._load=Promise.all(i).then(function(){var s=t.items[0],o=s.realWidth,a=s.realHeight;return t.resize(o,a),Promise.resolve(t)}),this._load},r}(Resource),ArrayResource=function(e){__extends$i(r,e);function r(t,n){var i=this,s=n||{},o=s.width,a=s.height,u,l;return Array.isArray(t)?(u=t,l=t.length):l=t,i=e.call(this,l,{width:o,height:a})||this,u&&i.initFromArray(u,n),i}return r.prototype.addBaseTextureAt=function(t,n){if(t.resource)this.addResourceAt(t.resource,n);else throw new Error("ArrayResource does not support RenderTexture");return this},r.prototype.bind=function(t){e.prototype.bind.call(this,t),t.target=TARGETS$5.TEXTURE_2D_ARRAY},r.prototype.upload=function(t,n,i){var s=this,o=s.length,a=s.itemDirtyIds,u=s.items,l=t.gl;i.dirtyId<0&&l.texImage3D(l.TEXTURE_2D_ARRAY,0,i.internalFormat,this._width,this._height,o,0,n.format,i.type,null);for(var h=0;h<o;h++){var f=u[h];a[h]<f.dirtyId&&(a[h]=f.dirtyId,f.valid&&l.texSubImage3D(l.TEXTURE_2D_ARRAY,0,0,0,h,f.resource.width,f.resource.height,1,n.format,i.type,f.resource.source))}return!0},r}(AbstractMultiResource),BaseImageResource=function(e){__extends$i(r,e);function r(t){var n=this,i=t,s=i.naturalWidth||i.videoWidth||i.width,o=i.naturalHeight||i.videoHeight||i.height;return n=e.call(this,s,o)||this,n.source=t,n.noSubImage=!1,n}return r.crossOrigin=function(t,n,i){i===void 0&&n.indexOf("data:")!==0?t.crossOrigin=determineCrossOrigin(n):i!==!1&&(t.crossOrigin=typeof i=="string"?i:"anonymous")},r.prototype.upload=function(t,n,i,s){var o=t.gl,a=n.realWidth,u=n.realHeight;if(s=s||this.source,s instanceof HTMLImageElement){if(!s.complete||s.naturalWidth===0)return!1}else if(s instanceof HTMLVideoElement&&s.readyState<=1)return!1;return o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===ALPHA_MODES$5.UNPACK),!this.noSubImage&&n.target===o.TEXTURE_2D&&i.width===a&&i.height===u?o.texSubImage2D(o.TEXTURE_2D,0,0,0,n.format,i.type,s):(i.width=a,i.height=u,o.texImage2D(n.target,0,i.internalFormat,n.format,i.type,s)),!0},r.prototype.update=function(){if(!this.destroyed){var t=this.source,n=t.naturalWidth||t.videoWidth||t.width,i=t.naturalHeight||t.videoHeight||t.height;this.resize(n,i),e.prototype.update.call(this)}},r.prototype.dispose=function(){this.source=null},r}(Resource),CanvasResource=function(e){__extends$i(r,e);function r(t){return e.call(this,t)||this}return r.test=function(t){var n=globalThis.OffscreenCanvas;return n&&t instanceof n?!0:globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement},r}(BaseImageResource),CubeResource=function(e){__extends$i(r,e);function r(t,n){var i=this,s=n||{},o=s.width,a=s.height,u=s.autoLoad,l=s.linkBaseTexture;if(t&&t.length!==r.SIDES)throw new Error("Invalid length. Got "+t.length+", expected 6");i=e.call(this,6,{width:o,height:a})||this;for(var h=0;h<r.SIDES;h++)i.items[h].target=TARGETS$5.TEXTURE_CUBE_MAP_POSITIVE_X+h;return i.linkBaseTexture=l!==!1,t&&i.initFromArray(t,n),u!==!1&&i.load(),i}return r.prototype.bind=function(t){e.prototype.bind.call(this,t),t.target=TARGETS$5.TEXTURE_CUBE_MAP},r.prototype.addBaseTextureAt=function(t,n,i){if(!this.items[n])throw new Error("Index "+n+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0)if(t.resource)this.addResourceAt(t.resource,n);else throw new Error("CubeResource does not support copying of renderTexture.");else t.target=TARGETS$5.TEXTURE_CUBE_MAP_POSITIVE_X+n,t.parentTextureArray=this.baseTexture,this.items[n]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[n]=t,this},r.prototype.upload=function(t,n,i){for(var s=this.itemDirtyIds,o=0;o<r.SIDES;o++){var a=this.items[o];(s[o]<a.dirtyId||i.dirtyId<n.dirtyId)&&(a.valid&&a.resource?(a.resource.upload(t,a,i),s[o]=a.dirtyId):s[o]<-1&&(t.gl.texImage2D(a.target,0,i.internalFormat,n.realWidth,n.realHeight,0,n.format,i.type,null),s[o]=-1))}return!0},r.test=function(t){return Array.isArray(t)&&t.length===r.SIDES},r.SIDES=6,r}(AbstractMultiResource),ImageResource=function(e){__extends$i(r,e);function r(t,n){var i=this;if(n=n||{},!(t instanceof HTMLImageElement)){var s=new Image;BaseImageResource.crossOrigin(s,t,n.crossorigin),s.src=t,t=s}return i=e.call(this,t)||this,!t.complete&&!!i._width&&!!i._height&&(i._width=0,i._height=0),i.url=t.src,i._process=null,i.preserveBitmap=!1,i.createBitmap=(n.createBitmap!==void 0?n.createBitmap:settings$1.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,i.alphaMode=typeof n.alphaMode=="number"?n.alphaMode:null,i.bitmap=null,i._load=null,n.autoLoad!==!1&&i.load(),i}return r.prototype.load=function(t){var n=this;return this._load?this._load:(t!==void 0&&(this.createBitmap=t),this._load=new Promise(function(i,s){var o=n.source;n.url=o.src;var a=function(){n.destroyed||(o.onload=null,o.onerror=null,n.resize(o.width,o.height),n._load=null,n.createBitmap?i(n.process()):i(n))};o.complete&&o.src?a():(o.onload=a,o.onerror=function(u){s(u),n.onError.emit(u)})}),this._load)},r.prototype.process=function(){var t=this,n=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);var i=globalThis.createImageBitmap,s=!n.crossOrigin||n.crossOrigin==="anonymous";return this._process=fetch(n.src,{mode:s?"cors":"no-cors"}).then(function(o){return o.blob()}).then(function(o){return i(o,0,0,n.width,n.height,{premultiplyAlpha:t.alphaMode===ALPHA_MODES$5.UNPACK?"premultiply":"none"})}).then(function(o){return t.destroyed?Promise.reject():(t.bitmap=o,t.update(),t._process=null,Promise.resolve(t))}),this._process},r.prototype.upload=function(t,n,i){if(typeof this.alphaMode=="number"&&(n.alphaMode=this.alphaMode),!this.createBitmap)return e.prototype.upload.call(this,t,n,i);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(e.prototype.upload.call(this,t,n,i,this.bitmap),!this.preserveBitmap){var s=!0,o=n._glTextures;for(var a in o){var u=o[a];if(u!==i&&u.dirtyId!==n.dirtyId){s=!1;break}}s&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},r.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,e.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},r.test=function(t){return typeof t=="string"||t instanceof HTMLImageElement},r}(BaseImageResource),SVGResource=function(e){__extends$i(r,e);function r(t,n){var i=this;return n=n||{},i=e.call(this,settings$1.ADAPTER.createCanvas())||this,i._width=0,i._height=0,i.svg=t,i.scale=n.scale||1,i._overrideWidth=n.width,i._overrideHeight=n.height,i._resolve=null,i._crossorigin=n.crossorigin,i._load=null,n.autoLoad!==!1&&i.load(),i}return r.prototype.load=function(){var t=this;return this._load?this._load:(this._load=new Promise(function(n){if(t._resolve=function(){t.resize(t.source.width,t.source.height),n(t)},r.SVG_XML.test(t.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");t.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t.svg)))}t._loadSvg()}),this._load)},r.prototype._loadSvg=function(){var t=this,n=new Image;BaseImageResource.crossOrigin(n,this.svg,this._crossorigin),n.src=this.svg,n.onerror=function(i){!t._resolve||(n.onerror=null,t.onError.emit(i))},n.onload=function(){if(!!t._resolve){var i=n.width,s=n.height;if(!i||!s)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var o=i*t.scale,a=s*t.scale;(t._overrideWidth||t._overrideHeight)&&(o=t._overrideWidth||t._overrideHeight/s*i,a=t._overrideHeight||t._overrideWidth/i*s),o=Math.round(o),a=Math.round(a);var u=t.source;u.width=o,u.height=a,u._pixiId="canvas_"+uid(),u.getContext("2d").drawImage(n,0,0,i,s,0,0,o,a),t._resolve(),t._resolve=null}}},r.getSize=function(t){var n=r.SVG_SIZE.exec(t),i={};return n&&(i[n[1]]=Math.round(parseFloat(n[3])),i[n[5]]=Math.round(parseFloat(n[7]))),i},r.prototype.dispose=function(){e.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},r.test=function(t,n){return n==="svg"||typeof t=="string"&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(t)||typeof t=="string"&&r.SVG_XML.test(t)},r.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,r.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,r}(BaseImageResource),VideoResource=function(e){__extends$i(r,e);function r(t,n){var i=this;if(n=n||{},!(t instanceof HTMLVideoElement)){var s=document.createElement("video");s.setAttribute("preload","auto"),s.setAttribute("webkit-playsinline",""),s.setAttribute("playsinline",""),typeof t=="string"&&(t=[t]);var o=t[0].src||t[0];BaseImageResource.crossOrigin(s,o,n.crossorigin);for(var a=0;a<t.length;++a){var u=document.createElement("source"),l=t[a],h=l.src,f=l.mime;h=h||t[a];var d=h.split("?").shift().toLowerCase(),_=d.slice(d.lastIndexOf(".")+1);f=f||r.MIME_TYPES[_]||"video/"+_,u.src=h,u.type=f,s.appendChild(u)}t=s}return i=e.call(this,t)||this,i.noSubImage=!0,i._autoUpdate=!0,i._isConnectedToTicker=!1,i._updateFPS=n.updateFPS||0,i._msToNextUpdate=0,i.autoPlay=n.autoPlay!==!1,i._load=null,i._resolve=null,i._onCanPlay=i._onCanPlay.bind(i),i._onError=i._onError.bind(i),n.autoLoad!==!1&&i.load(),i}return r.prototype.update=function(t){if(!this.destroyed){var n=Ticker.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-n),(!this._updateFPS||this._msToNextUpdate<=0)&&(e.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},r.prototype.load=function(){var t=this;if(this._load)return this._load;var n=this.source;return(n.readyState===n.HAVE_ENOUGH_DATA||n.readyState===n.HAVE_FUTURE_DATA)&&n.width&&n.height&&(n.complete=!0),n.addEventListener("play",this._onPlayStart.bind(this)),n.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(n.addEventListener("canplay",this._onCanPlay),n.addEventListener("canplaythrough",this._onCanPlay),n.addEventListener("error",this._onError,!0)),this._load=new Promise(function(i){t.valid?i(t):(t._resolve=i,n.load())}),this._load},r.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},r.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&t.paused===!1&&t.ended===!1&&t.readyState>2},r.prototype._isSourceReady=function(){var t=this.source;return t.readyState===3||t.readyState===4},r.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Ticker.shared.add(this.update,this),this._isConnectedToTicker=!0)},r.prototype._onPlayStop=function(){this._isConnectedToTicker&&(Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1)},r.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var n=this.valid;this.resize(t.videoWidth,t.videoHeight),!n&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},r.prototype.dispose=function(){this._isConnectedToTicker&&(Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1);var t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),e.prototype.dispose.call(this)},Object.defineProperty(r.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Ticker.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),r.test=function(t,n){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||r.TYPES.indexOf(n)>-1},r.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],r.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},r}(BaseImageResource),ImageBitmapResource=function(e){__extends$i(r,e);function r(t){return e.call(this,t)||this}return r.test=function(t){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&t instanceof ImageBitmap},r}(BaseImageResource);INSTALLED.push(ImageResource,ImageBitmapResource,CanvasResource,VideoResource,SVGResource,BufferResource,CubeResource,ArrayResource);var DepthResource=function(e){__extends$i(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.upload=function(t,n,i){var s=t.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===ALPHA_MODES$5.UNPACK);var o=n.realWidth,a=n.realHeight;return i.width===o&&i.height===a?s.texSubImage2D(n.target,0,0,0,o,a,n.format,i.type,this.data):(i.width=o,i.height=a,s.texImage2D(n.target,0,i.internalFormat,o,a,0,n.format,i.type,this.data)),!0},r}(BufferResource),Framebuffer=function(){function e(r,t){this.width=Math.round(r||100),this.height=Math.round(t||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Runner("disposeFramebuffer"),this.multisample=MSAA_QUALITY$5.NONE}return Object.defineProperty(e.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),e.prototype.addColorTexture=function(r,t){return r===void 0&&(r=0),this.colorTextures[r]=t||new BaseTexture(null,{scaleMode:SCALE_MODES$5.NEAREST,resolution:1,mipmap:MIPMAP_MODES$5.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},e.prototype.addDepthTexture=function(r){return this.depthTexture=r||new BaseTexture(new DepthResource(null,{width:this.width,height:this.height}),{scaleMode:SCALE_MODES$5.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:MIPMAP_MODES$5.OFF,format:FORMATS$5.DEPTH_COMPONENT,type:TYPES$5.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},e.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},e.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},e.prototype.resize=function(r,t){if(r=Math.round(r),t=Math.round(t),!(r===this.width&&t===this.height)){this.width=r,this.height=t,this.dirtyId++,this.dirtySize++;for(var n=0;n<this.colorTextures.length;n++){var i=this.colorTextures[n],s=i.resolution;i.setSize(r/s,t/s)}if(this.depthTexture){var s=this.depthTexture.resolution;this.depthTexture.setSize(r/s,t/s)}}},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},e}(),BaseRenderTexture=function(e){__extends$i(r,e);function r(t){t===void 0&&(t={});var n=this;if(typeof t=="number"){var i=arguments[0],s=arguments[1],o=arguments[2],a=arguments[3];t={width:i,height:s,scaleMode:o,resolution:a}}return t.width=t.width||100,t.height=t.height||100,t.multisample=t.multisample!==void 0?t.multisample:MSAA_QUALITY$5.NONE,n=e.call(this,null,t)||this,n.mipmap=MIPMAP_MODES$5.OFF,n.valid=!0,n.clearColor=[0,0,0,0],n.framebuffer=new Framebuffer(n.realWidth,n.realHeight).addColorTexture(0,n),n.framebuffer.multisample=t.multisample,n.maskStack=[],n.filterStack=[{}],n}return r.prototype.resize=function(t,n){this.framebuffer.resize(t*this.resolution,n*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},r.prototype.dispose=function(){this.framebuffer.dispose(),e.prototype.dispose.call(this)},r.prototype.destroy=function(){e.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},r}(BaseTexture),TextureUvs=function(){function e(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return e.prototype.set=function(r,t,n){var i=t.width,s=t.height;if(n){var o=r.width/2/i,a=r.height/2/s,u=r.x/i+o,l=r.y/s+a;n=groupD8.add(n,groupD8.NW),this.x0=u+o*groupD8.uX(n),this.y0=l+a*groupD8.uY(n),n=groupD8.add(n,2),this.x1=u+o*groupD8.uX(n),this.y1=l+a*groupD8.uY(n),n=groupD8.add(n,2),this.x2=u+o*groupD8.uX(n),this.y2=l+a*groupD8.uY(n),n=groupD8.add(n,2),this.x3=u+o*groupD8.uX(n),this.y3=l+a*groupD8.uY(n)}else this.x0=r.x/i,this.y0=r.y/s,this.x1=(r.x+r.width)/i,this.y1=r.y/s,this.x2=(r.x+r.width)/i,this.y2=(r.y+r.height)/s,this.x3=r.x/i,this.y3=(r.y+r.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},e.prototype.toString=function(){return"[@pixi/core:TextureUvs "+("x0="+this.x0+" y0="+this.y0+" ")+("x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" ")+("y2="+this.y2+" x3="+this.x3+" y3="+this.y3)+"]"},e}(),DEFAULT_UVS=new TextureUvs;function removeAllHandlers(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}var Texture=function(e){__extends$i(r,e);function r(t,n,i,s,o,a){var u=e.call(this)||this;if(u.noFrame=!1,n||(u.noFrame=!0,n=new Rectangle(0,0,1,1)),t instanceof r&&(t=t.baseTexture),u.baseTexture=t,u._frame=n,u.trim=s,u.valid=!1,u._uvs=DEFAULT_UVS,u.uvMatrix=null,u.orig=i||n,u._rotate=Number(o||0),o===!0)u._rotate=2;else if(u._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return u.defaultAnchor=a?new Point(a.x,a.y):new Point(0,0),u._updateID=0,u.textureCacheIds=[],t.valid?u.noFrame?t.valid&&u.onBaseTextureUpdated(t):u.frame=n:t.once("loaded",u.onBaseTextureUpdated,u),u.noFrame&&t.on("update",u.onBaseTextureUpdated,u),u}return r.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},r.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},r.prototype.destroy=function(t){if(this.baseTexture){if(t){var n=this.baseTexture.resource;n&&n.url&&TextureCache[n.url]&&r.removeFromCache(n.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,r.removeFromCache(this),this.textureCacheIds=null},r.prototype.clone=function(){var t=this._frame.clone(),n=this._frame===this.orig?t:this.orig.clone(),i=new r(this.baseTexture,!this.noFrame&&t,n,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(i._frame=t),i},r.prototype.updateUvs=function(){this._uvs===DEFAULT_UVS&&(this._uvs=new TextureUvs),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},r.from=function(t,n,i){n===void 0&&(n={}),i===void 0&&(i=settings$1.STRICT_TEXTURE_CACHE);var s=typeof t=="string",o=null;if(s)o=t;else if(t instanceof BaseTexture){if(!t.cacheId){var a=n&&n.pixiIdPrefix||"pixiid";t.cacheId=a+"-"+uid(),BaseTexture.addToCache(t,t.cacheId)}o=t.cacheId}else{if(!t._pixiId){var a=n&&n.pixiIdPrefix||"pixiid";t._pixiId=a+"_"+uid()}o=t._pixiId}var u=TextureCache[o];if(s&&i&&!u)throw new Error('The cacheId "'+o+'" does not exist in TextureCache.');return!u&&!(t instanceof BaseTexture)?(n.resolution||(n.resolution=getResolutionOfUrl(t)),u=new r(new BaseTexture(t,n)),u.baseTexture.cacheId=o,BaseTexture.addToCache(u.baseTexture,o),r.addToCache(u,o)):!u&&t instanceof BaseTexture&&(u=new r(t),r.addToCache(u,o)),u},r.fromURL=function(t,n){var i=Object.assign({autoLoad:!1},n==null?void 0:n.resourceOptions),s=r.from(t,Object.assign({resourceOptions:i},n),!1),o=s.baseTexture.resource;return s.baseTexture.valid?Promise.resolve(s):o.load().then(function(){return Promise.resolve(s)})},r.fromBuffer=function(t,n,i,s){return new r(BaseTexture.fromBuffer(t,n,i,s))},r.fromLoader=function(t,n,i,s){var o=new BaseTexture(t,Object.assign({scaleMode:settings$1.SCALE_MODE,resolution:getResolutionOfUrl(n)},s)),a=o.resource;a instanceof ImageResource&&(a.url=n);var u=new r(o);return i||(i=n),BaseTexture.addToCache(u.baseTexture,i),r.addToCache(u,i),i!==n&&(BaseTexture.addToCache(u.baseTexture,n),r.addToCache(u,n)),u.baseTexture.valid?Promise.resolve(u):new Promise(function(l){u.baseTexture.once("loaded",function(){return l(u)})})},r.addToCache=function(t,n){n&&(t.textureCacheIds.indexOf(n)===-1&&t.textureCacheIds.push(n),TextureCache[n]&&console.warn("Texture added to the cache with an id ["+n+"] that already had an entry"),TextureCache[n]=t)},r.removeFromCache=function(t){if(typeof t=="string"){var n=TextureCache[t];if(n){var i=n.textureCacheIds.indexOf(t);return i>-1&&n.textureCacheIds.splice(i,1),delete TextureCache[t],n}}else if(t&&t.textureCacheIds){for(var s=0;s<t.textureCacheIds.length;++s)TextureCache[t.textureCacheIds[s]]===t&&delete TextureCache[t.textureCacheIds[s]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(r.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var n=t.x,i=t.y,s=t.width,o=t.height,a=n+s>this.baseTexture.width,u=i+o>this.baseTexture.height;if(a||u){var l=a&&u?"and":"or",h="X: "+n+" + "+s+" = "+(n+s)+" > "+this.baseTexture.width,f="Y: "+i+" + "+o+" = "+(i+o)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(h+" "+l+" "+f))}this.valid=s&&o&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),r.prototype.castToBaseTexture=function(){return this.baseTexture},Object.defineProperty(r,"EMPTY",{get:function(){return r._EMPTY||(r._EMPTY=new r(new BaseTexture),removeAllHandlers(r._EMPTY),removeAllHandlers(r._EMPTY.baseTexture)),r._EMPTY},enumerable:!1,configurable:!0}),Object.defineProperty(r,"WHITE",{get:function(){if(!r._WHITE){var t=settings$1.ADAPTER.createCanvas(16,16),n=t.getContext("2d");t.width=16,t.height=16,n.fillStyle="white",n.fillRect(0,0,16,16),r._WHITE=new r(BaseTexture.from(t)),removeAllHandlers(r._WHITE),removeAllHandlers(r._WHITE.baseTexture)}return r._WHITE},enumerable:!1,configurable:!0}),r}(EventEmitter),RenderTexture=function(e){__extends$i(r,e);function r(t,n){var i=e.call(this,t,n)||this;return i.valid=!0,i.filterFrame=null,i.filterPoolKey=null,i.updateUvs(),i}return Object.defineProperty(r.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(t){this.framebuffer.multisample=t},enumerable:!1,configurable:!0}),r.prototype.resize=function(t,n,i){i===void 0&&(i=!0);var s=this.baseTexture.resolution,o=Math.round(t*s)/s,a=Math.round(n*s)/s;this.valid=o>0&&a>0,this._frame.width=this.orig.width=o,this._frame.height=this.orig.height=a,i&&this.baseTexture.resize(o,a),this.updateUvs()},r.prototype.setResolution=function(t){var n=this.baseTexture;n.resolution!==t&&(n.setResolution(t),this.resize(n.width,n.height,!1))},r.create=function(t){for(var n=arguments,i=[],s=1;s<arguments.length;s++)i[s-1]=n[s];return typeof t=="number"&&(deprecation$1("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),t={width:t,height:i[0],scaleMode:i[1],resolution:i[2]}),new r(new BaseRenderTexture(t))},r}(Texture),RenderTexturePool=function(){function e(r){this.texturePool={},this.textureOptions=r||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return e.prototype.createTexture=function(r,t,n){n===void 0&&(n=MSAA_QUALITY$5.NONE);var i=new BaseRenderTexture(Object.assign({width:r,height:t,resolution:1,multisample:n},this.textureOptions));return new RenderTexture(i)},e.prototype.getOptimalTexture=function(r,t,n,i){n===void 0&&(n=1),i===void 0&&(i=MSAA_QUALITY$5.NONE);var s;r=Math.ceil(r*n-1e-6),t=Math.ceil(t*n-1e-6),!this.enableFullScreen||r!==this._pixelsWidth||t!==this._pixelsHeight?(r=nextPow2(r),t=nextPow2(t),s=((r&65535)<<16|t&65535)>>>0,i>1&&(s+=i*4294967296)):s=i>1?-i:-1,this.texturePool[s]||(this.texturePool[s]=[]);var o=this.texturePool[s].pop();return o||(o=this.createTexture(r,t,i)),o.filterPoolKey=s,o.setResolution(n),o},e.prototype.getFilterTexture=function(r,t,n){var i=this.getOptimalTexture(r.width,r.height,t||r.resolution,n||MSAA_QUALITY$5.NONE);return i.filterFrame=r.filterFrame,i},e.prototype.returnTexture=function(r){var t=r.filterPoolKey;r.filterFrame=null,this.texturePool[t].push(r)},e.prototype.returnFilterTexture=function(r){this.returnTexture(r)},e.prototype.clear=function(r){if(r=r!==!1,r)for(var t in this.texturePool){var n=this.texturePool[t];if(n)for(var i=0;i<n.length;i++)n[i].destroy(!0)}this.texturePool={}},e.prototype.setScreenSize=function(r){if(!(r.width===this._pixelsWidth&&r.height===this._pixelsHeight)){this.enableFullScreen=r.width>0&&r.height>0;for(var t in this.texturePool)if(Number(t)<0){var n=this.texturePool[t];if(n)for(var i=0;i<n.length;i++)n[i].destroy(!0);this.texturePool[t]=[]}this._pixelsWidth=r.width,this._pixelsHeight=r.height}},e.SCREEN_KEY=-1,e}(),Attribute=function(){function e(r,t,n,i,s,o,a){t===void 0&&(t=0),n===void 0&&(n=!1),i===void 0&&(i=TYPES$5.FLOAT),this.buffer=r,this.size=t,this.normalized=n,this.type=i,this.stride=s,this.start=o,this.instance=a}return e.prototype.destroy=function(){this.buffer=null},e.from=function(r,t,n,i,s){return new e(r,t,n,i,s)},e}(),UID$4=0,Buffer=function(){function e(r,t,n){t===void 0&&(t=!0),n===void 0&&(n=!1),this.data=r||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=n,this.static=t,this.id=UID$4++,this.disposeRunner=new Runner("disposeBuffer")}return e.prototype.update=function(r){r instanceof Array&&(r=new Float32Array(r)),this.data=r||this.data,this._updateID++},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(e.prototype,"index",{get:function(){return this.type===BUFFER_TYPE$5.ELEMENT_ARRAY_BUFFER},set:function(r){this.type=r?BUFFER_TYPE$5.ELEMENT_ARRAY_BUFFER:BUFFER_TYPE$5.ARRAY_BUFFER},enumerable:!1,configurable:!0}),e.from=function(r){return r instanceof Array&&(r=new Float32Array(r)),new e(r)},e}(),map$1={Float32Array,Uint32Array,Int32Array,Uint8Array};function interleaveTypedArrays(e,r){for(var t=0,n=0,i={},s=0;s<e.length;s++)n+=r[s],t+=e[s].length;for(var o=new ArrayBuffer(t*4),a=null,u=0,s=0;s<e.length;s++){var l=r[s],h=e[s],f=getBufferType(h);i[f]||(i[f]=new map$1[f](o)),a=i[f];for(var d=0;d<h.length;d++){var _=(d/l|0)*n+u,v=d%l;a[_+v]=h[d]}u+=l}return new Float32Array(o)}var byteSizeMap$1={5126:4,5123:2,5121:1},UID$3=0,map={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},Geometry=function(){function e(r,t){r===void 0&&(r=[]),t===void 0&&(t={}),this.buffers=r,this.indexBuffer=null,this.attributes=t,this.glVertexArrayObjects={},this.id=UID$3++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Runner("disposeGeometry"),this.refCount=0}return e.prototype.addAttribute=function(r,t,n,i,s,o,a,u){if(n===void 0&&(n=0),i===void 0&&(i=!1),u===void 0&&(u=!1),!t)throw new Error("You must pass a buffer when creating an attribute");t instanceof Buffer||(t instanceof Array&&(t=new Float32Array(t)),t=new Buffer(t));var l=r.split("|");if(l.length>1){for(var h=0;h<l.length;h++)this.addAttribute(l[h],t,n,i,s);return this}var f=this.buffers.indexOf(t);return f===-1&&(this.buffers.push(t),f=this.buffers.length-1),this.attributes[r]=new Attribute(f,n,i,s,o,a,u),this.instanced=this.instanced||u,this},e.prototype.getAttribute=function(r){return this.attributes[r]},e.prototype.getBuffer=function(r){return this.buffers[this.getAttribute(r).buffer]},e.prototype.addIndex=function(r){return r instanceof Buffer||(r instanceof Array&&(r=new Uint16Array(r)),r=new Buffer(r)),r.type=BUFFER_TYPE$5.ELEMENT_ARRAY_BUFFER,this.indexBuffer=r,this.buffers.indexOf(r)===-1&&this.buffers.push(r),this},e.prototype.getIndex=function(){return this.indexBuffer},e.prototype.interleave=function(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;var r=[],t=[],n=new Buffer,i;for(i in this.attributes){var s=this.attributes[i],o=this.buffers[s.buffer];r.push(o.data),t.push(s.size*byteSizeMap$1[s.type]/4),s.buffer=0}for(n.data=interleaveTypedArrays(r,t),i=0;i<this.buffers.length;i++)this.buffers[i]!==this.indexBuffer&&this.buffers[i].destroy();return this.buffers=[n],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},e.prototype.getSize=function(){for(var r in this.attributes){var t=this.attributes[r],n=this.buffers[t.buffer];return n.data.length/(t.stride/4||t.size)}return 0},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},e.prototype.clone=function(){for(var r=new e,t=0;t<this.buffers.length;t++)r.buffers[t]=new Buffer(this.buffers[t].data.slice(0));for(var t in this.attributes){var n=this.attributes[t];r.attributes[t]=new Attribute(n.buffer,n.size,n.normalized,n.type,n.stride,n.start,n.instance)}return this.indexBuffer&&(r.indexBuffer=r.buffers[this.buffers.indexOf(this.indexBuffer)],r.indexBuffer.type=BUFFER_TYPE$5.ELEMENT_ARRAY_BUFFER),r},e.merge=function(r){for(var t=new e,n=[],i=[],s=[],o,a=0;a<r.length;a++){o=r[a];for(var u=0;u<o.buffers.length;u++)i[u]=i[u]||0,i[u]+=o.buffers[u].data.length,s[u]=0}for(var a=0;a<o.buffers.length;a++)n[a]=new map[getBufferType(o.buffers[a].data)](i[a]),t.buffers[a]=new Buffer(n[a]);for(var a=0;a<r.length;a++){o=r[a];for(var u=0;u<o.buffers.length;u++)n[u].set(o.buffers[u].data,s[u]),s[u]+=o.buffers[u].data.length}if(t.attributes=o.attributes,o.indexBuffer){t.indexBuffer=t.buffers[o.buffers.indexOf(o.indexBuffer)],t.indexBuffer.type=BUFFER_TYPE$5.ELEMENT_ARRAY_BUFFER;for(var l=0,h=0,f=0,d=0,a=0;a<o.buffers.length;a++)if(o.buffers[a]!==o.indexBuffer){d=a;break}for(var a in o.attributes){var _=o.attributes[a];(_.buffer|0)===d&&(h+=_.size*byteSizeMap$1[_.type]/4)}for(var a=0;a<r.length;a++){for(var v=r[a].indexBuffer.data,u=0;u<v.length;u++)t.indexBuffer.data[u+f]+=l;l+=r[a].buffers[d].data.length/h,f+=v.length}}return t},e}(),Quad=function(e){__extends$i(r,e);function r(){var t=e.call(this)||this;return t.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),t}return r}(Geometry),QuadUv=function(e){__extends$i(r,e);function r(){var t=e.call(this)||this;return t.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),t.uvs=new Float32Array([0,0,1,0,1,1,0,1]),t.vertexBuffer=new Buffer(t.vertices),t.uvBuffer=new Buffer(t.uvs),t.addAttribute("aVertexPosition",t.vertexBuffer).addAttribute("aTextureCoord",t.uvBuffer).addIndex([0,1,2,0,2,3]),t}return r.prototype.map=function(t,n){var i=0,s=0;return this.uvs[0]=i,this.uvs[1]=s,this.uvs[2]=i+n.width/t.width,this.uvs[3]=s,this.uvs[4]=i+n.width/t.width,this.uvs[5]=s+n.height/t.height,this.uvs[6]=i,this.uvs[7]=s+n.height/t.height,i=n.x,s=n.y,this.vertices[0]=i,this.vertices[1]=s,this.vertices[2]=i+n.width,this.vertices[3]=s,this.vertices[4]=i+n.width,this.vertices[5]=s+n.height,this.vertices[6]=i,this.vertices[7]=s+n.height,this.invalidate(),this},r.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},r}(Geometry),UID$2=0,UniformGroup=function(){function e(r,t,n){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=UID$2++,this.static=!!t,this.ubo=!!n,r instanceof Buffer?(this.buffer=r,this.buffer.type=BUFFER_TYPE$5.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=r,this.ubo&&(this.buffer=new Buffer(new Float32Array(1)),this.buffer.type=BUFFER_TYPE$5.UNIFORM_BUFFER,this.autoManage=!0))}return e.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},e.prototype.add=function(r,t,n){if(!this.ubo)this.uniforms[r]=new e(t,n);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")},e.from=function(r,t,n){return new e(r,t,n)},e.uboFrom=function(r,t){return new e(r,t!=null?t:!0,!0)},e}(),FilterState=function(){function e(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=MSAA_QUALITY$5.NONE,this.sourceFrame=new Rectangle,this.destinationFrame=new Rectangle,this.bindingSourceFrame=new Rectangle,this.bindingDestinationFrame=new Rectangle,this.filters=[],this.transform=null}return e.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},e}(),tempPoints=[new Point,new Point,new Point,new Point],tempMatrix$2=new Matrix,FilterSystem=function(){function e(r){this.renderer=r,this.defaultFilterStack=[{}],this.texturePool=new RenderTexturePool,this.texturePool.setScreenSize(r.view),this.statePool=[],this.quad=new Quad,this.quadUv=new QuadUv,this.tempRect=new Rectangle,this.activeState={},this.globalUniforms=new UniformGroup({outputFrame:new Rectangle,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return e.prototype.push=function(r,t){for(var n,i,s=this.renderer,o=this.defaultFilterStack,a=this.statePool.pop()||new FilterState,u=this.renderer.renderTexture,l=t[0].resolution,h=t[0].multisample,f=t[0].padding,d=t[0].autoFit,_=(n=t[0].legacy)!==null&&n!==void 0?n:!0,v=1;v<t.length;v++){var m=t[v];l=Math.min(l,m.resolution),h=Math.min(h,m.multisample),f=this.useMaxPadding?Math.max(f,m.padding):f+m.padding,d=d&&m.autoFit,_=_||((i=m.legacy)!==null&&i!==void 0?i:!0)}o.length===1&&(this.defaultFilterStack[0].renderTexture=u.current),o.push(a),a.resolution=l,a.multisample=h,a.legacy=_,a.target=r,a.sourceFrame.copyFrom(r.filterArea||r.getBounds(!0)),a.sourceFrame.pad(f);var E=this.tempRect.copyFrom(u.sourceFrame);s.projection.transform&&this.transformAABB(tempMatrix$2.copyFrom(s.projection.transform).invert(),E),d?(a.sourceFrame.fit(E),(a.sourceFrame.width<=0||a.sourceFrame.height<=0)&&(a.sourceFrame.width=0,a.sourceFrame.height=0)):a.sourceFrame.intersects(E)||(a.sourceFrame.width=0,a.sourceFrame.height=0),this.roundFrame(a.sourceFrame,u.current?u.current.resolution:s.resolution,u.sourceFrame,u.destinationFrame,s.projection.transform),a.renderTexture=this.getOptimalFilterTexture(a.sourceFrame.width,a.sourceFrame.height,l,h),a.filters=t,a.destinationFrame.width=a.renderTexture.width,a.destinationFrame.height=a.renderTexture.height;var A=this.tempRect;A.x=0,A.y=0,A.width=a.sourceFrame.width,A.height=a.sourceFrame.height,a.renderTexture.filterFrame=a.sourceFrame,a.bindingSourceFrame.copyFrom(u.sourceFrame),a.bindingDestinationFrame.copyFrom(u.destinationFrame),a.transform=s.projection.transform,s.projection.transform=null,u.bind(a.renderTexture,a.sourceFrame,A),s.framebuffer.clear(0,0,0,0)},e.prototype.pop=function(){var r=this.defaultFilterStack,t=r.pop(),n=t.filters;this.activeState=t;var i=this.globalUniforms.uniforms;i.outputFrame=t.sourceFrame,i.resolution=t.resolution;var s=i.inputSize,o=i.inputPixel,a=i.inputClamp;if(s[0]=t.destinationFrame.width,s[1]=t.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],o[0]=Math.round(s[0]*t.resolution),o[1]=Math.round(s[1]*t.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=t.sourceFrame.width*s[2]-.5*o[2],a[3]=t.sourceFrame.height*s[3]-.5*o[3],t.legacy){var u=i.filterArea;u[0]=t.destinationFrame.width,u[1]=t.destinationFrame.height,u[2]=t.sourceFrame.x,u[3]=t.sourceFrame.y,i.filterClamp=i.inputClamp}this.globalUniforms.update();var l=r[r.length-1];if(this.renderer.framebuffer.blit(),n.length===1)n[0].apply(this,t.renderTexture,l.renderTexture,CLEAR_MODES$5.BLEND,t),this.returnFilterTexture(t.renderTexture);else{var h=t.renderTexture,f=this.getOptimalFilterTexture(h.width,h.height,t.resolution);f.filterFrame=h.filterFrame;var d=0;for(d=0;d<n.length-1;++d){d===1&&t.multisample>1&&(f=this.getOptimalFilterTexture(h.width,h.height,t.resolution),f.filterFrame=h.filterFrame),n[d].apply(this,h,f,CLEAR_MODES$5.CLEAR,t);var _=h;h=f,f=_}n[d].apply(this,h,l.renderTexture,CLEAR_MODES$5.BLEND,t),d>1&&t.multisample>1&&this.returnFilterTexture(t.renderTexture),this.returnFilterTexture(h),this.returnFilterTexture(f)}t.clear(),this.statePool.push(t)},e.prototype.bindAndClear=function(r,t){t===void 0&&(t=CLEAR_MODES$5.CLEAR);var n=this.renderer,i=n.renderTexture,s=n.state;if(r===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,r&&r.filterFrame){var o=this.tempRect;o.x=0,o.y=0,o.width=r.filterFrame.width,o.height=r.filterFrame.height,i.bind(r,r.filterFrame,o)}else r!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(r):this.renderer.renderTexture.bind(r,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var a=s.stateId&1||this.forceClear;(t===CLEAR_MODES$5.CLEAR||t===CLEAR_MODES$5.BLIT&&a)&&this.renderer.framebuffer.clear(0,0,0,0)},e.prototype.applyFilter=function(r,t,n,i){var s=this.renderer;s.state.set(r.state),this.bindAndClear(n,i),r.uniforms.uSampler=t,r.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(r),r.legacy=!!r.program.attributeData.aTextureCoord,r.legacy?(this.quadUv.map(t._frame,t.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(DRAW_MODES$5.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(DRAW_MODES$5.TRIANGLE_STRIP))},e.prototype.calculateSpriteMatrix=function(r,t){var n=this.activeState,i=n.sourceFrame,s=n.destinationFrame,o=t._texture.orig,a=r.set(s.width,0,0,s.height,i.x,i.y),u=t.worldTransform.copyTo(Matrix.TEMP_MATRIX);return u.invert(),a.prepend(u),a.scale(1/o.width,1/o.height),a.translate(t.anchor.x,t.anchor.y),a},e.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},e.prototype.getOptimalFilterTexture=function(r,t,n,i){return n===void 0&&(n=1),i===void 0&&(i=MSAA_QUALITY$5.NONE),this.texturePool.getOptimalTexture(r,t,n,i)},e.prototype.getFilterTexture=function(r,t,n){if(typeof r=="number"){var i=r;r=t,t=i}r=r||this.activeState.renderTexture;var s=this.texturePool.getOptimalTexture(r.width,r.height,t||r.resolution,n||MSAA_QUALITY$5.NONE);return s.filterFrame=r.filterFrame,s},e.prototype.returnFilterTexture=function(r){this.texturePool.returnTexture(r)},e.prototype.emptyPool=function(){this.texturePool.clear(!0)},e.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},e.prototype.transformAABB=function(r,t){var n=tempPoints[0],i=tempPoints[1],s=tempPoints[2],o=tempPoints[3];n.set(t.left,t.top),i.set(t.left,t.bottom),s.set(t.right,t.top),o.set(t.right,t.bottom),r.apply(n,n),r.apply(i,i),r.apply(s,s),r.apply(o,o);var a=Math.min(n.x,i.x,s.x,o.x),u=Math.min(n.y,i.y,s.y,o.y),l=Math.max(n.x,i.x,s.x,o.x),h=Math.max(n.y,i.y,s.y,o.y);t.x=a,t.y=u,t.width=l-a,t.height=h-u},e.prototype.roundFrame=function(r,t,n,i,s){if(!(r.width<=0||r.height<=0||n.width<=0||n.height<=0)){if(s){var o=s.a,a=s.b,u=s.c,l=s.d;if((Math.abs(a)>1e-4||Math.abs(u)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(l)>1e-4))return}s=s?tempMatrix$2.copyFrom(s):tempMatrix$2.identity(),s.translate(-n.x,-n.y).scale(i.width/n.width,i.height/n.height).translate(i.x,i.y),this.transformAABB(s,r),r.ceil(t),this.transformAABB(s.invert(),r)}},e}(),ObjectRenderer=function(){function e(r){this.renderer=r}return e.prototype.flush=function(){},e.prototype.destroy=function(){this.renderer=null},e.prototype.start=function(){},e.prototype.stop=function(){this.flush()},e.prototype.render=function(r){},e}(),BatchSystem=function(){function e(r){this.renderer=r,this.emptyRenderer=new ObjectRenderer(r),this.currentRenderer=this.emptyRenderer}return e.prototype.setObjectRenderer=function(r){this.currentRenderer!==r&&(this.currentRenderer.stop(),this.currentRenderer=r,this.currentRenderer.start())},e.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.copyBoundTextures=function(r,t){for(var n=this.renderer.texture.boundTextures,i=t-1;i>=0;--i)r[i]=n[i]||null,r[i]&&(r[i]._batchLocation=i)},e.prototype.boundArray=function(r,t,n,i){for(var s=r.elements,o=r.ids,a=r.count,u=0,l=0;l<a;l++){var h=s[l],f=h._batchLocation;if(f>=0&&f<i&&t[f]===h){o[l]=f;continue}for(;u<i;){var d=t[u];if(d&&d._batchEnabled===n&&d._batchLocation===u){u++;continue}o[l]=u,h._batchLocation=u,t[u]=h;break}}},e.prototype.destroy=function(){this.renderer=null},e}(),CONTEXT_UID_COUNTER=0,ContextSystem=function(){function e(r){this.renderer=r,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),r.view.addEventListener("webglcontextlost",this.handleContextLost,!1),r.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(e.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),e.prototype.contextChange=function(r){this.gl=r,this.renderer.gl=r,this.renderer.CONTEXT_UID=CONTEXT_UID_COUNTER++,r.isContextLost()&&r.getExtension("WEBGL_lose_context")&&r.getExtension("WEBGL_lose_context").restoreContext()},e.prototype.initFromContext=function(r){this.gl=r,this.validateContext(r),this.renderer.gl=r,this.renderer.CONTEXT_UID=CONTEXT_UID_COUNTER++,this.renderer.runners.contextChange.emit(r)},e.prototype.initFromOptions=function(r){var t=this.createContext(this.renderer.view,r);this.initFromContext(t)},e.prototype.createContext=function(r,t){var n;if(settings$1.PREFER_ENV>=ENV$5.WEBGL2&&(n=r.getContext("webgl2",t)),n)this.webGLVersion=2;else if(this.webGLVersion=1,n=r.getContext("webgl",t)||r.getContext("experimental-webgl",t),!n)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl},e.prototype.getExtensions=function(){var r=this.gl,t={anisotropicFiltering:r.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:r.getExtension("OES_texture_float_linear"),s3tc:r.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:r.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:r.getExtension("WEBGL_compressed_texture_etc"),etc1:r.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:r.getExtension("WEBGL_compressed_texture_atc"),astc:r.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,t,{drawBuffers:r.getExtension("WEBGL_draw_buffers"),depthTexture:r.getExtension("WEBGL_depth_texture"),loseContext:r.getExtension("WEBGL_lose_context"),vertexArrayObject:r.getExtension("OES_vertex_array_object")||r.getExtension("MOZ_OES_vertex_array_object")||r.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:r.getExtension("OES_element_index_uint"),floatTexture:r.getExtension("OES_texture_float"),floatTextureLinear:r.getExtension("OES_texture_float_linear"),textureHalfFloat:r.getExtension("OES_texture_half_float"),textureHalfFloatLinear:r.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,t,{colorBufferFloat:r.getExtension("EXT_color_buffer_float")})},e.prototype.handleContextLost=function(r){r.preventDefault()},e.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},e.prototype.destroy=function(){var r=this.renderer.view;this.renderer=null,r.removeEventListener("webglcontextlost",this.handleContextLost),r.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},e.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},e.prototype.validateContext=function(r){var t=r.getContextAttributes(),n="WebGL2RenderingContext"in globalThis&&r instanceof globalThis.WebGL2RenderingContext;n&&(this.webGLVersion=2),t&&!t.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var i=n||!!r.getExtension("OES_element_index_uint");this.supports.uint32Indices=i,i||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},e}(),GLFramebuffer=function(){function e(r){this.framebuffer=r,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=MSAA_QUALITY$5.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}return e}(),tempRectangle=new Rectangle,FramebufferSystem=function(){function e(r){this.renderer=r,this.managedFramebuffers=[],this.unknownFramebuffer=new Framebuffer(10,10),this.msaaSamples=null}return e.prototype.contextChange=function(){var r=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Rectangle,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),this.renderer.context.webGLVersion===1){var t=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;settings$1.PREFER_ENV===ENV$5.WEBGL_LEGACY&&(t=null,n=null),t?r.drawBuffers=function(i){return t.drawBuffersWEBGL(i)}:(this.hasMRT=!1,r.drawBuffers=function(){}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=r.getInternalformatParameter(r.RENDERBUFFER,r.RGBA8,r.SAMPLES)},e.prototype.bind=function(r,t,n){n===void 0&&(n=0);var i=this.gl;if(r){var s=r.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(r);this.current!==r&&(this.current=r,i.bindFramebuffer(i.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==n&&(r.dirtyId++,r.dirtyFormat++,s.mipLevel=n),s.dirtyId!==r.dirtyId&&(s.dirtyId=r.dirtyId,s.dirtyFormat!==r.dirtyFormat?(s.dirtyFormat=r.dirtyFormat,s.dirtySize=r.dirtySize,this.updateFramebuffer(r,n)):s.dirtySize!==r.dirtySize&&(s.dirtySize=r.dirtySize,this.resizeFramebuffer(r)));for(var o=0;o<r.colorTextures.length;o++){var a=r.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(r.depthTexture&&this.renderer.texture.unbind(r.depthTexture),t){var u=t.width>>n,l=t.height>>n,h=u/t.width;this.setViewport(t.x*h,t.y*h,u,l)}else{var u=r.width>>n,l=r.height>>n;this.setViewport(0,0,u,l)}}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},e.prototype.setViewport=function(r,t,n,i){var s=this.viewport;r=Math.round(r),t=Math.round(t),n=Math.round(n),i=Math.round(i),(s.width!==n||s.height!==i||s.x!==r||s.y!==t)&&(s.x=r,s.y=t,s.width=n,s.height=i,this.gl.viewport(r,t,n,i))},Object.defineProperty(e.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),e.prototype.clear=function(r,t,n,i,s){s===void 0&&(s=BUFFER_BITS$5.COLOR|BUFFER_BITS$5.DEPTH);var o=this.gl;o.clearColor(r,t,n,i),o.clear(s)},e.prototype.initFramebuffer=function(r){var t=this.gl,n=new GLFramebuffer(t.createFramebuffer());return n.multisample=this.detectSamples(r.multisample),r.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(r),r.disposeRunner.add(this),n},e.prototype.resizeFramebuffer=function(r){var t=this.gl,n=r.glFramebuffers[this.CONTEXT_UID];n.msaaBuffer&&(t.bindRenderbuffer(t.RENDERBUFFER,n.msaaBuffer),t.renderbufferStorageMultisample(t.RENDERBUFFER,n.multisample,t.RGBA8,r.width,r.height)),n.stencil&&(t.bindRenderbuffer(t.RENDERBUFFER,n.stencil),n.msaaBuffer?t.renderbufferStorageMultisample(t.RENDERBUFFER,n.multisample,t.DEPTH24_STENCIL8,r.width,r.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,r.width,r.height));var i=r.colorTextures,s=i.length;t.drawBuffers||(s=Math.min(s,1));for(var o=0;o<s;o++){var a=i[o],u=a.parentTextureArray||a;this.renderer.texture.bind(u,0)}r.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(r.depthTexture,0)},e.prototype.updateFramebuffer=function(r,t){var n=this.gl,i=r.glFramebuffers[this.CONTEXT_UID],s=r.colorTextures,o=s.length;n.drawBuffers||(o=Math.min(o,1)),i.multisample>1&&this.canMultisampleFramebuffer(r)?(i.msaaBuffer=i.msaaBuffer||n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,i.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,n.RGBA8,r.width,r.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,i.msaaBuffer)):i.msaaBuffer&&(n.deleteRenderbuffer(i.msaaBuffer),i.msaaBuffer=null,i.blitFramebuffer&&(i.blitFramebuffer.dispose(),i.blitFramebuffer=null));for(var a=[],u=0;u<o;u++){var l=s[u],h=l.parentTextureArray||l;this.renderer.texture.bind(h,0),!(u===0&&i.msaaBuffer)&&(n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+u,l.target,h._glTextures[this.CONTEXT_UID].texture,t),a.push(n.COLOR_ATTACHMENT0+u))}if(a.length>1&&n.drawBuffers(a),r.depthTexture){var f=this.writeDepthTexture;if(f){var d=r.depthTexture;this.renderer.texture.bind(d,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,d._glTextures[this.CONTEXT_UID].texture,t)}}(r.stencil||r.depth)&&!(r.depthTexture&&this.writeDepthTexture)?(i.stencil=i.stencil||n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,i.stencil),i.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,n.DEPTH24_STENCIL8,r.width,r.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,r.width,r.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,i.stencil)):i.stencil&&(n.deleteRenderbuffer(i.stencil),i.stencil=null)},e.prototype.canMultisampleFramebuffer=function(r){return this.renderer.context.webGLVersion!==1&&r.colorTextures.length<=1&&!r.depthTexture},e.prototype.detectSamples=function(r){var t=this.msaaSamples,n=MSAA_QUALITY$5.NONE;if(r<=1||t===null)return n;for(var i=0;i<t.length;i++)if(t[i]<=r){n=t[i];break}return n===1&&(n=MSAA_QUALITY$5.NONE),n},e.prototype.blit=function(r,t,n){var i=this,s=i.current,o=i.renderer,a=i.gl,u=i.CONTEXT_UID;if(o.context.webGLVersion===2&&!!s){var l=s.glFramebuffers[u];if(!!l){if(!r){if(!l.msaaBuffer)return;var h=s.colorTextures[0];if(!h)return;l.blitFramebuffer||(l.blitFramebuffer=new Framebuffer(s.width,s.height),l.blitFramebuffer.addColorTexture(0,h)),r=l.blitFramebuffer,r.colorTextures[0]!==h&&(r.colorTextures[0]=h,r.dirtyId++,r.dirtyFormat++),(r.width!==s.width||r.height!==s.height)&&(r.width=s.width,r.height=s.height,r.dirtyId++,r.dirtySize++)}t||(t=tempRectangle,t.width=s.width,t.height=s.height),n||(n=t);var f=t.width===n.width&&t.height===n.height;this.bind(r),a.bindFramebuffer(a.READ_FRAMEBUFFER,l.framebuffer),a.blitFramebuffer(t.left,t.top,t.right,t.bottom,n.left,n.top,n.right,n.bottom,a.COLOR_BUFFER_BIT,f?a.NEAREST:a.LINEAR)}}},e.prototype.disposeFramebuffer=function(r,t){var n=r.glFramebuffers[this.CONTEXT_UID],i=this.gl;if(!!n){delete r.glFramebuffers[this.CONTEXT_UID];var s=this.managedFramebuffers.indexOf(r);s>=0&&this.managedFramebuffers.splice(s,1),r.disposeRunner.remove(this),t||(i.deleteFramebuffer(n.framebuffer),n.msaaBuffer&&i.deleteRenderbuffer(n.msaaBuffer),n.stencil&&i.deleteRenderbuffer(n.stencil)),n.blitFramebuffer&&n.blitFramebuffer.dispose()}},e.prototype.disposeAll=function(r){var t=this.managedFramebuffers;this.managedFramebuffers=[];for(var n=0;n<t.length;n++)this.disposeFramebuffer(t[n],r)},e.prototype.forceStencil=function(){var r=this.current;if(!!r){var t=r.glFramebuffers[this.CONTEXT_UID];if(!(!t||t.stencil)){r.stencil=!0;var n=r.width,i=r.height,s=this.gl,o=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,o),t.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,t.multisample,s.DEPTH24_STENCIL8,n,i):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,n,i),t.stencil=o,s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,o)}}},e.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new Rectangle},e.prototype.destroy=function(){this.renderer=null},e}(),byteSizeMap={5126:4,5123:2,5121:1},GeometrySystem=function(){function e(r){this.renderer=r,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return e.prototype.contextChange=function(){this.disposeAll(!0);var r=this.gl=this.renderer.gl,t=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,t.webGLVersion!==2){var n=this.renderer.context.extensions.vertexArrayObject;settings$1.PREFER_ENV===ENV$5.WEBGL_LEGACY&&(n=null),n?(r.createVertexArray=function(){return n.createVertexArrayOES()},r.bindVertexArray=function(s){return n.bindVertexArrayOES(s)},r.deleteVertexArray=function(s){return n.deleteVertexArrayOES(s)}):(this.hasVao=!1,r.createVertexArray=function(){return null},r.bindVertexArray=function(){return null},r.deleteVertexArray=function(){return null})}if(t.webGLVersion!==2){var i=r.getExtension("ANGLE_instanced_arrays");i?(r.vertexAttribDivisor=function(s,o){return i.vertexAttribDivisorANGLE(s,o)},r.drawElementsInstanced=function(s,o,a,u,l){return i.drawElementsInstancedANGLE(s,o,a,u,l)},r.drawArraysInstanced=function(s,o,a,u){return i.drawArraysInstancedANGLE(s,o,a,u)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=t.webGLVersion===2||!!t.extensions.uint32ElementIndex},e.prototype.bind=function(r,t){t=t||this.renderer.shader.shader;var n=this.gl,i=r.glVertexArrayObjects[this.CONTEXT_UID],s=!1;i||(this.managedGeometries[r.id]=r,r.disposeRunner.add(this),r.glVertexArrayObjects[this.CONTEXT_UID]=i={},s=!0);var o=i[t.program.id]||this.initGeometryVao(r,t,s);this._activeGeometry=r,this._activeVao!==o&&(this._activeVao=o,this.hasVao?n.bindVertexArray(o):this.activateVao(r,t.program)),this.updateBuffers()},e.prototype.reset=function(){this.unbind()},e.prototype.updateBuffers=function(){for(var r=this._activeGeometry,t=this.renderer.buffer,n=0;n<r.buffers.length;n++){var i=r.buffers[n];t.update(i)}},e.prototype.checkCompatibility=function(r,t){var n=r.attributes,i=t.attributeData;for(var s in i)if(!n[s])throw new Error('shader and geometry incompatible, geometry missing the "'+s+'" attribute')},e.prototype.getSignature=function(r,t){var n=r.attributes,i=t.attributeData,s=["g",r.id];for(var o in n)i[o]&&s.push(o,i[o].location);return s.join("-")},e.prototype.initGeometryVao=function(r,t,n){n===void 0&&(n=!0);var i=this.gl,s=this.CONTEXT_UID,o=this.renderer.buffer,a=t.program;a.glPrograms[s]||this.renderer.shader.generateProgram(t),this.checkCompatibility(r,a);var u=this.getSignature(r,a),l=r.glVertexArrayObjects[this.CONTEXT_UID],h=l[u];if(h)return l[a.id]=h,h;var f=r.buffers,d=r.attributes,_={},v={};for(var m in f)_[m]=0,v[m]=0;for(var m in d)!d[m].size&&a.attributeData[m]?d[m].size=a.attributeData[m].size:d[m].size||console.warn("PIXI Geometry attribute '"+m+"' size cannot be determined (likely the bound shader does not have the attribute)"),_[d[m].buffer]+=d[m].size*byteSizeMap[d[m].type];for(var m in d){var E=d[m],A=E.size;E.stride===void 0&&(_[E.buffer]===A*byteSizeMap[E.type]?E.stride=0:E.stride=_[E.buffer]),E.start===void 0&&(E.start=v[E.buffer],v[E.buffer]+=A*byteSizeMap[E.type])}h=i.createVertexArray(),i.bindVertexArray(h);for(var T=0;T<f.length;T++){var C=f[T];o.bind(C),n&&C._glBuffers[s].refCount++}return this.activateVao(r,a),this._activeVao=h,l[a.id]=h,l[u]=h,h},e.prototype.disposeGeometry=function(r,t){var n;if(!!this.managedGeometries[r.id]){delete this.managedGeometries[r.id];var i=r.glVertexArrayObjects[this.CONTEXT_UID],s=this.gl,o=r.buffers,a=(n=this.renderer)===null||n===void 0?void 0:n.buffer;if(r.disposeRunner.remove(this),!!i){if(a)for(var u=0;u<o.length;u++){var l=o[u]._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!t&&a.dispose(o[u],t))}if(!t){for(var h in i)if(h[0]==="g"){var f=i[h];this._activeVao===f&&this.unbind(),s.deleteVertexArray(f)}}delete r.glVertexArrayObjects[this.CONTEXT_UID]}}},e.prototype.disposeAll=function(r){for(var t=Object.keys(this.managedGeometries),n=0;n<t.length;n++)this.disposeGeometry(this.managedGeometries[t[n]],r)},e.prototype.activateVao=function(r,t){var n=this.gl,i=this.CONTEXT_UID,s=this.renderer.buffer,o=r.buffers,a=r.attributes;r.indexBuffer&&s.bind(r.indexBuffer);var u=null;for(var l in a){var h=a[l],f=o[h.buffer],d=f._glBuffers[i];if(t.attributeData[l]){u!==d&&(s.bind(f),u=d);var _=t.attributeData[l].location;if(n.enableVertexAttribArray(_),n.vertexAttribPointer(_,h.size,h.type||n.FLOAT,h.normalized,h.stride,h.start),h.instance)if(this.hasInstance)n.vertexAttribDivisor(_,1);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}},e.prototype.draw=function(r,t,n,i){var s=this.gl,o=this._activeGeometry;if(o.indexBuffer){var a=o.indexBuffer.data.BYTES_PER_ELEMENT,u=a===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;a===2||a===4&&this.canUseUInt32ElementIndex?o.instanced?s.drawElementsInstanced(r,t||o.indexBuffer.data.length,u,(n||0)*a,i||1):s.drawElements(r,t||o.indexBuffer.data.length,u,(n||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?s.drawArraysInstanced(r,n,t||o.getSize(),i||1):s.drawArrays(r,n,t||o.getSize());return this},e.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},e.prototype.destroy=function(){this.renderer=null},e}(),MaskData=function(){function e(r){r===void 0&&(r=null),this.type=MASK_TYPES$5.NONE,this.autoDetect=!0,this.maskObject=r||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=settings$1.FILTER_MULTISAMPLE,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}return Object.defineProperty(e.prototype,"filter",{get:function(){return this._filters?this._filters[0]:null},set:function(r){r?this._filters?this._filters[0]=r:this._filters=[r]:this._filters=null},enumerable:!1,configurable:!0}),e.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=MASK_TYPES$5.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null},e.prototype.copyCountersOrReset=function(r){r?(this._stencilCounter=r._stencilCounter,this._scissorCounter=r._scissorCounter,this._scissorRect=r._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},e}();function compileShader(e,r,t){var n=e.createShader(r);return e.shaderSource(n,t),e.compileShader(n),n}function logPrettyShaderError(e,r){var t=e.getShaderSource(r).split(`
`).map(function(l,h){return h+": "+l}),n=e.getShaderInfoLog(r),i=n.split(`
`),s={},o=i.map(function(l){return parseFloat(l.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))}).filter(function(l){return l&&!s[l]?(s[l]=!0,!0):!1}),a=[""];o.forEach(function(l){t[l-1]="%c"+t[l-1]+"%c",a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});var u=t.join(`
`);a[0]=u,console.error(n),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,a),console.groupEnd()}function logProgramError(e,r,t,n){e.getProgramParameter(r,e.LINK_STATUS)||(e.getShaderParameter(t,e.COMPILE_STATUS)||logPrettyShaderError(e,t),e.getShaderParameter(n,e.COMPILE_STATUS)||logPrettyShaderError(e,n),console.error("PixiJS Error: Could not initialize shader."),e.getProgramInfoLog(r)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",e.getProgramInfoLog(r)))}function booleanArray(e){for(var r=new Array(e),t=0;t<r.length;t++)r[t]=!1;return r}function defaultValue(e,r){switch(e){case"float":return 0;case"vec2":return new Float32Array(2*r);case"vec3":return new Float32Array(3*r);case"vec4":return new Float32Array(4*r);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*r);case"ivec3":return new Int32Array(3*r);case"ivec4":return new Int32Array(4*r);case"uvec2":return new Uint32Array(2*r);case"uvec3":return new Uint32Array(3*r);case"uvec4":return new Uint32Array(4*r);case"bool":return!1;case"bvec2":return booleanArray(2*r);case"bvec3":return booleanArray(3*r);case"bvec4":return booleanArray(4*r);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var unknownContext={},context=unknownContext;function getTestContext(){if(context===unknownContext||context&&context.isContextLost()){var e=settings$1.ADAPTER.createCanvas(),r=void 0;settings$1.PREFER_ENV>=ENV$5.WEBGL2&&(r=e.getContext("webgl2",{})),r||(r=e.getContext("webgl",{})||e.getContext("experimental-webgl",{}),r?r.getExtension("WEBGL_draw_buffers"):r=null),context=r}return context}var maxFragmentPrecision;function getMaxFragmentPrecision(){if(!maxFragmentPrecision){maxFragmentPrecision=PRECISION$5.MEDIUM;var e=getTestContext();if(e&&e.getShaderPrecisionFormat){var r=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT);maxFragmentPrecision=r.precision?PRECISION$5.HIGH:PRECISION$5.MEDIUM}}return maxFragmentPrecision}function setPrecision(e,r,t){if(e.substring(0,9)!=="precision"){var n=r;return r===PRECISION$5.HIGH&&t!==PRECISION$5.HIGH&&(n=PRECISION$5.MEDIUM),"precision "+n+` float;
`+e}else if(t!==PRECISION$5.HIGH&&e.substring(0,15)==="precision highp")return e.replace("precision highp","precision mediump");return e}var GLSL_TO_SIZE={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function mapSize(e){return GLSL_TO_SIZE[e]}var GL_TABLE=null,GL_TO_GLSL_TYPES={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function mapType(e,r){if(!GL_TABLE){var t=Object.keys(GL_TO_GLSL_TYPES);GL_TABLE={};for(var n=0;n<t.length;++n){var i=t[n];GL_TABLE[e[i]]=GL_TO_GLSL_TYPES[i]}}return GL_TABLE[r]}var uniformParsers=[{test:function(e){return e.type==="float"&&e.size===1},code:function(e){return`
            if(uv["`+e+'"] !== ud["'+e+`"].value)
            {
                ud["`+e+'"].value = uv["'+e+`"]
                gl.uniform1f(ud["`+e+'"].location, uv["'+e+`"])
            }
            `}},{test:function(e,r){return(e.type==="sampler2D"||e.type==="samplerCube"||e.type==="sampler2DArray")&&e.size===1&&!e.isArray&&(r==null||r.castToBaseTexture!==void 0)},code:function(e){return`t = syncData.textureCount++;

            renderer.texture.bind(uv["`+e+`"], t);

            if(ud["`+e+`"].value !== t)
            {
                ud["`+e+`"].value = t;
                gl.uniform1i(ud["`+e+`"].location, t);
; // eslint-disable-line max-len
            }`}},{test:function(e,r){return e.type==="mat3"&&e.size===1&&r.a!==void 0},code:function(e){return`
            gl.uniformMatrix3fv(ud["`+e+'"].location, false, uv["'+e+`"].toArray(true));
            `},codeUbo:function(e){return`
                var `+e+"_matrix = uv."+e+`.toArray(true);

                data[offset] = `+e+`_matrix[0];
                data[offset+1] = `+e+`_matrix[1];
                data[offset+2] = `+e+`_matrix[2];
        
                data[offset + 4] = `+e+`_matrix[3];
                data[offset + 5] = `+e+`_matrix[4];
                data[offset + 6] = `+e+`_matrix[5];
        
                data[offset + 8] = `+e+`_matrix[6];
                data[offset + 9] = `+e+`_matrix[7];
                data[offset + 10] = `+e+`_matrix[8];
            `}},{test:function(e,r){return e.type==="vec2"&&e.size===1&&r.x!==void 0},code:function(e){return`
                cv = ud["`+e+`"].value;
                v = uv["`+e+`"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["`+e+`"].location, v.x, v.y);
                }`},codeUbo:function(e){return`
                v = uv.`+e+`;

                data[offset] = v.x;
                data[offset+1] = v.y;
            `}},{test:function(e){return e.type==="vec2"&&e.size===1},code:function(e){return`
                cv = ud["`+e+`"].value;
                v = uv["`+e+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["`+e+`"].location, v[0], v[1]);
                }
            `}},{test:function(e,r){return e.type==="vec4"&&e.size===1&&r.width!==void 0},code:function(e){return`
                cv = ud["`+e+`"].value;
                v = uv["`+e+`"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["`+e+`"].location, v.x, v.y, v.width, v.height)
                }`},codeUbo:function(e){return`
                    v = uv.`+e+`;

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `}},{test:function(e){return e.type==="vec4"&&e.size===1},code:function(e){return`
                cv = ud["`+e+`"].value;
                v = uv["`+e+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["`+e+`"].location, v[0], v[1], v[2], v[3])
                }`}}],GLSL_TO_SINGLE_SETTERS_CACHED={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},GLSL_TO_ARRAY_SETTERS={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function generateUniformsSync(e,r){var t,n=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(var i in e.uniforms){var s=r[i];if(!s){!((t=e.uniforms[i])===null||t===void 0)&&t.group&&(e.uniforms[i].ubo?n.push(`
                        renderer.shader.syncUniformBufferGroup(uv.`+i+", '"+i+`');
                    `):n.push(`
                        renderer.shader.syncUniformGroup(uv.`+i+`, syncData);
                    `));continue}for(var o=e.uniforms[i],a=!1,u=0;u<uniformParsers.length;u++)if(uniformParsers[u].test(s,o)){n.push(uniformParsers[u].code(i,o)),a=!0;break}if(!a){var l=s.size===1?GLSL_TO_SINGLE_SETTERS_CACHED:GLSL_TO_ARRAY_SETTERS,h=l[s.type].replace("location",'ud["'+i+'"].location');n.push(`
            cu = ud["`+i+`"];
            cv = cu.value;
            v = uv["`+i+`"];
            `+h+";")}}return new Function("ud","uv","renderer","syncData",n.join(`
`))}var fragTemplate$1=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function generateIfTestSrc(e){for(var r="",t=0;t<e;++t)t>0&&(r+=`
else `),t<e-1&&(r+="if(test == "+t+".0){}");return r}function checkMaxIfStatementsInShader(e,r){if(e===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var t=r.createShader(r.FRAGMENT_SHADER);;){var n=fragTemplate$1.replace(/%forloop%/gi,generateIfTestSrc(e));if(r.shaderSource(t,n),r.compileShader(t),!r.getShaderParameter(t,r.COMPILE_STATUS))e=e/2|0;else break}return e}var unsafeEval;function unsafeEvalSupported(){if(typeof unsafeEval=="boolean")return unsafeEval;try{var e=new Function("param1","param2","param3","return param1[param2] === param3;");unsafeEval=e({a:"b"},"a","b")===!0}catch{unsafeEval=!1}return unsafeEval}var defaultFragment$2=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,defaultVertex$3=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`,UID$1=0,nameCache={},Program=function(){function e(r,t,n){n===void 0&&(n="pixi-shader"),this.id=UID$1++,this.vertexSrc=r||e.defaultVertexSrc,this.fragmentSrc=t||e.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.vertexSrc.substring(0,8)!=="#version"&&(n=n.replace(/\s+/g,"-"),nameCache[n]?(nameCache[n]++,n+="-"+nameCache[n]):nameCache[n]=1,this.vertexSrc="#define SHADER_NAME "+n+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+n+`
`+this.fragmentSrc,this.vertexSrc=setPrecision(this.vertexSrc,settings$1.PRECISION_VERTEX,PRECISION$5.HIGH),this.fragmentSrc=setPrecision(this.fragmentSrc,settings$1.PRECISION_FRAGMENT,getMaxFragmentPrecision())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(e,"defaultVertexSrc",{get:function(){return defaultVertex$3},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return defaultFragment$2},enumerable:!1,configurable:!0}),e.from=function(r,t,n){var i=r+t,s=ProgramCache[i];return s||(ProgramCache[i]=s=new e(r,t,n)),s},e}(),Shader=function(){function e(r,t){this.uniformBindCount=0,this.program=r,t?t instanceof UniformGroup?this.uniformGroup=t:this.uniformGroup=new UniformGroup(t):this.uniformGroup=new UniformGroup({})}return e.prototype.checkUniformExists=function(r,t){if(t.uniforms[r])return!0;for(var n in t.uniforms){var i=t.uniforms[n];if(i.group&&this.checkUniformExists(r,i))return!0}return!1},e.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(e.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),e.from=function(r,t,n){var i=Program.from(r,t);return new e(i,n)},e}(),BLEND$1=0,OFFSET$1=1,CULLING$1=2,DEPTH_TEST$1=3,WINDING$1=4,DEPTH_MASK$1=5,State=function(){function e(){this.data=0,this.blendMode=BLEND_MODES$5.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(e.prototype,"blend",{get:function(){return!!(this.data&1<<BLEND$1)},set:function(r){!!(this.data&1<<BLEND$1)!==r&&(this.data^=1<<BLEND$1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offsets",{get:function(){return!!(this.data&1<<OFFSET$1)},set:function(r){!!(this.data&1<<OFFSET$1)!==r&&(this.data^=1<<OFFSET$1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"culling",{get:function(){return!!(this.data&1<<CULLING$1)},set:function(r){!!(this.data&1<<CULLING$1)!==r&&(this.data^=1<<CULLING$1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depthTest",{get:function(){return!!(this.data&1<<DEPTH_TEST$1)},set:function(r){!!(this.data&1<<DEPTH_TEST$1)!==r&&(this.data^=1<<DEPTH_TEST$1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depthMask",{get:function(){return!!(this.data&1<<DEPTH_MASK$1)},set:function(r){!!(this.data&1<<DEPTH_MASK$1)!==r&&(this.data^=1<<DEPTH_MASK$1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clockwiseFrontFace",{get:function(){return!!(this.data&1<<WINDING$1)},set:function(r){!!(this.data&1<<WINDING$1)!==r&&(this.data^=1<<WINDING$1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this._blendMode},set:function(r){this.blend=r!==BLEND_MODES$5.NONE,this._blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(r){this.offsets=!!r,this._polygonOffset=r},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"[@pixi/core:State "+("blendMode="+this.blendMode+" ")+("clockwiseFrontFace="+this.clockwiseFrontFace+" ")+("culling="+this.culling+" ")+("depthMask="+this.depthMask+" ")+("polygonOffset="+this.polygonOffset)+"]"},e.for2d=function(){var r=new e;return r.depthTest=!1,r.blend=!0,r},e}(),defaultFragment$1=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,defaultVertex$2=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,Filter=function(e){__extends$i(r,e);function r(t,n,i){var s=this,o=Program.from(t||r.defaultVertexSrc,n||r.defaultFragmentSrc);return s=e.call(this,o,i)||this,s.padding=0,s.resolution=settings$1.FILTER_RESOLUTION,s.multisample=settings$1.FILTER_MULTISAMPLE,s.enabled=!0,s.autoFit=!0,s.state=new State,s}return r.prototype.apply=function(t,n,i,s,o){t.applyFilter(this,n,i,s)},Object.defineProperty(r.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._resolution=t},enumerable:!1,configurable:!0}),Object.defineProperty(r,"defaultVertexSrc",{get:function(){return defaultVertex$2},enumerable:!1,configurable:!0}),Object.defineProperty(r,"defaultFragmentSrc",{get:function(){return defaultFragment$1},enumerable:!1,configurable:!0}),r}(Shader),vertex$4=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,fragment$7=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,tempMat$1=new Matrix,TextureMatrix=function(){function e(r,t){this._texture=r,this.mapCoord=new Matrix,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof t>"u"?.5:t,this.isSimple=!1}return Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(r){this._texture=r,this._textureID=-1},enumerable:!1,configurable:!0}),e.prototype.multiplyUvs=function(r,t){t===void 0&&(t=r);for(var n=this.mapCoord,i=0;i<r.length;i+=2){var s=r[i],o=r[i+1];t[i]=s*n.a+o*n.c+n.tx,t[i+1]=s*n.b+o*n.d+n.ty}return t},e.prototype.update=function(r){var t=this._texture;if(!t||!t.valid||!r&&this._textureID===t._updateID)return!1;this._textureID=t._updateID,this._updateID++;var n=t._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);var i=t.orig,s=t.trim;s&&(tempMat$1.set(i.width/s.width,0,0,i.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(tempMat$1));var o=t.baseTexture,a=this.uClampFrame,u=this.clampMargin/o.resolution,l=this.clampOffset;return a[0]=(t._frame.x+u+l)/o.width,a[1]=(t._frame.y+u+l)/o.height,a[2]=(t._frame.x+t._frame.width-u+l)/o.width,a[3]=(t._frame.y+t._frame.height-u+l)/o.height,this.uClampOffset[0]=l/o.realWidth,this.uClampOffset[1]=l/o.realHeight,this.isSimple=t._frame.width===o.width&&t._frame.height===o.height&&t.rotate===0,!0},e}(),SpriteMaskFilter=function(e){__extends$i(r,e);function r(t,n,i){var s=this,o=null;return typeof t!="string"&&n===void 0&&i===void 0&&(o=t,t=void 0,n=void 0,i=void 0),s=e.call(this,t||vertex$4,n||fragment$7,i)||this,s.maskSprite=o,s.maskMatrix=new Matrix,s}return Object.defineProperty(r.prototype,"maskSprite",{get:function(){return this._maskSprite},set:function(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)},enumerable:!1,configurable:!0}),r.prototype.apply=function(t,n,i,s){var o=this._maskSprite,a=o._texture;!a.valid||(a.uvMatrix||(a.uvMatrix=new TextureMatrix(a,0)),a.uvMatrix.update(),this.uniforms.npmAlpha=a.baseTexture.alphaMode?0:1,this.uniforms.mask=a,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,o).prepend(a.uvMatrix.mapCoord),this.uniforms.alpha=o.worldAlpha,this.uniforms.maskClamp=a.uvMatrix.uClampFrame,t.applyFilter(this,n,i,s))},r}(Filter),MaskSystem=function(){function e(r){this.renderer=r,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return e.prototype.setMaskStack=function(r){this.maskStack=r,this.renderer.scissor.setMaskStack(r),this.renderer.stencil.setMaskStack(r)},e.prototype.push=function(r,t){var n=t;if(!n.isMaskData){var i=this.maskDataPool.pop()||new MaskData;i.pooled=!0,i.maskObject=t,n=i}var s=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(n.copyCountersOrReset(s),n._colorMask=s?s._colorMask:15,n.autoDetect&&this.detect(n),n._target=r,n.type!==MASK_TYPES$5.SPRITE&&this.maskStack.push(n),n.enabled)switch(n.type){case MASK_TYPES$5.SCISSOR:this.renderer.scissor.push(n);break;case MASK_TYPES$5.STENCIL:this.renderer.stencil.push(n);break;case MASK_TYPES$5.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n);break;case MASK_TYPES$5.COLOR:this.pushColorMask(n);break}n.type===MASK_TYPES$5.SPRITE&&this.maskStack.push(n)},e.prototype.pop=function(r){var t=this.maskStack.pop();if(!(!t||t._target!==r)){if(t.enabled)switch(t.type){case MASK_TYPES$5.SCISSOR:this.renderer.scissor.pop(t);break;case MASK_TYPES$5.STENCIL:this.renderer.stencil.pop(t.maskObject);break;case MASK_TYPES$5.SPRITE:this.popSpriteMask(t);break;case MASK_TYPES$5.COLOR:this.popColorMask(t);break}if(t.reset(),t.pooled&&this.maskDataPool.push(t),this.maskStack.length!==0){var n=this.maskStack[this.maskStack.length-1];n.type===MASK_TYPES$5.SPRITE&&n._filters&&(n._filters[0].maskSprite=n.maskObject)}}},e.prototype.detect=function(r){var t=r.maskObject;t?t.isSprite?r.type=MASK_TYPES$5.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(r)?r.type=MASK_TYPES$5.SCISSOR:r.type=MASK_TYPES$5.STENCIL:r.type=MASK_TYPES$5.COLOR},e.prototype.pushSpriteMask=function(r){var t,n,i=r.maskObject,s=r._target,o=r._filters;o||(o=this.alphaMaskPool[this.alphaMaskIndex],o||(o=this.alphaMaskPool[this.alphaMaskIndex]=[new SpriteMaskFilter]));var a=this.renderer,u=a.renderTexture,l,h;if(u.current){var f=u.current;l=r.resolution||f.resolution,h=(t=r.multisample)!==null&&t!==void 0?t:f.multisample}else l=r.resolution||a.resolution,h=(n=r.multisample)!==null&&n!==void 0?n:a.multisample;o[0].resolution=l,o[0].multisample=h,o[0].maskSprite=i;var d=s.filterArea;s.filterArea=i.getBounds(!0),a.filter.push(s,o),s.filterArea=d,r._filters||this.alphaMaskIndex++},e.prototype.popSpriteMask=function(r){this.renderer.filter.pop(),r._filters?r._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)},e.prototype.pushColorMask=function(r){var t=r._colorMask,n=r._colorMask=t&r.colorMask;n!==t&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)},e.prototype.popColorMask=function(r){var t=r._colorMask,n=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;n!==t&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)},e.prototype.destroy=function(){this.renderer=null},e}(),AbstractMaskSystem=function(){function e(r){this.renderer=r,this.maskStack=[],this.glConst=0}return e.prototype.getStackLength=function(){return this.maskStack.length},e.prototype.setMaskStack=function(r){var t=this.renderer.gl,n=this.getStackLength();this.maskStack=r;var i=this.getStackLength();i!==n&&(i===0?t.disable(this.glConst):(t.enable(this.glConst),this._useCurrent()))},e.prototype._useCurrent=function(){},e.prototype.destroy=function(){this.renderer=null,this.maskStack=null},e}(),tempMatrix$1=new Matrix,rectPool=[],ScissorSystem=function(e){__extends$i(r,e);function r(t){var n=e.call(this,t)||this;return n.glConst=settings$1.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST,n}return r.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},r.prototype.calcScissorRect=function(t){var n;if(!t._scissorRectLocal){var i=t._scissorRect,s=t.maskObject,o=this.renderer,a=o.renderTexture,u=s.getBounds(!0,(n=rectPool.pop())!==null&&n!==void 0?n:new Rectangle);this.roundFrameToPixels(u,a.current?a.current.resolution:o.resolution,a.sourceFrame,a.destinationFrame,o.projection.transform),i&&u.fit(i),t._scissorRectLocal=u}},r.isMatrixRotated=function(t){if(!t)return!1;var n=t.a,i=t.b,s=t.c,o=t.d;return(Math.abs(i)>1e-4||Math.abs(s)>1e-4)&&(Math.abs(n)>1e-4||Math.abs(o)>1e-4)},r.prototype.testScissor=function(t){var n=t.maskObject;if(!n.isFastRect||!n.isFastRect()||r.isMatrixRotated(n.worldTransform)||r.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);var i=t._scissorRectLocal;return i.width>0&&i.height>0},r.prototype.roundFrameToPixels=function(t,n,i,s,o){r.isMatrixRotated(o)||(o=o?tempMatrix$1.copyFrom(o):tempMatrix$1.identity(),o.translate(-i.x,-i.y).scale(s.width/i.width,s.height/i.height).translate(s.x,s.y),this.renderer.filter.transformAABB(o,t),t.fit(s),t.x=Math.round(t.x*n),t.y=Math.round(t.y*n),t.width=Math.round(t.width*n),t.height=Math.round(t.height*n))},r.prototype.push=function(t){t._scissorRectLocal||this.calcScissorRect(t);var n=this.renderer.gl;t._scissorRect||n.enable(n.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()},r.prototype.pop=function(t){var n=this.renderer.gl;t&&rectPool.push(t._scissorRectLocal),this.getStackLength()>0?this._useCurrent():n.disable(n.SCISSOR_TEST)},r.prototype._useCurrent=function(){var t=this.maskStack[this.maskStack.length-1]._scissorRect,n;this.renderer.renderTexture.current?n=t.y:n=this.renderer.height-t.height-t.y,this.renderer.gl.scissor(t.x,n,t.width,t.height)},r}(AbstractMaskSystem),StencilSystem=function(e){__extends$i(r,e);function r(t){var n=e.call(this,t)||this;return n.glConst=settings$1.ADAPTER.getWebGLRenderingContext().STENCIL_TEST,n}return r.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},r.prototype.push=function(t){var n=t.maskObject,i=this.renderer.gl,s=t._stencilCounter;s===0&&(this.renderer.framebuffer.forceStencil(),i.clearStencil(0),i.clear(i.STENCIL_BUFFER_BIT),i.enable(i.STENCIL_TEST)),t._stencilCounter++;var o=t._colorMask;o!==0&&(t._colorMask=0,i.colorMask(!1,!1,!1,!1)),i.stencilFunc(i.EQUAL,s,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.INCR),n.renderable=!0,n.render(this.renderer),this.renderer.batch.flush(),n.renderable=!1,o!==0&&(t._colorMask=o,i.colorMask((o&1)!==0,(o&2)!==0,(o&4)!==0,(o&8)!==0)),this._useCurrent()},r.prototype.pop=function(t){var n=this.renderer.gl;if(this.getStackLength()===0)n.disable(n.STENCIL_TEST);else{var i=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,s=i?i._colorMask:15;s!==0&&(i._colorMask=0,n.colorMask(!1,!1,!1,!1)),n.stencilOp(n.KEEP,n.KEEP,n.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,s!==0&&(i._colorMask=s,n.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}},r.prototype._useCurrent=function(){var t=this.renderer.gl;t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},r}(AbstractMaskSystem),ProjectionSystem=function(){function e(r){this.renderer=r,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Matrix,this.transform=null}return e.prototype.update=function(r,t,n,i){this.destinationFrame=r||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||r,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,i),this.transform&&this.projectionMatrix.append(this.transform);var s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)},e.prototype.calculateProjection=function(r,t,n,i){var s=this.projectionMatrix,o=i?-1:1;s.identity(),s.a=1/t.width*2,s.d=o*(1/t.height*2),s.tx=-1-t.x*s.a,s.ty=-o-t.y*s.d},e.prototype.setTransform=function(r){},e.prototype.destroy=function(){this.renderer=null},e}(),tempRect=new Rectangle,tempRect2=new Rectangle,RenderTextureSystem=function(){function e(r){this.renderer=r,this.clearColor=r._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Rectangle,this.destinationFrame=new Rectangle,this.viewportFrame=new Rectangle}return e.prototype.bind=function(r,t,n){r===void 0&&(r=null);var i=this.renderer;this.current=r;var s,o,a;r?(s=r.baseTexture,a=s.resolution,t||(tempRect.width=r.frame.width,tempRect.height=r.frame.height,t=tempRect),n||(tempRect2.x=r.frame.x,tempRect2.y=r.frame.y,tempRect2.width=t.width,tempRect2.height=t.height,n=tempRect2),o=s.framebuffer):(a=i.resolution,t||(tempRect.width=i.screen.width,tempRect.height=i.screen.height,t=tempRect),n||(n=tempRect,n.width=t.width,n.height=t.height));var u=this.viewportFrame;u.x=n.x*a,u.y=n.y*a,u.width=n.width*a,u.height=n.height*a,r||(u.y=i.view.height-(u.y+u.height)),u.ceil(),this.renderer.framebuffer.bind(o,u),this.renderer.projection.update(n,t,a,!o),r?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(t),this.destinationFrame.copyFrom(n)},e.prototype.clear=function(r,t){this.current?r=r||this.current.baseTexture.clearColor:r=r||this.clearColor;var n=this.destinationFrame,i=this.current?this.current.baseTexture:this.renderer.screen,s=n.width!==i.width||n.height!==i.height;if(s){var o=this.viewportFrame,a=o.x,u=o.y,l=o.width,h=o.height;a=Math.round(a),u=Math.round(u),l=Math.round(l),h=Math.round(h),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(a,u,l,h)}this.renderer.framebuffer.clear(r[0],r[1],r[2],r[3],t),s&&this.renderer.scissor.pop()},e.prototype.resize=function(){this.bind(null)},e.prototype.reset=function(){this.bind(null)},e.prototype.destroy=function(){this.renderer=null},e}();function uboUpdate(e,r,t,n,i){t.buffer.update(i)}var UBO_TO_SINGLE_SETTERS={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},GLSL_TO_STD40_SIZE={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function createUBOElements(e){for(var r=e.map(function(u){return{data:u,offset:0,dataLen:0,dirty:0}}),t=0,n=0,i=0,s=0;s<r.length;s++){var o=r[s];if(t=GLSL_TO_STD40_SIZE[o.data.type],o.data.size>1&&(t=Math.max(t,16)*o.data.size),o.dataLen=t,n%t!==0&&n<16){var a=n%t%16;n+=a,i+=a}n+t>16?(i=Math.ceil(i/16)*16,o.offset=i,i+=t,n=t):(o.offset=i,n+=t,i+=t)}return i=Math.ceil(i/16)*16,{uboElements:r,size:i}}function getUBOData(e,r){var t=[];for(var n in e)r[n]&&t.push(r[n]);return t.sort(function(i,s){return i.index-s.index}),t}function generateUniformBufferSync(e,r){if(!e.autoManage)return{size:0,syncFunc:uboUpdate};for(var t=getUBOData(e.uniforms,r),n=createUBOElements(t),i=n.uboElements,s=n.size,o=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `],a=0;a<i.length;a++){for(var u=i[a],l=e.uniforms[u.data.name],h=u.data.name,f=!1,d=0;d<uniformParsers.length;d++){var _=uniformParsers[d];if(_.codeUbo&&_.test(u.data,l)){o.push("offset = "+u.offset/4+";",uniformParsers[d].codeUbo(u.data.name,l)),f=!0;break}}if(!f)if(u.data.size>1){var v=mapSize(u.data.type),m=Math.max(GLSL_TO_STD40_SIZE[u.data.type]/16,1),E=v/m,A=(4-E%4)%4;o.push(`
                cv = ud.`+h+`.value;
                v = uv.`+h+`;
                offset = `+u.offset/4+`;

                t = 0;

                for(var i=0; i < `+u.data.size*m+`; i++)
                {
                    for(var j = 0; j < `+E+`; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += `+A+`;
                }

                `)}else{var T=UBO_TO_SINGLE_SETTERS[u.data.type];o.push(`
                cv = ud.`+h+`.value;
                v = uv.`+h+`;
                offset = `+u.offset/4+`;
                `+T+`;
                `)}}return o.push(`
       renderer.buffer.update(buffer);
    `),{size:s,syncFunc:new Function("ud","uv","renderer","syncData","buffer",o.join(`
`))}}var GLProgram=function(){function e(r,t){this.program=r,this.uniformData=t,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return e.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},e}();function getAttributeData(e,r){for(var t={},n=r.getProgramParameter(e,r.ACTIVE_ATTRIBUTES),i=0;i<n;i++){var s=r.getActiveAttrib(e,i);if(s.name.indexOf("gl_")!==0){var o=mapType(r,s.type),a={type:o,name:s.name,size:mapSize(o),location:r.getAttribLocation(e,s.name)};t[s.name]=a}}return t}function getUniformData(e,r){for(var t={},n=r.getProgramParameter(e,r.ACTIVE_UNIFORMS),i=0;i<n;i++){var s=r.getActiveUniform(e,i),o=s.name.replace(/\[.*?\]$/,""),a=!!s.name.match(/\[.*?\]$/),u=mapType(r,s.type);t[o]={name:o,index:i,type:u,size:s.size,isArray:a,value:defaultValue(u,s.size)}}return t}function generateProgram(e,r){var t=compileShader(e,e.VERTEX_SHADER,r.vertexSrc),n=compileShader(e,e.FRAGMENT_SHADER,r.fragmentSrc),i=e.createProgram();if(e.attachShader(i,t),e.attachShader(i,n),e.linkProgram(i),e.getProgramParameter(i,e.LINK_STATUS)||logProgramError(e,i,t,n),r.attributeData=getAttributeData(i,e),r.uniformData=getUniformData(i,e),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(r.vertexSrc)){var s=Object.keys(r.attributeData);s.sort(function(h,f){return h>f?1:-1});for(var o=0;o<s.length;o++)r.attributeData[s[o]].location=o,e.bindAttribLocation(i,o,s[o]);e.linkProgram(i)}e.deleteShader(t),e.deleteShader(n);var a={};for(var o in r.uniformData){var u=r.uniformData[o];a[o]={location:e.getUniformLocation(i,o),value:defaultValue(u.type,u.size)}}var l=new GLProgram(i,a);return l}var UID=0,defaultSyncData={textureCount:0,uboCount:0},ShaderSystem=function(){function e(r){this.destroyed=!1,this.renderer=r,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=UID++}return e.prototype.systemCheck=function(){if(!unsafeEvalSupported())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},e.prototype.contextChange=function(r){this.gl=r,this.reset()},e.prototype.bind=function(r,t){r.uniforms.globals=this.renderer.globalUniforms;var n=r.program,i=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(r);return this.shader=r,this.program!==n&&(this.program=n,this.gl.useProgram(i.program)),t||(defaultSyncData.textureCount=0,defaultSyncData.uboCount=0,this.syncUniformGroup(r.uniformGroup,defaultSyncData)),i},e.prototype.setUniforms=function(r){var t=this.shader.program,n=t.glPrograms[this.renderer.CONTEXT_UID];t.syncUniforms(n.uniformData,r,this.renderer)},e.prototype.syncUniformGroup=function(r,t){var n=this.getGlProgram();(!r.static||r.dirtyId!==n.uniformDirtyGroups[r.id])&&(n.uniformDirtyGroups[r.id]=r.dirtyId,this.syncUniforms(r,n,t))},e.prototype.syncUniforms=function(r,t,n){var i=r.syncUniforms[this.shader.program.id]||this.createSyncGroups(r);i(t.uniformData,r.uniforms,this.renderer,n)},e.prototype.createSyncGroups=function(r){var t=this.getSignature(r,this.shader.program.uniformData,"u");return this.cache[t]||(this.cache[t]=generateUniformsSync(r,this.shader.program.uniformData)),r.syncUniforms[this.shader.program.id]=this.cache[t],r.syncUniforms[this.shader.program.id]},e.prototype.syncUniformBufferGroup=function(r,t){var n=this.getGlProgram();if(!r.static||r.dirtyId!==0||!n.uniformGroups[r.id]){r.dirtyId=0;var i=n.uniformGroups[r.id]||this.createSyncBufferGroup(r,n,t);r.buffer.update(),i(n.uniformData,r.uniforms,this.renderer,defaultSyncData,r.buffer)}this.renderer.buffer.bindBufferBase(r.buffer,n.uniformBufferBindings[t])},e.prototype.createSyncBufferGroup=function(r,t,n){var i=this.renderer.gl;this.renderer.buffer.bind(r.buffer);var s=this.gl.getUniformBlockIndex(t.program,n);t.uniformBufferBindings[n]=this.shader.uniformBindCount,i.uniformBlockBinding(t.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;var o=this.getSignature(r,this.shader.program.uniformData,"ubo"),a=this._uboCache[o];if(a||(a=this._uboCache[o]=generateUniformBufferSync(r,this.shader.program.uniformData)),r.autoManage){var u=new Float32Array(a.size/4);r.buffer.update(u)}return t.uniformGroups[r.id]=a.syncFunc,t.uniformGroups[r.id]},e.prototype.getSignature=function(r,t,n){var i=r.uniforms,s=[n+"-"];for(var o in i)s.push(o),t[o]&&s.push(t[o].type);return s.join("-")},e.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},e.prototype.generateProgram=function(r){var t=this.gl,n=r.program,i=generateProgram(t,n);return n.glPrograms[this.renderer.CONTEXT_UID]=i,i},e.prototype.reset=function(){this.program=null,this.shader=null},e.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},e}();function mapWebGLBlendModesToPixi(e,r){return r===void 0&&(r=[]),r[BLEND_MODES$5.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],r[BLEND_MODES$5.ADD]=[e.ONE,e.ONE],r[BLEND_MODES$5.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],r[BLEND_MODES$5.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],r[BLEND_MODES$5.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],r[BLEND_MODES$5.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],r[BLEND_MODES$5.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],r[BLEND_MODES$5.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],r[BLEND_MODES$5.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],r[BLEND_MODES$5.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],r[BLEND_MODES$5.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],r[BLEND_MODES$5.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],r[BLEND_MODES$5.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],r[BLEND_MODES$5.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],r[BLEND_MODES$5.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],r[BLEND_MODES$5.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],r[BLEND_MODES$5.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],r[BLEND_MODES$5.NONE]=[0,0],r[BLEND_MODES$5.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],r[BLEND_MODES$5.ADD_NPM]=[e.SRC_ALPHA,e.ONE,e.ONE,e.ONE],r[BLEND_MODES$5.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],r[BLEND_MODES$5.SRC_IN]=[e.DST_ALPHA,e.ZERO],r[BLEND_MODES$5.SRC_OUT]=[e.ONE_MINUS_DST_ALPHA,e.ZERO],r[BLEND_MODES$5.SRC_ATOP]=[e.DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],r[BLEND_MODES$5.DST_OVER]=[e.ONE_MINUS_DST_ALPHA,e.ONE],r[BLEND_MODES$5.DST_IN]=[e.ZERO,e.SRC_ALPHA],r[BLEND_MODES$5.DST_OUT]=[e.ZERO,e.ONE_MINUS_SRC_ALPHA],r[BLEND_MODES$5.DST_ATOP]=[e.ONE_MINUS_DST_ALPHA,e.SRC_ALPHA],r[BLEND_MODES$5.XOR]=[e.ONE_MINUS_DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],r[BLEND_MODES$5.SUBTRACT]=[e.ONE,e.ONE,e.ONE,e.ONE,e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD],r}var BLEND=0,OFFSET=1,CULLING=2,DEPTH_TEST=3,WINDING=4,DEPTH_MASK=5,StateSystem=function(){function e(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=BLEND_MODES$5.NONE,this._blendEq=!1,this.map=[],this.map[BLEND]=this.setBlend,this.map[OFFSET]=this.setOffset,this.map[CULLING]=this.setCullFace,this.map[DEPTH_TEST]=this.setDepthTest,this.map[WINDING]=this.setFrontFace,this.map[DEPTH_MASK]=this.setDepthMask,this.checks=[],this.defaultState=new State,this.defaultState.blend=!0}return e.prototype.contextChange=function(r){this.gl=r,this.blendModes=mapWebGLBlendModesToPixi(r),this.set(this.defaultState),this.reset()},e.prototype.set=function(r){if(r=r||this.defaultState,this.stateId!==r.data){for(var t=this.stateId^r.data,n=0;t;)t&1&&this.map[n].call(this,!!(r.data&1<<n)),t=t>>1,n++;this.stateId=r.data}for(var n=0;n<this.checks.length;n++)this.checks[n](this,r)},e.prototype.forceState=function(r){r=r||this.defaultState;for(var t=0;t<this.map.length;t++)this.map[t].call(this,!!(r.data&1<<t));for(var t=0;t<this.checks.length;t++)this.checks[t](this,r);this.stateId=r.data},e.prototype.setBlend=function(r){this.updateCheck(e.checkBlendMode,r),this.gl[r?"enable":"disable"](this.gl.BLEND)},e.prototype.setOffset=function(r){this.updateCheck(e.checkPolygonOffset,r),this.gl[r?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},e.prototype.setDepthTest=function(r){this.gl[r?"enable":"disable"](this.gl.DEPTH_TEST)},e.prototype.setDepthMask=function(r){this.gl.depthMask(r)},e.prototype.setCullFace=function(r){this.gl[r?"enable":"disable"](this.gl.CULL_FACE)},e.prototype.setFrontFace=function(r){this.gl.frontFace(this.gl[r?"CW":"CCW"])},e.prototype.setBlendMode=function(r){if(r!==this.blendMode){this.blendMode=r;var t=this.blendModes[r],n=this.gl;t.length===2?n.blendFunc(t[0],t[1]):n.blendFuncSeparate(t[0],t[1],t[2],t[3]),t.length===6?(this._blendEq=!0,n.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}},e.prototype.setPolygonOffset=function(r,t){this.gl.polygonOffset(r,t)},e.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},e.prototype.updateCheck=function(r,t){var n=this.checks.indexOf(r);t&&n===-1?this.checks.push(r):!t&&n!==-1&&this.checks.splice(n,1)},e.checkBlendMode=function(r,t){r.setBlendMode(t.blendMode)},e.checkPolygonOffset=function(r,t){r.setPolygonOffset(1,t.polygonOffset)},e.prototype.destroy=function(){this.gl=null},e}(),TextureGCSystem=function(){function e(r){this.renderer=r,this.count=0,this.checkCount=0,this.maxIdle=settings$1.GC_MAX_IDLE,this.checkCountMax=settings$1.GC_MAX_CHECK_COUNT,this.mode=settings$1.GC_MODE}return e.prototype.postrender=function(){!this.renderer.renderingToScreen||(this.count++,this.mode!==GC_MODES$5.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},e.prototype.run=function(){for(var r=this.renderer.texture,t=r.managedTextures,n=!1,i=0;i<t.length;i++){var s=t[i];!s.framebuffer&&this.count-s.touched>this.maxIdle&&(r.destroyTexture(s,!0),t[i]=null,n=!0)}if(n){for(var o=0,i=0;i<t.length;i++)t[i]!==null&&(t[o++]=t[i]);t.length=o}},e.prototype.unload=function(r){var t=this.renderer.texture,n=r._texture;n&&!n.framebuffer&&t.destroyTexture(n);for(var i=r.children.length-1;i>=0;i--)this.unload(r.children[i])},e.prototype.destroy=function(){this.renderer=null},e}();function mapTypeAndFormatToInternalFormat(e){var r,t,n,i,s,o,a,u,l,h,f,d,_,v,m,E,A,T,C,R,b,S,B;return"WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext?B=(r={},r[TYPES$5.UNSIGNED_BYTE]=(t={},t[FORMATS$5.RGBA]=e.RGBA8,t[FORMATS$5.RGB]=e.RGB8,t[FORMATS$5.RG]=e.RG8,t[FORMATS$5.RED]=e.R8,t[FORMATS$5.RGBA_INTEGER]=e.RGBA8UI,t[FORMATS$5.RGB_INTEGER]=e.RGB8UI,t[FORMATS$5.RG_INTEGER]=e.RG8UI,t[FORMATS$5.RED_INTEGER]=e.R8UI,t[FORMATS$5.ALPHA]=e.ALPHA,t[FORMATS$5.LUMINANCE]=e.LUMINANCE,t[FORMATS$5.LUMINANCE_ALPHA]=e.LUMINANCE_ALPHA,t),r[TYPES$5.BYTE]=(n={},n[FORMATS$5.RGBA]=e.RGBA8_SNORM,n[FORMATS$5.RGB]=e.RGB8_SNORM,n[FORMATS$5.RG]=e.RG8_SNORM,n[FORMATS$5.RED]=e.R8_SNORM,n[FORMATS$5.RGBA_INTEGER]=e.RGBA8I,n[FORMATS$5.RGB_INTEGER]=e.RGB8I,n[FORMATS$5.RG_INTEGER]=e.RG8I,n[FORMATS$5.RED_INTEGER]=e.R8I,n),r[TYPES$5.UNSIGNED_SHORT]=(i={},i[FORMATS$5.RGBA_INTEGER]=e.RGBA16UI,i[FORMATS$5.RGB_INTEGER]=e.RGB16UI,i[FORMATS$5.RG_INTEGER]=e.RG16UI,i[FORMATS$5.RED_INTEGER]=e.R16UI,i[FORMATS$5.DEPTH_COMPONENT]=e.DEPTH_COMPONENT16,i),r[TYPES$5.SHORT]=(s={},s[FORMATS$5.RGBA_INTEGER]=e.RGBA16I,s[FORMATS$5.RGB_INTEGER]=e.RGB16I,s[FORMATS$5.RG_INTEGER]=e.RG16I,s[FORMATS$5.RED_INTEGER]=e.R16I,s),r[TYPES$5.UNSIGNED_INT]=(o={},o[FORMATS$5.RGBA_INTEGER]=e.RGBA32UI,o[FORMATS$5.RGB_INTEGER]=e.RGB32UI,o[FORMATS$5.RG_INTEGER]=e.RG32UI,o[FORMATS$5.RED_INTEGER]=e.R32UI,o[FORMATS$5.DEPTH_COMPONENT]=e.DEPTH_COMPONENT24,o),r[TYPES$5.INT]=(a={},a[FORMATS$5.RGBA_INTEGER]=e.RGBA32I,a[FORMATS$5.RGB_INTEGER]=e.RGB32I,a[FORMATS$5.RG_INTEGER]=e.RG32I,a[FORMATS$5.RED_INTEGER]=e.R32I,a),r[TYPES$5.FLOAT]=(u={},u[FORMATS$5.RGBA]=e.RGBA32F,u[FORMATS$5.RGB]=e.RGB32F,u[FORMATS$5.RG]=e.RG32F,u[FORMATS$5.RED]=e.R32F,u[FORMATS$5.DEPTH_COMPONENT]=e.DEPTH_COMPONENT32F,u),r[TYPES$5.HALF_FLOAT]=(l={},l[FORMATS$5.RGBA]=e.RGBA16F,l[FORMATS$5.RGB]=e.RGB16F,l[FORMATS$5.RG]=e.RG16F,l[FORMATS$5.RED]=e.R16F,l),r[TYPES$5.UNSIGNED_SHORT_5_6_5]=(h={},h[FORMATS$5.RGB]=e.RGB565,h),r[TYPES$5.UNSIGNED_SHORT_4_4_4_4]=(f={},f[FORMATS$5.RGBA]=e.RGBA4,f),r[TYPES$5.UNSIGNED_SHORT_5_5_5_1]=(d={},d[FORMATS$5.RGBA]=e.RGB5_A1,d),r[TYPES$5.UNSIGNED_INT_2_10_10_10_REV]=(_={},_[FORMATS$5.RGBA]=e.RGB10_A2,_[FORMATS$5.RGBA_INTEGER]=e.RGB10_A2UI,_),r[TYPES$5.UNSIGNED_INT_10F_11F_11F_REV]=(v={},v[FORMATS$5.RGB]=e.R11F_G11F_B10F,v),r[TYPES$5.UNSIGNED_INT_5_9_9_9_REV]=(m={},m[FORMATS$5.RGB]=e.RGB9_E5,m),r[TYPES$5.UNSIGNED_INT_24_8]=(E={},E[FORMATS$5.DEPTH_STENCIL]=e.DEPTH24_STENCIL8,E),r[TYPES$5.FLOAT_32_UNSIGNED_INT_24_8_REV]=(A={},A[FORMATS$5.DEPTH_STENCIL]=e.DEPTH32F_STENCIL8,A),r):B=(T={},T[TYPES$5.UNSIGNED_BYTE]=(C={},C[FORMATS$5.RGBA]=e.RGBA,C[FORMATS$5.RGB]=e.RGB,C[FORMATS$5.ALPHA]=e.ALPHA,C[FORMATS$5.LUMINANCE]=e.LUMINANCE,C[FORMATS$5.LUMINANCE_ALPHA]=e.LUMINANCE_ALPHA,C),T[TYPES$5.UNSIGNED_SHORT_5_6_5]=(R={},R[FORMATS$5.RGB]=e.RGB,R),T[TYPES$5.UNSIGNED_SHORT_4_4_4_4]=(b={},b[FORMATS$5.RGBA]=e.RGBA,b),T[TYPES$5.UNSIGNED_SHORT_5_5_5_1]=(S={},S[FORMATS$5.RGBA]=e.RGBA,S),T),B}var GLTexture=function(){function e(r){this.texture=r,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=TYPES$5.UNSIGNED_BYTE,this.internalFormat=FORMATS$5.RGBA,this.samplerType=0}return e}(),TextureSystem=function(){function e(r){this.renderer=r,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new BaseTexture,this.hasIntegerTextures=!1}return e.prototype.contextChange=function(){var r=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=mapTypeAndFormatToInternalFormat(r);var t=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=t;for(var n=0;n<t;n++)this.boundTextures[n]=null;this.emptyTextures={};var i=new GLTexture(r.createTexture());r.bindTexture(r.TEXTURE_2D,i.texture),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[r.TEXTURE_2D]=i,this.emptyTextures[r.TEXTURE_CUBE_MAP]=new GLTexture(r.createTexture()),r.bindTexture(r.TEXTURE_CUBE_MAP,this.emptyTextures[r.TEXTURE_CUBE_MAP].texture);for(var n=0;n<6;n++)r.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,null);r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_MIN_FILTER,r.LINEAR);for(var n=0;n<this.boundTextures.length;n++)this.bind(null,n)},e.prototype.bind=function(r,t){t===void 0&&(t=0);var n=this.gl;if(r=r==null?void 0:r.castToBaseTexture(),r&&r.valid&&!r.parentTextureArray){r.touched=this.renderer.textureGC.count;var i=r._glTextures[this.CONTEXT_UID]||this.initTexture(r);this.boundTextures[t]!==r&&(this.currentLocation!==t&&(this.currentLocation=t,n.activeTexture(n.TEXTURE0+t)),n.bindTexture(r.target,i.texture)),i.dirtyId!==r.dirtyId&&(this.currentLocation!==t&&(this.currentLocation=t,n.activeTexture(n.TEXTURE0+t)),this.updateTexture(r)),this.boundTextures[t]=r}else this.currentLocation!==t&&(this.currentLocation=t,n.activeTexture(n.TEXTURE0+t)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[t]=null},e.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var r=0;r<this.boundTextures.length;r++)this.boundTextures[r]=this.unknownTexture},e.prototype.unbind=function(r){var t=this,n=t.gl,i=t.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var s=0;s<i.length;s++)i[s]===this.unknownTexture&&this.bind(null,s)}for(var s=0;s<i.length;s++)i[s]===r&&(this.currentLocation!==s&&(n.activeTexture(n.TEXTURE0+s),this.currentLocation=s),n.bindTexture(r.target,this.emptyTextures[r.target].texture),i[s]=null)},e.prototype.ensureSamplerType=function(r){var t=this,n=t.boundTextures,i=t.hasIntegerTextures,s=t.CONTEXT_UID;if(!!i)for(var o=r-1;o>=0;--o){var a=n[o];if(a){var u=a._glTextures[s];u.samplerType!==SAMPLER_TYPES$5.FLOAT&&this.renderer.texture.unbind(a)}}},e.prototype.initTexture=function(r){var t=new GLTexture(this.gl.createTexture());return t.dirtyId=-1,r._glTextures[this.CONTEXT_UID]=t,this.managedTextures.push(r),r.on("dispose",this.destroyTexture,this),t},e.prototype.initTextureType=function(r,t){var n,i;t.internalFormat=(i=(n=this.internalFormats[r.type])===null||n===void 0?void 0:n[r.format])!==null&&i!==void 0?i:r.format,this.webGLVersion===2&&r.type===TYPES$5.HALF_FLOAT?t.type=this.gl.HALF_FLOAT:t.type=r.type},e.prototype.updateTexture=function(r){var t=r._glTextures[this.CONTEXT_UID];if(!!t){var n=this.renderer;if(this.initTextureType(r,t),r.resource&&r.resource.upload(n,r,t))t.samplerType!==SAMPLER_TYPES$5.FLOAT&&(this.hasIntegerTextures=!0);else{var i=r.realWidth,s=r.realHeight,o=n.gl;(t.width!==i||t.height!==s||t.dirtyId<0)&&(t.width=i,t.height=s,o.texImage2D(r.target,0,t.internalFormat,i,s,0,r.format,t.type,null))}r.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(r),t.dirtyId=r.dirtyId}},e.prototype.destroyTexture=function(r,t){var n=this.gl;if(r=r.castToBaseTexture(),r._glTextures[this.CONTEXT_UID]&&(this.unbind(r),n.deleteTexture(r._glTextures[this.CONTEXT_UID].texture),r.off("dispose",this.destroyTexture,this),delete r._glTextures[this.CONTEXT_UID],!t)){var i=this.managedTextures.indexOf(r);i!==-1&&removeItems(this.managedTextures,i,1)}},e.prototype.updateTextureStyle=function(r){var t=r._glTextures[this.CONTEXT_UID];!t||((r.mipmap===MIPMAP_MODES$5.POW2||this.webGLVersion!==2)&&!r.isPowerOfTwo?t.mipmap=!1:t.mipmap=r.mipmap>=1,this.webGLVersion!==2&&!r.isPowerOfTwo?t.wrapMode=WRAP_MODES$5.CLAMP:t.wrapMode=r.wrapMode,r.resource&&r.resource.style(this.renderer,r,t)||this.setStyle(r,t),t.dirtyStyleId=r.dirtyStyleId)},e.prototype.setStyle=function(r,t){var n=this.gl;if(t.mipmap&&r.mipmap!==MIPMAP_MODES$5.ON_MANUAL&&n.generateMipmap(r.target),n.texParameteri(r.target,n.TEXTURE_WRAP_S,t.wrapMode),n.texParameteri(r.target,n.TEXTURE_WRAP_T,t.wrapMode),t.mipmap){n.texParameteri(r.target,n.TEXTURE_MIN_FILTER,r.scaleMode===SCALE_MODES$5.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);var i=this.renderer.context.extensions.anisotropicFiltering;if(i&&r.anisotropicLevel>0&&r.scaleMode===SCALE_MODES$5.LINEAR){var s=Math.min(r.anisotropicLevel,n.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(r.target,i.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else n.texParameteri(r.target,n.TEXTURE_MIN_FILTER,r.scaleMode===SCALE_MODES$5.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(r.target,n.TEXTURE_MAG_FILTER,r.scaleMode===SCALE_MODES$5.LINEAR?n.LINEAR:n.NEAREST)},e.prototype.destroy=function(){this.renderer=null},e}(),tempMatrix=new Matrix,AbstractRenderer=function(e){__extends$i(r,e);function r(t,n){t===void 0&&(t=RENDERER_TYPE$5.UNKNOWN);var i=e.call(this)||this;return n=Object.assign({},settings$1.RENDER_OPTIONS,n),i.options=n,i.type=t,i.screen=new Rectangle(0,0,n.width,n.height),i.view=n.view||settings$1.ADAPTER.createCanvas(),i.resolution=n.resolution||settings$1.RESOLUTION,i.useContextAlpha=n.useContextAlpha,i.autoDensity=!!n.autoDensity,i.preserveDrawingBuffer=n.preserveDrawingBuffer,i.clearBeforeRender=n.clearBeforeRender,i._backgroundColor=0,i._backgroundColorRgba=[0,0,0,1],i._backgroundColorString="#000000",i.backgroundColor=n.backgroundColor||i._backgroundColor,i.backgroundAlpha=n.backgroundAlpha,n.transparent!==void 0&&(deprecation$1("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),i.useContextAlpha=n.transparent,i.backgroundAlpha=n.transparent?0:1),i._lastObjectRendered=null,i.plugins={},i}return r.prototype.initPlugins=function(t){for(var n in t)this.plugins[n]=new t[n](this)},Object.defineProperty(r.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),r.prototype.resize=function(t,n){this.view.width=Math.round(t*this.resolution),this.view.height=Math.round(n*this.resolution);var i=this.view.width/this.resolution,s=this.view.height/this.resolution;this.screen.width=i,this.screen.height=s,this.autoDensity&&(this.view.style.width=i+"px",this.view.style.height=s+"px"),this.emit("resize",i,s)},r.prototype.generateTexture=function(t,n,i,s){n===void 0&&(n={}),typeof n=="number"&&(deprecation$1("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),n={scaleMode:n,resolution:i,region:s});var o=n.region,a=__rest(n,["region"]);s=o||t.getLocalBounds(null,!0),s.width===0&&(s.width=1),s.height===0&&(s.height=1);var u=RenderTexture.create(__assign({width:s.width,height:s.height},a));return tempMatrix.tx=-s.x,tempMatrix.ty=-s.y,this.render(t,{renderTexture:u,clear:!1,transform:tempMatrix,skipUpdateTransform:!!t.parent}),u},r.prototype.destroy=function(t){for(var n in this.plugins)this.plugins[n].destroy(),this.plugins[n]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var i=this;i.plugins=null,i.type=RENDERER_TYPE$5.UNKNOWN,i.view=null,i.screen=null,i._tempDisplayObjectParent=null,i.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(r.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=hex2string(t),hex2rgb(t,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(t){this._backgroundColorRgba[3]=t},enumerable:!1,configurable:!0}),r}(EventEmitter),GLBuffer=function(){function e(r){this.buffer=r||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}return e}(),BufferSystem=function(){function e(r){this.renderer=r,this.managedBuffers={},this.boundBufferBases={}}return e.prototype.destroy=function(){this.renderer=null},e.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},e.prototype.bind=function(r){var t=this,n=t.gl,i=t.CONTEXT_UID,s=r._glBuffers[i]||this.createGLBuffer(r);n.bindBuffer(r.type,s.buffer)},e.prototype.bindBufferBase=function(r,t){var n=this,i=n.gl,s=n.CONTEXT_UID;if(this.boundBufferBases[t]!==r){var o=r._glBuffers[s]||this.createGLBuffer(r);this.boundBufferBases[t]=r,i.bindBufferBase(i.UNIFORM_BUFFER,t,o.buffer)}},e.prototype.bindBufferRange=function(r,t,n){var i=this,s=i.gl,o=i.CONTEXT_UID;n=n||0;var a=r._glBuffers[o]||this.createGLBuffer(r);s.bindBufferRange(s.UNIFORM_BUFFER,t||0,a.buffer,n*256,256)},e.prototype.update=function(r){var t=this,n=t.gl,i=t.CONTEXT_UID,s=r._glBuffers[i];if(r._updateID!==s.updateID)if(s.updateID=r._updateID,n.bindBuffer(r.type,s.buffer),s.byteLength>=r.data.byteLength)n.bufferSubData(r.type,0,r.data);else{var o=r.static?n.STATIC_DRAW:n.DYNAMIC_DRAW;s.byteLength=r.data.byteLength,n.bufferData(r.type,r.data,o)}},e.prototype.dispose=function(r,t){if(!!this.managedBuffers[r.id]){delete this.managedBuffers[r.id];var n=r._glBuffers[this.CONTEXT_UID],i=this.gl;r.disposeRunner.remove(this),n&&(t||i.deleteBuffer(n.buffer),delete r._glBuffers[this.CONTEXT_UID])}},e.prototype.disposeAll=function(r){for(var t=Object.keys(this.managedBuffers),n=0;n<t.length;n++)this.dispose(this.managedBuffers[t[n]],r)},e.prototype.createGLBuffer=function(r){var t=this,n=t.CONTEXT_UID,i=t.gl;return r._glBuffers[n]=new GLBuffer(i.createBuffer()),this.managedBuffers[r.id]=r,r.disposeRunner.add(this),r._glBuffers[n]},e}(),Renderer=function(e){__extends$i(r,e);function r(t){var n=e.call(this,RENDERER_TYPE$5.WEBGL,t)||this;return t=n.options,n.gl=null,n.CONTEXT_UID=0,n.runners={destroy:new Runner("destroy"),contextChange:new Runner("contextChange"),reset:new Runner("reset"),update:new Runner("update"),postrender:new Runner("postrender"),prerender:new Runner("prerender"),resize:new Runner("resize")},n.runners.contextChange.add(n),n.globalUniforms=new UniformGroup({projectionMatrix:new Matrix},!0),n.addSystem(MaskSystem,"mask").addSystem(ContextSystem,"context").addSystem(StateSystem,"state").addSystem(ShaderSystem,"shader").addSystem(TextureSystem,"texture").addSystem(BufferSystem,"buffer").addSystem(GeometrySystem,"geometry").addSystem(FramebufferSystem,"framebuffer").addSystem(ScissorSystem,"scissor").addSystem(StencilSystem,"stencil").addSystem(ProjectionSystem,"projection").addSystem(TextureGCSystem,"textureGC").addSystem(FilterSystem,"filter").addSystem(RenderTextureSystem,"renderTexture").addSystem(BatchSystem,"batch"),n.initPlugins(r.__plugins),n.multisample=void 0,t.context?n.context.initFromContext(t.context):n.context.initFromOptions({alpha:!!n.useContextAlpha,antialias:t.antialias,premultipliedAlpha:n.useContextAlpha&&n.useContextAlpha!=="notMultiplied",stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:n.options.powerPreference}),n.renderingToScreen=!0,sayHello(n.context.webGLVersion===2?"WebGL 2":"WebGL 1"),n.resize(n.options.width,n.options.height),n}return r.create=function(t){if(isWebGLSupported())return new r(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},r.prototype.contextChange=function(){var t=this.gl,n;if(this.context.webGLVersion===1){var i=t.getParameter(t.FRAMEBUFFER_BINDING);t.bindFramebuffer(t.FRAMEBUFFER,null),n=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.FRAMEBUFFER,i)}else{var i=t.getParameter(t.DRAW_FRAMEBUFFER_BINDING);t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),n=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,i)}n>=MSAA_QUALITY$5.HIGH?this.multisample=MSAA_QUALITY$5.HIGH:n>=MSAA_QUALITY$5.MEDIUM?this.multisample=MSAA_QUALITY$5.MEDIUM:n>=MSAA_QUALITY$5.LOW?this.multisample=MSAA_QUALITY$5.LOW:this.multisample=MSAA_QUALITY$5.NONE},r.prototype.addSystem=function(t,n){var i=new t(this);if(this[n])throw new Error('Whoops! The name "'+n+'" is already in use');this[n]=i;for(var s in this.runners)this.runners[s].add(i);return this},r.prototype.render=function(t,n){var i,s,o,a;if(n&&(n instanceof RenderTexture?(deprecation$1("6.0.0","Renderer#render arguments changed, use options instead."),i=n,s=arguments[2],o=arguments[3],a=arguments[4]):(i=n.renderTexture,s=n.clear,o=n.transform,a=n.skipUpdateTransform)),this.renderingToScreen=!i,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=o,!this.context.isLost){if(i||(this._lastObjectRendered=t),!a){var u=t.enableTempParent();t.updateTransform(),t.disableTempParent(u)}this.renderTexture.bind(i),this.batch.currentRenderer.start(),(s!==void 0?s:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),i&&i.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},r.prototype.generateTexture=function(t,n,i,s){n===void 0&&(n={});var o=e.prototype.generateTexture.call(this,t,n,i,s);return this.framebuffer.blit(),o},r.prototype.resize=function(t,n){e.prototype.resize.call(this,t,n),this.runners.resize.emit(this.screen.height,this.screen.width)},r.prototype.reset=function(){return this.runners.reset.emit(),this},r.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},r.prototype.destroy=function(t){this.runners.destroy.emit();for(var n in this.runners)this.runners[n].destroy();e.prototype.destroy.call(this,t),this.gl=null},Object.defineProperty(r.prototype,"extract",{get:function(){return deprecation$1("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),r.registerPlugin=function(t,n){deprecation$1("6.5.0","Renderer.registerPlugin() has been deprecated, please use extensions.add() instead."),extensions.add({name:t,type:ExtensionType.RendererPlugin,ref:n})},r.__plugins={},r}(AbstractRenderer);extensions.handleByMap(ExtensionType.RendererPlugin,Renderer.__plugins);function autoDetectRenderer(e){return Renderer.create(e)}var $defaultVertex=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,$defaultFilterVertex=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,defaultVertex$1=$defaultVertex,defaultFilterVertex=$defaultFilterVertex,BatchDrawCall=function(){function e(){this.texArray=null,this.blend=0,this.type=DRAW_MODES$5.TRIANGLES,this.start=0,this.size=0,this.data=null}return e}(),BatchTextureArray=function(){function e(){this.elements=[],this.ids=[],this.count=0}return e.prototype.clear=function(){for(var r=0;r<this.count;r++)this.elements[r]=null;this.count=0},e}(),ViewableBuffer=function(){function e(r){typeof r=="number"?this.rawBinaryData=new ArrayBuffer(r):r instanceof Uint8Array?this.rawBinaryData=r.buffer:this.rawBinaryData=r,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(e.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),e.prototype.view=function(r){return this[r+"View"]},e.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},e.sizeOf=function(r){switch(r){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(r+" isn't a valid view type")}},e}(),AbstractBatchRenderer=function(e){__extends$i(r,e);function r(t){var n=e.call(this,t)||this;return n.shaderGenerator=null,n.geometryClass=null,n.vertexSize=null,n.state=State.for2d(),n.size=settings$1.SPRITE_BATCH_SIZE*4,n._vertexCount=0,n._indexCount=0,n._bufferedElements=[],n._bufferedTextures=[],n._bufferSize=0,n._shader=null,n._packedGeometries=[],n._packedGeometryPoolSize=2,n._flushId=0,n._aBuffers={},n._iBuffers={},n.MAX_TEXTURES=1,n.renderer.on("prerender",n.onPrerender,n),t.runners.contextChange.add(n),n._dcIndex=0,n._aIndex=0,n._iIndex=0,n._attributeBuffer=null,n._indexBuffer=null,n._tempBoundTextures=[],n}return r.prototype.contextChange=function(){var t=this.renderer.gl;settings$1.PREFER_ENV===ENV$5.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),settings$1.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=checkMaxIfStatementsInShader(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var n=0;n<this._packedGeometryPoolSize;n++)this._packedGeometries[n]=new this.geometryClass;this.initFlushBuffers()},r.prototype.initFlushBuffers=function(){for(var t=r._drawCallPool,n=r._textureArrayPool,i=this.size/4,s=Math.floor(i/this.MAX_TEXTURES)+1;t.length<i;)t.push(new BatchDrawCall);for(;n.length<s;)n.push(new BatchTextureArray);for(var o=0;o<this.MAX_TEXTURES;o++)this._tempBoundTextures[o]=null},r.prototype.onPrerender=function(){this._flushId=0},r.prototype.render=function(t){!t._texture.valid||(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},r.prototype.buildTexturesAndDrawCalls=function(){var t=this,n=t._bufferedTextures,i=t.MAX_TEXTURES,s=r._textureArrayPool,o=this.renderer.batch,a=this._tempBoundTextures,u=this.renderer.textureGC.count,l=++BaseTexture._globalBatch,h=0,f=s[0],d=0;o.copyBoundTextures(a,i);for(var _=0;_<this._bufferSize;++_){var v=n[_];n[_]=null,v._batchEnabled!==l&&(f.count>=i&&(o.boundArray(f,a,l,i),this.buildDrawCalls(f,d,_),d=_,f=s[++h],++l),v._batchEnabled=l,v.touched=u,f.elements[f.count++]=v)}f.count>0&&(o.boundArray(f,a,l,i),this.buildDrawCalls(f,d,this._bufferSize),++h,++l);for(var _=0;_<a.length;_++)a[_]=null;BaseTexture._globalBatch=l},r.prototype.buildDrawCalls=function(t,n,i){var s=this,o=s._bufferedElements,a=s._attributeBuffer,u=s._indexBuffer,l=s.vertexSize,h=r._drawCallPool,f=this._dcIndex,d=this._aIndex,_=this._iIndex,v=h[f];v.start=this._iIndex,v.texArray=t;for(var m=n;m<i;++m){var E=o[m],A=E._texture.baseTexture,T=premultiplyBlendMode[A.alphaMode?1:0][E.blendMode];o[m]=null,n<m&&v.blend!==T&&(v.size=_-v.start,n=m,v=h[++f],v.texArray=t,v.start=_),this.packInterleavedGeometry(E,a,u,d,_),d+=E.vertexData.length/2*l,_+=E.indices.length,v.blend=T}n<i&&(v.size=_-v.start,++f),this._dcIndex=f,this._aIndex=d,this._iIndex=_},r.prototype.bindAndClearTexArray=function(t){for(var n=this.renderer.texture,i=0;i<t.count;i++)n.bind(t.elements[i],t.ids[i]),t.elements[i]=null;t.count=0},r.prototype.updateGeometry=function(){var t=this,n=t._packedGeometries,i=t._attributeBuffer,s=t._indexBuffer;settings$1.CAN_UPLOAD_SAME_BUFFER?(n[this._flushId]._buffer.update(i.rawBinaryData),n[this._flushId]._indexBuffer.update(s),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,n[this._flushId]=new this.geometryClass),n[this._flushId]._buffer.update(i.rawBinaryData),n[this._flushId]._indexBuffer.update(s),this.renderer.geometry.bind(n[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},r.prototype.drawBatches=function(){for(var t=this._dcIndex,n=this.renderer,i=n.gl,s=n.state,o=r._drawCallPool,a=null,u=0;u<t;u++){var l=o[u],h=l.texArray,f=l.type,d=l.size,_=l.start,v=l.blend;a!==h&&(a=h,this.bindAndClearTexArray(h)),this.state.blendMode=v,s.set(this.state),i.drawElements(f,d,i.UNSIGNED_SHORT,_*2)}},r.prototype.flush=function(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},r.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),settings$1.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},r.prototype.stop=function(){this.flush()},r.prototype.destroy=function(){for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),e.prototype.destroy.call(this)},r.prototype.getAttributeBuffer=function(t){var n=nextPow2(Math.ceil(t/8)),i=log2(n),s=n*8;this._aBuffers.length<=i&&(this._iBuffers.length=i+1);var o=this._aBuffers[s];return o||(this._aBuffers[s]=o=new ViewableBuffer(s*this.vertexSize*4)),o},r.prototype.getIndexBuffer=function(t){var n=nextPow2(Math.ceil(t/12)),i=log2(n),s=n*12;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);var o=this._iBuffers[i];return o||(this._iBuffers[i]=o=new Uint16Array(s)),o},r.prototype.packInterleavedGeometry=function(t,n,i,s,o){for(var a=n.uint32View,u=n.float32View,l=s/this.vertexSize,h=t.uvs,f=t.indices,d=t.vertexData,_=t._texture.baseTexture._batchLocation,v=Math.min(t.worldAlpha,1),m=v<1&&t._texture.baseTexture.alphaMode?premultiplyTint(t._tintRGB,v):t._tintRGB+(v*255<<24),E=0;E<d.length;E+=2)u[s++]=d[E],u[s++]=d[E+1],u[s++]=h[E],u[s++]=h[E+1],a[s++]=m,u[s++]=_;for(var E=0;E<f.length;E++)i[o++]=l+f[E]},r._drawCallPool=[],r._textureArrayPool=[],r}(ObjectRenderer),BatchShaderGenerator=function(){function e(r,t){if(this.vertexSrc=r,this.fragTemplate=t,this.programCache={},this.defaultGroupCache={},t.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(t.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return e.prototype.generateShader=function(r){if(!this.programCache[r]){for(var t=new Int32Array(r),n=0;n<r;n++)t[n]=n;this.defaultGroupCache[r]=UniformGroup.from({uSamplers:t},!0);var i=this.fragTemplate;i=i.replace(/%count%/gi,""+r),i=i.replace(/%forloop%/gi,this.generateSampleSrc(r)),this.programCache[r]=new Program(this.vertexSrc,i)}var s={tint:new Float32Array([1,1,1,1]),translationMatrix:new Matrix,default:this.defaultGroupCache[r]};return new Shader(this.programCache[r],s)},e.prototype.generateSampleSrc=function(r){var t="";t+=`
`,t+=`
`;for(var n=0;n<r;n++)n>0&&(t+=`
else `),n<r-1&&(t+="if(vTextureId < "+n+".5)"),t+=`
{`,t+=`
	color = texture2D(uSamplers[`+n+"], vTextureCoord);",t+=`
}`;return t+=`
`,t+=`
`,t},e}(),BatchGeometry=function(e){__extends$i(r,e);function r(t){t===void 0&&(t=!1);var n=e.call(this)||this;return n._buffer=new Buffer(null,t,!1),n._indexBuffer=new Buffer(null,t,!0),n.addAttribute("aVertexPosition",n._buffer,2,!1,TYPES$5.FLOAT).addAttribute("aTextureCoord",n._buffer,2,!1,TYPES$5.FLOAT).addAttribute("aColor",n._buffer,4,!0,TYPES$5.UNSIGNED_BYTE).addAttribute("aTextureId",n._buffer,1,!0,TYPES$5.FLOAT).addIndex(n._indexBuffer),n}return r}(Geometry),defaultVertex=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,defaultFragment=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,BatchPluginFactory=function(){function e(){}return e.create=function(r){var t=Object.assign({vertex:defaultVertex,fragment:defaultFragment,geometryClass:BatchGeometry,vertexSize:6},r),n=t.vertex,i=t.fragment,s=t.vertexSize,o=t.geometryClass;return function(a){__extends$i(u,a);function u(l){var h=a.call(this,l)||this;return h.shaderGenerator=new BatchShaderGenerator(n,i),h.geometryClass=o,h.vertexSize=s,h}return u}(AbstractBatchRenderer)},Object.defineProperty(e,"defaultVertexSrc",{get:function(){return defaultVertex},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentTemplate",{get:function(){return defaultFragment},enumerable:!1,configurable:!0}),e}(),BatchRenderer=BatchPluginFactory.create();Object.assign(BatchRenderer,{extension:{name:"batch",type:ExtensionType.RendererPlugin}});/*!
 * @pixi/accessibility - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/accessibility is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var accessibleTarget={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};DisplayObject.mixin(accessibleTarget);var KEY_CODE_TAB=9,DIV_TOUCH_SIZE=100,DIV_TOUCH_POS_X=0,DIV_TOUCH_POS_Y=0,DIV_TOUCH_ZINDEX=2,DIV_HOOK_SIZE=1,DIV_HOOK_POS_X=-1e3,DIV_HOOK_POS_Y=-1e3,DIV_HOOK_ZINDEX=2,AccessibilityManager=function(){function e(r){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(isMobile$2.tablet||isMobile$2.phone)&&this.createTouchHook();var t=document.createElement("div");t.style.width=DIV_TOUCH_SIZE+"px",t.style.height=DIV_TOUCH_SIZE+"px",t.style.position="absolute",t.style.top=DIV_TOUCH_POS_X+"px",t.style.left=DIV_TOUCH_POS_Y+"px",t.style.zIndex=DIV_TOUCH_ZINDEX.toString(),this.div=t,this.renderer=r,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(e.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),e.prototype.createTouchHook=function(){var r=this,t=document.createElement("button");t.style.width=DIV_HOOK_SIZE+"px",t.style.height=DIV_HOOK_SIZE+"px",t.style.position="absolute",t.style.top=DIV_HOOK_POS_X+"px",t.style.left=DIV_HOOK_POS_Y+"px",t.style.zIndex=DIV_HOOK_ZINDEX.toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",function(){r._isMobileAccessibility=!0,r.activate(),r.destroyTouchHook()}),document.body.appendChild(t),this._hookDiv=t},e.prototype.destroyTouchHook=function(){!this._hookDiv||(document.body.removeChild(this._hookDiv),this._hookDiv=null)},e.prototype.activate=function(){var r;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(r=this.renderer.view.parentNode)===null||r===void 0||r.appendChild(this.div))},e.prototype.deactivate=function(){var r;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(r=this.div.parentNode)===null||r===void 0||r.removeChild(this.div))},e.prototype.updateAccessibleObjects=function(r){if(!(!r.visible||!r.accessibleChildren)){r.accessible&&r.interactive&&(r._accessibleActive||this.addChild(r),r.renderId=this.renderId);var t=r.children;if(t)for(var n=0;n<t.length;n++)this.updateAccessibleObjects(t[n])}},e.prototype.update=function(){var r=performance.now();if(!(isMobile$2.android.device&&r<this.androidUpdateCount)&&(this.androidUpdateCount=r+this.androidUpdateFrequency,!!this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var t=this.renderer.view.getBoundingClientRect(),n=t.left,i=t.top,s=t.width,o=t.height,a=this.renderer,u=a.width,l=a.height,h=a.resolution,f=s/u*h,d=o/l*h,_=this.div;_.style.left=n+"px",_.style.top=i+"px",_.style.width=u+"px",_.style.height=l+"px";for(var v=0;v<this.children.length;v++){var m=this.children[v];if(m.renderId!==this.renderId)m._accessibleActive=!1,removeItems(this.children,v,1),this.div.removeChild(m._accessibleDiv),this.pool.push(m._accessibleDiv),m._accessibleDiv=null,v--;else{_=m._accessibleDiv;var E=m.hitArea,A=m.worldTransform;m.hitArea?(_.style.left=(A.tx+E.x*A.a)*f+"px",_.style.top=(A.ty+E.y*A.d)*d+"px",_.style.width=E.width*A.a*f+"px",_.style.height=E.height*A.d*d+"px"):(E=m.getBounds(),this.capHitArea(E),_.style.left=E.x*f+"px",_.style.top=E.y*d+"px",_.style.width=E.width*f+"px",_.style.height=E.height*d+"px",_.title!==m.accessibleTitle&&m.accessibleTitle!==null&&(_.title=m.accessibleTitle),_.getAttribute("aria-label")!==m.accessibleHint&&m.accessibleHint!==null&&_.setAttribute("aria-label",m.accessibleHint)),(m.accessibleTitle!==_.title||m.tabIndex!==_.tabIndex)&&(_.title=m.accessibleTitle,_.tabIndex=m.tabIndex,this.debug&&this.updateDebugHTML(_))}}this.renderId++}},e.prototype.updateDebugHTML=function(r){r.innerHTML="type: "+r.type+"</br> title : "+r.title+"</br> tabIndex: "+r.tabIndex},e.prototype.capHitArea=function(r){r.x<0&&(r.width+=r.x,r.x=0),r.y<0&&(r.height+=r.y,r.y=0);var t=this.renderer,n=t.width,i=t.height;r.x+r.width>n&&(r.width=n-r.x),r.y+r.height>i&&(r.height=i-r.y)},e.prototype.addChild=function(r){var t=this.pool.pop();t||(t=document.createElement("button"),t.style.width=DIV_TOUCH_SIZE+"px",t.style.height=DIV_TOUCH_SIZE+"px",t.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=DIV_TOUCH_ZINDEX.toString(),t.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),t.style.pointerEvents=r.accessiblePointerEvents,t.type=r.accessibleType,r.accessibleTitle&&r.accessibleTitle!==null?t.title=r.accessibleTitle:(!r.accessibleHint||r.accessibleHint===null)&&(t.title="displayObject "+r.tabIndex),r.accessibleHint&&r.accessibleHint!==null&&t.setAttribute("aria-label",r.accessibleHint),this.debug&&this.updateDebugHTML(t),r._accessibleActive=!0,r._accessibleDiv=t,t.displayObject=r,this.children.push(r),this.div.appendChild(r._accessibleDiv),r._accessibleDiv.tabIndex=r.tabIndex},e.prototype._onClick=function(r){var t=this.renderer.plugins.interaction,n=r.target.displayObject,i=t.eventData;t.dispatchEvent(n,"click",i),t.dispatchEvent(n,"pointertap",i),t.dispatchEvent(n,"tap",i)},e.prototype._onFocus=function(r){r.target.getAttribute("aria-live")||r.target.setAttribute("aria-live","assertive");var t=this.renderer.plugins.interaction,n=r.target.displayObject,i=t.eventData;t.dispatchEvent(n,"mouseover",i)},e.prototype._onFocusOut=function(r){r.target.getAttribute("aria-live")||r.target.setAttribute("aria-live","polite");var t=this.renderer.plugins.interaction,n=r.target.displayObject,i=t.eventData;t.dispatchEvent(n,"mouseout",i)},e.prototype._onKeyDown=function(r){r.keyCode===KEY_CODE_TAB&&this.activate()},e.prototype._onMouseMove=function(r){r.movementX===0&&r.movementY===0||this.deactivate()},e.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},e.extension={name:"accessibility",type:[ExtensionType.RendererPlugin,ExtensionType.CanvasRendererPlugin]},e}();/*!
 * @pixi/interaction - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/interaction is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var InteractionData=function(){function e(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new Point,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(e.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),e.prototype.getLocalPosition=function(r,t,n){return r.worldTransform.applyInverse(n||this.global,t)},e.prototype.copyEvent=function(r){"isPrimary"in r&&r.isPrimary&&(this.isPrimary=!0),this.button="button"in r&&r.button;var t="buttons"in r&&r.buttons;this.buttons=Number.isInteger(t)?t:"which"in r&&r.which,this.width="width"in r&&r.width,this.height="height"in r&&r.height,this.tiltX="tiltX"in r&&r.tiltX,this.tiltY="tiltY"in r&&r.tiltY,this.pointerType="pointerType"in r&&r.pointerType,this.pressure="pressure"in r&&r.pressure,this.rotationAngle="rotationAngle"in r&&r.rotationAngle,this.twist="twist"in r&&r.twist||0,this.tangentialPressure="tangentialPressure"in r&&r.tangentialPressure||0},e.prototype.reset=function(){this.isPrimary=!1},e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$h=function(e,r){return extendStatics$h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},extendStatics$h(e,r)};function __extends$h(e,r){extendStatics$h(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var InteractionEvent=function(){function e(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return e.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},e.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},e}(),InteractionTrackingData=function(){function e(r){this._pointerId=r,this._flags=e.FLAGS.NONE}return e.prototype._doSet=function(r,t){t?this._flags=this._flags|r:this._flags=this._flags&~r},Object.defineProperty(e.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"flags",{get:function(){return this._flags},set:function(r){this._flags=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"none",{get:function(){return this._flags===e.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"over",{get:function(){return(this._flags&e.FLAGS.OVER)!==0},set:function(r){this._doSet(e.FLAGS.OVER,r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightDown",{get:function(){return(this._flags&e.FLAGS.RIGHT_DOWN)!==0},set:function(r){this._doSet(e.FLAGS.RIGHT_DOWN,r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftDown",{get:function(){return(this._flags&e.FLAGS.LEFT_DOWN)!==0},set:function(r){this._doSet(e.FLAGS.LEFT_DOWN,r)},enumerable:!1,configurable:!0}),e.FLAGS=Object.freeze({NONE:0,OVER:1<<0,LEFT_DOWN:1<<1,RIGHT_DOWN:1<<2}),e}(),TreeSearch=function(){function e(){this._tempPoint=new Point}return e.prototype.recursiveFindHit=function(r,t,n,i,s){var o;if(!t||!t.visible)return!1;var a=r.data.global;s=t.interactive||s;var u=!1,l=s,h=!0;if(t.hitArea)i&&(t.worldTransform.applyInverse(a,this._tempPoint),t.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?u=!0:(i=!1,h=!1)),l=!1;else if(t._mask&&i){var f=t._mask.isMaskData?t._mask.maskObject:t._mask;f&&!(!((o=f.containsPoint)===null||o===void 0)&&o.call(f,a))&&(i=!1)}if(h&&t.interactiveChildren&&t.children)for(var d=t.children,_=d.length-1;_>=0;_--){var v=d[_],m=this.recursiveFindHit(r,v,n,i,l);if(m){if(!v.parent)continue;l=!1,m&&(r.target&&(i=!1),u=!0)}}return s&&(i&&!r.target&&!t.hitArea&&t.containsPoint&&t.containsPoint(a)&&(u=!0),t.interactive&&(u&&!r.target&&(r.target=t),n&&n(r,t,!!u))),u},e.prototype.findHit=function(r,t,n,i){this.recursiveFindHit(r,t,n,i,!1)},e}(),interactiveTarget={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return this.cursor==="pointer"},set buttonMode(e){e?this.cursor="pointer":this.cursor==="pointer"&&(this.cursor=null)},cursor:null,get trackedPointers(){return this._trackedPointers===void 0&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};DisplayObject.mixin(interactiveTarget);var MOUSE_POINTER_ID=1,hitTestEvent={target:null,data:{global:null}},InteractionManager=function(e){__extends$h(r,e);function r(t,n){var i=e.call(this)||this;return n=n||{},i.renderer=t,i.autoPreventDefault=n.autoPreventDefault!==void 0?n.autoPreventDefault:!0,i.interactionFrequency=n.interactionFrequency||10,i.mouse=new InteractionData,i.mouse.identifier=MOUSE_POINTER_ID,i.mouse.global.set(-999999),i.activeInteractionData={},i.activeInteractionData[MOUSE_POINTER_ID]=i.mouse,i.interactionDataPool=[],i.eventData=new InteractionEvent,i.interactionDOMElement=null,i.moveWhenInside=!1,i.eventsAdded=!1,i.tickerAdded=!1,i.mouseOverRenderer=!("PointerEvent"in globalThis),i.supportsTouchEvents="ontouchstart"in globalThis,i.supportsPointerEvents=!!globalThis.PointerEvent,i.onPointerUp=i.onPointerUp.bind(i),i.processPointerUp=i.processPointerUp.bind(i),i.onPointerCancel=i.onPointerCancel.bind(i),i.processPointerCancel=i.processPointerCancel.bind(i),i.onPointerDown=i.onPointerDown.bind(i),i.processPointerDown=i.processPointerDown.bind(i),i.onPointerMove=i.onPointerMove.bind(i),i.processPointerMove=i.processPointerMove.bind(i),i.onPointerOut=i.onPointerOut.bind(i),i.processPointerOverOut=i.processPointerOverOut.bind(i),i.onPointerOver=i.onPointerOver.bind(i),i.cursorStyles={default:"inherit",pointer:"pointer"},i.currentCursorMode=null,i.cursor=null,i.resolution=1,i.delayedEvents=[],i.search=new TreeSearch,i._tempDisplayObject=new TemporaryDisplayObject,i._eventListenerOptions={capture:!0,passive:!1},i._useSystemTicker=n.useSystemTicker!==void 0?n.useSystemTicker:!0,i.setTargetElement(i.renderer.view,i.renderer.resolution),i}return Object.defineProperty(r.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(t){this._useSystemTicker=t,t?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),r.prototype.hitTest=function(t,n){return hitTestEvent.target=null,hitTestEvent.data.global=t,n||(n=this.lastObjectRendered),this.processInteractive(hitTestEvent,n,null,!0),hitTestEvent.target},r.prototype.setTargetElement=function(t,n){n===void 0&&(n=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=t,this.resolution=n,this.addEvents(),this.addTickerListener()},r.prototype.addTickerListener=function(){this.tickerAdded||!this.interactionDOMElement||!this._useSystemTicker||(Ticker.system.add(this.tickerUpdate,this,UPDATE_PRIORITY.INTERACTION),this.tickerAdded=!0)},r.prototype.removeTickerListener=function(){!this.tickerAdded||(Ticker.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},r.prototype.addEvents=function(){if(!(this.eventsAdded||!this.interactionDOMElement)){var t=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none"),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.addEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.eventsAdded=!0}},r.prototype.removeEvents=function(){if(!(!this.eventsAdded||!this.interactionDOMElement)){var t=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.removeEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.interactionDOMElement=null,this.eventsAdded=!1}},r.prototype.tickerUpdate=function(t){this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())},r.prototype.update=function(){if(!!this.interactionDOMElement){if(this._didMove){this._didMove=!1;return}this.cursor=null;for(var t in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(t)){var n=this.activeInteractionData[t];if(n.originalEvent&&n.pointerType!=="touch"){var i=this.configureInteractionEventForDOMEvent(this.eventData,n.originalEvent,n);this.processInteractive(i,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},r.prototype.setCursorMode=function(t){t=t||"default";var n=!0;if(globalThis.OffscreenCanvas&&this.interactionDOMElement instanceof OffscreenCanvas&&(n=!1),this.currentCursorMode!==t){this.currentCursorMode=t;var i=this.cursorStyles[t];if(i)switch(typeof i){case"string":n&&(this.interactionDOMElement.style.cursor=i);break;case"function":i(t);break;case"object":n&&Object.assign(this.interactionDOMElement.style,i);break}else n&&typeof t=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.interactionDOMElement.style.cursor=t)}},r.prototype.dispatchEvent=function(t,n,i){(!i.stopPropagationHint||t===i.stopsPropagatingAt)&&(i.currentTarget=t,i.type=n,t.emit(n,i),t[n]&&t[n](i))},r.prototype.delayDispatchEvent=function(t,n,i){this.delayedEvents.push({displayObject:t,eventString:n,eventData:i})},r.prototype.mapPositionToPoint=function(t,n,i){var s;this.interactionDOMElement.parentElement?s=this.interactionDOMElement.getBoundingClientRect():s={x:0,y:0,width:this.interactionDOMElement.width,height:this.interactionDOMElement.height,left:0,top:0};var o=1/this.resolution;t.x=(n-s.left)*(this.interactionDOMElement.width/s.width)*o,t.y=(i-s.top)*(this.interactionDOMElement.height/s.height)*o},r.prototype.processInteractive=function(t,n,i,s){var o=this.search.findHit(t,n,i,s),a=this.delayedEvents;if(!a.length)return o;t.stopPropagationHint=!1;var u=a.length;this.delayedEvents=[];for(var l=0;l<u;l++){var h=a[l],f=h.displayObject,d=h.eventString,_=h.eventData;_.stopsPropagatingAt===f&&(_.stopPropagationHint=!0),this.dispatchEvent(f,d,_)}return o},r.prototype.onPointerDown=function(t){if(!(this.supportsTouchEvents&&t.pointerType==="touch")){var n=this.normalizeToPointerData(t);if(this.autoPreventDefault&&n[0].isNormalized){var i=t.cancelable||!("cancelable"in t);i&&t.preventDefault()}for(var s=n.length,o=0;o<s;o++){var a=n[o],u=this.getInteractionDataForPointerId(a),l=this.configureInteractionEventForDOMEvent(this.eventData,a,u);if(l.data.originalEvent=t,this.processInteractive(l,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",l),a.pointerType==="touch")this.emit("touchstart",l);else if(a.pointerType==="mouse"||a.pointerType==="pen"){var h=a.button===2;this.emit(h?"rightdown":"mousedown",this.eventData)}}}},r.prototype.processPointerDown=function(t,n,i){var s=t.data,o=t.data.identifier;if(i){if(n.trackedPointers[o]||(n.trackedPointers[o]=new InteractionTrackingData(o)),this.dispatchEvent(n,"pointerdown",t),s.pointerType==="touch")this.dispatchEvent(n,"touchstart",t);else if(s.pointerType==="mouse"||s.pointerType==="pen"){var a=s.button===2;a?n.trackedPointers[o].rightDown=!0:n.trackedPointers[o].leftDown=!0,this.dispatchEvent(n,a?"rightdown":"mousedown",t)}}},r.prototype.onPointerComplete=function(t,n,i){var s=this.normalizeToPointerData(t),o=s.length,a=t.target;t.composedPath&&t.composedPath().length>0&&(a=t.composedPath()[0]);for(var u=a!==this.interactionDOMElement?"outside":"",l=0;l<o;l++){var h=s[l],f=this.getInteractionDataForPointerId(h),d=this.configureInteractionEventForDOMEvent(this.eventData,h,f);if(d.data.originalEvent=t,this.processInteractive(d,this.lastObjectRendered,i,n||!u),this.emit(n?"pointercancel":"pointerup"+u,d),h.pointerType==="mouse"||h.pointerType==="pen"){var _=h.button===2;this.emit(_?"rightup"+u:"mouseup"+u,d)}else h.pointerType==="touch"&&(this.emit(n?"touchcancel":"touchend"+u,d),this.releaseInteractionDataForPointerId(h.pointerId))}},r.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&t.pointerType==="touch"||this.onPointerComplete(t,!0,this.processPointerCancel)},r.prototype.processPointerCancel=function(t,n){var i=t.data,s=t.data.identifier;n.trackedPointers[s]!==void 0&&(delete n.trackedPointers[s],this.dispatchEvent(n,"pointercancel",t),i.pointerType==="touch"&&this.dispatchEvent(n,"touchcancel",t))},r.prototype.onPointerUp=function(t){this.supportsTouchEvents&&t.pointerType==="touch"||this.onPointerComplete(t,!1,this.processPointerUp)},r.prototype.processPointerUp=function(t,n,i){var s=t.data,o=t.data.identifier,a=n.trackedPointers[o],u=s.pointerType==="touch",l=s.pointerType==="mouse"||s.pointerType==="pen",h=!1;if(l){var f=s.button===2,d=InteractionTrackingData.FLAGS,_=f?d.RIGHT_DOWN:d.LEFT_DOWN,v=a!==void 0&&a.flags&_;i?(this.dispatchEvent(n,f?"rightup":"mouseup",t),v&&(this.dispatchEvent(n,f?"rightclick":"click",t),h=!0)):v&&this.dispatchEvent(n,f?"rightupoutside":"mouseupoutside",t),a&&(f?a.rightDown=!1:a.leftDown=!1)}i?(this.dispatchEvent(n,"pointerup",t),u&&this.dispatchEvent(n,"touchend",t),a&&((!l||h)&&this.dispatchEvent(n,"pointertap",t),u&&(this.dispatchEvent(n,"tap",t),a.over=!1))):a&&(this.dispatchEvent(n,"pointerupoutside",t),u&&this.dispatchEvent(n,"touchendoutside",t)),a&&a.none&&delete n.trackedPointers[o]},r.prototype.onPointerMove=function(t){if(!(this.supportsTouchEvents&&t.pointerType==="touch")){var n=this.normalizeToPointerData(t);(n[0].pointerType==="mouse"||n[0].pointerType==="pen")&&(this._didMove=!0,this.cursor=null);for(var i=n.length,s=0;s<i;s++){var o=n[s],a=this.getInteractionDataForPointerId(o),u=this.configureInteractionEventForDOMEvent(this.eventData,o,a);u.data.originalEvent=t,this.processInteractive(u,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",u),o.pointerType==="touch"&&this.emit("touchmove",u),(o.pointerType==="mouse"||o.pointerType==="pen")&&this.emit("mousemove",u)}n[0].pointerType==="mouse"&&this.setCursorMode(this.cursor)}},r.prototype.processPointerMove=function(t,n,i){var s=t.data,o=s.pointerType==="touch",a=s.pointerType==="mouse"||s.pointerType==="pen";a&&this.processPointerOverOut(t,n,i),(!this.moveWhenInside||i)&&(this.dispatchEvent(n,"pointermove",t),o&&this.dispatchEvent(n,"touchmove",t),a&&this.dispatchEvent(n,"mousemove",t))},r.prototype.onPointerOut=function(t){if(!(this.supportsTouchEvents&&t.pointerType==="touch")){var n=this.normalizeToPointerData(t),i=n[0];i.pointerType==="mouse"&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var s=this.getInteractionDataForPointerId(i),o=this.configureInteractionEventForDOMEvent(this.eventData,i,s);o.data.originalEvent=i,this.processInteractive(o,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",o),i.pointerType==="mouse"||i.pointerType==="pen"?this.emit("mouseout",o):this.releaseInteractionDataForPointerId(s.identifier)}},r.prototype.processPointerOverOut=function(t,n,i){var s=t.data,o=t.data.identifier,a=s.pointerType==="mouse"||s.pointerType==="pen",u=n.trackedPointers[o];i&&!u&&(u=n.trackedPointers[o]=new InteractionTrackingData(o)),u!==void 0&&(i&&this.mouseOverRenderer?(u.over||(u.over=!0,this.delayDispatchEvent(n,"pointerover",t),a&&this.delayDispatchEvent(n,"mouseover",t)),a&&this.cursor===null&&(this.cursor=n.cursor)):u.over&&(u.over=!1,this.dispatchEvent(n,"pointerout",this.eventData),a&&this.dispatchEvent(n,"mouseout",t),u.none&&delete n.trackedPointers[o]))},r.prototype.onPointerOver=function(t){var n=this.normalizeToPointerData(t),i=n[0],s=this.getInteractionDataForPointerId(i),o=this.configureInteractionEventForDOMEvent(this.eventData,i,s);o.data.originalEvent=i,i.pointerType==="mouse"&&(this.mouseOverRenderer=!0),this.emit("pointerover",o),(i.pointerType==="mouse"||i.pointerType==="pen")&&this.emit("mouseover",o)},r.prototype.getInteractionDataForPointerId=function(t){var n=t.pointerId,i;return n===MOUSE_POINTER_ID||t.pointerType==="mouse"?i=this.mouse:this.activeInteractionData[n]?i=this.activeInteractionData[n]:(i=this.interactionDataPool.pop()||new InteractionData,i.identifier=n,this.activeInteractionData[n]=i),i.copyEvent(t),i},r.prototype.releaseInteractionDataForPointerId=function(t){var n=this.activeInteractionData[t];n&&(delete this.activeInteractionData[t],n.reset(),this.interactionDataPool.push(n))},r.prototype.configureInteractionEventForDOMEvent=function(t,n,i){return t.data=i,this.mapPositionToPoint(i.global,n.clientX,n.clientY),n.pointerType==="touch"&&(n.globalX=i.global.x,n.globalY=i.global.y),i.originalEvent=n,t.reset(),t},r.prototype.normalizeToPointerData=function(t){var n=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var i=0,s=t.changedTouches.length;i<s;i++){var o=t.changedTouches[i];typeof o.button>"u"&&(o.button=t.touches.length?1:0),typeof o.buttons>"u"&&(o.buttons=t.touches.length?1:0),typeof o.isPrimary>"u"&&(o.isPrimary=t.touches.length===1&&t.type==="touchstart"),typeof o.width>"u"&&(o.width=o.radiusX||1),typeof o.height>"u"&&(o.height=o.radiusY||1),typeof o.tiltX>"u"&&(o.tiltX=0),typeof o.tiltY>"u"&&(o.tiltY=0),typeof o.pointerType>"u"&&(o.pointerType="touch"),typeof o.pointerId>"u"&&(o.pointerId=o.identifier||0),typeof o.pressure>"u"&&(o.pressure=o.force||.5),typeof o.twist>"u"&&(o.twist=0),typeof o.tangentialPressure>"u"&&(o.tangentialPressure=0),typeof o.layerX>"u"&&(o.layerX=o.offsetX=o.clientX),typeof o.layerY>"u"&&(o.layerY=o.offsetY=o.clientY),o.isNormalized=!0,n.push(o)}else if(!globalThis.MouseEvent||t instanceof MouseEvent&&(!this.supportsPointerEvents||!(t instanceof globalThis.PointerEvent))){var a=t;typeof a.isPrimary>"u"&&(a.isPrimary=!0),typeof a.width>"u"&&(a.width=1),typeof a.height>"u"&&(a.height=1),typeof a.tiltX>"u"&&(a.tiltX=0),typeof a.tiltY>"u"&&(a.tiltY=0),typeof a.pointerType>"u"&&(a.pointerType="mouse"),typeof a.pointerId>"u"&&(a.pointerId=MOUSE_POINTER_ID),typeof a.pressure>"u"&&(a.pressure=.5),typeof a.twist>"u"&&(a.twist=0),typeof a.tangentialPressure>"u"&&(a.tangentialPressure=0),a.isNormalized=!0,n.push(a)}else n.push(t);return n},r.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},r.extension={name:"interaction",type:[ExtensionType.RendererPlugin,ExtensionType.CanvasRendererPlugin]},r}(EventEmitter);/*!
 * @pixi/extract - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var TEMP_RECT=new Rectangle,BYTES_PER_PIXEL=4,Extract=function(){function e(r){this.renderer=r}return e.prototype.image=function(r,t,n){var i=new Image;return i.src=this.base64(r,t,n),i},e.prototype.base64=function(r,t,n){return this.canvas(r).toDataURL(t,n)},e.prototype.canvas=function(r,t){var n=this.renderer,i,s=!1,o,a=!1;r&&(r instanceof RenderTexture?o=r:(o=this.renderer.generateTexture(r),a=!0)),o?(i=o.baseTexture.resolution,t=t!=null?t:o.frame,s=!1,n.renderTexture.bind(o)):(i=n.resolution,t||(t=TEMP_RECT,t.width=n.width,t.height=n.height),s=!0,n.renderTexture.bind(null));var u=Math.round(t.width*i),l=Math.round(t.height*i),h=new CanvasRenderTarget(u,l,1),f=new Uint8Array(BYTES_PER_PIXEL*u*l),d=n.gl;d.readPixels(Math.round(t.x*i),Math.round(t.y*i),u,l,d.RGBA,d.UNSIGNED_BYTE,f);var _=h.context.getImageData(0,0,u,l);if(e.arrayPostDivide(f,_.data),h.context.putImageData(_,0,0),s){var v=new CanvasRenderTarget(h.width,h.height,1);v.context.scale(1,-1),v.context.drawImage(h.canvas,0,-l),h.destroy(),h=v}return a&&o.destroy(!0),h.canvas},e.prototype.pixels=function(r,t){var n=this.renderer,i,s,o=!1;r&&(r instanceof RenderTexture?s=r:(s=this.renderer.generateTexture(r),o=!0)),s?(i=s.baseTexture.resolution,t=t!=null?t:s.frame,n.renderTexture.bind(s)):(i=n.resolution,t||(t=TEMP_RECT,t.width=n.width,t.height=n.height),n.renderTexture.bind(null));var a=Math.round(t.width*i),u=Math.round(t.height*i),l=new Uint8Array(BYTES_PER_PIXEL*a*u),h=n.gl;return h.readPixels(Math.round(t.x*i),Math.round(t.y*i),a,u,h.RGBA,h.UNSIGNED_BYTE,l),o&&s.destroy(!0),e.arrayPostDivide(l,l),l},e.prototype.destroy=function(){this.renderer=null},e.arrayPostDivide=function(r,t){for(var n=0;n<r.length;n+=4){var i=t[n+3]=r[n+3];i!==0?(t[n]=Math.round(Math.min(r[n]*255/i,255)),t[n+1]=Math.round(Math.min(r[n+1]*255/i,255)),t[n+2]=Math.round(Math.min(r[n+2]*255/i,255))):(t[n]=r[n],t[n+1]=r[n+1],t[n+2]=r[n+2])}},e.extension={name:"extract",type:ExtensionType.RendererPlugin},e}();/*!
 * @pixi/loaders - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/loaders is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var SignalBinding=function(){function e(r,t,n){t===void 0&&(t=!1),this._fn=r,this._once=t,this._thisArg=n,this._next=this._prev=this._owner=null}return e.prototype.detach=function(){return this._owner===null?!1:(this._owner.detach(this),!0)},e}();function _addSignalBinding(e,r){return e._head?(e._tail._next=r,r._prev=e._tail,e._tail=r):(e._head=r,e._tail=r),r._owner=e,r}var Signal=function(){function e(){this._head=this._tail=void 0}return e.prototype.handlers=function(r){r===void 0&&(r=!1);var t=this._head;if(r)return!!t;for(var n=[];t;)n.push(t),t=t._next;return n},e.prototype.has=function(r){if(!(r instanceof SignalBinding))throw new Error("MiniSignal#has(): First arg must be a SignalBinding object.");return r._owner===this},e.prototype.dispatch=function(){for(var r=arguments,t=[],n=0;n<arguments.length;n++)t[n]=r[n];var i=this._head;if(!i)return!1;for(;i;)i._once&&this.detach(i),i._fn.apply(i._thisArg,t),i=i._next;return!0},e.prototype.add=function(r,t){if(t===void 0&&(t=null),typeof r!="function")throw new Error("MiniSignal#add(): First arg must be a Function.");return _addSignalBinding(this,new SignalBinding(r,!1,t))},e.prototype.once=function(r,t){if(t===void 0&&(t=null),typeof r!="function")throw new Error("MiniSignal#once(): First arg must be a Function.");return _addSignalBinding(this,new SignalBinding(r,!0,t))},e.prototype.detach=function(r){if(!(r instanceof SignalBinding))throw new Error("MiniSignal#detach(): First arg must be a SignalBinding object.");return r._owner!==this?this:(r._prev&&(r._prev._next=r._next),r._next&&(r._next._prev=r._prev),r===this._head?(this._head=r._next,r._next===null&&(this._tail=null)):r===this._tail&&(this._tail=r._prev,this._tail._next=null),r._owner=null,this)},e.prototype.detachAll=function(){var r=this._head;if(!r)return this;for(this._head=this._tail=null;r;)r._owner=null,r=r._next;return this},e}();function parseUri(e,r){r=r||{};for(var t={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},n=t.parser[r.strictMode?"strict":"loose"].exec(e),i={},s=14;s--;)i[t.key[s]]=n[s]||"";return i[t.q.name]={},i[t.key[12]].replace(t.q.parser,function(o,a,u){a&&(i[t.q.name][a]=u)}),i}var useXdr,tempAnchor=null,STATUS_NONE=0,STATUS_OK=200,STATUS_EMPTY=204,STATUS_IE_BUG_EMPTY=1223,STATUS_TYPE_OK=2;function _noop$1(){}function setExtMap(e,r,t){r&&r.indexOf(".")===0&&(r=r.substring(1)),r&&(e[r]=t)}function reqType(e){return e.toString().replace("object ","")}var LoaderResource=function(){function e(r,t,n){if(this._dequeue=_noop$1,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=null,this._boundOnError=null,this._boundOnProgress=null,this._boundOnTimeout=null,this._boundXhrOnError=null,this._boundXhrOnTimeout=null,this._boundXhrOnAbort=null,this._boundXhrOnLoad=null,typeof r!="string"||typeof t!="string")throw new Error("Both name and url are required for constructing a resource.");n=n||{},this._flags=0,this._setFlag(e.STATUS_FLAGS.DATA_URL,t.indexOf("data:")===0),this.name=r,this.url=t,this.extension=this._getExtension(),this.data=null,this.crossOrigin=n.crossOrigin===!0?"anonymous":n.crossOrigin,this.timeout=n.timeout||0,this.loadType=n.loadType||this._determineLoadType(),this.xhrType=n.xhrType,this.metadata=n.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=e.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=_noop$1,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new Signal,this.onProgress=new Signal,this.onComplete=new Signal,this.onAfterMiddleware=new Signal}return e.setExtensionLoadType=function(r,t){setExtMap(e._loadTypeMap,r,t)},e.setExtensionXhrType=function(r,t){setExtMap(e._xhrTypeMap,r,t)},Object.defineProperty(e.prototype,"isDataUrl",{get:function(){return this._hasFlag(e.STATUS_FLAGS.DATA_URL)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isComplete",{get:function(){return this._hasFlag(e.STATUS_FLAGS.COMPLETE)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLoading",{get:function(){return this._hasFlag(e.STATUS_FLAGS.LOADING)},enumerable:!1,configurable:!0}),e.prototype.complete=function(){this._clearEvents(),this._finish()},e.prototype.abort=function(r){if(!this.error){if(this.error=new Error(r),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=e.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},e.prototype.load=function(r){var t=this;if(!this.isLoading){if(this.isComplete){r&&setTimeout(function(){return r(t)},1);return}else r&&this.onComplete.once(r);switch(this._setFlag(e.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),(this.crossOrigin===!1||typeof this.crossOrigin!="string")&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case e.LOAD_TYPE.IMAGE:this.type=e.TYPE.IMAGE,this._loadElement("image");break;case e.LOAD_TYPE.AUDIO:this.type=e.TYPE.AUDIO,this._loadSourceElement("audio");break;case e.LOAD_TYPE.VIDEO:this.type=e.TYPE.VIDEO,this._loadSourceElement("video");break;case e.LOAD_TYPE.XHR:default:typeof useXdr>"u"&&(useXdr=!!(globalThis.XDomainRequest&&!("withCredentials"in new XMLHttpRequest))),useXdr&&this.crossOrigin?this._loadXdr():this._loadXhr();break}}},e.prototype._hasFlag=function(r){return(this._flags&r)!==0},e.prototype._setFlag=function(r,t){this._flags=t?this._flags|r:this._flags&~r},e.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},e.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(e.STATUS_FLAGS.COMPLETE,!0),this._setFlag(e.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},e.prototype._loadElement=function(r){this.metadata.loadElement?this.data=this.metadata.loadElement:r==="image"&&typeof globalThis.Image<"u"?this.data=new Image:this.data=document.createElement(r),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},e.prototype._loadSourceElement=function(r){if(this.metadata.loadElement?this.data=this.metadata.loadElement:r==="audio"&&typeof globalThis.Audio<"u"?this.data=new Audio:this.data=document.createElement(r),this.data===null){this.abort("Unsupported element: "+r);return}if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var t=this.metadata.mimeType,n=0;n<this.url.length;++n)this.data.appendChild(this._createSource(r,this.url[n],Array.isArray(t)?t[n]:t));else{var t=this.metadata.mimeType;this.data.appendChild(this._createSource(r,this.url,Array.isArray(t)?t[0]:t))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},e.prototype._loadXhr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var r=this.xhr=new XMLHttpRequest;this.crossOrigin==="use-credentials"&&(r.withCredentials=!0),r.open("GET",this.url,!0),r.timeout=this.timeout,this.xhrType===e.XHR_RESPONSE_TYPE.JSON||this.xhrType===e.XHR_RESPONSE_TYPE.DOCUMENT?r.responseType=e.XHR_RESPONSE_TYPE.TEXT:r.responseType=this.xhrType,r.addEventListener("error",this._boundXhrOnError,!1),r.addEventListener("timeout",this._boundXhrOnTimeout,!1),r.addEventListener("abort",this._boundXhrOnAbort,!1),r.addEventListener("progress",this._boundOnProgress,!1),r.addEventListener("load",this._boundXhrOnLoad,!1),r.send()},e.prototype._loadXdr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var r=this.xhr=new globalThis.XDomainRequest;r.timeout=this.timeout||5e3,r.onerror=this._boundXhrOnError,r.ontimeout=this._boundXhrOnTimeout,r.onprogress=this._boundOnProgress,r.onload=this._boundXhrOnLoad,r.open("GET",this.url,!0),setTimeout(function(){return r.send()},1)},e.prototype._createSource=function(r,t,n){n||(n=r+"/"+this._getExtension(t));var i=document.createElement("source");return i.src=t,i.type=n,i},e.prototype._onError=function(r){this.abort("Failed to load element using: "+r.target.nodeName)},e.prototype._onProgress=function(r){r&&r.lengthComputable&&this.onProgress.dispatch(this,r.loaded/r.total)},e.prototype._onTimeout=function(){this.abort("Load timed out.")},e.prototype._xhrOnError=function(){var r=this.xhr;this.abort(reqType(r)+" Request failed. Status: "+r.status+', text: "'+r.statusText+'"')},e.prototype._xhrOnTimeout=function(){var r=this.xhr;this.abort(reqType(r)+" Request timed out.")},e.prototype._xhrOnAbort=function(){var r=this.xhr;this.abort(reqType(r)+" Request was aborted by the user.")},e.prototype._xhrOnLoad=function(){var r=this.xhr,t="",n=typeof r.status>"u"?STATUS_OK:r.status;(r.responseType===""||r.responseType==="text"||typeof r.responseType>"u")&&(t=r.responseText),n===STATUS_NONE&&(t.length>0||r.responseType===e.XHR_RESPONSE_TYPE.BUFFER)?n=STATUS_OK:n===STATUS_IE_BUG_EMPTY&&(n=STATUS_EMPTY);var i=n/100|0;if(i===STATUS_TYPE_OK)if(this.xhrType===e.XHR_RESPONSE_TYPE.TEXT)this.data=t,this.type=e.TYPE.TEXT;else if(this.xhrType===e.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(t),this.type=e.TYPE.JSON}catch(a){this.abort("Error trying to parse loaded json: "+a);return}else if(this.xhrType===e.XHR_RESPONSE_TYPE.DOCUMENT)try{if(globalThis.DOMParser){var s=new DOMParser;this.data=s.parseFromString(t,"text/xml")}else{var o=document.createElement("div");o.innerHTML=t,this.data=o}this.type=e.TYPE.XML}catch(a){this.abort("Error trying to parse loaded xml: "+a);return}else this.data=r.response||t;else{this.abort("["+r.status+"] "+r.statusText+": "+r.responseURL);return}this.complete()},e.prototype._determineCrossOrigin=function(r,t){if(r.indexOf("data:")===0)return"";if(globalThis.origin!==globalThis.location.origin)return"anonymous";t=t||globalThis.location,tempAnchor||(tempAnchor=document.createElement("a")),tempAnchor.href=r;var n=parseUri(tempAnchor.href,{strictMode:!0}),i=!n.port&&t.port===""||n.port===t.port,s=n.protocol?n.protocol+":":"";return n.host!==t.hostname||!i||s!==t.protocol?"anonymous":""},e.prototype._determineXhrType=function(){return e._xhrTypeMap[this.extension]||e.XHR_RESPONSE_TYPE.TEXT},e.prototype._determineLoadType=function(){return e._loadTypeMap[this.extension]||e.LOAD_TYPE.XHR},e.prototype._getExtension=function(r){r===void 0&&(r=this.url);var t="";if(this.isDataUrl){var n=r.indexOf("/");t=r.substring(n+1,r.indexOf(";",n))}else{var i=r.indexOf("?"),s=r.indexOf("#"),o=Math.min(i>-1?i:r.length,s>-1?s:r.length);r=r.substring(0,o),t=r.substring(r.lastIndexOf(".")+1)}return t.toLowerCase()},e.prototype._getMimeFromXhrType=function(r){switch(r){case e.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case e.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case e.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case e.XHR_RESPONSE_TYPE.JSON:return"application/json";case e.XHR_RESPONSE_TYPE.DEFAULT:case e.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},e}();(function(e){(function(r){r[r.NONE=0]="NONE",r[r.DATA_URL=1]="DATA_URL",r[r.COMPLETE=2]="COMPLETE",r[r.LOADING=4]="LOADING"})(e.STATUS_FLAGS||(e.STATUS_FLAGS={})),function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.JSON=1]="JSON",r[r.XML=2]="XML",r[r.IMAGE=3]="IMAGE",r[r.AUDIO=4]="AUDIO",r[r.VIDEO=5]="VIDEO",r[r.TEXT=6]="TEXT"}(e.TYPE||(e.TYPE={})),function(r){r[r.XHR=1]="XHR",r[r.IMAGE=2]="IMAGE",r[r.AUDIO=3]="AUDIO",r[r.VIDEO=4]="VIDEO"}(e.LOAD_TYPE||(e.LOAD_TYPE={})),function(r){r.DEFAULT="text",r.BUFFER="arraybuffer",r.BLOB="blob",r.DOCUMENT="document",r.JSON="json",r.TEXT="text"}(e.XHR_RESPONSE_TYPE||(e.XHR_RESPONSE_TYPE={})),e._loadTypeMap={gif:e.LOAD_TYPE.IMAGE,png:e.LOAD_TYPE.IMAGE,bmp:e.LOAD_TYPE.IMAGE,jpg:e.LOAD_TYPE.IMAGE,jpeg:e.LOAD_TYPE.IMAGE,tif:e.LOAD_TYPE.IMAGE,tiff:e.LOAD_TYPE.IMAGE,webp:e.LOAD_TYPE.IMAGE,tga:e.LOAD_TYPE.IMAGE,svg:e.LOAD_TYPE.IMAGE,"svg+xml":e.LOAD_TYPE.IMAGE,mp3:e.LOAD_TYPE.AUDIO,ogg:e.LOAD_TYPE.AUDIO,wav:e.LOAD_TYPE.AUDIO,mp4:e.LOAD_TYPE.VIDEO,webm:e.LOAD_TYPE.VIDEO},e._xhrTypeMap={xhtml:e.XHR_RESPONSE_TYPE.DOCUMENT,html:e.XHR_RESPONSE_TYPE.DOCUMENT,htm:e.XHR_RESPONSE_TYPE.DOCUMENT,xml:e.XHR_RESPONSE_TYPE.DOCUMENT,tmx:e.XHR_RESPONSE_TYPE.DOCUMENT,svg:e.XHR_RESPONSE_TYPE.DOCUMENT,tsx:e.XHR_RESPONSE_TYPE.DOCUMENT,gif:e.XHR_RESPONSE_TYPE.BLOB,png:e.XHR_RESPONSE_TYPE.BLOB,bmp:e.XHR_RESPONSE_TYPE.BLOB,jpg:e.XHR_RESPONSE_TYPE.BLOB,jpeg:e.XHR_RESPONSE_TYPE.BLOB,tif:e.XHR_RESPONSE_TYPE.BLOB,tiff:e.XHR_RESPONSE_TYPE.BLOB,webp:e.XHR_RESPONSE_TYPE.BLOB,tga:e.XHR_RESPONSE_TYPE.BLOB,json:e.XHR_RESPONSE_TYPE.JSON,text:e.XHR_RESPONSE_TYPE.TEXT,txt:e.XHR_RESPONSE_TYPE.TEXT,ttf:e.XHR_RESPONSE_TYPE.BUFFER,otf:e.XHR_RESPONSE_TYPE.BUFFER},e.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="})(LoaderResource||(LoaderResource={}));function _noop(){}function onlyOnce(e){return function(){for(var t=arguments,n=[],i=0;i<arguments.length;i++)n[i]=t[i];if(e===null)throw new Error("Callback was already called.");var s=e;e=null,s.apply(this,n)}}var AsyncQueueItem=function(){function e(r,t){this.data=r,this.callback=t}return e}(),AsyncQueue=function(){function e(r,t){var n=this;if(t===void 0&&(t=1),this.workers=0,this.saturated=_noop,this.unsaturated=_noop,this.empty=_noop,this.drain=_noop,this.error=_noop,this.started=!1,this.paused=!1,this._tasks=[],this._insert=function(i,s,o){if(o&&typeof o!="function")throw new Error("task callback must be a function");if(n.started=!0,i==null&&n.idle()){setTimeout(function(){return n.drain()},1);return}var a=new AsyncQueueItem(i,typeof o=="function"?o:_noop);s?n._tasks.unshift(a):n._tasks.push(a),setTimeout(n.process,1)},this.process=function(){for(;!n.paused&&n.workers<n.concurrency&&n._tasks.length;){var i=n._tasks.shift();n._tasks.length===0&&n.empty(),n.workers+=1,n.workers===n.concurrency&&n.saturated(),n._worker(i.data,onlyOnce(n._next(i)))}},this._worker=r,t===0)throw new Error("Concurrency must not be zero");this.concurrency=t,this.buffer=t/4}return e.prototype._next=function(r){var t=this;return function(){for(var n=arguments,i=[],s=0;s<arguments.length;s++)i[s]=n[s];t.workers-=1,r.callback.apply(r,i),i[0]!=null&&t.error(i[0],r.data),t.workers<=t.concurrency-t.buffer&&t.unsaturated(),t.idle()&&t.drain(),t.process()}},e.prototype.push=function(r,t){this._insert(r,!1,t)},e.prototype.kill=function(){this.workers=0,this.drain=_noop,this.started=!1,this._tasks=[]},e.prototype.unshift=function(r,t){this._insert(r,!0,t)},e.prototype.length=function(){return this._tasks.length},e.prototype.running=function(){return this.workers},e.prototype.idle=function(){return this._tasks.length+this.workers===0},e.prototype.pause=function(){this.paused!==!0&&(this.paused=!0)},e.prototype.resume=function(){if(this.paused!==!1){this.paused=!1;for(var r=1;r<=this.concurrency;r++)this.process()}},e.eachSeries=function(r,t,n,i){var s=0,o=r.length;function a(u){if(u||s===o){n&&n(u);return}i?setTimeout(function(){t(r[s++],a)},1):t(r[s++],a)}a()},e.queue=function(r,t){return new e(r,t)},e}(),MAX_PROGRESS=100,rgxExtractUrlHash=/(#[\w-]+)?$/,Loader=function(){function e(r,t){var n=this;r===void 0&&(r=""),t===void 0&&(t=10),this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(u,l){return n._loadResource(u,l)},this.resources={},this.baseUrl=r,this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(u,l){return n._loadResource(u,l)},this._queue=AsyncQueue.queue(this._boundLoadResource,t),this._queue.pause(),this.resources={},this.onProgress=new Signal,this.onError=new Signal,this.onLoad=new Signal,this.onStart=new Signal,this.onComplete=new Signal;for(var i=0;i<e._plugins.length;++i){var s=e._plugins[i],o=s.pre,a=s.use;o&&this.pre(o),a&&this.use(a)}this._protected=!1}return e.prototype._add=function(r,t,n,i){if(this.loading&&(!n||!n.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[r])throw new Error('Resource named "'+r+'" already exists.');if(t=this._prepareUrl(t),this.resources[r]=new LoaderResource(r,t,n),typeof i=="function"&&this.resources[r].onAfterMiddleware.once(i),this.loading){for(var s=n.parentResource,o=[],a=0;a<s.children.length;++a)s.children[a].isComplete||o.push(s.children[a]);var u=s.progressChunk*(o.length+1),l=u/(o.length+2);s.children.push(this.resources[r]),s.progressChunk=l;for(var a=0;a<o.length;++a)o[a].progressChunk=l;this.resources[r].progressChunk=l}return this._queue.push(this.resources[r]),this},e.prototype.pre=function(r){return this._beforeMiddleware.push(r),this},e.prototype.use=function(r){return this._afterMiddleware.push(r),this},e.prototype.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var r in this.resources){var t=this.resources[r];t._onLoadBinding&&t._onLoadBinding.detach(),t.isLoading&&t.abort("loader reset")}return this.resources={},this},e.prototype.load=function(r){if(deprecation$1("6.5.0","@pixi/loaders is being replaced with @pixi/assets in the next major release."),typeof r=="function"&&this.onComplete.once(r),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var t=this._queue._tasks.length,n=MAX_PROGRESS/t,i=0;i<this._queue._tasks.length;++i)this._queue._tasks[i].data.progressChunk=n;this._onStart(),this._queue.resume()}return this},Object.defineProperty(e.prototype,"concurrency",{get:function(){return this._queue.concurrency},set:function(r){this._queue.concurrency=r},enumerable:!1,configurable:!0}),e.prototype._prepareUrl=function(r){var t=parseUri(r,{strictMode:!0}),n;if(t.protocol||!t.path||r.indexOf("//")===0?n=r:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&r.charAt(0)!=="/"?n=this.baseUrl+"/"+r:n=this.baseUrl+r,this.defaultQueryString){var i=rgxExtractUrlHash.exec(n)[0];n=n.slice(0,n.length-i.length),n.indexOf("?")!==-1?n+="&"+this.defaultQueryString:n+="?"+this.defaultQueryString,n+=i}return n},e.prototype._loadResource=function(r,t){var n=this;r._dequeue=t,AsyncQueue.eachSeries(this._beforeMiddleware,function(i,s){i.call(n,r,function(){s(r.isComplete?{}:null)})},function(){r.isComplete?n._onLoad(r):(r._onLoadBinding=r.onComplete.once(n._onLoad,n),r.load())},!0)},e.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},e.prototype._onComplete=function(){this.progress=MAX_PROGRESS,this.loading=!1,this.onComplete.dispatch(this,this.resources)},e.prototype._onLoad=function(r){var t=this;r._onLoadBinding=null,this._resourcesParsing.push(r),r._dequeue(),AsyncQueue.eachSeries(this._afterMiddleware,function(n,i){n.call(t,r,i)},function(){r.onAfterMiddleware.dispatch(r),t.progress=Math.min(MAX_PROGRESS,t.progress+r.progressChunk),t.onProgress.dispatch(t,r),r.error?t.onError.dispatch(r.error,t,r):t.onLoad.dispatch(t,r),t._resourcesParsing.splice(t._resourcesParsing.indexOf(r),1),t._queue.idle()&&t._resourcesParsing.length===0&&t._onComplete()},!0)},e.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(e,"shared",{get:function(){var r=e._shared;return r||(r=new e,r._protected=!0,e._shared=r),r},enumerable:!1,configurable:!0}),e.registerPlugin=function(r){return deprecation$1("6.5.0","Loader.registerPlugin() is deprecated, use extensions.add() instead."),extensions.add({type:ExtensionType.Loader,ref:r}),e},e._plugins=[],e}();extensions.handleByList(ExtensionType.Loader,Loader._plugins);Loader.prototype.add=function(r,t,n,i){if(Array.isArray(r)){for(var s=0;s<r.length;++s)this.add(r[s]);return this}if(typeof r=="object"&&(n=r,i=t||n.callback||n.onComplete,t=n.url,r=n.name||n.key||n.url),typeof t!="string"&&(i=n,n=t,t=r),typeof t!="string")throw new Error("No url passed to add resource to loader.");return typeof n=="function"&&(i=n,n=null),this._add(r,t,n,i)};var AppLoaderPlugin=function(){function e(){}return e.init=function(r){r=Object.assign({sharedLoader:!1},r),this.loader=r.sharedLoader?Loader.shared:new Loader},e.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},e.extension=ExtensionType.Application,e}(),TextureLoader=function(){function e(){}return e.add=function(){LoaderResource.setExtensionLoadType("svg",LoaderResource.LOAD_TYPE.XHR),LoaderResource.setExtensionXhrType("svg",LoaderResource.XHR_RESPONSE_TYPE.TEXT)},e.use=function(r,t){if(r.data&&(r.type===LoaderResource.TYPE.IMAGE||r.extension==="svg")){var n=r.data,i=r.url,s=r.name,o=r.metadata;Texture.fromLoader(n,i,s,o).then(function(a){r.texture=a,t()}).catch(t)}else t()},e.extension=ExtensionType.Loader,e}(),_keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function encodeBinary(e){for(var r="",t=0;t<e.length;){for(var n=[0,0,0],i=[0,0,0,0],s=0;s<n.length;++s)t<e.length?n[s]=e.charCodeAt(t++)&255:n[s]=0;i[0]=n[0]>>2,i[1]=(n[0]&3)<<4|n[1]>>4,i[2]=(n[1]&15)<<2|n[2]>>6,i[3]=n[2]&63;var o=t-(e.length-1);switch(o){case 2:i[3]=64,i[2]=64;break;case 1:i[3]=64;break}for(var s=0;s<i.length;++s)r+=_keyStr.charAt(i[s])}return r}function parsing(e,r){if(!e.data){r();return}if(e.xhr&&e.xhrType===LoaderResource.XHR_RESPONSE_TYPE.BLOB){if(!self.Blob||typeof e.data=="string"){var t=e.xhr.getResponseHeader("content-type");if(t&&t.indexOf("image")===0){e.data=new Image,e.data.src="data:"+t+";base64,"+encodeBinary(e.xhr.responseText),e.type=LoaderResource.TYPE.IMAGE,e.data.onload=function(){e.data.onload=null,r()};return}}else if(e.data.type.indexOf("image")===0){var n=globalThis.URL||globalThis.webkitURL,i=n.createObjectURL(e.data);e.blob=e.data,e.data=new Image,e.data.src=i,e.type=LoaderResource.TYPE.IMAGE,e.data.onload=function(){n.revokeObjectURL(i),e.data.onload=null,r()};return}}r()}var ParsingLoader=function(){function e(){}return e.extension=ExtensionType.Loader,e.use=parsing,e}();extensions.add(TextureLoader,ParsingLoader);/*!
 * @pixi/compressed-textures - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/compressed-textures is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var _a$2,INTERNAL_FORMATS;(function(e){e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",e[e.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",e[e.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL"})(INTERNAL_FORMATS||(INTERNAL_FORMATS={}));var INTERNAL_FORMAT_TO_BYTES_PER_PIXEL=(_a$2={},_a$2[INTERNAL_FORMATS.COMPRESSED_RGB_S3TC_DXT1_EXT]=.5,_a$2[INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT]=.5,_a$2[INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT]=1,_a$2[INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT]=1,_a$2[INTERNAL_FORMATS.COMPRESSED_SRGB_S3TC_DXT1_EXT]=.5,_a$2[INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]=.5,_a$2[INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]=1,_a$2[INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]=1,_a$2[INTERNAL_FORMATS.COMPRESSED_R11_EAC]=.5,_a$2[INTERNAL_FORMATS.COMPRESSED_SIGNED_R11_EAC]=.5,_a$2[INTERNAL_FORMATS.COMPRESSED_RG11_EAC]=1,_a$2[INTERNAL_FORMATS.COMPRESSED_SIGNED_RG11_EAC]=1,_a$2[INTERNAL_FORMATS.COMPRESSED_RGB8_ETC2]=.5,_a$2[INTERNAL_FORMATS.COMPRESSED_RGBA8_ETC2_EAC]=1,_a$2[INTERNAL_FORMATS.COMPRESSED_SRGB8_ETC2]=.5,_a$2[INTERNAL_FORMATS.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]=1,_a$2[INTERNAL_FORMATS.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,_a$2[INTERNAL_FORMATS.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,_a$2[INTERNAL_FORMATS.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]=.5,_a$2[INTERNAL_FORMATS.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]=.5,_a$2[INTERNAL_FORMATS.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]=.25,_a$2[INTERNAL_FORMATS.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]=.25,_a$2[INTERNAL_FORMATS.COMPRESSED_RGB_ETC1_WEBGL]=.5,_a$2[INTERNAL_FORMATS.COMPRESSED_RGB_ATC_WEBGL]=.5,_a$2[INTERNAL_FORMATS.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]=1,_a$2[INTERNAL_FORMATS.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]=1,_a$2);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$g=function(e,r){return extendStatics$g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},extendStatics$g(e,r)};function __extends$g(e,r){extendStatics$g(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}function __awaiter(e,r,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{l(n.next(h))}catch(f){o(f)}}function u(h){try{l(n.throw(h))}catch(f){o(f)}}function l(h){h.done?s(h.value):i(h.value).then(a,u)}l((n=n.apply(e,r||[])).next())})}function __generator(e,r){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(h){return u([l,h])}}function u(l){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){t.label=l[1];break}if(l[0]===6&&t.label<s[1]){t.label=s[1],s=l;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(l);break}s[2]&&t.ops.pop(),t.trys.pop();continue}l=r.call(e,t)}catch(h){l=[6,h],i=0}finally{n=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}var BlobResource=function(e){__extends$g(r,e);function r(t,n){n===void 0&&(n={width:1,height:1,autoLoad:!0});var i=this,s,o;return typeof t=="string"?(s=t,o=new Uint8Array):(s=null,o=t),i=e.call(this,o,n)||this,i.origin=s,i.buffer=o?new ViewableBuffer(o):null,i.origin&&n.autoLoad!==!1&&i.load(),o&&o.length&&(i.loaded=!0,i.onBlobLoaded(i.buffer.rawBinaryData)),i}return r.prototype.onBlobLoaded=function(t){},r.prototype.load=function(){return __awaiter(this,void 0,Promise,function(){var t,n,i;return __generator(this,function(s){switch(s.label){case 0:return[4,fetch(this.origin)];case 1:return t=s.sent(),[4,t.blob()];case 2:return n=s.sent(),[4,n.arrayBuffer()];case 3:return i=s.sent(),this.data=new Uint32Array(i),this.buffer=new ViewableBuffer(i),this.loaded=!0,this.onBlobLoaded(i),this.update(),[2,this]}})})},r}(BufferResource),CompressedTextureResource=function(e){__extends$g(r,e);function r(t,n){var i=e.call(this,t,n)||this;return i.format=n.format,i.levels=n.levels||1,i._width=n.width,i._height=n.height,i._extension=r._formatToExtension(i.format),(n.levelBuffers||i.buffer)&&(i._levelBuffers=n.levelBuffers||r._createLevelBuffers(t instanceof Uint8Array?t:i.buffer.uint8View,i.format,i.levels,4,4,i.width,i.height)),i}return r.prototype.upload=function(t,n,i){var s=t.gl,o=t.context.extensions[this._extension];if(!o)throw new Error(this._extension+" textures are not supported on the current machine");if(!this._levelBuffers)return!1;for(var a=0,u=this.levels;a<u;a++){var l=this._levelBuffers[a],h=l.levelID,f=l.levelWidth,d=l.levelHeight,_=l.levelBuffer;s.compressedTexImage2D(s.TEXTURE_2D,h,this.format,f,d,0,_)}return!0},r.prototype.onBlobLoaded=function(){this._levelBuffers=r._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)},r._formatToExtension=function(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t>=36196)return"etc1";if(t>=35986&&t<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")},r._createLevelBuffers=function(t,n,i,s,o,a,u){for(var l=new Array(i),h=t.byteOffset,f=a,d=u,_=f+s-1&~(s-1),v=d+o-1&~(o-1),m=_*v*INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[n],E=0;E<i;E++)l[E]={levelID:E,levelWidth:i>1?f:_,levelHeight:i>1?d:v,levelBuffer:new Uint8Array(t.buffer,h,m)},h+=m,f=f>>1||1,d=d>>1||1,_=f+s-1&~(s-1),v=d+o-1&~(o-1),m=_*v*INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[n];return l},r}(BlobResource),CompressedTextureLoader=function(){function e(){}return e.use=function(r,t){var n=r.data,i=this;if(r.type===LoaderResource.TYPE.JSON&&n&&n.cacheID&&n.textures){for(var s=n.textures,o=void 0,a=void 0,u=0,l=s.length;u<l;u++){var h=s[u],f=h.src,d=h.format;if(d||(a=f),e.textureFormats[d]){o=f;break}}if(o=o||a,!o){t(new Error("Cannot load compressed-textures in "+r.url+", make sure you provide a fallback"));return}if(o===r.url){t(new Error("URL of compressed texture cannot be the same as the manifest's URL"));return}var _={crossOrigin:r.crossOrigin,metadata:r.metadata.imageMetadata,parentResource:r},v=url.resolve(r.url.replace(i.baseUrl,""),o),m=n.cacheID;i.add(m,v,_,function(E){if(E.error){t(E.error);return}var A=E.texture,T=A===void 0?null:A,C=E.textures,R=C===void 0?{}:C;Object.assign(r,{texture:T,textures:R}),t()})}else t()},Object.defineProperty(e,"textureExtensions",{get:function(){if(!e._textureExtensions){var r=settings$1.ADAPTER.createCanvas(),t=r.getContext("webgl");if(!t)return console.warn("WebGL not available for compressed textures. Silently failing."),{};var n={s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};e._textureExtensions=n}return e._textureExtensions},enumerable:!1,configurable:!0}),Object.defineProperty(e,"textureFormats",{get:function(){if(!e._textureFormats){var r=e.textureExtensions;e._textureFormats={};for(var t in r){var n=r[t];!n||Object.assign(e._textureFormats,Object.getPrototypeOf(n))}}return e._textureFormats},enumerable:!1,configurable:!0}),e.extension=ExtensionType.Loader,e}();function registerCompressedTextures(e,r,t){var n={textures:{},texture:null};if(!r)return n;var i=r.map(function(s){return new Texture(new BaseTexture(s,Object.assign({mipmap:MIPMAP_MODES$5.OFF,alphaMode:ALPHA_MODES$5.NO_PREMULTIPLIED_ALPHA},t)))});return i.forEach(function(s,o){var a=s.baseTexture,u=e+"-"+(o+1);BaseTexture.addToCache(a,u),Texture.addToCache(s,u),o===0&&(BaseTexture.addToCache(a,e),Texture.addToCache(s,e),n.texture=s),n.textures[u]=s}),n}var _a$1,_b$1,DDS_MAGIC_SIZE=4,DDS_HEADER_SIZE=124,DDS_HEADER_PF_SIZE=32,DDS_HEADER_DX10_SIZE=20,DDS_MAGIC=542327876,DDS_FIELDS={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},DDS_PF_FIELDS={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},DDS_DX10_FIELDS={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},DXGI_FORMAT;(function(e){e[e.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",e[e.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",e[e.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",e[e.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",e[e.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",e[e.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",e[e.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",e[e.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",e[e.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",e[e.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",e[e.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",e[e.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",e[e.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",e[e.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",e[e.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",e[e.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",e[e.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",e[e.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",e[e.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",e[e.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",e[e.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",e[e.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",e[e.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",e[e.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",e[e.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",e[e.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",e[e.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",e[e.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",e[e.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",e[e.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",e[e.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",e[e.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",e[e.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",e[e.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",e[e.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",e[e.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",e[e.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",e[e.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",e[e.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",e[e.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",e[e.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",e[e.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",e[e.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",e[e.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",e[e.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",e[e.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",e[e.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",e[e.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",e[e.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",e[e.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",e[e.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",e[e.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",e[e.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",e[e.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",e[e.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",e[e.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",e[e.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",e[e.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",e[e.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",e[e.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",e[e.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",e[e.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",e[e.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",e[e.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",e[e.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",e[e.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",e[e.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",e[e.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",e[e.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",e[e.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",e[e.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",e[e.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",e[e.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",e[e.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",e[e.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",e[e.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",e[e.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",e[e.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",e[e.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",e[e.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",e[e.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",e[e.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",e[e.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",e[e.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",e[e.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",e[e.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",e[e.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",e[e.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",e[e.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",e[e.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",e[e.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",e[e.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",e[e.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",e[e.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",e[e.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",e[e.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",e[e.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",e[e.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",e[e.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",e[e.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",e[e.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",e[e.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",e[e.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",e[e.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",e[e.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",e[e.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",e[e.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",e[e.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",e[e.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",e[e.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",e[e.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",e[e.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",e[e.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",e[e.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",e[e.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",e[e.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",e[e.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",e[e.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",e[e.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",e[e.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",e[e.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",e[e.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT"})(DXGI_FORMAT||(DXGI_FORMAT={}));var D3D10_RESOURCE_DIMENSION;(function(e){e[e.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",e[e.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",e[e.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D"})(D3D10_RESOURCE_DIMENSION||(D3D10_RESOURCE_DIMENSION={}));var PF_FLAGS=1,DDPF_ALPHA=2,DDPF_FOURCC=4,DDPF_RGB=64,DDPF_YUV=512,DDPF_LUMINANCE=131072,FOURCC_DXT1=827611204,FOURCC_DXT3=861165636,FOURCC_DXT5=894720068,FOURCC_DX10=808540228,DDS_RESOURCE_MISC_TEXTURECUBE=4,FOURCC_TO_FORMAT=(_a$1={},_a$1[FOURCC_DXT1]=INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,_a$1[FOURCC_DXT3]=INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,_a$1[FOURCC_DXT5]=INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,_a$1),DXGI_TO_FORMAT=(_b$1={},_b$1[DXGI_FORMAT.DXGI_FORMAT_BC1_TYPELESS]=INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,_b$1[DXGI_FORMAT.DXGI_FORMAT_BC1_UNORM]=INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,_b$1[DXGI_FORMAT.DXGI_FORMAT_BC2_TYPELESS]=INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,_b$1[DXGI_FORMAT.DXGI_FORMAT_BC2_UNORM]=INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,_b$1[DXGI_FORMAT.DXGI_FORMAT_BC3_TYPELESS]=INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,_b$1[DXGI_FORMAT.DXGI_FORMAT_BC3_UNORM]=INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,_b$1[DXGI_FORMAT.DXGI_FORMAT_BC1_UNORM_SRGB]=INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,_b$1[DXGI_FORMAT.DXGI_FORMAT_BC2_UNORM_SRGB]=INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,_b$1[DXGI_FORMAT.DXGI_FORMAT_BC3_UNORM_SRGB]=INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,_b$1);function parseDDS(e){var r=new Uint32Array(e),t=r[0];if(t!==DDS_MAGIC)throw new Error("Invalid DDS file magic word");var n=new Uint32Array(e,0,DDS_HEADER_SIZE/Uint32Array.BYTES_PER_ELEMENT),i=n[DDS_FIELDS.HEIGHT],s=n[DDS_FIELDS.WIDTH],o=n[DDS_FIELDS.MIPMAP_COUNT],a=new Uint32Array(e,DDS_FIELDS.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,DDS_HEADER_PF_SIZE/Uint32Array.BYTES_PER_ELEMENT),u=a[PF_FLAGS];if(u&DDPF_FOURCC){var l=a[DDS_PF_FIELDS.FOURCC];if(l!==FOURCC_DX10){var h=FOURCC_TO_FORMAT[l],f=DDS_MAGIC_SIZE+DDS_HEADER_SIZE,d=new Uint8Array(e,f),_=new CompressedTextureResource(d,{format:h,width:s,height:i,levels:o});return[_]}var v=DDS_MAGIC_SIZE+DDS_HEADER_SIZE,m=new Uint32Array(r.buffer,v,DDS_HEADER_DX10_SIZE/Uint32Array.BYTES_PER_ELEMENT),E=m[DDS_DX10_FIELDS.DXGI_FORMAT],A=m[DDS_DX10_FIELDS.RESOURCE_DIMENSION],T=m[DDS_DX10_FIELDS.MISC_FLAG],C=m[DDS_DX10_FIELDS.ARRAY_SIZE],R=DXGI_TO_FORMAT[E];if(R===void 0)throw new Error("DDSParser cannot parse texture data with DXGI format "+E);if(T===DDS_RESOURCE_MISC_TEXTURECUBE)throw new Error("DDSParser does not support cubemap textures");if(A===D3D10_RESOURCE_DIMENSION.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSParser does not supported 3D texture data");var b=new Array,S=DDS_MAGIC_SIZE+DDS_HEADER_SIZE+DDS_HEADER_DX10_SIZE;if(C===1)b.push(new Uint8Array(e,S));else{for(var B=INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[R],M=0,D=s,G=i,J=0;J<o;J++){var re=Math.max(1,D+3&-4),ne=Math.max(1,G+3&-4),de=re*ne*B;M+=de,D=D>>>1,G=G>>>1}for(var q=S,J=0;J<C;J++)b.push(new Uint8Array(e,q,M)),q+=M}return b.map(function(z){return new CompressedTextureResource(z,{format:R,width:s,height:i,levels:o})})}throw u&DDPF_RGB?new Error("DDSParser does not support uncompressed texture data."):u&DDPF_YUV?new Error("DDSParser does not supported YUV uncompressed texture data."):u&DDPF_LUMINANCE?new Error("DDSParser does not support single-channel (lumninance) texture data!"):u&DDPF_ALPHA?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}var _a$3,_b,_c,FILE_IDENTIFIER=[171,75,84,88,32,49,49,187,13,10,26,10],ENDIANNESS=67305985,KTX_FIELDS={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},FILE_HEADER_SIZE=64,TYPES_TO_BYTES_PER_COMPONENT=(_a$3={},_a$3[TYPES$5.UNSIGNED_BYTE]=1,_a$3[TYPES$5.UNSIGNED_SHORT]=2,_a$3[TYPES$5.INT]=4,_a$3[TYPES$5.UNSIGNED_INT]=4,_a$3[TYPES$5.FLOAT]=4,_a$3[TYPES$5.HALF_FLOAT]=8,_a$3),FORMATS_TO_COMPONENTS=(_b={},_b[FORMATS$5.RGBA]=4,_b[FORMATS$5.RGB]=3,_b[FORMATS$5.RG]=2,_b[FORMATS$5.RED]=1,_b[FORMATS$5.LUMINANCE]=1,_b[FORMATS$5.LUMINANCE_ALPHA]=2,_b[FORMATS$5.ALPHA]=1,_b),TYPES_TO_BYTES_PER_PIXEL=(_c={},_c[TYPES$5.UNSIGNED_SHORT_4_4_4_4]=2,_c[TYPES$5.UNSIGNED_SHORT_5_5_5_1]=2,_c[TYPES$5.UNSIGNED_SHORT_5_6_5]=2,_c);function parseKTX(e,r,t){t===void 0&&(t=!1);var n=new DataView(r);if(!validate(e,n))return null;var i=n.getUint32(KTX_FIELDS.ENDIANNESS,!0)===ENDIANNESS,s=n.getUint32(KTX_FIELDS.GL_TYPE,i),o=n.getUint32(KTX_FIELDS.GL_FORMAT,i),a=n.getUint32(KTX_FIELDS.GL_INTERNAL_FORMAT,i),u=n.getUint32(KTX_FIELDS.PIXEL_WIDTH,i),l=n.getUint32(KTX_FIELDS.PIXEL_HEIGHT,i)||1,h=n.getUint32(KTX_FIELDS.PIXEL_DEPTH,i)||1,f=n.getUint32(KTX_FIELDS.NUMBER_OF_ARRAY_ELEMENTS,i)||1,d=n.getUint32(KTX_FIELDS.NUMBER_OF_FACES,i),_=n.getUint32(KTX_FIELDS.NUMBER_OF_MIPMAP_LEVELS,i),v=n.getUint32(KTX_FIELDS.BYTES_OF_KEY_VALUE_DATA,i);if(l===0||h!==1)throw new Error("Only 2D textures are supported");if(d!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(f!==1)throw new Error("WebGL does not support array textures");var m=4,E=4,A=u+3&-4,T=l+3&-4,C=new Array(f),R=u*l;s===0&&(R=A*T);var b;if(s!==0?TYPES_TO_BYTES_PER_COMPONENT[s]?b=TYPES_TO_BYTES_PER_COMPONENT[s]*FORMATS_TO_COMPONENTS[o]:b=TYPES_TO_BYTES_PER_PIXEL[s]:b=INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[a],b===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");for(var S=t?parseKvData(n,v,i):null,B=R*b,M=B,D=u,G=l,J=A,re=T,ne=FILE_HEADER_SIZE+v,de=0;de<_;de++){for(var q=n.getUint32(ne,i),z=ne+4,te=0;te<f;te++){var ue=C[te];ue||(ue=C[te]=new Array(_)),ue[de]={levelID:de,levelWidth:_>1||s!==0?D:J,levelHeight:_>1||s!==0?G:re,levelBuffer:new Uint8Array(r,z,M)},z+=M}ne+=q+4,ne=ne%4!==0?ne+4-ne%4:ne,D=D>>1||1,G=G>>1||1,J=D+m-1&~(m-1),re=G+E-1&~(E-1),M=J*re*b}return s!==0?{uncompressed:C.map(function(le){var O=le[0].levelBuffer,V=!1;return s===TYPES$5.FLOAT?O=new Float32Array(le[0].levelBuffer.buffer,le[0].levelBuffer.byteOffset,le[0].levelBuffer.byteLength/4):s===TYPES$5.UNSIGNED_INT?(V=!0,O=new Uint32Array(le[0].levelBuffer.buffer,le[0].levelBuffer.byteOffset,le[0].levelBuffer.byteLength/4)):s===TYPES$5.INT&&(V=!0,O=new Int32Array(le[0].levelBuffer.buffer,le[0].levelBuffer.byteOffset,le[0].levelBuffer.byteLength/4)),{resource:new BufferResource(O,{width:le[0].levelWidth,height:le[0].levelHeight}),type:s,format:V?convertFormatToInteger(o):o}}),kvData:S}:{compressed:C.map(function(le){return new CompressedTextureResource(null,{format:a,width:u,height:l,levels:_,levelBuffers:le})}),kvData:S}}function validate(e,r){for(var t=0;t<FILE_IDENTIFIER.length;t++)if(r.getUint8(t)!==FILE_IDENTIFIER[t])return console.error(e+" is not a valid *.ktx file!"),!1;return!0}function convertFormatToInteger(e){switch(e){case FORMATS$5.RGBA:return FORMATS$5.RGBA_INTEGER;case FORMATS$5.RGB:return FORMATS$5.RGB_INTEGER;case FORMATS$5.RG:return FORMATS$5.RG_INTEGER;case FORMATS$5.RED:return FORMATS$5.RED_INTEGER;default:return e}}function parseKvData(e,r,t){for(var n=new Map,i=0;i<r;){var s=e.getUint32(FILE_HEADER_SIZE+i,t),o=FILE_HEADER_SIZE+i+4,a=3-(s+3)%4;if(s===0||s>r-i){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}for(var u=0;u<s&&e.getUint8(o+u)!==0;u++);if(u===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}var l=new TextDecoder().decode(new Uint8Array(e.buffer,o,u)),h=new DataView(e.buffer,o+u+1,s-u-1);n.set(l,h),i+=4+s+a}return n}LoaderResource.setExtensionXhrType("dds",LoaderResource.XHR_RESPONSE_TYPE.BUFFER);var DDSLoader=function(){function e(){}return e.use=function(r,t){if(r.extension==="dds"&&r.data)try{Object.assign(r,registerCompressedTextures(r.name||r.url,parseDDS(r.data),r.metadata))}catch(n){t(n);return}t()},e.extension=ExtensionType.Loader,e}();LoaderResource.setExtensionXhrType("ktx",LoaderResource.XHR_RESPONSE_TYPE.BUFFER);var KTXLoader=function(){function e(){}return e.use=function(r,t){if(r.extension==="ktx"&&r.data)try{var n=r.name||r.url,i=parseKTX(n,r.data,this.loadKeyValueData),s=i.compressed,o=i.uncompressed,a=i.kvData;if(s){var u=registerCompressedTextures(n,s,r.metadata);if(a&&u.textures)for(var l in u.textures)u.textures[l].baseTexture.ktxKeyValueData=a;Object.assign(r,u)}else if(o){var h={};o.forEach(function(f,d){var _=new Texture(new BaseTexture(f.resource,{mipmap:MIPMAP_MODES$5.OFF,alphaMode:ALPHA_MODES$5.NO_PREMULTIPLIED_ALPHA,type:f.type,format:f.format})),v=n+"-"+(d+1);a&&(_.baseTexture.ktxKeyValueData=a),BaseTexture.addToCache(_.baseTexture,v),Texture.addToCache(_,v),d===0&&(h[n]=_,BaseTexture.addToCache(_.baseTexture,n),Texture.addToCache(_,n)),h[v]=_}),Object.assign(r,{textures:h})}}catch(f){t(f);return}t()},e.extension=ExtensionType.Loader,e.loadKeyValueData=!1,e}();/*!
 * @pixi/particle-container - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/particle-container is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$f=function(e,r){return extendStatics$f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},extendStatics$f(e,r)};function __extends$f(e,r){extendStatics$f(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}(function(e){__extends$f(r,e);function r(t,n,i,s){t===void 0&&(t=1500),i===void 0&&(i=16384),s===void 0&&(s=!1);var o=e.call(this)||this,a=16384;return i>a&&(i=a),o._properties=[!1,!0,!1,!1,!1],o._maxSize=t,o._batchSize=i,o._buffers=null,o._bufferUpdateIDs=[],o._updateID=0,o.interactiveChildren=!1,o.blendMode=BLEND_MODES$5.NORMAL,o.autoResize=s,o.roundPixels=!0,o.baseTexture=null,o.setProperties(n),o._tint=0,o.tintRgb=new Float32Array(4),o.tint=16777215,o}return r.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},r.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(r.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,hex2rgb(t,this.tintRgb)},enumerable:!1,configurable:!0}),r.prototype.render=function(t){var n=this;!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",function(){return n.onChildrenChange(0)})),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},r.prototype.onChildrenChange=function(t){for(var n=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<n;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[n]=++this._updateID},r.prototype.dispose=function(){if(this._buffers){for(var t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}},r.prototype.destroy=function(t){e.prototype.destroy.call(this,t),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},r})(Container);var ParticleBuffer=function(){function e(r,t,n){this.geometry=new Geometry,this.indexBuffer=null,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(var i=0;i<r.length;++i){var s=r[i];s={attributeName:s.attributeName,size:s.size,uploadFunction:s.uploadFunction,type:s.type||TYPES$5.FLOAT,offset:s.offset},t[i]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return e.prototype.initBuffers=function(){var r=this.geometry,t=0;this.indexBuffer=new Buffer(createIndicesForQuads(this.size),!0,!0),r.addIndex(this.indexBuffer),this.dynamicStride=0;for(var n=0;n<this.dynamicProperties.length;++n){var i=this.dynamicProperties[n];i.offset=t,t+=i.size,this.dynamicStride+=i.size}var s=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(s),this.dynamicDataUint32=new Uint32Array(s),this.dynamicBuffer=new Buffer(this.dynamicData,!1,!1);var o=0;this.staticStride=0;for(var n=0;n<this.staticProperties.length;++n){var i=this.staticProperties[n];i.offset=o,o+=i.size,this.staticStride+=i.size}var a=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(a),this.staticDataUint32=new Uint32Array(a),this.staticBuffer=new Buffer(this.staticData,!0,!1);for(var n=0;n<this.dynamicProperties.length;++n){var i=this.dynamicProperties[n];r.addAttribute(i.attributeName,this.dynamicBuffer,0,i.type===TYPES$5.UNSIGNED_BYTE,i.type,this.dynamicStride*4,i.offset*4)}for(var n=0;n<this.staticProperties.length;++n){var i=this.staticProperties[n];r.addAttribute(i.attributeName,this.staticBuffer,0,i.type===TYPES$5.UNSIGNED_BYTE,i.type,this.staticStride*4,i.offset*4)}},e.prototype.uploadDynamic=function(r,t,n){for(var i=0;i<this.dynamicProperties.length;i++){var s=this.dynamicProperties[i];s.uploadFunction(r,t,n,s.type===TYPES$5.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,s.offset)}this.dynamicBuffer._updateID++},e.prototype.uploadStatic=function(r,t,n){for(var i=0;i<this.staticProperties.length;i++){var s=this.staticProperties[i];s.uploadFunction(r,t,n,s.type===TYPES$5.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,s.offset)}this.staticBuffer._updateID++},e.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},e}(),fragment$6=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,vertex$3=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`,ParticleRenderer=function(e){__extends$f(r,e);function r(t){var n=e.call(this,t)||this;return n.shader=null,n.properties=null,n.tempMatrix=new Matrix,n.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:n.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:n.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:n.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:n.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:TYPES$5.UNSIGNED_BYTE,uploadFunction:n.uploadTint,offset:0}],n.shader=Shader.from(vertex$3,fragment$6,{}),n.state=State.for2d(),n}return r.prototype.render=function(t){var n=t.children,i=t._maxSize,s=t._batchSize,o=this.renderer,a=n.length;if(a!==0){a>i&&!t.autoResize&&(a=i);var u=t._buffers;u||(u=t._buffers=this.generateBuffers(t));var l=n[0]._texture.baseTexture,h=l.alphaMode>0;this.state.blendMode=correctBlendMode(t.blendMode,h),o.state.set(this.state);var f=o.gl,d=t.worldTransform.copyTo(this.tempMatrix);d.prepend(o.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=d.toArray(!0),this.shader.uniforms.uColor=premultiplyRgba(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,h),this.shader.uniforms.uSampler=l,this.renderer.shader.bind(this.shader);for(var _=!1,v=0,m=0;v<a;v+=s,m+=1){var E=a-v;E>s&&(E=s),m>=u.length&&u.push(this._generateOneMoreBuffer(t));var A=u[m];A.uploadDynamic(n,v,E);var T=t._bufferUpdateIDs[m]||0;_=_||A._updateID<T,_&&(A._updateID=t._updateID,A.uploadStatic(n,v,E)),o.geometry.bind(A.geometry),f.drawElements(f.TRIANGLES,E*6,f.UNSIGNED_SHORT,0)}}},r.prototype.generateBuffers=function(t){for(var n=[],i=t._maxSize,s=t._batchSize,o=t._properties,a=0;a<i;a+=s)n.push(new ParticleBuffer(this.properties,o,s));return n},r.prototype._generateOneMoreBuffer=function(t){var n=t._batchSize,i=t._properties;return new ParticleBuffer(this.properties,i,n)},r.prototype.uploadVertices=function(t,n,i,s,o,a){for(var u=0,l=0,h=0,f=0,d=0;d<i;++d){var _=t[n+d],v=_._texture,m=_.scale.x,E=_.scale.y,A=v.trim,T=v.orig;A?(l=A.x-_.anchor.x*T.width,u=l+A.width,f=A.y-_.anchor.y*T.height,h=f+A.height):(u=T.width*(1-_.anchor.x),l=T.width*-_.anchor.x,h=T.height*(1-_.anchor.y),f=T.height*-_.anchor.y),s[a]=l*m,s[a+1]=f*E,s[a+o]=u*m,s[a+o+1]=f*E,s[a+o*2]=u*m,s[a+o*2+1]=h*E,s[a+o*3]=l*m,s[a+o*3+1]=h*E,a+=o*4}},r.prototype.uploadPosition=function(t,n,i,s,o,a){for(var u=0;u<i;u++){var l=t[n+u].position;s[a]=l.x,s[a+1]=l.y,s[a+o]=l.x,s[a+o+1]=l.y,s[a+o*2]=l.x,s[a+o*2+1]=l.y,s[a+o*3]=l.x,s[a+o*3+1]=l.y,a+=o*4}},r.prototype.uploadRotation=function(t,n,i,s,o,a){for(var u=0;u<i;u++){var l=t[n+u].rotation;s[a]=l,s[a+o]=l,s[a+o*2]=l,s[a+o*3]=l,a+=o*4}},r.prototype.uploadUvs=function(t,n,i,s,o,a){for(var u=0;u<i;++u){var l=t[n+u]._texture._uvs;l?(s[a]=l.x0,s[a+1]=l.y0,s[a+o]=l.x1,s[a+o+1]=l.y1,s[a+o*2]=l.x2,s[a+o*2+1]=l.y2,s[a+o*3]=l.x3,s[a+o*3+1]=l.y3,a+=o*4):(s[a]=0,s[a+1]=0,s[a+o]=0,s[a+o+1]=0,s[a+o*2]=0,s[a+o*2+1]=0,s[a+o*3]=0,s[a+o*3+1]=0,a+=o*4)}},r.prototype.uploadTint=function(t,n,i,s,o,a){for(var u=0;u<i;++u){var l=t[n+u],h=l._texture.baseTexture.alphaMode>0,f=l.alpha,d=f<1&&h?premultiplyTint(l._tintRGB,f):l._tintRGB+(f*255<<24);s[a]=d,s[a+o]=d,s[a+o*2]=d,s[a+o*3]=d,a+=o*4}},r.prototype.destroy=function(){e.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},r.extension={name:"particle",type:ExtensionType.RendererPlugin},r}(ObjectRenderer);/*!
 * @pixi/graphics - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/graphics is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var LINE_JOIN;(function(e){e.MITER="miter",e.BEVEL="bevel",e.ROUND="round"})(LINE_JOIN||(LINE_JOIN={}));var LINE_CAP;(function(e){e.BUTT="butt",e.ROUND="round",e.SQUARE="square"})(LINE_CAP||(LINE_CAP={}));var GRAPHICS_CURVES={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(e,r){if(r===void 0&&(r=20),!this.adaptive||!e||isNaN(e))return r;var t=Math.ceil(e/this.maxLength);return t<this.minSegments?t=this.minSegments:t>this.maxSegments&&(t=this.maxSegments),t}},FillStyle=function(){function e(){this.color=16777215,this.alpha=1,this.texture=Texture.WHITE,this.matrix=null,this.visible=!1,this.reset()}return e.prototype.clone=function(){var r=new e;return r.color=this.color,r.alpha=this.alpha,r.texture=this.texture,r.matrix=this.matrix,r.visible=this.visible,r},e.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=Texture.WHITE,this.matrix=null,this.visible=!1},e.prototype.destroy=function(){this.texture=null,this.matrix=null},e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$e=function(e,r){return extendStatics$e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},extendStatics$e(e,r)};function __extends$e(e,r){extendStatics$e(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}function fixOrientation(e,r){var t,n;r===void 0&&(r=!1);var i=e.length;if(!(i<6)){for(var s=0,o=0,a=e[i-2],u=e[i-1];o<i;o+=2){var l=e[o],h=e[o+1];s+=(l-a)*(h+u),a=l,u=h}if(!r&&s>0||r&&s<=0)for(var f=i/2,o=f+f%2;o<i;o+=2){var d=i-o-2,_=i-o-1,v=o,m=o+1;t=[e[v],e[d]],e[d]=t[0],e[v]=t[1],n=[e[m],e[_]],e[_]=n[0],e[m]=n[1]}}}var buildPoly={build:function(e){e.points=e.shape.points.slice()},triangulate:function(e,r){var t=e.points,n=e.holes,i=r.points,s=r.indices;if(t.length>=6){fixOrientation(t,!1);for(var o=[],a=0;a<n.length;a++){var u=n[a];fixOrientation(u.points,!0),o.push(t.length/2),t=t.concat(u.points)}var l=earcut$1.exports(t,o,2);if(!l)return;for(var h=i.length/2,a=0;a<l.length;a+=3)s.push(l[a]+h),s.push(l[a+1]+h),s.push(l[a+2]+h);for(var a=0;a<t.length;a++)i.push(t[a])}}},buildCircle={build:function(e){var r=e.points,t,n,i,s,o,a;if(e.type===SHAPES.CIRC){var u=e.shape;t=u.x,n=u.y,o=a=u.radius,i=s=0}else if(e.type===SHAPES.ELIP){var l=e.shape;t=l.x,n=l.y,o=l.width,a=l.height,i=s=0}else{var h=e.shape,f=h.width/2,d=h.height/2;t=h.x+f,n=h.y+d,o=a=Math.max(0,Math.min(h.radius,Math.min(f,d))),i=f-o,s=d-a}if(!(o>=0&&a>=0&&i>=0&&s>=0)){r.length=0;return}var _=Math.ceil(2.3*Math.sqrt(o+a)),v=_*8+(i?4:0)+(s?4:0);if(r.length=v,v!==0){if(_===0){r.length=8,r[0]=r[6]=t+i,r[1]=r[3]=n+s,r[2]=r[4]=t-i,r[5]=r[7]=n-s;return}var m=0,E=_*4+(i?2:0)+2,A=E,T=v;{var C=i+o,R=s,b=t+C,S=t-C,B=n+R;if(r[m++]=b,r[m++]=B,r[--E]=B,r[--E]=S,s){var M=n-R;r[A++]=S,r[A++]=M,r[--T]=M,r[--T]=b}}for(var D=1;D<_;D++){var G=Math.PI/2*(D/_),C=i+Math.cos(G)*o,R=s+Math.sin(G)*a,b=t+C,S=t-C,B=n+R,M=n-R;r[m++]=b,r[m++]=B,r[--E]=B,r[--E]=S,r[A++]=S,r[A++]=M,r[--T]=M,r[--T]=b}{var C=i,R=s+a,b=t+C,S=t-C,B=n+R,M=n-R;r[m++]=b,r[m++]=B,r[--T]=M,r[--T]=b,i&&(r[m++]=S,r[m++]=B,r[--T]=M,r[--T]=S)}}},triangulate:function(e,r){var t=e.points,n=r.points,i=r.indices;if(t.length!==0){var s=n.length/2,o=s,a,u;if(e.type!==SHAPES.RREC){var l=e.shape;a=l.x,u=l.y}else{var h=e.shape;a=h.x+h.width/2,u=h.y+h.height/2}var f=e.matrix;n.push(e.matrix?f.a*a+f.c*u+f.tx:a,e.matrix?f.b*a+f.d*u+f.ty:u),s++,n.push(t[0],t[1]);for(var d=2;d<t.length;d+=2)n.push(t[d],t[d+1]),i.push(s++,o,s);i.push(o+1,o,s)}}},buildRectangle={build:function(e){var r=e.shape,t=r.x,n=r.y,i=r.width,s=r.height,o=e.points;o.length=0,o.push(t,n,t+i,n,t+i,n+s,t,n+s)},triangulate:function(e,r){var t=e.points,n=r.points,i=n.length/2;n.push(t[0],t[1],t[2],t[3],t[6],t[7],t[4],t[5]),r.indices.push(i,i+1,i+2,i+1,i+2,i+3)}};function getPt(e,r,t){var n=r-e;return e+n*t}function quadraticBezierCurve(e,r,t,n,i,s,o){o===void 0&&(o=[]);for(var a=20,u=o,l=0,h=0,f=0,d=0,_=0,v=0,m=0,E=0;m<=a;++m)E=m/a,l=getPt(e,t,E),h=getPt(r,n,E),f=getPt(t,i,E),d=getPt(n,s,E),_=getPt(l,f,E),v=getPt(h,d,E),!(m===0&&u[u.length-2]===_&&u[u.length-1]===v)&&u.push(_,v);return u}var buildRoundedRectangle={build:function(e){if(Graphics.nextRoundedRectBehavior){buildCircle.build(e);return}var r=e.shape,t=e.points,n=r.x,i=r.y,s=r.width,o=r.height,a=Math.max(0,Math.min(r.radius,Math.min(s,o)/2));t.length=0,a?(quadraticBezierCurve(n,i+a,n,i,n+a,i,t),quadraticBezierCurve(n+s-a,i,n+s,i,n+s,i+a,t),quadraticBezierCurve(n+s,i+o-a,n+s,i+o,n+s-a,i+o,t),quadraticBezierCurve(n+a,i+o,n,i+o,n,i+o-a,t)):t.push(n,i,n+s,i,n+s,i+o,n,i+o)},triangulate:function(e,r){if(Graphics.nextRoundedRectBehavior){buildCircle.triangulate(e,r);return}for(var t=e.points,n=r.points,i=r.indices,s=n.length/2,o=earcut$1.exports(t,null,2),a=0,u=o.length;a<u;a+=3)i.push(o[a]+s),i.push(o[a+1]+s),i.push(o[a+2]+s);for(var a=0,u=t.length;a<u;a++)n.push(t[a],t[++a])}};function square(e,r,t,n,i,s,o,a){var u=e-t*i,l=r-n*i,h=e+t*s,f=r+n*s,d,_;o?(d=n,_=-t):(d=-n,_=t);var v=u+d,m=l+_,E=h+d,A=f+_;return a.push(v,m),a.push(E,A),2}function round(e,r,t,n,i,s,o,a){var u=t-e,l=n-r,h=Math.atan2(u,l),f=Math.atan2(i-e,s-r);a&&h<f?h+=Math.PI*2:!a&&h>f&&(f+=Math.PI*2);var d=h,_=f-h,v=Math.abs(_),m=Math.sqrt(u*u+l*l),E=(15*v*Math.sqrt(m)/Math.PI>>0)+1,A=_/E;if(d+=A,a){o.push(e,r),o.push(t,n);for(var T=1,C=d;T<E;T++,C+=A)o.push(e,r),o.push(e+Math.sin(C)*m,r+Math.cos(C)*m);o.push(e,r),o.push(i,s)}else{o.push(t,n),o.push(e,r);for(var T=1,C=d;T<E;T++,C+=A)o.push(e+Math.sin(C)*m,r+Math.cos(C)*m),o.push(e,r);o.push(i,s),o.push(e,r)}return E*2}function buildNonNativeLine(e,r){var t=e.shape,n=e.points||t.points.slice(),i=r.closePointEps;if(n.length!==0){var s=e.lineStyle,o=new Point(n[0],n[1]),a=new Point(n[n.length-2],n[n.length-1]),u=t.type!==SHAPES.POLY||t.closeStroke,l=Math.abs(o.x-a.x)<i&&Math.abs(o.y-a.y)<i;if(u){n=n.slice(),l&&(n.pop(),n.pop(),a.set(n[n.length-2],n[n.length-1]));var h=(o.x+a.x)*.5,f=(a.y+o.y)*.5;n.unshift(h,f),n.push(h,f)}var d=r.points,_=n.length/2,v=n.length,m=d.length/2,E=s.width/2,A=E*E,T=s.miterLimit*s.miterLimit,C=n[0],R=n[1],b=n[2],S=n[3],B=0,M=0,D=-(R-S),G=C-b,J=0,re=0,ne=Math.sqrt(D*D+G*G);D/=ne,G/=ne,D*=E,G*=E;var de=s.alignment,q=(1-de)*2,z=de*2;u||(s.cap===LINE_CAP.ROUND?v+=round(C-D*(q-z)*.5,R-G*(q-z)*.5,C-D*q,R-G*q,C+D*z,R+G*z,d,!0)+2:s.cap===LINE_CAP.SQUARE&&(v+=square(C,R,D,G,q,z,!0,d))),d.push(C-D*q,R-G*q),d.push(C+D*z,R+G*z);for(var te=1;te<_-1;++te){C=n[(te-1)*2],R=n[(te-1)*2+1],b=n[te*2],S=n[te*2+1],B=n[(te+1)*2],M=n[(te+1)*2+1],D=-(R-S),G=C-b,ne=Math.sqrt(D*D+G*G),D/=ne,G/=ne,D*=E,G*=E,J=-(S-M),re=b-B,ne=Math.sqrt(J*J+re*re),J/=ne,re/=ne,J*=E,re*=E;var ue=b-C,le=R-S,O=b-B,V=M-S,Z=le*O-V*ue,ee=Z<0;if(Math.abs(Z)<.1){d.push(b-D*q,S-G*q),d.push(b+D*z,S+G*z);continue}var oe=(-D+C)*(-G+S)-(-D+b)*(-G+R),ge=(-J+B)*(-re+S)-(-J+b)*(-re+M),ce=(ue*ge-O*oe)/Z,pe=(V*oe-le*ge)/Z,Ae=(ce-b)*(ce-b)+(pe-S)*(pe-S),Ee=b+(ce-b)*q,me=S+(pe-S)*q,he=b-(ce-b)*z,ve=S-(pe-S)*z,P=Math.min(ue*ue+le*le,O*O+V*V),N=ee?q:z,$=P+N*N*A,U=Ae<=$;U?s.join===LINE_JOIN.BEVEL||Ae/A>T?(ee?(d.push(Ee,me),d.push(b+D*z,S+G*z),d.push(Ee,me),d.push(b+J*z,S+re*z)):(d.push(b-D*q,S-G*q),d.push(he,ve),d.push(b-J*q,S-re*q),d.push(he,ve)),v+=2):s.join===LINE_JOIN.ROUND?ee?(d.push(Ee,me),d.push(b+D*z,S+G*z),v+=round(b,S,b+D*z,S+G*z,b+J*z,S+re*z,d,!0)+4,d.push(Ee,me),d.push(b+J*z,S+re*z)):(d.push(b-D*q,S-G*q),d.push(he,ve),v+=round(b,S,b-D*q,S-G*q,b-J*q,S-re*q,d,!1)+4,d.push(b-J*q,S-re*q),d.push(he,ve)):(d.push(Ee,me),d.push(he,ve)):(d.push(b-D*q,S-G*q),d.push(b+D*z,S+G*z),s.join===LINE_JOIN.ROUND?ee?v+=round(b,S,b+D*z,S+G*z,b+J*z,S+re*z,d,!0)+2:v+=round(b,S,b-D*q,S-G*q,b-J*q,S-re*q,d,!1)+2:s.join===LINE_JOIN.MITER&&Ae/A<=T&&(ee?(d.push(he,ve),d.push(he,ve)):(d.push(Ee,me),d.push(Ee,me)),v+=2),d.push(b-J*q,S-re*q),d.push(b+J*z,S+re*z),v+=2)}C=n[(_-2)*2],R=n[(_-2)*2+1],b=n[(_-1)*2],S=n[(_-1)*2+1],D=-(R-S),G=C-b,ne=Math.sqrt(D*D+G*G),D/=ne,G/=ne,D*=E,G*=E,d.push(b-D*q,S-G*q),d.push(b+D*z,S+G*z),u||(s.cap===LINE_CAP.ROUND?v+=round(b-D*(q-z)*.5,S-G*(q-z)*.5,b-D*q,S-G*q,b+D*z,S+G*z,d,!1)+2:s.cap===LINE_CAP.SQUARE&&(v+=square(b,S,D,G,q,z,!1,d)));for(var k=r.indices,W=GRAPHICS_CURVES.epsilon*GRAPHICS_CURVES.epsilon,te=m;te<v+m-2;++te)C=d[te*2],R=d[te*2+1],b=d[(te+1)*2],S=d[(te+1)*2+1],B=d[(te+2)*2],M=d[(te+2)*2+1],!(Math.abs(C*(S-M)+b*(M-R)+B*(R-S))<W)&&k.push(te,te+1,te+2)}}function buildNativeLine(e,r){var t=0,n=e.shape,i=e.points||n.points,s=n.type!==SHAPES.POLY||n.closeStroke;if(i.length!==0){var o=r.points,a=r.indices,u=i.length/2,l=o.length/2,h=l;for(o.push(i[0],i[1]),t=1;t<u;t++)o.push(i[t*2],i[t*2+1]),a.push(h,h+1),h++;s&&a.push(h,l)}}function buildLine(e,r){e.lineStyle.native?buildNativeLine(e,r):buildNonNativeLine(e,r)}var ArcUtils=function(){function e(){}return e.curveTo=function(r,t,n,i,s,o){var a=o[o.length-2],u=o[o.length-1],l=u-t,h=a-r,f=i-t,d=n-r,_=Math.abs(l*d-h*f);if(_<1e-8||s===0)return(o[o.length-2]!==r||o[o.length-1]!==t)&&o.push(r,t),null;var v=l*l+h*h,m=f*f+d*d,E=l*f+h*d,A=s*Math.sqrt(v)/_,T=s*Math.sqrt(m)/_,C=A*E/v,R=T*E/m,b=A*d+T*h,S=A*f+T*l,B=h*(T+C),M=l*(T+C),D=d*(A+R),G=f*(A+R),J=Math.atan2(M-S,B-b),re=Math.atan2(G-S,D-b);return{cx:b+r,cy:S+t,radius:s,startAngle:J,endAngle:re,anticlockwise:h*f>d*l}},e.arc=function(r,t,n,i,s,o,a,u,l){for(var h=a-o,f=GRAPHICS_CURVES._segmentsCount(Math.abs(h)*s,Math.ceil(Math.abs(h)/PI_2)*40),d=h/(f*2),_=d*2,v=Math.cos(d),m=Math.sin(d),E=f-1,A=E%1/E,T=0;T<=E;++T){var C=T+A*T,R=d+o+_*C,b=Math.cos(R),S=-Math.sin(R);l.push((v*b+m*S)*s+n,(v*-S+m*b)*s+i)}},e}(),BezierUtils=function(){function e(){}return e.curveLength=function(r,t,n,i,s,o,a,u){for(var l=10,h=0,f=0,d=0,_=0,v=0,m=0,E=0,A=0,T=0,C=0,R=0,b=r,S=t,B=1;B<=l;++B)f=B/l,d=f*f,_=d*f,v=1-f,m=v*v,E=m*v,A=E*r+3*m*f*n+3*v*d*s+_*a,T=E*t+3*m*f*i+3*v*d*o+_*u,C=b-A,R=S-T,b=A,S=T,h+=Math.sqrt(C*C+R*R);return h},e.curveTo=function(r,t,n,i,s,o,a){var u=a[a.length-2],l=a[a.length-1];a.length-=2;var h=GRAPHICS_CURVES._segmentsCount(e.curveLength(u,l,r,t,n,i,s,o)),f=0,d=0,_=0,v=0,m=0;a.push(u,l);for(var E=1,A=0;E<=h;++E)A=E/h,f=1-A,d=f*f,_=d*f,v=A*A,m=v*A,a.push(_*u+3*d*A*r+3*f*v*n+m*s,_*l+3*d*A*t+3*f*v*i+m*o)},e}(),QuadraticUtils=function(){function e(){}return e.curveLength=function(r,t,n,i,s,o){var a=r-2*n+s,u=t-2*i+o,l=2*n-2*r,h=2*i-2*t,f=4*(a*a+u*u),d=4*(a*l+u*h),_=l*l+h*h,v=2*Math.sqrt(f+d+_),m=Math.sqrt(f),E=2*f*m,A=2*Math.sqrt(_),T=d/m;return(E*v+m*d*(v-A)+(4*_*f-d*d)*Math.log((2*m+T+v)/(T+A)))/(4*E)},e.curveTo=function(r,t,n,i,s){for(var o=s[s.length-2],a=s[s.length-1],u=GRAPHICS_CURVES._segmentsCount(e.curveLength(o,a,r,t,n,i)),l=0,h=0,f=1;f<=u;++f){var d=f/u;l=o+(r-o)*d,h=a+(t-a)*d,s.push(l+(r+(n-r)*d-l)*d,h+(t+(i-t)*d-h)*d)}},e}(),BatchPart=function(){function e(){this.reset()}return e.prototype.begin=function(r,t,n){this.reset(),this.style=r,this.start=t,this.attribStart=n},e.prototype.end=function(r,t){this.attribSize=t-this.attribStart,this.size=r-this.start},e.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},e}(),_a,FILL_COMMANDS=(_a={},_a[SHAPES.POLY]=buildPoly,_a[SHAPES.CIRC]=buildCircle,_a[SHAPES.ELIP]=buildCircle,_a[SHAPES.RECT]=buildRectangle,_a[SHAPES.RREC]=buildRoundedRectangle,_a),BATCH_POOL=[],DRAW_CALL_POOL=[],GraphicsData=function(){function e(r,t,n,i){t===void 0&&(t=null),n===void 0&&(n=null),i===void 0&&(i=null),this.points=[],this.holes=[],this.shape=r,this.lineStyle=n,this.fillStyle=t,this.matrix=i,this.type=r.type}return e.prototype.clone=function(){return new e(this.shape,this.fillStyle,this.lineStyle,this.matrix)},e.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},e}(),tmpPoint=new Point,GraphicsGeometry=function(e){__extends$e(r,e);function r(){var t=e.call(this)||this;return t.closePointEps=1e-4,t.boundsPadding=0,t.uvsFloat32=null,t.indicesUint16=null,t.batchable=!1,t.points=[],t.colors=[],t.uvs=[],t.indices=[],t.textureIds=[],t.graphicsData=[],t.drawCalls=[],t.batchDirty=-1,t.batches=[],t.dirty=0,t.cacheDirty=-1,t.clearDirty=0,t.shapeIndex=0,t._bounds=new Bounds,t.boundsDirty=-1,t}return Object.defineProperty(r.prototype,"bounds",{get:function(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),r.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),DRAW_CALL_POOL.push(this.drawCalls[t]);this.drawCalls.length=0;for(var t=0;t<this.batches.length;t++){var n=this.batches[t];n.reset(),BATCH_POOL.push(n)}this.batches.length=0},r.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},r.prototype.drawShape=function(t,n,i,s){n===void 0&&(n=null),i===void 0&&(i=null),s===void 0&&(s=null);var o=new GraphicsData(t,n,i,s);return this.graphicsData.push(o),this.dirty++,this},r.prototype.drawHole=function(t,n){if(n===void 0&&(n=null),!this.graphicsData.length)return null;var i=new GraphicsData(t,null,null,n),s=this.graphicsData[this.graphicsData.length-1];return i.lineStyle=s.lineStyle,s.holes.push(i),this.dirty++,this},r.prototype.destroy=function(){e.prototype.destroy.call(this);for(var t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},r.prototype.containsPoint=function(t){for(var n=this.graphicsData,i=0;i<n.length;++i){var s=n[i];if(!!s.fillStyle.visible&&s.shape&&(s.matrix?s.matrix.applyInverse(t,tmpPoint):tmpPoint.copyFrom(t),s.shape.contains(tmpPoint.x,tmpPoint.y))){var o=!1;if(s.holes)for(var a=0;a<s.holes.length;a++){var u=s.holes[a];if(u.shape.contains(tmpPoint.x,tmpPoint.y)){o=!0;break}}if(!o)return!0}}return!1},r.prototype.updateBatches=function(){if(!this.graphicsData.length){this.batchable=!0;return}if(!!this.validateBatching()){this.cacheDirty=this.dirty;var t=this.uvs,n=this.graphicsData,i=null,s=null;this.batches.length>0&&(i=this.batches[this.batches.length-1],s=i.style);for(var o=this.shapeIndex;o<n.length;o++){this.shapeIndex++;var a=n[o],u=a.fillStyle,l=a.lineStyle,h=FILL_COMMANDS[a.type];h.build(a),a.matrix&&this.transformPoints(a.points,a.matrix),(u.visible||l.visible)&&this.processHoles(a.holes);for(var f=0;f<2;f++){var d=f===0?u:l;if(!!d.visible){var _=d.texture.baseTexture,v=this.indices.length,m=this.points.length/2;_.wrapMode=WRAP_MODES$5.REPEAT,f===0?this.processFill(a):this.processLine(a);var E=this.points.length/2-m;E!==0&&(i&&!this._compareStyles(s,d)&&(i.end(v,m),i=null),i||(i=BATCH_POOL.pop()||new BatchPart,i.begin(d,v,m),this.batches.push(i),s=d),this.addUvs(this.points,t,d.texture,m,E,d.matrix))}}}var A=this.indices.length,T=this.points.length/2;if(i&&i.end(A,T),this.batches.length===0){this.batchable=!0;return}var C=T>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&C===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=C?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}},r.prototype._compareStyles=function(t,n){return!(!t||!n||t.texture.baseTexture!==n.texture.baseTexture||t.color+t.alpha!==n.color+n.alpha||!!t.native!=!!n.native)},r.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var t=0,n=this.graphicsData.length;t<n;t++){var i=this.graphicsData[t],s=i.fillStyle,o=i.lineStyle;if(s&&!s.texture.baseTexture.valid||o&&!o.texture.baseTexture.valid)return!1}return!0},r.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var t=this.batches,n=0,i=t.length;n<i;n++)for(var s=t[n],o=0;o<s.size;o++){var a=s.start+o;this.indicesUint16[a]=this.indicesUint16[a]-s.attribStart}},r.prototype.isBatchable=function(){if(this.points.length>65535*2)return!1;for(var t=this.batches,n=0;n<t.length;n++)if(t[n].style.native)return!1;return this.points.length<r.BATCHABLE_SIZE*2},r.prototype.buildDrawCalls=function(){for(var t=++BaseTexture._globalBatch,n=0;n<this.drawCalls.length;n++)this.drawCalls[n].texArray.clear(),DRAW_CALL_POOL.push(this.drawCalls[n]);this.drawCalls.length=0;var i=this.colors,s=this.textureIds,o=DRAW_CALL_POOL.pop();o||(o=new BatchDrawCall,o.texArray=new BatchTextureArray),o.texArray.count=0,o.start=0,o.size=0,o.type=DRAW_MODES$5.TRIANGLES;var a=0,u=null,l=0,h=!1,f=DRAW_MODES$5.TRIANGLES,d=0;this.drawCalls.push(o);for(var n=0;n<this.batches.length;n++){var _=this.batches[n],v=8,m=_.style,E=m.texture.baseTexture;h!==!!m.native&&(h=!!m.native,f=h?DRAW_MODES$5.LINES:DRAW_MODES$5.TRIANGLES,u=null,a=v,t++),u!==E&&(u=E,E._batchEnabled!==t&&(a===v&&(t++,a=0,o.size>0&&(o=DRAW_CALL_POOL.pop(),o||(o=new BatchDrawCall,o.texArray=new BatchTextureArray),this.drawCalls.push(o)),o.start=d,o.size=0,o.texArray.count=0,o.type=f),E.touched=1,E._batchEnabled=t,E._batchLocation=a,E.wrapMode=WRAP_MODES$5.REPEAT,o.texArray.elements[o.texArray.count++]=E,a++)),o.size+=_.size,d+=_.size,l=E._batchLocation,this.addColors(i,m.color,m.alpha,_.attribSize,_.attribStart),this.addTextureIds(s,l,_.attribSize,_.attribStart)}BaseTexture._globalBatch=t,this.packAttributes()},r.prototype.packAttributes=function(){for(var t=this.points,n=this.uvs,i=this.colors,s=this.textureIds,o=new ArrayBuffer(t.length*3*4),a=new Float32Array(o),u=new Uint32Array(o),l=0,h=0;h<t.length/2;h++)a[l++]=t[h*2],a[l++]=t[h*2+1],a[l++]=n[h*2],a[l++]=n[h*2+1],u[l++]=i[h],a[l++]=s[h];this._buffer.update(o),this._indexBuffer.update(this.indicesUint16)},r.prototype.processFill=function(t){if(t.holes.length)buildPoly.triangulate(t,this);else{var n=FILL_COMMANDS[t.type];n.triangulate(t,this)}},r.prototype.processLine=function(t){buildLine(t,this);for(var n=0;n<t.holes.length;n++)buildLine(t.holes[n],this)},r.prototype.processHoles=function(t){for(var n=0;n<t.length;n++){var i=t[n],s=FILL_COMMANDS[i.type];s.build(i),i.matrix&&this.transformPoints(i.points,i.matrix)}},r.prototype.calculateBounds=function(){var t=this._bounds;t.clear(),t.addVertexData(this.points,0,this.points.length),t.pad(this.boundsPadding,this.boundsPadding)},r.prototype.transformPoints=function(t,n){for(var i=0;i<t.length/2;i++){var s=t[i*2],o=t[i*2+1];t[i*2]=n.a*s+n.c*o+n.tx,t[i*2+1]=n.b*s+n.d*o+n.ty}},r.prototype.addColors=function(t,n,i,s,o){o===void 0&&(o=0);var a=(n>>16)+(n&65280)+((n&255)<<16),u=premultiplyTint(a,i);t.length=Math.max(t.length,o+s);for(var l=0;l<s;l++)t[o+l]=u},r.prototype.addTextureIds=function(t,n,i,s){s===void 0&&(s=0),t.length=Math.max(t.length,s+i);for(var o=0;o<i;o++)t[s+o]=n},r.prototype.addUvs=function(t,n,i,s,o,a){a===void 0&&(a=null);for(var u=0,l=n.length,h=i.frame;u<o;){var f=t[(s+u)*2],d=t[(s+u)*2+1];if(a){var _=a.a*f+a.c*d+a.tx;d=a.b*f+a.d*d+a.ty,f=_}u++,n.push(f/h.width,d/h.height)}var v=i.baseTexture;(h.width<v.width||h.height<v.height)&&this.adjustUvs(n,i,l,o)},r.prototype.adjustUvs=function(t,n,i,s){for(var o=n.baseTexture,a=1e-6,u=i+s*2,l=n.frame,h=l.width/o.width,f=l.height/o.height,d=l.x/l.width,_=l.y/l.height,v=Math.floor(t[i]+a),m=Math.floor(t[i+1]+a),E=i+2;E<u;E+=2)v=Math.min(v,Math.floor(t[E]+a)),m=Math.min(m,Math.floor(t[E+1]+a));d-=v,_-=m;for(var E=i;E<u;E+=2)t[E]=(t[E]+d)*h,t[E+1]=(t[E+1]+_)*f},r.BATCHABLE_SIZE=100,r}(BatchGeometry),LineStyle=function(e){__extends$e(r,e);function r(){var t=e!==null&&e.apply(this,arguments)||this;return t.width=0,t.alignment=.5,t.native=!1,t.cap=LINE_CAP.BUTT,t.join=LINE_JOIN.MITER,t.miterLimit=10,t}return r.prototype.clone=function(){var t=new r;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t},r.prototype.reset=function(){e.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},r}(FillStyle),temp=new Float32Array(3),DEFAULT_SHADERS={},Graphics=function(e){__extends$e(r,e);function r(t){t===void 0&&(t=null);var n=e.call(this)||this;return n.shader=null,n.pluginName="batch",n.currentPath=null,n.batches=[],n.batchTint=-1,n.batchDirty=-1,n.vertexData=null,n._fillStyle=new FillStyle,n._lineStyle=new LineStyle,n._matrix=null,n._holeMode=!1,n.state=State.for2d(),n._geometry=t||new GraphicsGeometry,n._geometry.refCount++,n._transformID=-1,n.tint=16777215,n.blendMode=BLEND_MODES$5.NORMAL,n}return Object.defineProperty(r.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),r.prototype.clone=function(){return this.finishPoly(),new r(this._geometry)},Object.defineProperty(r.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),r.prototype.lineStyle=function(t,n,i,s,o){return t===void 0&&(t=null),n===void 0&&(n=0),i===void 0&&(i=1),s===void 0&&(s=.5),o===void 0&&(o=!1),typeof t=="number"&&(t={width:t,color:n,alpha:i,alignment:s,native:o}),this.lineTextureStyle(t)},r.prototype.lineTextureStyle=function(t){t=Object.assign({width:0,texture:Texture.WHITE,color:t&&t.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:LINE_CAP.BUTT,join:LINE_JOIN.MITER,miterLimit:10},t),this.currentPath&&this.startPoly();var n=t.width>0&&t.alpha>0;return n?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:n},t)):this._lineStyle.reset(),this},r.prototype.startPoly=function(){if(this.currentPath){var t=this.currentPath.points,n=this.currentPath.points.length;n>2&&(this.drawShape(this.currentPath),this.currentPath=new Polygon,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[n-2],t[n-1]))}else this.currentPath=new Polygon,this.currentPath.closeStroke=!1},r.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},r.prototype.moveTo=function(t,n){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=n,this},r.prototype.lineTo=function(t,n){this.currentPath||this.moveTo(0,0);var i=this.currentPath.points,s=i[i.length-2],o=i[i.length-1];return(s!==t||o!==n)&&i.push(t,n),this},r.prototype._initCurve=function(t,n){t===void 0&&(t=0),n===void 0&&(n=0),this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[t,n]):this.moveTo(t,n)},r.prototype.quadraticCurveTo=function(t,n,i,s){this._initCurve();var o=this.currentPath.points;return o.length===0&&this.moveTo(0,0),QuadraticUtils.curveTo(t,n,i,s,o),this},r.prototype.bezierCurveTo=function(t,n,i,s,o,a){return this._initCurve(),BezierUtils.curveTo(t,n,i,s,o,a,this.currentPath.points),this},r.prototype.arcTo=function(t,n,i,s,o){this._initCurve(t,n);var a=this.currentPath.points,u=ArcUtils.curveTo(t,n,i,s,o,a);if(u){var l=u.cx,h=u.cy,f=u.radius,d=u.startAngle,_=u.endAngle,v=u.anticlockwise;this.arc(l,h,f,d,_,v)}return this},r.prototype.arc=function(t,n,i,s,o,a){if(a===void 0&&(a=!1),s===o)return this;!a&&o<=s?o+=PI_2:a&&s<=o&&(s+=PI_2);var u=o-s;if(u===0)return this;var l=t+Math.cos(s)*i,h=n+Math.sin(s)*i,f=this._geometry.closePointEps,d=this.currentPath?this.currentPath.points:null;if(d){var _=Math.abs(d[d.length-2]-l),v=Math.abs(d[d.length-1]-h);_<f&&v<f||d.push(l,h)}else this.moveTo(l,h),d=this.currentPath.points;return ArcUtils.arc(l,h,t,n,i,s,o,a,d),this},r.prototype.beginFill=function(t,n){return t===void 0&&(t=0),n===void 0&&(n=1),this.beginTextureFill({texture:Texture.WHITE,color:t,alpha:n})},r.prototype.beginTextureFill=function(t){t=Object.assign({texture:Texture.WHITE,color:16777215,alpha:1,matrix:null},t),this.currentPath&&this.startPoly();var n=t.alpha>0;return n?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:n},t)):this._fillStyle.reset(),this},r.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},r.prototype.drawRect=function(t,n,i,s){return this.drawShape(new Rectangle(t,n,i,s))},r.prototype.drawRoundedRect=function(t,n,i,s,o){return this.drawShape(new RoundedRectangle(t,n,i,s,o))},r.prototype.drawCircle=function(t,n,i){return this.drawShape(new Circle(t,n,i))},r.prototype.drawEllipse=function(t,n,i,s){return this.drawShape(new Ellipse(t,n,i,s))},r.prototype.drawPolygon=function(){for(var t=arguments,n=[],i=0;i<arguments.length;i++)n[i]=t[i];var s,o=!0,a=n[0];a.points?(o=a.closeStroke,s=a.points):Array.isArray(n[0])?s=n[0]:s=n;var u=new Polygon(s);return u.closeStroke=o,this.drawShape(u),this},r.prototype.drawShape=function(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},r.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},r.prototype.isFastRect=function(){var t=this._geometry.graphicsData;return t.length===1&&t[0].shape.type===SHAPES.RECT&&!t[0].matrix&&!t[0].holes.length&&!(t[0].lineStyle.visible&&t[0].lineStyle.width)},r.prototype._render=function(t){this.finishPoly();var n=this._geometry;n.updateBatches(),n.batchable?(this.batchDirty!==n.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))},r.prototype._populateBatches=function(){var t=this._geometry,n=this.blendMode,i=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=i,this.vertexData=new Float32Array(t.points);for(var s=0;s<i;s++){var o=t.batches[s],a=o.style.color,u=new Float32Array(this.vertexData.buffer,o.attribStart*4*2,o.attribSize*2),l=new Float32Array(t.uvsFloat32.buffer,o.attribStart*4*2,o.attribSize*2),h=new Uint16Array(t.indicesUint16.buffer,o.start*2,o.size),f={vertexData:u,blendMode:n,indices:h,uvs:l,_batchRGB:hex2rgb(a),_tintRGB:a,_texture:o.style.texture,alpha:o.style.alpha,worldAlpha:1};this.batches[s]=f}},r.prototype._renderBatched=function(t){if(!!this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var n=0,i=this.batches.length;n<i;n++){var s=this.batches[n];s.worldAlpha=this.worldAlpha*s.alpha,t.plugins[this.pluginName].render(s)}}},r.prototype._renderDirect=function(t){var n=this._resolveDirectShader(t),i=this._geometry,s=this.tint,o=this.worldAlpha,a=n.uniforms,u=i.drawCalls;a.translationMatrix=this.transform.worldTransform,a.tint[0]=(s>>16&255)/255*o,a.tint[1]=(s>>8&255)/255*o,a.tint[2]=(s&255)/255*o,a.tint[3]=o,t.shader.bind(n),t.geometry.bind(i,n),t.state.set(this.state);for(var l=0,h=u.length;l<h;l++)this._renderDrawCallDirect(t,i.drawCalls[l])},r.prototype._renderDrawCallDirect=function(t,n){for(var i=n.texArray,s=n.type,o=n.size,a=n.start,u=i.count,l=0;l<u;l++)t.texture.bind(i.elements[l],l);t.geometry.draw(s,o,a)},r.prototype._resolveDirectShader=function(t){var n=this.shader,i=this.pluginName;if(!n){if(!DEFAULT_SHADERS[i]){for(var s=t.plugins[i].MAX_TEXTURES,o=new Int32Array(s),a=0;a<s;a++)o[a]=a;var u={tint:new Float32Array([1,1,1,1]),translationMatrix:new Matrix,default:UniformGroup.from({uSamplers:o},!0)},l=t.plugins[i]._shader.program;DEFAULT_SHADERS[i]=new Shader(l,u)}n=DEFAULT_SHADERS[i]}return n},r.prototype._calculateBounds=function(){this.finishPoly();var t=this._geometry;if(!!t.graphicsData.length){var n=t.bounds,i=n.minX,s=n.minY,o=n.maxX,a=n.maxY;this._bounds.addFrame(this.transform,i,s,o,a)}},r.prototype.containsPoint=function(t){return this.worldTransform.applyInverse(t,r._TEMP_POINT),this._geometry.containsPoint(r._TEMP_POINT)},r.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var t=hex2rgb(this.tint,temp),n=0;n<this.batches.length;n++){var i=this.batches[n],s=i._batchRGB,o=t[0]*s[0]*255,a=t[1]*s[1]*255,u=t[2]*s[2]*255,l=(o<<16)+(a<<8)+(u|0);i._tintRGB=(l>>16)+(l&65280)+((l&255)<<16)}}},r.prototype.calculateVertices=function(){var t=this.transform._worldID;if(this._transformID!==t){this._transformID=t;for(var n=this.transform.worldTransform,i=n.a,s=n.b,o=n.c,a=n.d,u=n.tx,l=n.ty,h=this._geometry.points,f=this.vertexData,d=0,_=0;_<h.length;_+=2){var v=h[_],m=h[_+1];f[d++]=i*v+o*m+u,f[d++]=a*m+s*v+l}}},r.prototype.closePath=function(){var t=this.currentPath;return t&&(t.closeStroke=!0,this.finishPoly()),this},r.prototype.setMatrix=function(t){return this._matrix=t,this},r.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},r.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},r.prototype.destroy=function(t){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,e.prototype.destroy.call(this,t)},r.nextRoundedRectBehavior=!1,r._TEMP_POINT=new Point,r}(Container);/*!
 * @pixi/sprite - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/sprite is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$d=function(e,r){return extendStatics$d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},extendStatics$d(e,r)};function __extends$d(e,r){extendStatics$d(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var tempPoint$2=new Point,indices=new Uint16Array([0,1,2,0,2,3]),Sprite=function(e){__extends$d(r,e);function r(t){var n=e.call(this)||this;return n._anchor=new ObservablePoint(n._onAnchorUpdate,n,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),n._texture=null,n._width=0,n._height=0,n._tint=null,n._tintRGB=null,n.tint=16777215,n.blendMode=BLEND_MODES$5.NORMAL,n._cachedTint=16777215,n.uvs=null,n.texture=t||Texture.EMPTY,n.vertexData=new Float32Array(8),n.vertexTrimmedData=null,n._transformID=-1,n._textureID=-1,n._transformTrimmedID=-1,n._textureTrimmedID=-1,n.indices=indices,n.pluginName="batch",n.isSprite=!0,n._roundPixels=settings$1.ROUND_PIXELS,n}return r.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=sign(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=sign(this.scale.y)*this._height/this._texture.orig.height)},r.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},r.prototype.calculateVertices=function(){var t=this._texture;if(!(this._transformID===this.transform._worldID&&this._textureID===t._updateID)){this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;var n=this.transform.worldTransform,i=n.a,s=n.b,o=n.c,a=n.d,u=n.tx,l=n.ty,h=this.vertexData,f=t.trim,d=t.orig,_=this._anchor,v=0,m=0,E=0,A=0;if(f?(m=f.x-_._x*d.width,v=m+f.width,A=f.y-_._y*d.height,E=A+f.height):(m=-_._x*d.width,v=m+d.width,A=-_._y*d.height,E=A+d.height),h[0]=i*m+o*A+u,h[1]=a*A+s*m+l,h[2]=i*v+o*A+u,h[3]=a*A+s*v+l,h[4]=i*v+o*E+u,h[5]=a*E+s*v+l,h[6]=i*m+o*E+u,h[7]=a*E+s*m+l,this._roundPixels)for(var T=settings$1.RESOLUTION,C=0;C<h.length;++C)h[C]=Math.round((h[C]*T|0)/T)}},r.prototype.calculateTrimmedVertices=function(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,n=this.vertexTrimmedData,i=t.orig,s=this._anchor,o=this.transform.worldTransform,a=o.a,u=o.b,l=o.c,h=o.d,f=o.tx,d=o.ty,_=-s._x*i.width,v=_+i.width,m=-s._y*i.height,E=m+i.height;n[0]=a*_+l*m+f,n[1]=h*m+u*_+d,n[2]=a*v+l*m+f,n[3]=h*m+u*v+d,n[4]=a*v+l*E+f,n[5]=h*E+u*v+d,n[6]=a*_+l*E+f,n[7]=h*E+u*_+d},r.prototype._render=function(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},r.prototype._calculateBounds=function(){var t=this._texture.trim,n=this._texture.orig;!t||t.width===n.width&&t.height===n.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},r.prototype.getLocalBounds=function(t){return this.children.length===0?(this._localBounds||(this._localBounds=new Bounds),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new Rectangle),t=this._localBoundsRect),this._localBounds.getRectangle(t)):e.prototype.getLocalBounds.call(this,t)},r.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,tempPoint$2);var n=this._texture.orig.width,i=this._texture.orig.height,s=-n*this.anchor.x,o=0;return tempPoint$2.x>=s&&tempPoint$2.x<s+n&&(o=-i*this.anchor.y,tempPoint$2.y>=o&&tempPoint$2.y<o+i)},r.prototype.destroy=function(t){e.prototype.destroy.call(this,t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null;var n=typeof t=="boolean"?t:t&&t.texture;if(n){var i=typeof t=="boolean"?t:t&&t.baseTexture;this._texture.destroy(!!i)}this._texture=null},r.from=function(t,n){var i=t instanceof Texture?t:Texture.from(t,n);return new r(i)},Object.defineProperty(r.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var n=sign(this.scale.x)||1;this.scale.x=n*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var n=sign(this.scale.y)||1;this.scale.y=n*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"anchor",{get:function(){return this._anchor},set:function(t){this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(t&65280)+((t&255)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||Texture.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),r}(Container);/*!
 * @pixi/text - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/text is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$c=function(e,r){return extendStatics$c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},extendStatics$c(e,r)};function __extends$c(e,r){extendStatics$c(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var TEXT_GRADIENT;(function(e){e[e.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",e[e.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"})(TEXT_GRADIENT||(TEXT_GRADIENT={}));var defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},genericFontFamilies=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],TextStyle=function(){function e(r){this.styleID=0,this.reset(),deepCopyProperties(this,r,r)}return e.prototype.clone=function(){var r={};return deepCopyProperties(r,this,defaultStyle),new e(r)},e.prototype.reset=function(){deepCopyProperties(this,defaultStyle,defaultStyle)},Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(r){this._align!==r&&(this._align=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"breakWords",{get:function(){return this._breakWords},set:function(r){this._breakWords!==r&&(this._breakWords=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(r){this._dropShadow!==r&&(this._dropShadow=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(r){this._dropShadowAlpha!==r&&(this._dropShadowAlpha=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(r){this._dropShadowAngle!==r&&(this._dropShadowAngle=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(r){this._dropShadowBlur!==r&&(this._dropShadowBlur=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(r){var t=getColor(r);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(r){this._dropShadowDistance!==r&&(this._dropShadowDistance=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fill},set:function(r){var t=getColor(r);this._fill!==t&&(this._fill=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(r){this._fillGradientType!==r&&(this._fillGradientType=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(r){areArraysEqual(this._fillGradientStops,r)||(this._fillGradientStops=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(r){this.fontFamily!==r&&(this._fontFamily=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this._fontSize},set:function(r){this._fontSize!==r&&(this._fontSize=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(r){this._fontStyle!==r&&(this._fontStyle=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(r){this._fontVariant!==r&&(this._fontVariant=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(r){this._fontWeight!==r&&(this._fontWeight=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(r){this._letterSpacing!==r&&(this._letterSpacing=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(r){this._lineHeight!==r&&(this._lineHeight=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leading",{get:function(){return this._leading},set:function(r){this._leading!==r&&(this._leading=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(r){this._lineJoin!==r&&(this._lineJoin=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(r){this._miterLimit!==r&&(this._miterLimit=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"padding",{get:function(){return this._padding},set:function(r){this._padding!==r&&(this._padding=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stroke",{get:function(){return this._stroke},set:function(r){var t=getColor(r);this._stroke!==t&&(this._stroke=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(r){this._strokeThickness!==r&&(this._strokeThickness=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(r){this._textBaseline!==r&&(this._textBaseline=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trim",{get:function(){return this._trim},set:function(r){this._trim!==r&&(this._trim=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(r){this._whiteSpace!==r&&(this._whiteSpace=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(r){this._wordWrap!==r&&(this._wordWrap=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(r){this._wordWrapWidth!==r&&(this._wordWrapWidth=r,this.styleID++)},enumerable:!1,configurable:!0}),e.prototype.toFontString=function(){var r=typeof this.fontSize=="number"?this.fontSize+"px":this.fontSize,t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(var n=t.length-1;n>=0;n--){var i=t[n].trim();!/([\"\'])[^\'\"]+\1/.test(i)&&genericFontFamilies.indexOf(i)<0&&(i='"'+i+'"'),t[n]=i}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+r+" "+t.join(",")},e}();function getSingleColor(e){return typeof e=="number"?hex2string(e):(typeof e=="string"&&e.indexOf("0x")===0&&(e=e.replace("0x","#")),e)}function getColor(e){if(Array.isArray(e)){for(var r=0;r<e.length;++r)e[r]=getSingleColor(e[r]);return e}else return getSingleColor(e)}function areArraysEqual(e,r){if(!Array.isArray(e)||!Array.isArray(r)||e.length!==r.length)return!1;for(var t=0;t<e.length;++t)if(e[t]!==r[t])return!1;return!0}function deepCopyProperties(e,r,t){for(var n in t)Array.isArray(r[n])?e[n]=r[n].slice():e[n]=r[n]}var TextMetrics=function(){function e(r,t,n,i,s,o,a,u,l){this.text=r,this.style=t,this.width=n,this.height=i,this.lines=s,this.lineWidths=o,this.lineHeight=a,this.maxLineWidth=u,this.fontProperties=l}return e.measureText=function(r,t,n,i){i===void 0&&(i=e._canvas),n=n==null?t.wordWrap:n;var s=t.toFontString(),o=e.measureFont(s);o.fontSize===0&&(o.fontSize=t.fontSize,o.ascent=t.fontSize);var a=i.getContext("2d");a.font=s;for(var u=n?e.wordWrap(r,t,i):r,l=u.split(/(?:\r\n|\r|\n)/),h=new Array(l.length),f=0,d=0;d<l.length;d++){var _=a.measureText(l[d]).width+(l[d].length-1)*t.letterSpacing;h[d]=_,f=Math.max(f,_)}var v=f+t.strokeThickness;t.dropShadow&&(v+=t.dropShadowDistance);var m=t.lineHeight||o.fontSize+t.strokeThickness,E=Math.max(m,o.fontSize+t.strokeThickness)+(l.length-1)*(m+t.leading);return t.dropShadow&&(E+=t.dropShadowDistance),new e(r,t,v,E,l,h,m+t.leading,f,o)},e.wordWrap=function(r,t,n){n===void 0&&(n=e._canvas);for(var i=n.getContext("2d"),s=0,o="",a="",u=Object.create(null),l=t.letterSpacing,h=t.whiteSpace,f=e.collapseSpaces(h),d=e.collapseNewlines(h),_=!f,v=t.wordWrapWidth+l,m=e.tokenize(r),E=0;E<m.length;E++){var A=m[E];if(e.isNewline(A)){if(!d){a+=e.addLine(o),_=!f,o="",s=0;continue}A=" "}if(f){var T=e.isBreakingSpace(A),C=e.isBreakingSpace(o[o.length-1]);if(T&&C)continue}var R=e.getFromCache(A,l,u,i);if(R>v)if(o!==""&&(a+=e.addLine(o),o="",s=0),e.canBreakWords(A,t.breakWords))for(var b=e.wordWrapSplit(A),S=0;S<b.length;S++){for(var B=b[S],M=1;b[S+M];){var D=b[S+M],G=B[B.length-1];if(!e.canBreakChars(G,D,A,S,t.breakWords))B+=D;else break;M++}S+=B.length-1;var J=e.getFromCache(B,l,u,i);J+s>v&&(a+=e.addLine(o),_=!1,o="",s=0),o+=B,s+=J}else{o.length>0&&(a+=e.addLine(o),o="",s=0);var re=E===m.length-1;a+=e.addLine(A,!re),_=!1,o="",s=0}else R+s>v&&(_=!1,a+=e.addLine(o),o="",s=0),(o.length>0||!e.isBreakingSpace(A)||_)&&(o+=A,s+=R)}return a+=e.addLine(o,!1),a},e.addLine=function(r,t){return t===void 0&&(t=!0),r=e.trimRight(r),r=t?r+`
`:r,r},e.getFromCache=function(r,t,n,i){var s=n[r];if(typeof s!="number"){var o=r.length*t;s=i.measureText(r).width+o,n[r]=s}return s},e.collapseSpaces=function(r){return r==="normal"||r==="pre-line"},e.collapseNewlines=function(r){return r==="normal"},e.trimRight=function(r){if(typeof r!="string")return"";for(var t=r.length-1;t>=0;t--){var n=r[t];if(!e.isBreakingSpace(n))break;r=r.slice(0,-1)}return r},e.isNewline=function(r){return typeof r!="string"?!1:e._newlines.indexOf(r.charCodeAt(0))>=0},e.isBreakingSpace=function(r,t){return typeof r!="string"?!1:e._breakingSpaces.indexOf(r.charCodeAt(0))>=0},e.tokenize=function(r){var t=[],n="";if(typeof r!="string")return t;for(var i=0;i<r.length;i++){var s=r[i],o=r[i+1];if(e.isBreakingSpace(s,o)||e.isNewline(s)){n!==""&&(t.push(n),n=""),t.push(s);continue}n+=s}return n!==""&&t.push(n),t},e.canBreakWords=function(r,t){return t},e.canBreakChars=function(r,t,n,i,s){return!0},e.wordWrapSplit=function(r){return r.split("")},e.measureFont=function(r){if(e._fonts[r])return e._fonts[r];var t={ascent:0,descent:0,fontSize:0},n=e._canvas,i=e._context;i.font=r;var s=e.METRICS_STRING+e.BASELINE_SYMBOL,o=Math.ceil(i.measureText(s).width),a=Math.ceil(i.measureText(e.BASELINE_SYMBOL).width),u=Math.ceil(e.HEIGHT_MULTIPLIER*a);a=a*e.BASELINE_MULTIPLIER|0,n.width=o,n.height=u,i.fillStyle="#f00",i.fillRect(0,0,o,u),i.font=r,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(s,0,a);var l=i.getImageData(0,0,o,u).data,h=l.length,f=o*4,d=0,_=0,v=!1;for(d=0;d<a;++d){for(var m=0;m<f;m+=4)if(l[_+m]!==255){v=!0;break}if(!v)_+=f;else break}for(t.ascent=a-d,_=h-f,v=!1,d=u;d>a;--d){for(var m=0;m<f;m+=4)if(l[_+m]!==255){v=!0;break}if(!v)_-=f;else break}return t.descent=d-a,t.fontSize=t.ascent+t.descent,e._fonts[r]=t,t},e.clearMetrics=function(r){r===void 0&&(r=""),r?delete e._fonts[r]:e._fonts={}},Object.defineProperty(e,"_canvas",{get:function(){if(!e.__canvas){var r=void 0;try{var t=new OffscreenCanvas(0,0),n=t.getContext("2d");if(n&&n.measureText)return e.__canvas=t,t;r=settings$1.ADAPTER.createCanvas()}catch{r=settings$1.ADAPTER.createCanvas()}r.width=r.height=10,e.__canvas=r}return e.__canvas},enumerable:!1,configurable:!0}),Object.defineProperty(e,"_context",{get:function(){return e.__context||(e.__context=e._canvas.getContext("2d")),e.__context},enumerable:!1,configurable:!0}),e}();TextMetrics._fonts={};TextMetrics.METRICS_STRING="|\xC9q\xC5";TextMetrics.BASELINE_SYMBOL="M";TextMetrics.BASELINE_MULTIPLIER=1.4;TextMetrics.HEIGHT_MULTIPLIER=2;TextMetrics._newlines=[10,13];TextMetrics._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},Text=function(e){__extends$c(r,e);function r(t,n,i){var s=this,o=!1;i||(i=settings$1.ADAPTER.createCanvas(),o=!0),i.width=3,i.height=3;var a=Texture.from(i);return a.orig=new Rectangle,a.trim=new Rectangle,s=e.call(this,a)||this,s._ownCanvas=o,s.canvas=i,s.context=i.getContext("2d"),s._resolution=settings$1.RESOLUTION,s._autoResolution=!0,s._text=null,s._style=null,s._styleListener=null,s._font="",s.text=t,s.style=n,s.localStyleID=-1,s}return r.prototype.updateText=function(t){var n=this._style;if(this.localStyleID!==n.styleID&&(this.dirty=!0,this.localStyleID=n.styleID),!(!this.dirty&&t)){this._font=this._style.toFontString();var i=this.context,s=TextMetrics.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),o=s.width,a=s.height,u=s.lines,l=s.lineHeight,h=s.lineWidths,f=s.maxLineWidth,d=s.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,o)+n.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,a)+n.padding*2)*this._resolution),i.scale(this._resolution,this._resolution),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.font=this._font,i.lineWidth=n.strokeThickness,i.textBaseline=n.textBaseline,i.lineJoin=n.lineJoin,i.miterLimit=n.miterLimit;for(var _,v,m=n.dropShadow?2:1,E=0;E<m;++E){var A=n.dropShadow&&E===0,T=A?Math.ceil(Math.max(1,a)+n.padding*2):0,C=T*this._resolution;if(A){i.fillStyle="black",i.strokeStyle="black";var R=n.dropShadowColor,b=hex2rgb(typeof R=="number"?R:string2hex(R)),S=n.dropShadowBlur*this._resolution,B=n.dropShadowDistance*this._resolution;i.shadowColor="rgba("+b[0]*255+","+b[1]*255+","+b[2]*255+","+n.dropShadowAlpha+")",i.shadowBlur=S,i.shadowOffsetX=Math.cos(n.dropShadowAngle)*B,i.shadowOffsetY=Math.sin(n.dropShadowAngle)*B+C}else i.fillStyle=this._generateFillStyle(n,u,s),i.strokeStyle=n.stroke,i.shadowColor="black",i.shadowBlur=0,i.shadowOffsetX=0,i.shadowOffsetY=0;var M=(l-d.fontSize)/2;(!r.nextLineHeightBehavior||l-d.fontSize<0)&&(M=0);for(var D=0;D<u.length;D++)_=n.strokeThickness/2,v=n.strokeThickness/2+D*l+d.ascent+M,n.align==="right"?_+=f-h[D]:n.align==="center"&&(_+=(f-h[D])/2),n.stroke&&n.strokeThickness&&this.drawLetterSpacing(u[D],_+n.padding,v+n.padding-T,!0),n.fill&&this.drawLetterSpacing(u[D],_+n.padding,v+n.padding-T)}this.updateTexture()}},r.prototype.drawLetterSpacing=function(t,n,i,s){s===void 0&&(s=!1);var o=this._style,a=o.letterSpacing,u=r.experimentalLetterSpacing&&("letterSpacing"in CanvasRenderingContext2D.prototype||"textLetterSpacing"in CanvasRenderingContext2D.prototype);if(a===0||u){u&&(this.context.letterSpacing=a,this.context.textLetterSpacing=a),s?this.context.strokeText(t,n,i):this.context.fillText(t,n,i);return}for(var l=n,h=Array.from?Array.from(t):t.split(""),f=this.context.measureText(t).width,d=0,_=0;_<h.length;++_){var v=h[_];s?this.context.strokeText(v,l,i):this.context.fillText(v,l,i);for(var m="",E=_+1;E<h.length;++E)m+=h[E];d=this.context.measureText(m).width,l+=f-d+a,f=d}},r.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var n=trimCanvas(t);n.data&&(t.width=n.width,t.height=n.height,this.context.putImageData(n.data,0,0))}var i=this._texture,s=this._style,o=s.trim?0:s.padding,a=i.baseTexture;i.trim.width=i._frame.width=t.width/this._resolution,i.trim.height=i._frame.height=t.height/this._resolution,i.trim.x=-o,i.trim.y=-o,i.orig.width=i._frame.width-o*2,i.orig.height=i._frame.height-o*2,this._onTextureUpdate(),a.setRealSize(t.width,t.height,this._resolution),i.updateUvs(),this.dirty=!1},r.prototype._render=function(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),e.prototype._render.call(this,t)},r.prototype.updateTransform=function(){this.updateText(!0),e.prototype.updateTransform.call(this)},r.prototype.getBounds=function(t,n){return this.updateText(!0),this._textureID===-1&&(t=!1),e.prototype.getBounds.call(this,t,n)},r.prototype.getLocalBounds=function(t){return this.updateText(!0),e.prototype.getLocalBounds.call(this,t)},r.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)},r.prototype._generateFillStyle=function(t,n,i){var s=t.fill;if(Array.isArray(s)){if(s.length===1)return s[0]}else return s;var o,a=t.dropShadow?t.dropShadowDistance:0,u=t.padding||0,l=this.canvas.width/this._resolution-a-u*2,h=this.canvas.height/this._resolution-a-u*2,f=s.slice(),d=t.fillGradientStops.slice();if(!d.length)for(var _=f.length+1,v=1;v<_;++v)d.push(v/_);if(f.unshift(s[0]),d.unshift(0),f.push(s[s.length-1]),d.push(1),t.fillGradientType===TEXT_GRADIENT.LINEAR_VERTICAL){o=this.context.createLinearGradient(l/2,u,l/2,h+u);for(var m=i.fontProperties.fontSize+t.strokeThickness,v=0;v<n.length;v++){var E=i.lineHeight*(v-1)+m,A=i.lineHeight*v,T=A;v>0&&E>A&&(T=(A+E)/2);var C=A+m,R=i.lineHeight*(v+1),b=C;v+1<n.length&&R<C&&(b=(C+R)/2);for(var S=(b-T)/h,B=0;B<f.length;B++){var M=0;typeof d[B]=="number"?M=d[B]:M=B/f.length;var D=Math.min(1,Math.max(0,T/h+M*S));D=Number(D.toFixed(5)),o.addColorStop(D,f[B])}}}else{o=this.context.createLinearGradient(u,h/2,l+u,h/2);for(var G=f.length+1,J=1,v=0;v<f.length;v++){var re=void 0;typeof d[v]=="number"?re=d[v]:re=J/G,o.addColorStop(re,f[v]),J++}}return o},r.prototype.destroy=function(t){typeof t=="boolean"&&(t={children:t}),t=Object.assign({},defaultDestroyOptions,t),e.prototype.destroy.call(this,t),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(r.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var n=sign(this.scale.x)||1;this.scale.x=n*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var n=sign(this.scale.y)||1;this.scale.y=n*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"style",{get:function(){return this._style},set:function(t){t=t||{},t instanceof TextStyle?this._style=t:this._style=new TextStyle(t),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"text",{get:function(){return this._text},set:function(t){t=String(t==null?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},enumerable:!1,configurable:!0}),r.nextLineHeightBehavior=!1,r.experimentalLetterSpacing=!1,r}(Sprite);/*!
 * @pixi/prepare - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/prepare is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */settings$1.UPLOADS_PER_FRAME=4;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$b=function(e,r){return extendStatics$b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},extendStatics$b(e,r)};function __extends$b(e,r){extendStatics$b(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var CountLimiter=function(){function e(r){this.maxItemsPerFrame=r,this.itemsLeft=0}return e.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},e.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},e}();function findMultipleBaseTextures(e,r){var t=!1;if(e&&e._textures&&e._textures.length){for(var n=0;n<e._textures.length;n++)if(e._textures[n]instanceof Texture){var i=e._textures[n].baseTexture;r.indexOf(i)===-1&&(r.push(i),t=!0)}}return t}function findBaseTexture(e,r){if(e.baseTexture instanceof BaseTexture){var t=e.baseTexture;return r.indexOf(t)===-1&&r.push(t),!0}return!1}function findTexture(e,r){if(e._texture&&e._texture instanceof Texture){var t=e._texture.baseTexture;return r.indexOf(t)===-1&&r.push(t),!0}return!1}function drawText(e,r){return r instanceof Text?(r.updateText(!0),!0):!1}function calculateTextStyle(e,r){if(r instanceof TextStyle){var t=r.toFontString();return TextMetrics.measureFont(t),!0}return!1}function findText(e,r){if(e instanceof Text){r.indexOf(e.style)===-1&&r.push(e.style),r.indexOf(e)===-1&&r.push(e);var t=e._texture.baseTexture;return r.indexOf(t)===-1&&r.push(t),!0}return!1}function findTextStyle(e,r){return e instanceof TextStyle?(r.indexOf(e)===-1&&r.push(e),!0):!1}var BasePrepare=function(){function e(r){var t=this;this.limiter=new CountLimiter(settings$1.UPLOADS_PER_FRAME),this.renderer=r,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){!t.queue||t.prepareItems()},this.registerFindHook(findText),this.registerFindHook(findTextStyle),this.registerFindHook(findMultipleBaseTextures),this.registerFindHook(findBaseTexture),this.registerFindHook(findTexture),this.registerUploadHook(drawText),this.registerUploadHook(calculateTextStyle)}return e.prototype.upload=function(r,t){var n=this;return typeof r=="function"&&(t=r,r=null),t&&deprecation$1("6.5.0","BasePrepare.upload callback is deprecated, use the return Promise instead."),new Promise(function(i){r&&n.add(r);var s=function(){t==null||t(),i()};n.queue.length?(n.completes.push(s),n.ticking||(n.ticking=!0,Ticker.system.addOnce(n.tick,n,UPDATE_PRIORITY.UTILITY))):s()})},e.prototype.tick=function(){setTimeout(this.delayedTick,0)},e.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var r=this.queue[0],t=!1;if(r&&!r._destroyed){for(var n=0,i=this.uploadHooks.length;n<i;n++)if(this.uploadHooks[n](this.uploadHookHelper,r)){this.queue.shift(),t=!0;break}}t||this.queue.shift()}if(this.queue.length)Ticker.system.addOnce(this.tick,this,UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;var s=this.completes.slice(0);this.completes.length=0;for(var n=0,i=s.length;n<i;n++)s[n]()}},e.prototype.registerFindHook=function(r){return r&&this.addHooks.push(r),this},e.prototype.registerUploadHook=function(r){return r&&this.uploadHooks.push(r),this},e.prototype.add=function(r){for(var t=0,n=this.addHooks.length;t<n&&!this.addHooks[t](r,this.queue);t++);if(r instanceof Container)for(var t=r.children.length-1;t>=0;t--)this.add(r.children[t]);return this},e.prototype.destroy=function(){this.ticking&&Ticker.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},e}();function uploadBaseTextures(e,r){return r instanceof BaseTexture?(r._glTextures[e.CONTEXT_UID]||e.texture.bind(r),!0):!1}function uploadGraphics(e,r){if(!(r instanceof Graphics))return!1;var t=r.geometry;r.finishPoly(),t.updateBatches();for(var n=t.batches,i=0;i<n.length;i++){var s=n[i].style.texture;s&&uploadBaseTextures(e,s.baseTexture)}return t.batchable||e.geometry.bind(t,r._resolveDirectShader(e)),!0}function findGraphics(e,r){return e instanceof Graphics?(r.push(e),!0):!1}var Prepare=function(e){__extends$b(r,e);function r(t){var n=e.call(this,t)||this;return n.uploadHookHelper=n.renderer,n.registerFindHook(findGraphics),n.registerUploadHook(uploadBaseTextures),n.registerUploadHook(uploadGraphics),n}return r.extension={name:"prepare",type:ExtensionType.RendererPlugin},r}(BasePrepare);/*!
 * @pixi/spritesheet - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/spritesheet is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Spritesheet=function(){function e(r,t,n){n===void 0&&(n=null),this.linkedSheets=[],this._texture=r instanceof Texture?r:null,this.baseTexture=r instanceof BaseTexture?r:this._texture.baseTexture,this.textures={},this.animations={},this.data=t;var i=this.baseTexture.resource;this.resolution=this._updateResolution(n||(i?i.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return e.prototype._updateResolution=function(r){r===void 0&&(r=null);var t=this.data.meta.scale,n=getResolutionOfUrl(r,null);return n===null&&(n=t!==void 0?parseFloat(t):1),n!==1&&this.baseTexture.setResolution(n),n},e.prototype.parse=function(r){var t=this;return r&&deprecation$1("6.5.0","Spritesheet.parse callback is deprecated, use the return Promise instead."),new Promise(function(n){t._callback=function(i){r==null||r(i),n(i)},t._batchIndex=0,t._frameKeys.length<=e.BATCH_SIZE?(t._processFrames(0),t._processAnimations(),t._parseComplete()):t._nextBatch()})},e.prototype._processFrames=function(r){for(var t=r,n=e.BATCH_SIZE;t-r<n&&t<this._frameKeys.length;){var i=this._frameKeys[t],s=this._frames[i],o=s.frame;if(o){var a=null,u=null,l=s.trimmed!==!1&&s.sourceSize?s.sourceSize:s.frame,h=new Rectangle(0,0,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution);s.rotated?a=new Rectangle(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):a=new Rectangle(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),s.trimmed!==!1&&s.spriteSourceSize&&(u=new Rectangle(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[i]=new Texture(this.baseTexture,a,h,u,s.rotated?2:0,s.anchor),Texture.addToCache(this.textures[i],i)}t++}},e.prototype._processAnimations=function(){var r=this.data.animations||{};for(var t in r){this.animations[t]=[];for(var n=0;n<r[t].length;n++){var i=r[t][n];this.animations[t].push(this.textures[i])}}},e.prototype._parseComplete=function(){var r=this._callback;this._callback=null,this._batchIndex=0,r.call(this,this.textures)},e.prototype._nextBatch=function(){var r=this;this._processFrames(this._batchIndex*e.BATCH_SIZE),this._batchIndex++,setTimeout(function(){r._batchIndex*e.BATCH_SIZE<r._frameKeys.length?r._nextBatch():(r._processAnimations(),r._parseComplete())},0)},e.prototype.destroy=function(r){var t;r===void 0&&(r=!1);for(var n in this.textures)this.textures[n].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,r&&((t=this._texture)===null||t===void 0||t.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]},e.BATCH_SIZE=1e3,e}(),SpritesheetLoader=function(){function e(){}return e.use=function(r,t){var n,i,s=this,o=r.name+"_image";if(!r.data||r.type!==LoaderResource.TYPE.JSON||!r.data.frames||s.resources[o]){t();return}var a=(i=(n=r.data)===null||n===void 0?void 0:n.meta)===null||i===void 0?void 0:i.related_multi_packs;if(Array.isArray(a))for(var u=function(v){if(typeof v!="string")return"continue";var m=v.replace(".json",""),E=url.resolve(r.url.replace(s.baseUrl,""),v);if(s.resources[m]||Object.values(s.resources).some(function(T){return url.format(url.parse(T.url))===E}))return"continue";var A={crossOrigin:r.crossOrigin,loadType:LoaderResource.LOAD_TYPE.XHR,xhrType:LoaderResource.XHR_RESPONSE_TYPE.JSON,parentResource:r,metadata:r.metadata};s.add(m,E,A)},l=0,h=a;l<h.length;l++){var f=h[l];u(f)}var d={crossOrigin:r.crossOrigin,metadata:r.metadata.imageMetadata,parentResource:r},_=e.getResourcePath(r,s.baseUrl);s.add(o,_,d,function(m){if(m.error){t(m.error);return}var E=new Spritesheet(m.texture,r.data,r.url);E.parse().then(function(){r.spritesheet=E,r.textures=E.textures,t()})})},e.getResourcePath=function(r,t){return r.isDataUrl?r.data.meta.image:url.resolve(r.url.replace(t,""),r.data.meta.image)},e.extension=ExtensionType.Loader,e}();/*!
 * @pixi/sprite-tiling - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/sprite-tiling is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$a=function(e,r){return extendStatics$a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},extendStatics$a(e,r)};function __extends$a(e,r){extendStatics$a(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var tempPoint$1=new Point;(function(e){__extends$a(r,e);function r(t,n,i){n===void 0&&(n=100),i===void 0&&(i=100);var s=e.call(this,t)||this;return s.tileTransform=new Transform,s._width=n,s._height=i,s.uvMatrix=s.texture.uvMatrix||new TextureMatrix(t),s.pluginName="tilingSprite",s.uvRespectAnchor=!1,s}return Object.defineProperty(r.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copyFrom(t)},enumerable:!1,configurable:!0}),r.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},r.prototype._render=function(t){var n=this._texture;!n||!n.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},r.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,n=this._height*-this._anchor._y,i=this._width*(1-this._anchor._x),s=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,n,i,s)},r.prototype.getLocalBounds=function(t){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new Rectangle),t=this._localBoundsRect),this._bounds.getRectangle(t)):e.prototype.getLocalBounds.call(this,t)},r.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,tempPoint$1);var n=this._width,i=this._height,s=-n*this.anchor._x;if(tempPoint$1.x>=s&&tempPoint$1.x<s+n){var o=-i*this.anchor._y;if(tempPoint$1.y>=o&&tempPoint$1.y<o+i)return!0}return!1},r.prototype.destroy=function(t){e.prototype.destroy.call(this,t),this.tileTransform=null,this.uvMatrix=null},r.from=function(t,n){var i=t instanceof Texture?t:Texture.from(t,n);return new r(i,n.width,n.height)},Object.defineProperty(r.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!1,configurable:!0}),r})(Sprite);var fragmentSimpleSrc=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`,gl1VertexSrc=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,gl1FragmentSrc=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,gl2VertexSrc=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,gl2FragmentSrc=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,tempMat=new Matrix,TilingSpriteRenderer=function(e){__extends$a(r,e);function r(t){var n=e.call(this,t)||this;return t.runners.contextChange.add(n),n.quad=new QuadUv,n.state=State.for2d(),n}return r.prototype.contextChange=function(){var t=this.renderer,n={globals:t.globalUniforms};this.simpleShader=Shader.from(gl1VertexSrc,fragmentSimpleSrc,n),this.shader=t.context.webGLVersion>1?Shader.from(gl2VertexSrc,gl2FragmentSrc,n):Shader.from(gl1VertexSrc,gl1FragmentSrc,n)},r.prototype.render=function(t){var n=this.renderer,i=this.quad,s=i.vertices;s[0]=s[6]=t._width*-t.anchor.x,s[1]=s[3]=t._height*-t.anchor.y,s[2]=s[4]=t._width*(1-t.anchor.x),s[5]=s[7]=t._height*(1-t.anchor.y);var o=t.uvRespectAnchor?t.anchor.x:0,a=t.uvRespectAnchor?t.anchor.y:0;s=i.uvs,s[0]=s[6]=-o,s[1]=s[3]=-a,s[2]=s[4]=1-o,s[5]=s[7]=1-a,i.invalidate();var u=t._texture,l=u.baseTexture,h=l.alphaMode>0,f=t.tileTransform.localTransform,d=t.uvMatrix,_=l.isPowerOfTwo&&u.frame.width===l.width&&u.frame.height===l.height;_&&(l._glTextures[n.CONTEXT_UID]?_=l.wrapMode!==WRAP_MODES$5.CLAMP:l.wrapMode===WRAP_MODES$5.CLAMP&&(l.wrapMode=WRAP_MODES$5.REPEAT));var v=_?this.simpleShader:this.shader,m=u.width,E=u.height,A=t._width,T=t._height;tempMat.set(f.a*m/A,f.b*m/T,f.c*E/A,f.d*E/T,f.tx/A,f.ty/T),tempMat.invert(),_?tempMat.prepend(d.mapCoord):(v.uniforms.uMapCoord=d.mapCoord.toArray(!0),v.uniforms.uClampFrame=d.uClampFrame,v.uniforms.uClampOffset=d.uClampOffset),v.uniforms.uTransform=tempMat.toArray(!0),v.uniforms.uColor=premultiplyTintToRgba(t.tint,t.worldAlpha,v.uniforms.uColor,h),v.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),v.uniforms.uSampler=u,n.shader.bind(v),n.geometry.bind(i),this.state.blendMode=correctBlendMode(t.blendMode,h),n.state.set(this.state),n.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},r.extension={name:"tilingSprite",type:ExtensionType.RendererPlugin},r}(ObjectRenderer);/*!
 * @pixi/mesh - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/mesh is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$9=function(e,r){return extendStatics$9=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},extendStatics$9(e,r)};function __extends$9(e,r){extendStatics$9(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var MeshBatchUvs=function(){function e(r,t){this.uvBuffer=r,this.uvMatrix=t,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return e.prototype.update=function(r){if(!(!r&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var t=this.uvBuffer.data;(!this.data||this.data.length!==t.length)&&(this.data=new Float32Array(t.length)),this.uvMatrix.multiplyUvs(t,this.data),this._updateID++}},e}(),tempPoint=new Point,tempPolygon=new Polygon,Mesh=function(e){__extends$9(r,e);function r(t,n,i,s){s===void 0&&(s=DRAW_MODES$5.TRIANGLES);var o=e.call(this)||this;return o.geometry=t,o.shader=n,o.state=i||State.for2d(),o.drawMode=s,o.start=0,o.size=0,o.uvs=null,o.indices=null,o.vertexData=new Float32Array(1),o.vertexDirty=-1,o._transformID=-1,o._roundPixels=settings$1.ROUND_PIXELS,o.batchUvs=null,o}return Object.defineProperty(r.prototype,"geometry",{get:function(){return this._geometry},set:function(t){this._geometry!==t&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=t,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"material",{get:function(){return this.shader},set:function(t){this.shader=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tint",{get:function(){return"tint"in this.shader?this.shader.tint:null},set:function(t){this.shader.tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"texture",{get:function(){return"texture"in this.shader?this.shader.texture:null},set:function(t){this.shader.texture=t},enumerable:!1,configurable:!0}),r.prototype._render=function(t){var n=this.geometry.buffers[0].data,i=this.shader;i.batchable&&this.drawMode===DRAW_MODES$5.TRIANGLES&&n.length<r.BATCHABLE_SIZE*2?this._renderToBatch(t):this._renderDefault(t)},r.prototype._renderDefault=function(t){var n=this.shader;n.alpha=this.worldAlpha,n.update&&n.update(),t.batch.flush(),n.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),t.shader.bind(n),t.state.set(this.state),t.geometry.bind(this.geometry,n),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},r.prototype._renderToBatch=function(t){var n=this.geometry,i=this.shader;i.uvMatrix&&(i.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=n.indexBuffer.data,this._tintRGB=i._tintRGB,this._texture=i.texture;var s=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[s]),t.plugins[s].render(this)},r.prototype.calculateVertices=function(){var t=this.geometry,n=t.buffers[0],i=n.data,s=n._updateID;if(!(s===this.vertexDirty&&this._transformID===this.transform._worldID)){this._transformID=this.transform._worldID,this.vertexData.length!==i.length&&(this.vertexData=new Float32Array(i.length));for(var o=this.transform.worldTransform,a=o.a,u=o.b,l=o.c,h=o.d,f=o.tx,d=o.ty,_=this.vertexData,v=0;v<_.length/2;v++){var m=i[v*2],E=i[v*2+1];_[v*2]=a*m+l*E+f,_[v*2+1]=u*m+h*E+d}if(this._roundPixels)for(var A=settings$1.RESOLUTION,v=0;v<_.length;++v)_[v]=Math.round((_[v]*A|0)/A);this.vertexDirty=s}},r.prototype.calculateUvs=function(){var t=this.geometry.buffers[1],n=this.shader;n.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new MeshBatchUvs(t,n.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},r.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},r.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,tempPoint);for(var n=this.geometry.getBuffer("aVertexPosition").data,i=tempPolygon.points,s=this.geometry.getIndex().data,o=s.length,a=this.drawMode===4?3:1,u=0;u+2<o;u+=a){var l=s[u]*2,h=s[u+1]*2,f=s[u+2]*2;if(i[0]=n[l],i[1]=n[l+1],i[2]=n[h],i[3]=n[h+1],i[4]=n[f],i[5]=n[f+1],tempPolygon.contains(tempPoint.x,tempPoint.y))return!0}return!1},r.prototype.destroy=function(t){e.prototype.destroy.call(this,t),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},r.BATCHABLE_SIZE=100,r}(Container),fragment$5=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,vertex$2=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`,MeshMaterial=function(e){__extends$9(r,e);function r(t,n){var i=this,s={uSampler:t,alpha:1,uTextureMatrix:Matrix.IDENTITY,uColor:new Float32Array([1,1,1,1])};return n=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},n),n.uniforms&&Object.assign(s,n.uniforms),i=e.call(this,n.program||Program.from(vertex$2,fragment$5),s)||this,i._colorDirty=!1,i.uvMatrix=new TextureMatrix(t),i.batchable=n.program===void 0,i.pluginName=n.pluginName,i.tint=n.tint,i.alpha=n.alpha,i}return Object.defineProperty(r.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(t){this.uniforms.uSampler!==t&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!t.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=t,this.uvMatrix.texture=t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"alpha",{get:function(){return this._alpha},set:function(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tint",{get:function(){return this._tint},set:function(t){t!==this._tint&&(this._tint=t,this._tintRGB=(t>>16)+(t&65280)+((t&255)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),r.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var t=this.texture.baseTexture;premultiplyTintToRgba(this._tint,this._alpha,this.uniforms.uColor,t.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},r}(Shader),MeshGeometry=function(e){__extends$9(r,e);function r(t,n,i){var s=e.call(this)||this,o=new Buffer(t),a=new Buffer(n,!0),u=new Buffer(i,!0,!0);return s.addAttribute("aVertexPosition",o,2,!1,TYPES$5.FLOAT).addAttribute("aTextureCoord",a,2,!1,TYPES$5.FLOAT).addIndex(u),s._updateId=-1,s}return Object.defineProperty(r.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),r}(Geometry);/*!
 * @pixi/text-bitmap - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/text-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$8=function(e,r){return extendStatics$8=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},extendStatics$8(e,r)};function __extends$8(e,r){extendStatics$8(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var BitmapFontData=function(){function e(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}return e}(),TextFormat=function(){function e(){}return e.test=function(r){return typeof r=="string"&&r.indexOf("info face=")===0},e.parse=function(r){var t=r.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(var i in t){var s=t[i].match(/^[a-z]+/gm)[0],o=t[i].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),a={};for(var u in o){var l=o[u].split("="),h=l[0],f=l[1].replace(/"/gm,""),d=parseFloat(f),_=isNaN(d)?f:d;a[h]=_}n[s].push(a)}var v=new BitmapFontData;return n.info.forEach(function(m){return v.info.push({face:m.face,size:parseInt(m.size,10)})}),n.common.forEach(function(m){return v.common.push({lineHeight:parseInt(m.lineHeight,10)})}),n.page.forEach(function(m){return v.page.push({id:parseInt(m.id,10),file:m.file})}),n.char.forEach(function(m){return v.char.push({id:parseInt(m.id,10),page:parseInt(m.page,10),x:parseInt(m.x,10),y:parseInt(m.y,10),width:parseInt(m.width,10),height:parseInt(m.height,10),xoffset:parseInt(m.xoffset,10),yoffset:parseInt(m.yoffset,10),xadvance:parseInt(m.xadvance,10)})}),n.kerning.forEach(function(m){return v.kerning.push({first:parseInt(m.first,10),second:parseInt(m.second,10),amount:parseInt(m.amount,10)})}),n.distanceField.forEach(function(m){return v.distanceField.push({distanceRange:parseInt(m.distanceRange,10),fieldType:m.fieldType})}),v},e}(),XMLFormat=function(){function e(){}return e.test=function(r){return r instanceof XMLDocument&&r.getElementsByTagName("page").length&&r.getElementsByTagName("info")[0].getAttribute("face")!==null},e.parse=function(r){for(var t=new BitmapFontData,n=r.getElementsByTagName("info"),i=r.getElementsByTagName("common"),s=r.getElementsByTagName("page"),o=r.getElementsByTagName("char"),a=r.getElementsByTagName("kerning"),u=r.getElementsByTagName("distanceField"),l=0;l<n.length;l++)t.info.push({face:n[l].getAttribute("face"),size:parseInt(n[l].getAttribute("size"),10)});for(var l=0;l<i.length;l++)t.common.push({lineHeight:parseInt(i[l].getAttribute("lineHeight"),10)});for(var l=0;l<s.length;l++)t.page.push({id:parseInt(s[l].getAttribute("id"),10)||0,file:s[l].getAttribute("file")});for(var l=0;l<o.length;l++){var h=o[l];t.char.push({id:parseInt(h.getAttribute("id"),10),page:parseInt(h.getAttribute("page"),10)||0,x:parseInt(h.getAttribute("x"),10),y:parseInt(h.getAttribute("y"),10),width:parseInt(h.getAttribute("width"),10),height:parseInt(h.getAttribute("height"),10),xoffset:parseInt(h.getAttribute("xoffset"),10),yoffset:parseInt(h.getAttribute("yoffset"),10),xadvance:parseInt(h.getAttribute("xadvance"),10)})}for(var l=0;l<a.length;l++)t.kerning.push({first:parseInt(a[l].getAttribute("first"),10),second:parseInt(a[l].getAttribute("second"),10),amount:parseInt(a[l].getAttribute("amount"),10)});for(var l=0;l<u.length;l++)t.distanceField.push({fieldType:u[l].getAttribute("fieldType"),distanceRange:parseInt(u[l].getAttribute("distanceRange"),10)});return t},e}(),XMLStringFormat=function(){function e(){}return e.test=function(r){if(typeof r=="string"&&r.indexOf("<font>")>-1){var t=new globalThis.DOMParser().parseFromString(r,"text/xml");return XMLFormat.test(t)}return!1},e.parse=function(r){var t=new globalThis.DOMParser().parseFromString(r,"text/xml");return XMLFormat.parse(t)},e}(),formats=[TextFormat,XMLFormat,XMLStringFormat];function autoDetectFormat(e){for(var r=0;r<formats.length;r++)if(formats[r].test(e))return formats[r];return null}function generateFillStyle(e,r,t,n,i,s){var o=t.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;var a,u=t.dropShadow?t.dropShadowDistance:0,l=t.padding||0,h=e.width/n-u-l*2,f=e.height/n-u-l*2,d=o.slice(),_=t.fillGradientStops.slice();if(!_.length)for(var v=d.length+1,m=1;m<v;++m)_.push(m/v);if(d.unshift(o[0]),_.unshift(0),d.push(o[o.length-1]),_.push(1),t.fillGradientType===TEXT_GRADIENT.LINEAR_VERTICAL){a=r.createLinearGradient(h/2,l,h/2,f+l);for(var E=0,A=s.fontProperties.fontSize+t.strokeThickness,T=A/f,m=0;m<i.length;m++)for(var C=s.lineHeight*m,R=0;R<d.length;R++){var b=0;typeof _[R]=="number"?b=_[R]:b=R/d.length;var S=C/f+b*T,B=Math.max(E,S);B=Math.min(B,1),a.addColorStop(B,d[R]),E=B}}else{a=r.createLinearGradient(l,f/2,h+l,f/2);for(var M=d.length+1,D=1,m=0;m<d.length;m++){var G=void 0;typeof _[m]=="number"?G=_[m]:G=D/M,a.addColorStop(G,d[m]),D++}}return a}function drawGlyph(e,r,t,n,i,s,o){var a=t.text,u=t.fontProperties;r.translate(n,i),r.scale(s,s);var l=o.strokeThickness/2,h=-(o.strokeThickness/2);if(r.font=o.toFontString(),r.lineWidth=o.strokeThickness,r.textBaseline=o.textBaseline,r.lineJoin=o.lineJoin,r.miterLimit=o.miterLimit,r.fillStyle=generateFillStyle(e,r,o,s,[a],t),r.strokeStyle=o.stroke,o.dropShadow){var f=o.dropShadowColor,d=hex2rgb(typeof f=="number"?f:string2hex(f)),_=o.dropShadowBlur*s,v=o.dropShadowDistance*s;r.shadowColor="rgba("+d[0]*255+","+d[1]*255+","+d[2]*255+","+o.dropShadowAlpha+")",r.shadowBlur=_,r.shadowOffsetX=Math.cos(o.dropShadowAngle)*v,r.shadowOffsetY=Math.sin(o.dropShadowAngle)*v}else r.shadowColor="black",r.shadowBlur=0,r.shadowOffsetX=0,r.shadowOffsetY=0;o.stroke&&o.strokeThickness&&r.strokeText(a,l,h+t.lineHeight-u.descent),o.fill&&r.fillText(a,l,h+t.lineHeight-u.descent),r.setTransform(1,0,0,1,0,0),r.fillStyle="rgba(0, 0, 0, 0)"}function splitTextToCharacters(e){return Array.from?Array.from(e):e.split("")}function resolveCharacters(e){typeof e=="string"&&(e=[e]);for(var r=[],t=0,n=e.length;t<n;t++){var i=e[t];if(Array.isArray(i)){if(i.length!==2)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+i.length+".");var s=i[0].charCodeAt(0),o=i[1].charCodeAt(0);if(o<s)throw new Error("[BitmapFont]: Invalid character range.");for(var a=s,u=o;a<=u;a++)r.push(String.fromCharCode(a))}else r.push.apply(r,splitTextToCharacters(i))}if(r.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return r}function extractCharCode(e){return e.codePointAt?e.codePointAt(0):e.charCodeAt(0)}var BitmapFont=function(){function e(r,t,n){var i,s,o=r.info[0],a=r.common[0],u=r.page[0],l=r.distanceField[0],h=getResolutionOfUrl(u.file),f={};this._ownsTextures=n,this.font=o.face,this.size=o.size,this.lineHeight=a.lineHeight/h,this.chars={},this.pageTextures=f;for(var d=0;d<r.page.length;d++){var _=r.page[d],v=_.id,m=_.file;f[v]=t instanceof Array?t[d]:t[m],(l==null?void 0:l.fieldType)&&l.fieldType!=="none"&&(f[v].baseTexture.alphaMode=ALPHA_MODES$5.NO_PREMULTIPLIED_ALPHA)}for(var d=0;d<r.char.length;d++){var E=r.char[d],v=E.id,A=E.page,T=r.char[d],C=T.x,R=T.y,b=T.width,S=T.height,B=T.xoffset,M=T.yoffset,D=T.xadvance;C/=h,R/=h,b/=h,S/=h,B/=h,M/=h,D/=h;var G=new Rectangle(C+f[A].frame.x/h,R+f[A].frame.y/h,b,S);this.chars[v]={xOffset:B,yOffset:M,xAdvance:D,kerning:{},texture:new Texture(f[A].baseTexture,G),page:A}}for(var d=0;d<r.kerning.length;d++){var J=r.kerning[d],re=J.first,ne=J.second,de=J.amount;re/=h,ne/=h,de/=h,this.chars[ne]&&(this.chars[ne].kerning[re]=de)}this.distanceFieldRange=l==null?void 0:l.distanceRange,this.distanceFieldType=(s=(i=l==null?void 0:l.fieldType)===null||i===void 0?void 0:i.toLowerCase())!==null&&s!==void 0?s:"none"}return e.prototype.destroy=function(){for(var r in this.chars)this.chars[r].texture.destroy(),this.chars[r].texture=null;for(var r in this.pageTextures)this._ownsTextures&&this.pageTextures[r].destroy(!0),this.pageTextures[r]=null;this.chars=null,this.pageTextures=null},e.install=function(r,t,n){var i;if(r instanceof BitmapFontData)i=r;else{var s=autoDetectFormat(r);if(!s)throw new Error("Unrecognized data format for font.");i=s.parse(r)}t instanceof Texture&&(t=[t]);var o=new e(i,t,n);return e.available[o.font]=o,o},e.uninstall=function(r){var t=e.available[r];if(!t)throw new Error("No font found named '"+r+"'");t.destroy(),delete e.available[r]},e.from=function(r,t,n){if(!r)throw new Error("[BitmapFont] Property `name` is required.");var i=Object.assign({},e.defaultOptions,n),s=i.chars,o=i.padding,a=i.resolution,u=i.textureWidth,l=i.textureHeight,h=resolveCharacters(s),f=t instanceof TextStyle?t:new TextStyle(t),d=u,_=new BitmapFontData;_.info[0]={face:f.fontFamily,size:f.fontSize},_.common[0]={lineHeight:f.fontSize};for(var v=0,m=0,E,A,T,C=0,R=[],b=0;b<h.length;b++){E||(E=settings$1.ADAPTER.createCanvas(),E.width=u,E.height=l,A=E.getContext("2d"),T=new BaseTexture(E,{resolution:a}),R.push(new Texture(T)),_.page.push({id:R.length-1,file:""}));var S=TextMetrics.measureText(h[b],f,!1,E),B=S.width,M=Math.ceil(S.height),D=Math.ceil((f.fontStyle==="italic"?2:1)*B);if(m>=l-M*a){if(m===0)throw new Error("[BitmapFont] textureHeight "+l+"px is "+("too small for "+f.fontSize+"px fonts"));--b,E=null,A=null,T=null,m=0,v=0,C=0;continue}if(C=Math.max(M+S.fontProperties.descent,C),D*a+v>=d){--b,m+=C*a,m=Math.ceil(m),v=0,C=0;continue}drawGlyph(E,A,S,v,m,a,f);var G=extractCharCode(S.text);_.char.push({id:G,page:R.length-1,x:v/a,y:m/a,width:D,height:M,xoffset:0,yoffset:0,xadvance:Math.ceil(B-(f.dropShadow?f.dropShadowDistance:0)-(f.stroke?f.strokeThickness:0))}),v+=(D+2*o)*a,v=Math.ceil(v)}for(var b=0,J=h.length;b<J;b++)for(var re=h[b],ne=0;ne<J;ne++){var de=h[ne],q=A.measureText(re).width,z=A.measureText(de).width,te=A.measureText(re+de).width,ue=te-(q+z);ue&&_.kerning.push({first:extractCharCode(re),second:extractCharCode(de),amount:ue})}var le=new e(_,R,!0);return e.available[r]!==void 0&&e.uninstall(r),e.available[r]=le,le},e.ALPHA=[["a","z"],["A","Z"]," "],e.NUMERIC=[["0","9"]],e.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],e.ASCII=[[" ","~"]],e.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:e.ALPHANUMERIC},e.available={},e}(),msdfFrag=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r
\r
}\r
`,msdfVert=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`,pageMeshDataDefaultPageMeshData=[],pageMeshDataMSDFPageMeshData=[],charRenderDataPool=[];(function(e){__extends$8(r,e);function r(t,n){n===void 0&&(n={});var i=e.call(this)||this;i._tint=16777215;var s=Object.assign({},r.styleDefaults,n),o=s.align,a=s.tint,u=s.maxWidth,l=s.letterSpacing,h=s.fontName,f=s.fontSize;if(!BitmapFont.available[h])throw new Error('Missing BitmapFont "'+h+'"');return i._activePagesMeshData=[],i._textWidth=0,i._textHeight=0,i._align=o,i._tint=a,i._fontName=h,i._fontSize=f||BitmapFont.available[h].size,i.text=t,i._maxWidth=u,i._maxLineHeight=0,i._letterSpacing=l,i._anchor=new ObservablePoint(function(){i.dirty=!0},i,0,0),i._roundPixels=settings$1.ROUND_PIXELS,i.dirty=!0,i._resolution=settings$1.RESOLUTION,i._autoResolution=!0,i._textureCache={},i}return r.prototype.updateText=function(){for(var t,n=BitmapFont.available[this._fontName],i=this._fontSize/n.size,s=new Point,o=[],a=[],u=[],l=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",h=splitTextToCharacters(l),f=this._maxWidth*n.size/this._fontSize,d=n.distanceFieldType==="none"?pageMeshDataDefaultPageMeshData:pageMeshDataMSDFPageMeshData,_=null,v=0,m=0,E=0,A=-1,T=0,C=0,R=0,b=0,S=0;S<h.length;S++){var B=h[S],M=extractCharCode(B);if(/(?:\s)/.test(B)&&(A=S,T=v,b++),B==="\r"||B===`
`){a.push(v),u.push(-1),m=Math.max(m,v),++E,++C,s.x=0,s.y+=n.lineHeight,_=null,b=0;continue}var D=n.chars[M];if(!!D){_&&D.kerning[_]&&(s.x+=D.kerning[_]);var G=charRenderDataPool.pop()||{texture:Texture.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Point};G.texture=D.texture,G.line=E,G.charCode=M,G.position.x=s.x+D.xOffset+this._letterSpacing/2,G.position.y=s.y+D.yOffset,G.prevSpaces=b,o.push(G),v=G.position.x+Math.max(D.xAdvance-D.xOffset,D.texture.orig.width),s.x+=D.xAdvance+this._letterSpacing,R=Math.max(R,D.yOffset+D.texture.height),_=M,A!==-1&&f>0&&s.x>f&&(++C,removeItems(o,1+A-C,1+S-A),S=A,A=-1,a.push(T),u.push(o.length>0?o[o.length-1].prevSpaces:0),m=Math.max(m,T),E++,s.x=0,s.y+=n.lineHeight,_=null,b=0)}}var J=h[h.length-1];J!=="\r"&&J!==`
`&&(/(?:\s)/.test(J)&&(v=T),a.push(v),m=Math.max(m,v),u.push(-1));for(var re=[],S=0;S<=E;S++){var ne=0;this._align==="right"?ne=m-a[S]:this._align==="center"?ne=(m-a[S])/2:this._align==="justify"&&(ne=u[S]<0?0:(m-a[S])/u[S]),re.push(ne)}for(var de=o.length,q={},z=[],te=this._activePagesMeshData,S=0;S<te.length;S++)d.push(te[S]);for(var S=0;S<de;S++){var ue=o[S].texture,le=ue.baseTexture.uid;if(!q[le]){var O=d.pop();if(!O){var V=new MeshGeometry,Z=void 0,ee=void 0;n.distanceFieldType==="none"?(Z=new MeshMaterial(Texture.EMPTY),ee=BLEND_MODES$5.NORMAL):(Z=new MeshMaterial(Texture.EMPTY,{program:Program.from(msdfVert,msdfFrag),uniforms:{uFWidth:0}}),ee=BLEND_MODES$5.NORMAL_NPM);var oe=new Mesh(V,Z);oe.blendMode=ee,O={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:oe,vertices:null,uvs:null,indices:null}}O.index=0,O.indexCount=0,O.vertexCount=0,O.uvsCount=0,O.total=0;var ge=this._textureCache;ge[le]=ge[le]||new Texture(ue.baseTexture),O.mesh.texture=ge[le],O.mesh.tint=this._tint,z.push(O),q[le]=O}q[le].total++}for(var S=0;S<te.length;S++)z.indexOf(te[S])===-1&&this.removeChild(te[S].mesh);for(var S=0;S<z.length;S++)z[S].mesh.parent!==this&&this.addChild(z[S].mesh);this._activePagesMeshData=z;for(var S in q){var O=q[S],ce=O.total;if(!(((t=O.indices)===null||t===void 0?void 0:t.length)>6*ce)||O.vertices.length<Mesh.BATCHABLE_SIZE*2)O.vertices=new Float32Array(4*2*ce),O.uvs=new Float32Array(4*2*ce),O.indices=new Uint16Array(6*ce);else for(var pe=O.total,Ae=O.vertices,Ee=pe*4*2;Ee<Ae.length;Ee++)Ae[Ee]=0;O.mesh.size=6*ce}for(var S=0;S<de;S++){var B=o[S],me=B.position.x+re[B.line]*(this._align==="justify"?B.prevSpaces:1);this._roundPixels&&(me=Math.round(me));var he=me*i,ve=B.position.y*i,ue=B.texture,P=q[ue.baseTexture.uid],N=ue.frame,$=ue._uvs,U=P.index++;P.indices[U*6+0]=0+U*4,P.indices[U*6+1]=1+U*4,P.indices[U*6+2]=2+U*4,P.indices[U*6+3]=0+U*4,P.indices[U*6+4]=2+U*4,P.indices[U*6+5]=3+U*4,P.vertices[U*8+0]=he,P.vertices[U*8+1]=ve,P.vertices[U*8+2]=he+N.width*i,P.vertices[U*8+3]=ve,P.vertices[U*8+4]=he+N.width*i,P.vertices[U*8+5]=ve+N.height*i,P.vertices[U*8+6]=he,P.vertices[U*8+7]=ve+N.height*i,P.uvs[U*8+0]=$.x0,P.uvs[U*8+1]=$.y0,P.uvs[U*8+2]=$.x1,P.uvs[U*8+3]=$.y1,P.uvs[U*8+4]=$.x2,P.uvs[U*8+5]=$.y2,P.uvs[U*8+6]=$.x3,P.uvs[U*8+7]=$.y3}this._textWidth=m*i,this._textHeight=(s.y+n.lineHeight)*i;for(var S in q){var O=q[S];if(this.anchor.x!==0||this.anchor.y!==0)for(var k=0,W=this._textWidth*this.anchor.x,Q=this._textHeight*this.anchor.y,Y=0;Y<O.total;Y++)O.vertices[k++]-=W,O.vertices[k++]-=Q,O.vertices[k++]-=W,O.vertices[k++]-=Q,O.vertices[k++]-=W,O.vertices[k++]-=Q,O.vertices[k++]-=W,O.vertices[k++]-=Q;this._maxLineHeight=R*i;var K=O.mesh.geometry.getBuffer("aVertexPosition"),j=O.mesh.geometry.getBuffer("aTextureCoord"),se=O.mesh.geometry.getIndex();K.data=O.vertices,j.data=O.uvs,se.data=O.indices,K.update(),j.update(),se.update()}for(var S=0;S<o.length;S++)charRenderDataPool.push(o[S])},r.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},r.prototype._render=function(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0);var n=BitmapFont.available[this._fontName],i=n.distanceFieldRange,s=n.distanceFieldType,o=n.size;if(s!=="none")for(var a=this.worldTransform,u=a.a,l=a.b,h=a.c,f=a.d,d=Math.sqrt(u*u+l*l),_=Math.sqrt(h*h+f*f),v=(Math.abs(d)+Math.abs(_))/2,m=this._fontSize/o,E=0,A=this._activePagesMeshData;E<A.length;E++){var T=A[E];T.mesh.shader.uniforms.uFWidth=v*i*m*this._resolution}e.prototype._render.call(this,t)},r.prototype.getLocalBounds=function(){return this.validate(),e.prototype.getLocalBounds.call(this)},r.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(r.prototype,"tint",{get:function(){return this._tint},set:function(t){if(this._tint!==t){this._tint=t;for(var n=0;n<this._activePagesMeshData.length;n++)this._activePagesMeshData[n].mesh.tint=t}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fontName",{get:function(){return this._fontName},set:function(t){if(!BitmapFont.available[t])throw new Error('Missing BitmapFont "'+t+'"');this._fontName!==t&&(this._fontName=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"anchor",{get:function(){return this._anchor},set:function(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"text",{get:function(){return this._text},set:function(t){t=String(t==null?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},enumerable:!1,configurable:!0}),r.prototype.destroy=function(t){var n=this._textureCache;for(var i in n){var s=n[i];s.destroy(),delete n[i]}this._textureCache=null,e.prototype.destroy.call(this,t)},r.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},r})(Container);var BitmapFontLoader=function(){function e(){}return e.add=function(){LoaderResource.setExtensionXhrType("fnt",LoaderResource.XHR_RESPONSE_TYPE.TEXT)},e.use=function(r,t){var n=autoDetectFormat(r.data);if(!n){t();return}for(var i=e.getBaseUrl(this,r),s=n.parse(r.data),o={},a=function(m){o[m.metadata.pageFile]=m.texture,Object.keys(o).length===s.page.length&&(r.bitmapFont=BitmapFont.install(s,o,!0),t())},u=0;u<s.page.length;++u){var l=s.page[u].file,h=i+l,f=!1;for(var d in this.resources){var _=this.resources[d];if(_.url===h){_.metadata.pageFile=l,_.texture?a(_):_.onAfterMiddleware.add(a),f=!0;break}}if(!f){var v={crossOrigin:r.crossOrigin,loadType:LoaderResource.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:l},r.metadata.imageMetadata),parentResource:r};this.add(h,v,a)}}},e.getBaseUrl=function(r,t){var n=t.isDataUrl?"":e.dirname(t.url);return t.isDataUrl&&(n==="."&&(n=""),r.baseUrl&&n&&r.baseUrl.charAt(r.baseUrl.length-1)==="/"&&(n+="/")),n=n.replace(r.baseUrl,""),n&&n.charAt(n.length-1)!=="/"&&(n+="/"),n},e.dirname=function(r){var t=r.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return t===r?".":t===""?"/":t},e.extension=ExtensionType.Loader,e}();/*!
 * @pixi/filter-alpha - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/filter-alpha is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$7=function(e,r){return extendStatics$7=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},extendStatics$7(e,r)};function __extends$7(e,r){extendStatics$7(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var fragment$4=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;(function(e){__extends$7(r,e);function r(t){t===void 0&&(t=1);var n=e.call(this,defaultVertex$1,fragment$4,{uAlpha:1})||this;return n.alpha=t,n}return Object.defineProperty(r.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),r})(Filter);/*!
 * @pixi/filter-blur - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/filter-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$6=function(e,r){return extendStatics$6=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},extendStatics$6(e,r)};function __extends$6(e,r){extendStatics$6(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var vertTemplate=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function generateBlurVertSource(e,r){var t=Math.ceil(e/2),n=vertTemplate,i="",s;r?s="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":s="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var o=0;o<e;o++){var a=s.replace("%index%",o.toString());a=a.replace("%sampleIndex%",o-(t-1)+".0"),i+=a,i+=`
`}return n=n.replace("%blur%",i),n=n.replace("%size%",e.toString()),n}var GAUSSIAN_VALUES={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},fragTemplate=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function generateBlurFragSource(e){for(var r=GAUSSIAN_VALUES[e],t=r.length,n=fragTemplate,i="",s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",o,a=0;a<e;a++){var u=s.replace("%index%",a.toString());o=a,a>=t&&(o=e-a-1),u=u.replace("%value%",r[o].toString()),i+=u,i+=`
`}return n=n.replace("%blur%",i),n=n.replace("%size%",e.toString()),n}/*!
 * @pixi/constants - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ENV$3;(function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"})(ENV$3||(ENV$3={}));var RENDERER_TYPE$3;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"})(RENDERER_TYPE$3||(RENDERER_TYPE$3={}));var BUFFER_BITS$3;(function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"})(BUFFER_BITS$3||(BUFFER_BITS$3={}));var BLEND_MODES$3;(function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"})(BLEND_MODES$3||(BLEND_MODES$3={}));var DRAW_MODES$3;(function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(DRAW_MODES$3||(DRAW_MODES$3={}));var FORMATS$3;(function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(FORMATS$3||(FORMATS$3={}));var TARGETS$3;(function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(TARGETS$3||(TARGETS$3={}));var TYPES$3;(function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"})(TYPES$3||(TYPES$3={}));var SAMPLER_TYPES$3;(function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"})(SAMPLER_TYPES$3||(SAMPLER_TYPES$3={}));var SCALE_MODES$3;(function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"})(SCALE_MODES$3||(SCALE_MODES$3={}));var WRAP_MODES$3;(function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(WRAP_MODES$3||(WRAP_MODES$3={}));var MIPMAP_MODES$3;(function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"})(MIPMAP_MODES$3||(MIPMAP_MODES$3={}));var ALPHA_MODES$3;(function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(ALPHA_MODES$3||(ALPHA_MODES$3={}));var CLEAR_MODES$3;(function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"})(CLEAR_MODES$3||(CLEAR_MODES$3={}));var GC_MODES$3;(function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"})(GC_MODES$3||(GC_MODES$3={}));var PRECISION$3;(function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"})(PRECISION$3||(PRECISION$3={}));var MASK_TYPES$3;(function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE",e[e.COLOR=4]="COLOR"})(MASK_TYPES$3||(MASK_TYPES$3={}));var COLOR_MASK_BITS$3;(function(e){e[e.RED=1]="RED",e[e.GREEN=2]="GREEN",e[e.BLUE=4]="BLUE",e[e.ALPHA=8]="ALPHA"})(COLOR_MASK_BITS$3||(COLOR_MASK_BITS$3={}));var MSAA_QUALITY$3;(function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"})(MSAA_QUALITY$3||(MSAA_QUALITY$3={}));var BUFFER_TYPE$3;(function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(BUFFER_TYPE$3||(BUFFER_TYPE$3={}));var BlurFilterPass=function(e){__extends$6(r,e);function r(t,n,i,s,o){n===void 0&&(n=8),i===void 0&&(i=4),s===void 0&&(s=settings$1.FILTER_RESOLUTION),o===void 0&&(o=5);var a=this,u=generateBlurVertSource(o,t),l=generateBlurFragSource(o);return a=e.call(this,u,l)||this,a.horizontal=t,a.resolution=s,a._quality=0,a.quality=i,a.blur=n,a}return r.prototype.apply=function(t,n,i,s){if(i?this.horizontal?this.uniforms.strength=1/i.width*(i.width/n.width):this.uniforms.strength=1/i.height*(i.height/n.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/n.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/n.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)t.applyFilter(this,n,i,s);else{var o=t.getFilterTexture(),a=t.renderer,u=n,l=o;this.state.blend=!1,t.applyFilter(this,u,l,CLEAR_MODES$3.CLEAR);for(var h=1;h<this.passes-1;h++){t.bindAndClear(u,CLEAR_MODES$3.BLIT),this.uniforms.uSampler=l;var f=l;l=u,u=f,a.shader.bind(this),a.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,l,i,s),t.returnFilterTexture(o)}},Object.defineProperty(r.prototype,"blur",{get:function(){return this.strength},set:function(t){this.padding=1+Math.abs(t)*2,this.strength=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"quality",{get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t},enumerable:!1,configurable:!0}),r}(Filter);(function(e){__extends$6(r,e);function r(t,n,i,s){t===void 0&&(t=8),n===void 0&&(n=4),i===void 0&&(i=settings$1.FILTER_RESOLUTION),s===void 0&&(s=5);var o=e.call(this)||this;return o.blurXFilter=new BlurFilterPass(!0,t,n,i,s),o.blurYFilter=new BlurFilterPass(!1,t,n,i,s),o.resolution=i,o.quality=n,o.blur=t,o.repeatEdgePixels=!1,o}return r.prototype.apply=function(t,n,i,s){var o=Math.abs(this.blurXFilter.strength),a=Math.abs(this.blurYFilter.strength);if(o&&a){var u=t.getFilterTexture();this.blurXFilter.apply(t,n,u,CLEAR_MODES$3.CLEAR),this.blurYFilter.apply(t,u,i,s),t.returnFilterTexture(u)}else a?this.blurYFilter.apply(t,n,i,s):this.blurXFilter.apply(t,n,i,s)},r.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2},Object.defineProperty(r.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(t){this.blurYFilter.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(t){this._repeatEdgePixels=t,this.updatePadding()},enumerable:!1,configurable:!0}),r})(Filter);/*!
 * @pixi/filter-color-matrix - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/filter-color-matrix is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$5=function(e,r){return extendStatics$5=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},extendStatics$5(e,r)};function __extends$5(e,r){extendStatics$5(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var fragment$3=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`,ColorMatrixFilter=function(e){__extends$5(r,e);function r(){var t=this,n={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return t=e.call(this,defaultFilterVertex,fragment$3,n)||this,t.alpha=1,t}return r.prototype._loadMatrix=function(t,n){n===void 0&&(n=!1);var i=t;n&&(this._multiply(i,this.uniforms.m,t),i=this._colorMatrix(i)),this.uniforms.m=i},r.prototype._multiply=function(t,n,i){return t[0]=n[0]*i[0]+n[1]*i[5]+n[2]*i[10]+n[3]*i[15],t[1]=n[0]*i[1]+n[1]*i[6]+n[2]*i[11]+n[3]*i[16],t[2]=n[0]*i[2]+n[1]*i[7]+n[2]*i[12]+n[3]*i[17],t[3]=n[0]*i[3]+n[1]*i[8]+n[2]*i[13]+n[3]*i[18],t[4]=n[0]*i[4]+n[1]*i[9]+n[2]*i[14]+n[3]*i[19]+n[4],t[5]=n[5]*i[0]+n[6]*i[5]+n[7]*i[10]+n[8]*i[15],t[6]=n[5]*i[1]+n[6]*i[6]+n[7]*i[11]+n[8]*i[16],t[7]=n[5]*i[2]+n[6]*i[7]+n[7]*i[12]+n[8]*i[17],t[8]=n[5]*i[3]+n[6]*i[8]+n[7]*i[13]+n[8]*i[18],t[9]=n[5]*i[4]+n[6]*i[9]+n[7]*i[14]+n[8]*i[19]+n[9],t[10]=n[10]*i[0]+n[11]*i[5]+n[12]*i[10]+n[13]*i[15],t[11]=n[10]*i[1]+n[11]*i[6]+n[12]*i[11]+n[13]*i[16],t[12]=n[10]*i[2]+n[11]*i[7]+n[12]*i[12]+n[13]*i[17],t[13]=n[10]*i[3]+n[11]*i[8]+n[12]*i[13]+n[13]*i[18],t[14]=n[10]*i[4]+n[11]*i[9]+n[12]*i[14]+n[13]*i[19]+n[14],t[15]=n[15]*i[0]+n[16]*i[5]+n[17]*i[10]+n[18]*i[15],t[16]=n[15]*i[1]+n[16]*i[6]+n[17]*i[11]+n[18]*i[16],t[17]=n[15]*i[2]+n[16]*i[7]+n[17]*i[12]+n[18]*i[17],t[18]=n[15]*i[3]+n[16]*i[8]+n[17]*i[13]+n[18]*i[18],t[19]=n[15]*i[4]+n[16]*i[9]+n[17]*i[14]+n[18]*i[19]+n[19],t},r.prototype._colorMatrix=function(t){var n=new Float32Array(t);return n[4]/=255,n[9]/=255,n[14]/=255,n[19]/=255,n},r.prototype.brightness=function(t,n){var i=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(i,n)},r.prototype.tint=function(t,n){var i=t>>16&255,s=t>>8&255,o=t&255,a=[i/255,0,0,0,0,0,s/255,0,0,0,0,0,o/255,0,0,0,0,0,1,0];this._loadMatrix(a,n)},r.prototype.greyscale=function(t,n){var i=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(i,n)},r.prototype.blackAndWhite=function(t){var n=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(n,t)},r.prototype.hue=function(t,n){t=(t||0)/180*Math.PI;var i=Math.cos(t),s=Math.sin(t),o=Math.sqrt,a=1/3,u=o(a),l=i+(1-i)*a,h=a*(1-i)-u*s,f=a*(1-i)+u*s,d=a*(1-i)+u*s,_=i+a*(1-i),v=a*(1-i)-u*s,m=a*(1-i)-u*s,E=a*(1-i)+u*s,A=i+a*(1-i),T=[l,h,f,0,0,d,_,v,0,0,m,E,A,0,0,0,0,0,1,0];this._loadMatrix(T,n)},r.prototype.contrast=function(t,n){var i=(t||0)+1,s=-.5*(i-1),o=[i,0,0,0,s,0,i,0,0,s,0,0,i,0,s,0,0,0,1,0];this._loadMatrix(o,n)},r.prototype.saturate=function(t,n){t===void 0&&(t=0);var i=t*2/3+1,s=(i-1)*-.5,o=[i,s,s,0,0,s,i,s,0,0,s,s,i,0,0,0,0,0,1,0];this._loadMatrix(o,n)},r.prototype.desaturate=function(){this.saturate(-1)},r.prototype.negative=function(t){var n=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(n,t)},r.prototype.sepia=function(t){var n=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(n,t)},r.prototype.technicolor=function(t){var n=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(n,t)},r.prototype.polaroid=function(t){var n=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(n,t)},r.prototype.toBGR=function(t){var n=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(n,t)},r.prototype.kodachrome=function(t){var n=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(n,t)},r.prototype.browni=function(t){var n=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(n,t)},r.prototype.vintage=function(t){var n=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(n,t)},r.prototype.colorTone=function(t,n,i,s,o){t=t||.2,n=n||.15,i=i||16770432,s=s||3375104;var a=(i>>16&255)/255,u=(i>>8&255)/255,l=(i&255)/255,h=(s>>16&255)/255,f=(s>>8&255)/255,d=(s&255)/255,_=[.3,.59,.11,0,0,a,u,l,t,0,h,f,d,n,0,a-h,u-f,l-d,0,0];this._loadMatrix(_,o)},r.prototype.night=function(t,n){t=t||.1;var i=[t*-2,-t,0,0,0,-t,0,t,0,0,0,t,t*2,0,0,0,0,0,1,0];this._loadMatrix(i,n)},r.prototype.predator=function(t,n){var i=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(i,n)},r.prototype.lsd=function(t){var n=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(n,t)},r.prototype.reset=function(){var t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)},Object.defineProperty(r.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),r}(Filter);ColorMatrixFilter.prototype.grayscale=ColorMatrixFilter.prototype.greyscale;/*!
 * @pixi/filter-displacement - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/filter-displacement is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$4=function(e,r){return extendStatics$4=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},extendStatics$4(e,r)};function __extends$4(e,r){extendStatics$4(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var fragment$2=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,vertex$1=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;(function(e){__extends$4(r,e);function r(t,n){var i=this,s=new Matrix;return t.renderable=!1,i=e.call(this,vertex$1,fragment$2,{mapSampler:t._texture,filterMatrix:s,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this,i.maskSprite=t,i.maskMatrix=s,n==null&&(n=20),i.scale=new Point(n,n),i}return r.prototype.apply=function(t,n,i,s){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var o=this.maskSprite.worldTransform,a=Math.sqrt(o.a*o.a+o.b*o.b),u=Math.sqrt(o.c*o.c+o.d*o.d);a!==0&&u!==0&&(this.uniforms.rotation[0]=o.a/a,this.uniforms.rotation[1]=o.b/a,this.uniforms.rotation[2]=o.c/u,this.uniforms.rotation[3]=o.d/u),t.applyFilter(this,n,i,s)},Object.defineProperty(r.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t},enumerable:!1,configurable:!0}),r})(Filter);/*!
 * @pixi/filter-fxaa - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/filter-fxaa is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$3=function(e,r){return extendStatics$3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},extendStatics$3(e,r)};function __extends$3(e,r){extendStatics$3(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var vertex=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`,fragment$1=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`;(function(e){__extends$3(r,e);function r(){return e.call(this,vertex,fragment$1)||this}return r})(Filter);/*!
 * @pixi/filter-noise - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/filter-noise is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$2=function(e,r){return extendStatics$2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},extendStatics$2(e,r)};function __extends$2(e,r){extendStatics$2(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var fragment=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;(function(e){__extends$2(r,e);function r(t,n){t===void 0&&(t=.5),n===void 0&&(n=Math.random());var i=e.call(this,defaultFilterVertex,fragment,{uNoise:0,uSeed:0})||this;return i.noise=t,i.seed=n,i}return Object.defineProperty(r.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t},enumerable:!1,configurable:!0}),r})(Filter);/*!
 * @pixi/mixin-cache-as-bitmap - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/mixin-cache-as-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*!
 * @pixi/constants - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ENV$2;(function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"})(ENV$2||(ENV$2={}));var RENDERER_TYPE$2;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"})(RENDERER_TYPE$2||(RENDERER_TYPE$2={}));var BUFFER_BITS$2;(function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"})(BUFFER_BITS$2||(BUFFER_BITS$2={}));var BLEND_MODES$2;(function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"})(BLEND_MODES$2||(BLEND_MODES$2={}));var DRAW_MODES$2;(function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(DRAW_MODES$2||(DRAW_MODES$2={}));var FORMATS$2;(function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(FORMATS$2||(FORMATS$2={}));var TARGETS$2;(function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(TARGETS$2||(TARGETS$2={}));var TYPES$2;(function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"})(TYPES$2||(TYPES$2={}));var SAMPLER_TYPES$2;(function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"})(SAMPLER_TYPES$2||(SAMPLER_TYPES$2={}));var SCALE_MODES$2;(function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"})(SCALE_MODES$2||(SCALE_MODES$2={}));var WRAP_MODES$2;(function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(WRAP_MODES$2||(WRAP_MODES$2={}));var MIPMAP_MODES$2;(function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"})(MIPMAP_MODES$2||(MIPMAP_MODES$2={}));var ALPHA_MODES$2;(function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(ALPHA_MODES$2||(ALPHA_MODES$2={}));var CLEAR_MODES$2;(function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"})(CLEAR_MODES$2||(CLEAR_MODES$2={}));var GC_MODES$2;(function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"})(GC_MODES$2||(GC_MODES$2={}));var PRECISION$2;(function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"})(PRECISION$2||(PRECISION$2={}));var MASK_TYPES$2;(function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE",e[e.COLOR=4]="COLOR"})(MASK_TYPES$2||(MASK_TYPES$2={}));var COLOR_MASK_BITS$2;(function(e){e[e.RED=1]="RED",e[e.GREEN=2]="GREEN",e[e.BLUE=4]="BLUE",e[e.ALPHA=8]="ALPHA"})(COLOR_MASK_BITS$2||(COLOR_MASK_BITS$2={}));var MSAA_QUALITY$2;(function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"})(MSAA_QUALITY$2||(MSAA_QUALITY$2={}));var BUFFER_TYPE$2;(function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(BUFFER_TYPE$2||(BUFFER_TYPE$2={}));var _tempMatrix=new Matrix;DisplayObject.prototype._cacheAsBitmap=!1;DisplayObject.prototype._cacheData=null;DisplayObject.prototype._cacheAsBitmapResolution=null;DisplayObject.prototype._cacheAsBitmapMultisample=MSAA_QUALITY$2.NONE;var CacheData=function(){function e(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}return e}();Object.defineProperties(DisplayObject.prototype,{cacheAsBitmapResolution:{get:function(){return this._cacheAsBitmapResolution},set:function(e){e!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get:function(){return this._cacheAsBitmapMultisample},set:function(e){e!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(e){if(this._cacheAsBitmap!==e){this._cacheAsBitmap=e;var r;e?(this._cacheData||(this._cacheData=new CacheData),r=this._cacheData,r.originalRender=this.render,r.originalRenderCanvas=this.renderCanvas,r.originalUpdateTransform=this.updateTransform,r.originalCalculateBounds=this.calculateBounds,r.originalGetLocalBounds=this.getLocalBounds,r.originalDestroy=this.destroy,r.originalContainsPoint=this.containsPoint,r.originalMask=this._mask,r.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(r=this._cacheData,r.sprite&&this._destroyCachedDisplayObject(),this.render=r.originalRender,this.renderCanvas=r.originalRenderCanvas,this.calculateBounds=r.originalCalculateBounds,this.getLocalBounds=r.originalGetLocalBounds,this.destroy=r.originalDestroy,this.updateTransform=r.originalUpdateTransform,this.containsPoint=r.originalContainsPoint,this._mask=r.originalMask,this.filterArea=r.originalFilterArea)}}}});DisplayObject.prototype._renderCached=function(r){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(r),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(r))};DisplayObject.prototype._initCachedDisplayObject=function(r){var t;if(!(this._cacheData&&this._cacheData.sprite)){var n=this.alpha;this.alpha=1,r.batch.flush();var i=this.getLocalBounds(null,!0).clone();if(this.filters&&this.filters.length){var s=this.filters[0].padding;i.pad(s)}i.ceil(settings$1.RESOLUTION);var o=r.renderTexture.current,a=r.renderTexture.sourceFrame.clone(),u=r.renderTexture.destinationFrame.clone(),l=r.projection.transform,h=RenderTexture.create({width:i.width,height:i.height,resolution:this.cacheAsBitmapResolution||r.resolution,multisample:(t=this.cacheAsBitmapMultisample)!==null&&t!==void 0?t:r.multisample}),f="cacheAsBitmap_"+uid();this._cacheData.textureCacheId=f,BaseTexture.addToCache(h.baseTexture,f),Texture.addToCache(h,f);var d=this.transform.localTransform.copyTo(_tempMatrix).invert().translate(-i.x,-i.y);this.render=this._cacheData.originalRender,r.render(this,{renderTexture:h,clear:!0,transform:d,skipUpdateTransform:!1}),r.framebuffer.blit(),r.projection.transform=l,r.renderTexture.bind(o,a,u),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=n;var _=new Sprite(h);_.transform.worldTransform=this.transform.worldTransform,_.anchor.x=-(i.x/i.width),_.anchor.y=-(i.y/i.height),_.alpha=n,_._bounds=this._bounds,this._cacheData.sprite=_,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=_.containsPoint.bind(_)}};DisplayObject.prototype._renderCachedCanvas=function(r){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(r),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(r))};DisplayObject.prototype._initCachedDisplayObjectCanvas=function(r){if(!(this._cacheData&&this._cacheData.sprite)){var t=this.getLocalBounds(null,!0),n=this.alpha;this.alpha=1;var i=r.context,s=r._projTransform;t.ceil(settings$1.RESOLUTION);var o=RenderTexture.create({width:t.width,height:t.height}),a="cacheAsBitmap_"+uid();this._cacheData.textureCacheId=a,BaseTexture.addToCache(o.baseTexture,a),Texture.addToCache(o,a);var u=_tempMatrix;this.transform.localTransform.copyTo(u),u.invert(),u.tx-=t.x,u.ty-=t.y,this.renderCanvas=this._cacheData.originalRenderCanvas,r.render(this,{renderTexture:o,clear:!0,transform:u,skipUpdateTransform:!1}),r.context=i,r._projTransform=s,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=n;var l=new Sprite(o);l.transform.worldTransform=this.transform.worldTransform,l.anchor.x=-(t.x/t.width),l.anchor.y=-(t.y/t.height),l.alpha=n,l._bounds=this._bounds,this._cacheData.sprite=l,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=r._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=l.containsPoint.bind(l)}};DisplayObject.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};DisplayObject.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};DisplayObject.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,BaseTexture.removeFromCache(this._cacheData.textureCacheId),Texture.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};DisplayObject.prototype._cacheAsBitmapDestroy=function(r){this.cacheAsBitmap=!1,this.destroy(r)};/*!
 * @pixi/mixin-get-child-by-name - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/mixin-get-child-by-name is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */DisplayObject.prototype.name=null;Container.prototype.getChildByName=function(r,t){for(var n=0,i=this.children.length;n<i;n++)if(this.children[n].name===r)return this.children[n];if(t)for(var n=0,i=this.children.length;n<i;n++){var s=this.children[n];if(!!s.getChildByName){var o=s.getChildByName(r,!0);if(o)return o}}return null};/*!
 * @pixi/mixin-get-global-position - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/mixin-get-global-position is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */DisplayObject.prototype.getGlobalPosition=function(r,t){return r===void 0&&(r=new Point),t===void 0&&(t=!1),this.parent?this.parent.toGlobal(this.position,r,t):(r.x=this.position.x,r.y=this.position.y),r};/*!
 * @pixi/app - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/app is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ResizePlugin=function(){function e(){}return e.init=function(r){var t=this;Object.defineProperty(this,"resizeTo",{set:function(n){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=n,n&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){!t._resizeTo||(t.cancelResize(),t._resizeId=requestAnimationFrame(function(){return t.resize()}))},this.cancelResize=function(){t._resizeId&&(cancelAnimationFrame(t._resizeId),t._resizeId=null)},this.resize=function(){if(!!t._resizeTo){t.cancelResize();var n,i;if(t._resizeTo===globalThis.window)n=globalThis.innerWidth,i=globalThis.innerHeight;else{var s=t._resizeTo,o=s.clientWidth,a=s.clientHeight;n=o,i=a}t.renderer.resize(n,i)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=r.resizeTo||null},e.destroy=function(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},e.extension=ExtensionType.Application,e}();/*!
 * @pixi/settings - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*!
 * @pixi/constants - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ENV$1;(function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"})(ENV$1||(ENV$1={}));var RENDERER_TYPE$1;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"})(RENDERER_TYPE$1||(RENDERER_TYPE$1={}));var BUFFER_BITS$1;(function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"})(BUFFER_BITS$1||(BUFFER_BITS$1={}));var BLEND_MODES$1;(function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"})(BLEND_MODES$1||(BLEND_MODES$1={}));var DRAW_MODES$1;(function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(DRAW_MODES$1||(DRAW_MODES$1={}));var FORMATS$1;(function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(FORMATS$1||(FORMATS$1={}));var TARGETS$1;(function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(TARGETS$1||(TARGETS$1={}));var TYPES$1;(function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"})(TYPES$1||(TYPES$1={}));var SAMPLER_TYPES$1;(function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"})(SAMPLER_TYPES$1||(SAMPLER_TYPES$1={}));var SCALE_MODES$1;(function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"})(SCALE_MODES$1||(SCALE_MODES$1={}));var WRAP_MODES$1;(function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(WRAP_MODES$1||(WRAP_MODES$1={}));var MIPMAP_MODES$1;(function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"})(MIPMAP_MODES$1||(MIPMAP_MODES$1={}));var ALPHA_MODES$1;(function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(ALPHA_MODES$1||(ALPHA_MODES$1={}));var CLEAR_MODES$1;(function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"})(CLEAR_MODES$1||(CLEAR_MODES$1={}));var GC_MODES$1;(function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"})(GC_MODES$1||(GC_MODES$1={}));var PRECISION$1;(function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"})(PRECISION$1||(PRECISION$1={}));var MASK_TYPES$1;(function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE",e[e.COLOR=4]="COLOR"})(MASK_TYPES$1||(MASK_TYPES$1={}));var COLOR_MASK_BITS$1;(function(e){e[e.RED=1]="RED",e[e.GREEN=2]="GREEN",e[e.BLUE=4]="BLUE",e[e.ALPHA=8]="ALPHA"})(COLOR_MASK_BITS$1||(COLOR_MASK_BITS$1={}));var MSAA_QUALITY$1;(function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"})(MSAA_QUALITY$1||(MSAA_QUALITY$1={}));var BUFFER_TYPE$1;(function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(BUFFER_TYPE$1||(BUFFER_TYPE$1={}));var BrowserAdapter={createCanvas:function(e,r){var t=document.createElement("canvas");return t.width=e,t.height=r,t},getWebGLRenderingContext:function(){return WebGLRenderingContext},getNavigator:function(){return navigator},getBaseUrl:function(){var e;return(e=document.baseURI)!==null&&e!==void 0?e:window.location.href},fetch:function(e,r){return fetch(e,r)}},appleIphone=/iPhone/i,appleIpod=/iPod/i,appleTablet=/iPad/i,appleUniversal=/\biOS-universal(?:.+)Mac\b/i,androidPhone=/\bAndroid(?:.+)Mobile\b/i,androidTablet=/Android/i,amazonPhone=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,amazonTablet=/Silk/i,windowsPhone=/Windows Phone/i,windowsTablet=/\bWindows(?:.+)ARM\b/i,otherBlackBerry=/BlackBerry/i,otherBlackBerry10=/BB10/i,otherOpera=/Opera Mini/i,otherChrome=/\b(CriOS|Chrome)(?:.+)Mobile/i,otherFirefox=/Mobile(?:.+)Firefox\b/i,isAppleTabletOnIos13=function(e){return typeof e<"u"&&e.platform==="MacIntel"&&typeof e.maxTouchPoints=="number"&&e.maxTouchPoints>1&&typeof MSStream>"u"};function createMatch(e){return function(r){return r.test(e)}}function isMobile$1(e){var r={userAgent:"",platform:"",maxTouchPoints:0};!e&&typeof navigator<"u"?r={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof e=="string"?r.userAgent=e:e&&e.userAgent&&(r={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0});var t=r.userAgent,n=t.split("[FBAN");typeof n[1]<"u"&&(t=n[0]),n=t.split("Twitter"),typeof n[1]<"u"&&(t=n[0]);var i=createMatch(t),s={apple:{phone:i(appleIphone)&&!i(windowsPhone),ipod:i(appleIpod),tablet:!i(appleIphone)&&(i(appleTablet)||isAppleTabletOnIos13(r))&&!i(windowsPhone),universal:i(appleUniversal),device:(i(appleIphone)||i(appleIpod)||i(appleTablet)||i(appleUniversal)||isAppleTabletOnIos13(r))&&!i(windowsPhone)},amazon:{phone:i(amazonPhone),tablet:!i(amazonPhone)&&i(amazonTablet),device:i(amazonPhone)||i(amazonTablet)},android:{phone:!i(windowsPhone)&&i(amazonPhone)||!i(windowsPhone)&&i(androidPhone),tablet:!i(windowsPhone)&&!i(amazonPhone)&&!i(androidPhone)&&(i(amazonTablet)||i(androidTablet)),device:!i(windowsPhone)&&(i(amazonPhone)||i(amazonTablet)||i(androidPhone)||i(androidTablet))||i(/\bokhttp\b/i)},windows:{phone:i(windowsPhone),tablet:i(windowsTablet),device:i(windowsPhone)||i(windowsTablet)},other:{blackberry:i(otherBlackBerry),blackberry10:i(otherBlackBerry10),opera:i(otherOpera),firefox:i(otherFirefox),chrome:i(otherChrome),device:i(otherBlackBerry)||i(otherBlackBerry10)||i(otherOpera)||i(otherFirefox)||i(otherChrome)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}var isMobile=isMobile$1(globalThis.navigator);function canUploadSameBuffer(){return!isMobile.apple.device}function maxRecommendedTextures(e){var r=!0;if(isMobile.tablet||isMobile.phone){if(isMobile.apple.device){var t=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(t){var n=parseInt(t[1],10);n<11&&(r=!1)}}if(isMobile.android.device){var t=navigator.userAgent.match(/Android\s([0-9.]*)/);if(t){var n=parseInt(t[1],10);n<7&&(r=!1)}}}return r?e:4}var settings={ADAPTER:BrowserAdapter,MIPMAP_TEXTURES:MIPMAP_MODES$1.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:MSAA_QUALITY$1.NONE,SPRITE_MAX_TEXTURES:maxRecommendedTextures(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:GC_MODES$1.AUTO,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:WRAP_MODES$1.CLAMP,SCALE_MODE:SCALE_MODES$1.LINEAR,PRECISION_VERTEX:PRECISION$1.HIGH,PRECISION_FRAGMENT:isMobile.apple.device?PRECISION$1.HIGH:PRECISION$1.MEDIUM,CAN_UPLOAD_SAME_BUFFER:canUploadSameBuffer(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function createCommonjsModule(e,r,t){return t={path:r,exports:{},require:function(n,i){return commonjsRequire(n,i==null?t.path:i)}},e(t,t.exports),t.exports}function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}createCommonjsModule(function(e){var r=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function i(u,l,h){this.fn=u,this.context=l,this.once=h||!1}function s(u,l,h,f,d){if(typeof h!="function")throw new TypeError("The listener must be a function");var _=new i(h,f||u,d),v=t?t+l:l;return u._events[v]?u._events[v].fn?u._events[v]=[u._events[v],_]:u._events[v].push(_):(u._events[v]=_,u._eventsCount++),u}function o(u,l){--u._eventsCount===0?u._events=new n:delete u._events[l]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],h,f;if(this._eventsCount===0)return l;for(f in h=this._events)r.call(h,f)&&l.push(t?f.slice(1):f);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(h)):l},a.prototype.listeners=function(l){var h=t?t+l:l,f=this._events[h];if(!f)return[];if(f.fn)return[f.fn];for(var d=0,_=f.length,v=new Array(_);d<_;d++)v[d]=f[d].fn;return v},a.prototype.listenerCount=function(l){var h=t?t+l:l,f=this._events[h];return f?f.fn?1:f.length:0},a.prototype.emit=function(l,h,f,d,_,v){var m=arguments,E=t?t+l:l;if(!this._events[E])return!1;var A=this._events[E],T=arguments.length,C,R;if(A.fn){switch(A.once&&this.removeListener(l,A.fn,void 0,!0),T){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,h),!0;case 3:return A.fn.call(A.context,h,f),!0;case 4:return A.fn.call(A.context,h,f,d),!0;case 5:return A.fn.call(A.context,h,f,d,_),!0;case 6:return A.fn.call(A.context,h,f,d,_,v),!0}for(R=1,C=new Array(T-1);R<T;R++)C[R-1]=m[R];A.fn.apply(A.context,C)}else{var b=A.length,S;for(R=0;R<b;R++)switch(A[R].once&&this.removeListener(l,A[R].fn,void 0,!0),T){case 1:A[R].fn.call(A[R].context);break;case 2:A[R].fn.call(A[R].context,h);break;case 3:A[R].fn.call(A[R].context,h,f);break;case 4:A[R].fn.call(A[R].context,h,f,d);break;default:if(!C)for(S=1,C=new Array(T-1);S<T;S++)C[S-1]=m[S];A[R].fn.apply(A[R].context,C)}}return!0},a.prototype.on=function(l,h,f){return s(this,l,h,f,!1)},a.prototype.once=function(l,h,f){return s(this,l,h,f,!0)},a.prototype.removeListener=function(l,h,f,d){var _=t?t+l:l;if(!this._events[_])return this;if(!h)return o(this,_),this;var v=this._events[_];if(v.fn)v.fn===h&&(!d||v.once)&&(!f||v.context===f)&&o(this,_);else{for(var m=0,E=[],A=v.length;m<A;m++)(v[m].fn!==h||d&&!v[m].once||f&&v[m].context!==f)&&E.push(v[m]);E.length?this._events[_]=E.length===1?E[0]:E:o(this,_)}return this},a.prototype.removeAllListeners=function(l){var h;return l?(h=t?t+l:l,this._events[h]&&o(this,h)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,e.exports=a});createCommonjsModule(function(e,r){(function(t){var n=r&&!r.nodeType&&r,i=e&&!e.nodeType&&e,s=typeof commonjsGlobal=="object"&&commonjsGlobal;(s.global===s||s.window===s||s.self===s)&&(t=s);var o,a=2147483647,u=36,l=1,h=26,f=38,d=700,_=72,v=128,m="-",E=/^xn--/,A=/[^\x20-\x7E]/,T=/[\x2E\u3002\uFF0E\uFF61]/g,C={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},R=u-l,b=Math.floor,S=String.fromCharCode,B;function M(O){throw RangeError(C[O])}function D(O,V){for(var Z=O.length,ee=[];Z--;)ee[Z]=V(O[Z]);return ee}function G(O,V){var Z=O.split("@"),ee="";Z.length>1&&(ee=Z[0]+"@",O=Z[1]),O=O.replace(T,".");var oe=O.split("."),ge=D(oe,V).join(".");return ee+ge}function J(O){for(var V=[],Z=0,ee=O.length,oe,ge;Z<ee;)oe=O.charCodeAt(Z++),oe>=55296&&oe<=56319&&Z<ee?(ge=O.charCodeAt(Z++),(ge&64512)==56320?V.push(((oe&1023)<<10)+(ge&1023)+65536):(V.push(oe),Z--)):V.push(oe);return V}function re(O){return D(O,function(V){var Z="";return V>65535&&(V-=65536,Z+=S(V>>>10&1023|55296),V=56320|V&1023),Z+=S(V),Z}).join("")}function ne(O){return O-48<10?O-22:O-65<26?O-65:O-97<26?O-97:u}function de(O,V){return O+22+75*(O<26)-((V!=0)<<5)}function q(O,V,Z){var ee=0;for(O=Z?b(O/d):O>>1,O+=b(O/V);O>R*h>>1;ee+=u)O=b(O/R);return b(ee+(R+1)*O/(O+f))}function z(O){var V=[],Z=O.length,ee,oe=0,ge=v,ce=_,pe,Ae,Ee,me,he,ve,P,N,$;for(pe=O.lastIndexOf(m),pe<0&&(pe=0),Ae=0;Ae<pe;++Ae)O.charCodeAt(Ae)>=128&&M("not-basic"),V.push(O.charCodeAt(Ae));for(Ee=pe>0?pe+1:0;Ee<Z;){for(me=oe,he=1,ve=u;Ee>=Z&&M("invalid-input"),P=ne(O.charCodeAt(Ee++)),(P>=u||P>b((a-oe)/he))&&M("overflow"),oe+=P*he,N=ve<=ce?l:ve>=ce+h?h:ve-ce,!(P<N);ve+=u)$=u-N,he>b(a/$)&&M("overflow"),he*=$;ee=V.length+1,ce=q(oe-me,ee,me==0),b(oe/ee)>a-ge&&M("overflow"),ge+=b(oe/ee),oe%=ee,V.splice(oe++,0,ge)}return re(V)}function te(O){var V,Z,ee,oe,ge,ce,pe,Ae,Ee,me,he,ve=[],P,N,$,U;for(O=J(O),P=O.length,V=v,Z=0,ge=_,ce=0;ce<P;++ce)he=O[ce],he<128&&ve.push(S(he));for(ee=oe=ve.length,oe&&ve.push(m);ee<P;){for(pe=a,ce=0;ce<P;++ce)he=O[ce],he>=V&&he<pe&&(pe=he);for(N=ee+1,pe-V>b((a-Z)/N)&&M("overflow"),Z+=(pe-V)*N,V=pe,ce=0;ce<P;++ce)if(he=O[ce],he<V&&++Z>a&&M("overflow"),he==V){for(Ae=Z,Ee=u;me=Ee<=ge?l:Ee>=ge+h?h:Ee-ge,!(Ae<me);Ee+=u)U=Ae-me,$=u-me,ve.push(S(de(me+U%$,0))),Ae=b(U/$);ve.push(S(de(Ae,0))),ge=q(Z,N,ee==oe),Z=0,++ee}++Z,++V}return ve.join("")}function ue(O){return G(O,function(V){return E.test(V)?z(V.slice(4).toLowerCase()):V})}function le(O){return G(O,function(V){return A.test(V)?"xn--"+te(V):V})}if(o={version:"1.3.2",ucs2:{decode:J,encode:re},decode:z,encode:te,toASCII:le,toUnicode:ue},n&&i)if(e.exports==n)i.exports=o;else for(B in o)o.hasOwnProperty(B)&&(n[B]=o[B]);else t.punycode=o})(commonjsGlobal)});function hasOwnProperty(e,r){return Object.prototype.hasOwnProperty.call(e,r)}var decode=function(e,r,t,n){r=r||"&",t=t||"=";var i={};if(typeof e!="string"||e.length===0)return i;var s=/\+/g;e=e.split(r);var o=1e3;n&&typeof n.maxKeys=="number"&&(o=n.maxKeys);var a=e.length;o>0&&a>o&&(a=o);for(var u=0;u<a;++u){var l=e[u].replace(s,"%20"),h=l.indexOf(t),f,d,_,v;h>=0?(f=l.substr(0,h),d=l.substr(h+1)):(f=l,d=""),_=decodeURIComponent(f),v=decodeURIComponent(d),hasOwnProperty(i,_)?Array.isArray(i[_])?i[_].push(v):i[_]=[i[_],v]:i[_]=v}return i},stringifyPrimitive=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},encode=function(e,r,t,n){return r=r||"&",t=t||"=",e===null&&(e=void 0),typeof e=="object"?Object.keys(e).map(function(i){var s=encodeURIComponent(stringifyPrimitive(i))+t;return Array.isArray(e[i])?e[i].map(function(o){return s+encodeURIComponent(stringifyPrimitive(o))}).join(r):s+encodeURIComponent(stringifyPrimitive(e[i]))}).join(r):n?encodeURIComponent(stringifyPrimitive(n))+t+encodeURIComponent(stringifyPrimitive(e)):""};createCommonjsModule(function(e,r){r.decode=r.parse=decode,r.encode=r.stringify=encode});/*!
 * @pixi/constants - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ENV;(function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"})(ENV||(ENV={}));var RENDERER_TYPE;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"})(RENDERER_TYPE||(RENDERER_TYPE={}));var BUFFER_BITS;(function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"})(BUFFER_BITS||(BUFFER_BITS={}));var BLEND_MODES;(function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"})(BLEND_MODES||(BLEND_MODES={}));var DRAW_MODES;(function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(DRAW_MODES||(DRAW_MODES={}));var FORMATS;(function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(FORMATS||(FORMATS={}));var TARGETS;(function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(TARGETS||(TARGETS={}));var TYPES;(function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"})(TYPES||(TYPES={}));var SAMPLER_TYPES;(function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"})(SAMPLER_TYPES||(SAMPLER_TYPES={}));var SCALE_MODES;(function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"})(SCALE_MODES||(SCALE_MODES={}));var WRAP_MODES;(function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(WRAP_MODES||(WRAP_MODES={}));var MIPMAP_MODES;(function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"})(MIPMAP_MODES||(MIPMAP_MODES={}));var ALPHA_MODES;(function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(ALPHA_MODES||(ALPHA_MODES={}));var CLEAR_MODES;(function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"})(CLEAR_MODES||(CLEAR_MODES={}));var GC_MODES;(function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"})(GC_MODES||(GC_MODES={}));var PRECISION;(function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"})(PRECISION||(PRECISION={}));var MASK_TYPES;(function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE",e[e.COLOR=4]="COLOR"})(MASK_TYPES||(MASK_TYPES={}));var COLOR_MASK_BITS;(function(e){e[e.RED=1]="RED",e[e.GREEN=2]="GREEN",e[e.BLUE=4]="BLUE",e[e.ALPHA=8]="ALPHA"})(COLOR_MASK_BITS||(COLOR_MASK_BITS={}));var MSAA_QUALITY;(function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"})(MSAA_QUALITY||(MSAA_QUALITY={}));var BUFFER_TYPE;(function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(BUFFER_TYPE||(BUFFER_TYPE={}));/*!
 * @pixi/utils - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */settings.RETINA_PREFIX=/@([0-9\.]+)x/;settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;function mapPremultipliedBlendModes(){for(var e=[],r=[],t=0;t<32;t++)e[t]=t,r[t]=t;e[BLEND_MODES.NORMAL_NPM]=BLEND_MODES.NORMAL,e[BLEND_MODES.ADD_NPM]=BLEND_MODES.ADD,e[BLEND_MODES.SCREEN_NPM]=BLEND_MODES.SCREEN,r[BLEND_MODES.NORMAL]=BLEND_MODES.NORMAL_NPM,r[BLEND_MODES.ADD]=BLEND_MODES.ADD_NPM,r[BLEND_MODES.SCREEN]=BLEND_MODES.SCREEN_NPM;var n=[];return n.push(r),n.push(e),n}mapPremultipliedBlendModes();var warnings={};function deprecation(e,r,t){if(t===void 0&&(t=3),!warnings[r]){var n=new Error().stack;typeof n>"u"?console.warn("PixiJS Deprecation Warning: ",r+`
Deprecated since v`+e):(n=n.split(`
`).splice(t).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",r+`
Deprecated since v`+e),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",r+`
Deprecated since v`+e),console.warn(n))),warnings[r]=!0}}(function(){function e(r,t,n){this.canvas=settings.ADAPTER.createCanvas(),this.context=this.canvas.getContext("2d"),this.resolution=n||settings.RESOLUTION,this.resize(r,t)}return e.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},e.prototype.resize=function(r,t){this.canvas.width=Math.round(r*this.resolution),this.canvas.height=Math.round(t*this.resolution)},e.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.canvas.width},set:function(r){this.canvas.width=Math.round(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.canvas.height},set:function(r){this.canvas.height=Math.round(r)},enumerable:!1,configurable:!0}),e})();var Application=function(){function e(r){var t=this;this.stage=new Container,r=Object.assign({forceCanvas:!1},r),this.renderer=autoDetectRenderer(r),e._plugins.forEach(function(n){n.init.call(t,r)})}return e.registerPlugin=function(r){deprecation("6.5.0","Application.registerPlugin() is deprecated, use extensions.add()"),extensions.add({type:ExtensionType.Application,ref:r})},e.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(e.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),e.prototype.destroy=function(r,t){var n=this,i=e._plugins.slice(0);i.reverse(),i.forEach(function(s){s.destroy.call(n)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(r),this.renderer=null},e._plugins=[],e}();extensions.handleByList(ExtensionType.Application,Application._plugins);extensions.add(ResizePlugin);/*!
 * @pixi/mesh-extras - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/mesh-extras is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$1=function(e,r){return extendStatics$1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},extendStatics$1(e,r)};function __extends$1(e,r){extendStatics$1(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var PlaneGeometry=function(e){__extends$1(r,e);function r(t,n,i,s){t===void 0&&(t=100),n===void 0&&(n=100),i===void 0&&(i=10),s===void 0&&(s=10);var o=e.call(this)||this;return o.segWidth=i,o.segHeight=s,o.width=t,o.height=n,o.build(),o}return r.prototype.build=function(){for(var t=this.segWidth*this.segHeight,n=[],i=[],s=[],o=this.segWidth-1,a=this.segHeight-1,u=this.width/o,l=this.height/a,h=0;h<t;h++){var f=h%this.segWidth,d=h/this.segWidth|0;n.push(f*u,d*l),i.push(f/o,d/a)}for(var _=o*a,h=0;h<_;h++){var v=h%o,m=h/o|0,E=m*this.segWidth+v,A=m*this.segWidth+v+1,T=(m+1)*this.segWidth+v,C=(m+1)*this.segWidth+v+1;s.push(E,A,T,A,C,T)}this.buffers[0].data=new Float32Array(n),this.buffers[1].data=new Float32Array(i),this.indexBuffer.data=new Uint16Array(s),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},r}(MeshGeometry),RopeGeometry=function(e){__extends$1(r,e);function r(t,n,i){t===void 0&&(t=200),i===void 0&&(i=0);var s=e.call(this,new Float32Array(n.length*4),new Float32Array(n.length*4),new Uint16Array((n.length-1)*6))||this;return s.points=n,s._width=t,s.textureScale=i,s.build(),s}return Object.defineProperty(r.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),r.prototype.build=function(){var t=this.points;if(!!t){var n=this.getBuffer("aVertexPosition"),i=this.getBuffer("aTextureCoord"),s=this.getIndex();if(!(t.length<1)){n.data.length/4!==t.length&&(n.data=new Float32Array(t.length*4),i.data=new Float32Array(t.length*4),s.data=new Uint16Array((t.length-1)*6));var o=i.data,a=s.data;o[0]=0,o[1]=0,o[2]=0,o[3]=1;for(var u=0,l=t[0],h=this._width*this.textureScale,f=t.length,d=0;d<f;d++){var _=d*4;if(this.textureScale>0){var v=l.x-t[d].x,m=l.y-t[d].y,E=Math.sqrt(v*v+m*m);l=t[d],u+=E/h}else u=d/(f-1);o[_]=u,o[_+1]=0,o[_+2]=u,o[_+3]=1}for(var A=0,d=0;d<f-1;d++){var _=d*2;a[A++]=_,a[A++]=_+1,a[A++]=_+2,a[A++]=_+2,a[A++]=_+1,a[A++]=_+3}i.update(),s.update(),this.updateVertices()}}},r.prototype.updateVertices=function(){var t=this.points;if(!(t.length<1)){for(var n=t[0],i,s=0,o=0,a=this.buffers[0].data,u=t.length,l=0;l<u;l++){var h=t[l],f=l*4;l<t.length-1?i=t[l+1]:i=h,o=-(i.x-n.x),s=i.y-n.y;var d=Math.sqrt(s*s+o*o),_=this.textureScale>0?this.textureScale*this._width/2:this._width/2;s/=d,o/=d,s*=_,o*=_,a[f]=h.x+s,a[f+1]=h.y+o,a[f+2]=h.x-s,a[f+3]=h.y-o,n=h}this.buffers[0].update()}},r.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},r}(MeshGeometry);(function(e){__extends$1(r,e);function r(t,n,i){i===void 0&&(i=0);var s=this,o=new RopeGeometry(t.height,n,i),a=new MeshMaterial(t);return i>0&&(t.baseTexture.wrapMode=WRAP_MODES$5.REPEAT),s=e.call(this,o,a)||this,s.autoUpdate=!0,s}return r.prototype._render=function(t){var n=this.geometry;(this.autoUpdate||n._width!==this.shader.texture.height)&&(n._width=this.shader.texture.height,n.update()),e.prototype._render.call(this,t)},r})(Mesh);var SimplePlane=function(e){__extends$1(r,e);function r(t,n,i){var s=this,o=new PlaneGeometry(t.width,t.height,n,i),a=new MeshMaterial(Texture.WHITE);return s=e.call(this,o,a)||this,s.texture=t,s.autoResize=!0,s}return r.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var t=this.geometry,n=this.shader.texture,i=n.width,s=n.height;this.autoResize&&(t.width!==i||t.height!==s)&&(t.width=this.shader.texture.width,t.height=this.shader.texture.height,t.build())},Object.defineProperty(r.prototype,"texture",{get:function(){return this.shader.texture},set:function(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),r.prototype._render=function(t){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),e.prototype._render.call(this,t)},r.prototype.destroy=function(t){this.shader.texture.off("update",this.textureUpdated,this),e.prototype.destroy.call(this,t)},r}(Mesh);(function(e){__extends$1(r,e);function r(t,n,i,s,o){t===void 0&&(t=Texture.EMPTY);var a=this,u=new MeshGeometry(n,i,s);u.getBuffer("aVertexPosition").static=!1;var l=new MeshMaterial(t);return a=e.call(this,u,l,null,o)||this,a.autoUpdate=!0,a}return Object.defineProperty(r.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),r.prototype._render=function(t){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),e.prototype._render.call(this,t)},r})(Mesh);var DEFAULT_BORDER_SIZE=10;(function(e){__extends$1(r,e);function r(t,n,i,s,o){n===void 0&&(n=DEFAULT_BORDER_SIZE),i===void 0&&(i=DEFAULT_BORDER_SIZE),s===void 0&&(s=DEFAULT_BORDER_SIZE),o===void 0&&(o=DEFAULT_BORDER_SIZE);var a=e.call(this,Texture.WHITE,4,4)||this;return a._origWidth=t.orig.width,a._origHeight=t.orig.height,a._width=a._origWidth,a._height=a._origHeight,a._leftWidth=n,a._rightWidth=s,a._topHeight=i,a._bottomHeight=o,a.texture=t,a}return r.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(r.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),r.prototype.updateHorizontalVertices=function(){var t=this.vertices,n=this._getMinScale();t[9]=t[11]=t[13]=t[15]=this._topHeight*n,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*n,t[25]=t[27]=t[29]=t[31]=this._height},r.prototype.updateVerticalVertices=function(){var t=this.vertices,n=this._getMinScale();t[2]=t[10]=t[18]=t[26]=this._leftWidth*n,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*n,t[6]=t[14]=t[22]=t[30]=this._width},r.prototype._getMinScale=function(){var t=this._leftWidth+this._rightWidth,n=this._width>t?1:this._width/t,i=this._topHeight+this._bottomHeight,s=this._height>i?1:this._height/i,o=Math.min(n,s);return o},Object.defineProperty(r.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"topHeight",{get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()},enumerable:!1,configurable:!0}),r.prototype._refresh=function(){var t=this.texture,n=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;var i=1/this._origWidth,s=1/this._origHeight;n[0]=n[8]=n[16]=n[24]=0,n[1]=n[3]=n[5]=n[7]=0,n[6]=n[14]=n[22]=n[30]=1,n[25]=n[27]=n[29]=n[31]=1,n[2]=n[10]=n[18]=n[26]=i*this._leftWidth,n[4]=n[12]=n[20]=n[28]=1-i*this._rightWidth,n[9]=n[11]=n[13]=n[15]=s*this._topHeight,n[17]=n[19]=n[21]=n[23]=1-s*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},r})(SimplePlane);/*!
 * @pixi/sprite-animated - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/sprite-animated is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(e,r){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},extendStatics(e,r)};function __extends(e,r){extendStatics(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}(function(e){__extends(r,e);function r(t,n){n===void 0&&(n=!0);var i=e.call(this,t[0]instanceof Texture?t[0]:t[0].texture)||this;return i._textures=null,i._durations=null,i._autoUpdate=n,i._isConnectedToTicker=!1,i.animationSpeed=1,i.loop=!0,i.updateAnchor=!1,i.onComplete=null,i.onFrameChange=null,i.onLoop=null,i._currentTime=0,i._playing=!1,i._previousFrame=null,i.textures=t,i}return r.prototype.stop=function(){!this._playing||(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1))},r.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Ticker.shared.add(this.update,this,UPDATE_PRIORITY.HIGH),this._isConnectedToTicker=!0))},r.prototype.gotoAndStop=function(t){this.stop();var n=this.currentFrame;this._currentTime=t,n!==this.currentFrame&&this.updateTexture()},r.prototype.gotoAndPlay=function(t){var n=this.currentFrame;this._currentTime=t,n!==this.currentFrame&&this.updateTexture(),this.play()},r.prototype.update=function(t){if(!!this._playing){var n=this.animationSpeed*t,i=this.currentFrame;if(this._durations!==null){var s=this._currentTime%1*this._durations[this.currentFrame];for(s+=n/60*1e3;s<0;)this._currentTime--,s+=this._durations[this.currentFrame];var o=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);s>=this._durations[this.currentFrame];)s-=this._durations[this.currentFrame]*o,this._currentTime+=o;this._currentTime+=s/this._durations[this.currentFrame]}else this._currentTime+=n;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):i!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<i?this.onLoop():this.animationSpeed<0&&this.currentFrame>i&&this.onLoop()),this.updateTexture())}},r.prototype.updateTexture=function(){var t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},r.prototype.destroy=function(t){this.stop(),e.prototype.destroy.call(this,t),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},r.fromFrames=function(t){for(var n=[],i=0;i<t.length;++i)n.push(Texture.from(t[i]));return new r(n)},r.fromImages=function(t){for(var n=[],i=0;i<t.length;++i)n.push(Texture.from(t[i]));return new r(n)},Object.defineProperty(r.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"textures",{get:function(){return this._textures},set:function(t){if(t[0]instanceof Texture)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var n=0;n<t.length;n++)this._textures.push(t[n].texture),this._durations.push(t[n].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"currentFrame",{get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Ticker.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),r})(Sprite);/*!
 * pixi.js - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */extensions.add(AccessibilityManager,Extract,InteractionManager,ParticleRenderer,Prepare,BatchRenderer,TilingSpriteRenderer,BitmapFontLoader,CompressedTextureLoader,DDSLoader,KTXLoader,SpritesheetLoader,TickerPlugin,AppLoaderPlugin);const RESOLUTION=2;function resize(e){return+(e/RESOLUTION).toPrecision(12)}const DEFAULT_SETTINGS={debug:!1,width:resize(1500),height:resize(2100)};var FONT_SCALE=(e=>(e[e.Normal=1]="Normal",e[e.Small=2]="Small",e[e.Middle=3]="Middle",e[e.MiddleS=4]="MiddleS",e))(FONT_SCALE||{});class BaseDomain{constructor(r={}){Ne(this,"baseImage","");Ne(this,"rawTextList",[]);Ne(this,"innerId",0);Ne(this,"file",null);Ne(this,"pixiApp",null);Ne(this,"container",null);Ne(this,"settings",{...DEFAULT_SETTINGS});this.settings={...DEFAULT_SETTINGS,...r}}initFile(r){this.file=r;const t=new FileReader;t.addEventListener("load",()=>{this.baseImage=t.result;const n=new Texture(new BaseTexture(this.baseImage)),i=Sprite.from(n,{width:n.width,height:n.height});i.scale={x:1/RESOLUTION,y:1/RESOLUTION},i.zIndex=1,this.pixiApp.stage.addChild(i)}),t.readAsDataURL(this.file)}initCanvas(r){this.pixiApp=new Application({view:r,width:this.settings.width,height:this.settings.height,backgroundAlpha:0,antialias:!0,resolution:RESOLUTION}),this.pixiApp.stage.sortableChildren=!0;const t=new Container;t.x=0,t.y=0,t.zIndex=10,this.pixiApp.stage.addChild(t),this.container=t}addRawTextBlock(r){var i;const t={id:++this.innerId,content:"",color:"#000",scale:FONT_SCALE.Normal,align:"left",displayType:"title",x:0,y:0,width:100,height:100,...r};this.rawTextList.push(t),this.settings.debug&&console.log("[DEBUG] new raw text block",t,this.rawTextList.length);const n=new Container;if(n.x=resize(t.x),n.y=resize(t.y),this.settings.debug){const s=new Graphics;s.lineStyle(2,16711680,1),s.drawRect(-2,-2,resize(t.width),resize(t.height)),s.x=0,s.y=0,n.addChild(s)}(i=this.container)==null||i.addChild(n)}findTextBlockById(r){var n;const t=this.rawTextList.findIndex(i=>i.id===r);if(t<0)throw new Error(`block can not found: id=${r}`);if(!((n=this.container)!=null&&n.children[t]))throw new Error(`container missing: index=${t}`);return{index:t,info:this.rawTextList[t],container:this.container.children[t]}}updateRawTextInfo(r,t){const n=this.findTextBlockById(r),i={...n.info,...t};return this.settings.debug&&console.log("[DEBUG] update raw text info",{...n.info},t,i),this.rawTextList[n.index]=i,{...n,info:i}}updateTextBlockPosition(r,t){const{info:n,container:i}=this.updateRawTextInfo(r,t);if(i.x=resize(n.x),i.y=resize(n.y),t.width||t.height){if(this.settings.debug&&i.children[0]instanceof Graphics){const s=i.children[0];s.clear(),s.lineStyle(2,16711680,1),s.drawRect(-2,-2,resize(n.width),resize(n.height))}this.reBuildTextContent(i,n)}}reBuildTextContent(r,t){const n=r.children[0]instanceof Graphics?r.children[0]:void 0;r.removeChildren(),n&&r.addChild(n),this.buildTextContent(r,t)}updateTextContent(r,t){const{info:n,container:i}=this.updateRawTextInfo(r,{content:t});this.reBuildTextContent(i,n)}removeTextBlock(r){var i;const{index:t,container:n}=this.findTextBlockById(r);this.rawTextList.splice(t,1),n.destroy({children:!0}),(i=this.container)==null||i.removeChild(n),this.settings.debug&&console.log("[DEBUG] remove text block done",r,t)}destroy(){var r;this.file=null,(r=this.pixiApp)==null||r.destroy(),this.pixiApp=null}buildTextContent(r,t){throw new Error("need implemented")}}function buildSingleLineText(e,r,t){const n=new TextStyle({fill:0,...r}),i=new Text(e,n);if(i.x=0,i.y=0,t!=null&&t.maxWidth){const s=t.maxWidth,o=TextMetrics.measureText(e,n);o.width>s&&(i.scale.x=s/o.width)}if((t==null?void 0:t.maxWidth)&&(t==null?void 0:t.align)){const s=t.maxWidth;t.align==="center"&&(i.anchor.set(.5,0),i.x=+(s/2).toPrecision(10))}return i}const setProtoOf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])};class GrammarError$3 extends Error{constructor(r,t,n){super(r),setProtoOf(this,GrammarError$3.prototype),this.name="GrammarError",this.location=t,n===void 0&&(n=[]),this.diagnostics=n,this.stage=null,this.problems=[["error",r,t,n]]}toString(){let r=super.toString();this.location&&(r+=`
 at `,this.location.source!==void 0&&this.location.source!==null&&(r+=`${this.location.source}:`),r+=`${this.location.start.line}:${this.location.start.column}`);for(const t of this.diagnostics)r+=`
 from `,t.location.source!==void 0&&t.location.source!==null&&(r+=`${t.location.source}:`),r+=`${t.location.start.line}:${t.location.start.column}: ${t.message}`;return r}format(r){const t=r.map(({source:s,text:o})=>({source:s,text:o.split(/\r\n|\n|\r/g)}));function n(s,o,a=""){let u="";const l=t.find(({source:f})=>f===s.source),h=s.start;if(l){const f=s.end,d=l.text[h.line-1],v=(h.line===f.line?f.column:d.length+1)-h.column||1;a&&(u+=`
note: ${a}`),u+=`
 --> ${s.source}:${h.line}:${h.column}
${"".padEnd(o)} |
${h.line.toString().padStart(o)} | ${d}
${"".padEnd(o)} | ${"".padEnd(h.column-1)}${"".padEnd(v,"^")}`}else u+=`
 at ${s.source}:${h.line}:${h.column}`,a&&(u+=`: ${a}`);return u}function i(s,o,a,u=[]){let l;a?l=u.reduce((f,{location:d})=>Math.max(f,d.start.line),a.start.line):l=Math.max.apply(null,u.map(f=>f.location.start.line)),l=l.toString().length;let h=`${s}: ${o}`;a&&(h+=n(a,l));for(const f of u)h+=n(f.location,l,f.message);return h}return this.problems.filter(s=>s[0]!=="info").map(s=>i(...s)).join(`

`)}}var grammarError=GrammarError$3;const visitor$b={build(e){function r(o,...a){return e[o.type](o,...a)}function t(){}function n(o,...a){return r(o.expression,...a)}function i(o){return function(a,...u){a[o].forEach(l=>r(l,...u))}}const s={grammar(o,...a){o.topLevelInitializer&&r(o.topLevelInitializer,...a),o.initializer&&r(o.initializer,...a),o.rules.forEach(u=>r(u,...a))},top_level_initializer:t,initializer:t,rule:n,named:n,choice:i("alternatives"),action:n,sequence:i("elements"),labeled:n,text:n,simple_and:n,simple_not:n,optional:n,zero_or_more:n,one_or_more:n,group:n,semantic_and:t,semantic_not:t,rule_ref:t,literal:t,class:t,any:t};return Object.keys(s).forEach(o=>{Object.prototype.hasOwnProperty.call(e,o)||(e[o]=s[o])}),r}};var visitor_1=visitor$b;const visitor$a=visitor_1,asts$7={findRule(e,r){for(let t=0;t<e.rules.length;t++)if(e.rules[t].name===r)return e.rules[t]},indexOfRule(e,r){for(let t=0;t<e.rules.length;t++)if(e.rules[t].name===r)return t;return-1},alwaysConsumesOnSuccess(e,r){function t(){return!0}function n(){return!1}const i=visitor$a.build({choice(s){return s.alternatives.every(i)},sequence(s){return s.elements.some(i)},simple_and:n,simple_not:n,optional:n,zero_or_more:n,semantic_and:n,semantic_not:n,rule_ref(s){const o=asts$7.findRule(e,s.name);return o?i(o):void 0},literal(s){return s.value!==""},class:t,any:t});return i(r)}};var asts_1=asts$7;const opcodes={PUSH:0,PUSH_EMPTY_STRING:35,PUSH_UNDEFINED:1,PUSH_NULL:2,PUSH_FAILED:3,PUSH_EMPTY_ARRAY:4,PUSH_CURR_POS:5,POP:6,POP_CURR_POS:7,POP_N:8,NIP:9,APPEND:10,WRAP:11,TEXT:12,PLUCK:36,IF:13,IF_ERROR:14,IF_NOT_ERROR:15,WHILE_NOT_ERROR:16,MATCH_ANY:17,MATCH_STRING:18,MATCH_STRING_IC:19,MATCH_CHAR_CLASS:20,MATCH_REGEXP:20,ACCEPT_N:21,ACCEPT_STRING:22,FAIL:23,LOAD_SAVED_POS:24,UPDATE_SAVED_POS:25,CALL:26,RULE:27,SILENT_FAILS_ON:28,SILENT_FAILS_OFF:29};var opcodes_1=opcodes;const visitor$9=visitor_1,asts$6=asts_1,GrammarError$2=grammarError,ALWAYS_MATCH$1=1,SOMETIMES_MATCH$1=0,NEVER_MATCH$1=-1;function inferenceMatchResult$1(e){function r(o){return o.match=SOMETIMES_MATCH$1}function t(o){return s(o.expression),o.match=ALWAYS_MATCH$1}function n(o){return o.match=s(o.expression)}function i(o,a){const u=o.length;let l=0,h=0;for(let f=0;f<u;++f){const d=s(o[f]);d===ALWAYS_MATCH$1&&++l,d===NEVER_MATCH$1&&++h}return l===u?ALWAYS_MATCH$1:a?h===u?NEVER_MATCH$1:SOMETIMES_MATCH$1:h>0?NEVER_MATCH$1:SOMETIMES_MATCH$1}const s=visitor$9.build({rule(o){let a,u=0;if(typeof o.match>"u"){o.match=SOMETIMES_MATCH$1;do if(a=o.match,o.match=s(o.expression),++u>6)throw new GrammarError$2("Infinity cycle detected when trying to evaluate node match result",o.location);while(a!==o.match)}return o.match},named:n,choice(o){return o.match=i(o.alternatives,!0)},action:n,sequence(o){return o.match=i(o.elements,!1)},labeled:n,text:n,simple_and:n,simple_not(o){return o.match=-s(o.expression)},optional:t,zero_or_more:t,one_or_more:n,group:n,semantic_and:r,semantic_not:r,rule_ref(o){const a=asts$6.findRule(e,o.name);return o.match=s(a)},literal(o){const a=o.value.length===0?ALWAYS_MATCH$1:SOMETIMES_MATCH$1;return o.match=a},class(o){const a=o.parts.length===0?NEVER_MATCH$1:SOMETIMES_MATCH$1;return o.match=a},any:r});s(e)}inferenceMatchResult$1.ALWAYS_MATCH=ALWAYS_MATCH$1;inferenceMatchResult$1.SOMETIMES_MATCH=SOMETIMES_MATCH$1;inferenceMatchResult$1.NEVER_MATCH=NEVER_MATCH$1;var inferenceMatchResult_1=inferenceMatchResult$1;const asts$5=asts_1,op$1=opcodes_1,visitor$8=visitor_1,{ALWAYS_MATCH,SOMETIMES_MATCH,NEVER_MATCH}=inferenceMatchResult_1;function generateBytecode$1(e){const r=[],t=[],n=[],i=[];function s(T){const C=r.indexOf(T);return C===-1?r.push(T)-1:C}function o(T){const C={value:T.parts,inverted:T.inverted,ignoreCase:T.ignoreCase},R=JSON.stringify(C),b=t.findIndex(S=>JSON.stringify(S)===R);return b===-1?t.push(C)-1:b}function a(T){const C=JSON.stringify(T),R=n.findIndex(b=>JSON.stringify(b)===C);return R===-1?n.push(T)-1:R}function u(T,C,R){const b={predicate:T,params:C,body:R.code,location:R.codeLocation},S=JSON.stringify(b),B=i.findIndex(M=>JSON.stringify(M)===S);return B===-1?i.push(b)-1:B}function l(T){const C={};return Object.keys(T).forEach(R=>{C[R]=T[R]}),C}function h(T,...C){return T.concat(...C)}function f(T,C,R,b){return T===ALWAYS_MATCH?R:T===NEVER_MATCH?b:C.concat([R.length,b.length],R,b)}function d(T,C){return T.concat([C.length],C)}function _(T,C,R,b){const S=Object.keys(R).map(B=>b-R[B]);return[op$1.CALL,T,C,S.length].concat(S)}function v(T,C,R){const b=T.match|0;return h([op$1.PUSH_CURR_POS],[op$1.SILENT_FAILS_ON],A(T,{sp:R.sp+1,env:l(R.env),action:null}),[op$1.SILENT_FAILS_OFF],f(C?-b:b,[C?op$1.IF_ERROR:op$1.IF_NOT_ERROR],h([op$1.POP],[C?op$1.POP:op$1.POP_CURR_POS],[op$1.PUSH_UNDEFINED]),h([op$1.POP],[C?op$1.POP_CURR_POS:op$1.POP],[op$1.PUSH_FAILED])))}function m(T,C,R){const b=u(!0,Object.keys(R.env),T);return h([op$1.UPDATE_SAVED_POS],_(b,0,R.env,R.sp),f(T.match|0,[op$1.IF],h([op$1.POP],C?[op$1.PUSH_FAILED]:[op$1.PUSH_UNDEFINED]),h([op$1.POP],C?[op$1.PUSH_UNDEFINED]:[op$1.PUSH_FAILED])))}function E(T){return d([op$1.WHILE_NOT_ERROR],h([op$1.APPEND],T))}const A=visitor$8.build({grammar(T){T.rules.forEach(A),T.literals=r,T.classes=t,T.expectations=n,T.functions=i},rule(T){T.bytecode=A(T.expression,{sp:-1,env:{},pluck:[],action:null})},named(T,C){const R=T.match|0,b=R===NEVER_MATCH?null:a({type:"rule",value:T.name});return h([op$1.SILENT_FAILS_ON],A(T.expression,C),[op$1.SILENT_FAILS_OFF],f(R,[op$1.IF_ERROR],[op$1.FAIL,b],[]))},choice(T,C){function R(b,S){const B=b[0].match|0,M=A(b[0],{sp:S.sp,env:l(S.env),action:null});return B===ALWAYS_MATCH?M:h(M,b.length>1?f(SOMETIMES_MATCH,[op$1.IF_ERROR],h([op$1.POP],R(b.slice(1),S)),[]):[])}return R(T.alternatives,C)},action(T,C){const R=l(C.env),b=T.expression.type!=="sequence"||T.expression.elements.length===0,S=A(T.expression,{sp:C.sp+(b?1:0),env:R,action:T}),B=T.expression.match|0,M=b&&B!==NEVER_MATCH?u(!1,Object.keys(R),T):null;return b?h([op$1.PUSH_CURR_POS],S,f(B,[op$1.IF_NOT_ERROR],h([op$1.LOAD_SAVED_POS,1],_(M,1,R,C.sp+2)),[]),[op$1.NIP]):S},sequence(T,C){function R(b,S){if(b.length>0){const B=T.elements.length-b.length+1;return h(A(b[0],{sp:S.sp,env:S.env,pluck:S.pluck,action:null}),f(b[0].match|0,[op$1.IF_NOT_ERROR],R(b.slice(1),{sp:S.sp+1,env:S.env,pluck:S.pluck,action:S.action}),h(B>1?[op$1.POP_N,B]:[op$1.POP],[op$1.POP_CURR_POS],[op$1.PUSH_FAILED])))}else{if(S.pluck.length>0)return h([op$1.PLUCK,T.elements.length+1,S.pluck.length],S.pluck.map(B=>S.sp-B));if(S.action){const B=u(!1,Object.keys(S.env),S.action);return h([op$1.LOAD_SAVED_POS,T.elements.length],_(B,T.elements.length+1,S.env,S.sp))}else return h([op$1.WRAP,T.elements.length],[op$1.NIP])}}return h([op$1.PUSH_CURR_POS],R(T.elements,{sp:C.sp+1,env:C.env,pluck:[],action:C.action}))},labeled(T,C){let R=C.env;const b=T.label,S=C.sp+1;return b&&(R=l(C.env),C.env[T.label]=S),T.pick&&C.pluck.push(S),A(T.expression,{sp:C.sp,env:R,action:null})},text(T,C){return h([op$1.PUSH_CURR_POS],A(T.expression,{sp:C.sp+1,env:l(C.env),action:null}),f(T.match|0,[op$1.IF_NOT_ERROR],h([op$1.POP],[op$1.TEXT]),[op$1.NIP]))},simple_and(T,C){return v(T.expression,!1,C)},simple_not(T,C){return v(T.expression,!0,C)},optional(T,C){return h(A(T.expression,{sp:C.sp,env:l(C.env),action:null}),f(-(T.expression.match|0),[op$1.IF_ERROR],h([op$1.POP],[op$1.PUSH_NULL]),[]))},zero_or_more(T,C){const R=A(T.expression,{sp:C.sp+1,env:l(C.env),action:null});return h([op$1.PUSH_EMPTY_ARRAY],R,E(R),[op$1.POP])},one_or_more(T,C){const R=A(T.expression,{sp:C.sp+1,env:l(C.env),action:null});return h([op$1.PUSH_EMPTY_ARRAY],R,f(T.expression.match|0,[op$1.IF_NOT_ERROR],h(E(R),[op$1.POP]),h([op$1.POP],[op$1.POP],[op$1.PUSH_FAILED])))},group(T,C){return A(T.expression,{sp:C.sp,env:l(C.env),action:null})},semantic_and(T,C){return m(T,!1,C)},semantic_not(T,C){return m(T,!0,C)},rule_ref(T){return[op$1.RULE,asts$5.indexOfRule(e,T.name)]},literal(T){if(T.value.length>0){const C=T.match|0,b=C===SOMETIMES_MATCH||C===ALWAYS_MATCH&&!T.ignoreCase?s(T.ignoreCase?T.value.toLowerCase():T.value):null,S=C!==ALWAYS_MATCH?a({type:"literal",value:T.value,ignoreCase:T.ignoreCase}):null;return f(C,T.ignoreCase?[op$1.MATCH_STRING_IC,b]:[op$1.MATCH_STRING,b],T.ignoreCase?[op$1.ACCEPT_N,T.value.length]:[op$1.ACCEPT_STRING,b],[op$1.FAIL,S])}return[op$1.PUSH_EMPTY_STRING]},class(T){const C=T.match|0,R=C===SOMETIMES_MATCH?o(T):null,b=C!==ALWAYS_MATCH?a({type:"class",value:T.parts,inverted:T.inverted,ignoreCase:T.ignoreCase}):null;return f(C,[op$1.MATCH_CHAR_CLASS,R],[op$1.ACCEPT_N,1],[op$1.FAIL,b])},any(T){const C=T.match|0,R=C!==ALWAYS_MATCH?a({type:"any"}):null;return f(C,[op$1.MATCH_ANY],[op$1.ACCEPT_N,1],[op$1.FAIL,R])}});A(e)}var generateBytecode_1=generateBytecode$1;class Stack$1{constructor(r,t,n){this.sp=-1,this.maxSp=-1,this.varName=t,this.ruleName=r,this.type=n}name(r){if(r<0)throw new RangeError(`Rule '${this.ruleName}': The variable stack underflow: attempt to use a variable '${this.varName}<x>' at an index ${r}`);return this.varName+r}push(r){const t=this.name(++this.sp)+" = "+r+";";return this.sp>this.maxSp&&(this.maxSp=this.sp),t}pop(r){return r!==void 0?(this.sp-=r,Array.from({length:r},(t,n)=>this.name(this.sp+1+n))):this.name(this.sp--)}top(){return this.name(this.sp)}index(r){if(r<0)throw new RangeError(`Rule '${this.ruleName}': The variable stack overflow: attempt to get a variable at a negative index ${r}`);return this.name(this.sp-r)}result(){if(this.maxSp<0)throw new RangeError(`Rule '${this.ruleName}': The variable stack is empty, can't get the result'`);return this.name(0)}defines(){return this.maxSp<0?"":this.type+" "+Array.from({length:this.maxSp+1},(r,t)=>this.name(t)).join(", ")+";"}checkedIf(r,t,n){const i=this.sp;if(t(),n){const s=this.sp;if(this.sp=i,n(),s!==this.sp)throw new Error("Rule '"+this.ruleName+"', position "+r+": Branches of a condition can't move the stack pointer differently (before: "+i+", after then: "+s+", after else: "+this.sp+").")}}checkedLoop(r,t){const n=this.sp;if(t(),n!==this.sp)throw new Error("Rule '"+this.ruleName+"', position "+r+": Body of a loop can't move the stack pointer (before: "+n+", after: "+this.sp+").")}}var stack=Stack$1,version="2.0.1",utils={};function hex(e){return e.charCodeAt(0).toString(16).toUpperCase()}utils.hex=hex;function stringEscape$1(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\v/g,"\\v").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,r=>"\\x0"+hex(r)).replace(/[\x10-\x1F\x7F-\xFF]/g,r=>"\\x"+hex(r)).replace(/[\u0100-\u0FFF]/g,r=>"\\u0"+hex(r)).replace(/[\u1000-\uFFFF]/g,r=>"\\u"+hex(r))}utils.stringEscape=stringEscape$1;function regexpClassEscape$1(e){return e.replace(/\\/g,"\\\\").replace(/\//g,"\\/").replace(/]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\v/g,"\\v").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,r=>"\\x0"+hex(r)).replace(/[\x10-\x1F\x7F-\xFF]/g,r=>"\\x"+hex(r)).replace(/[\u0100-\u0FFF]/g,r=>"\\u0"+hex(r)).replace(/[\u1000-\uFFFF]/g,r=>"\\u"+hex(r))}utils.regexpClassEscape=regexpClassEscape$1;var sourceMap={},sourceMapGenerator={},base64Vlq={},base64$1={};const intToCharMap="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");base64$1.encode=function(e){if(0<=e&&e<intToCharMap.length)return intToCharMap[e];throw new TypeError("Must be between 0 and 63: "+e)};const base64=base64$1,VLQ_BASE_SHIFT=5,VLQ_BASE=1<<VLQ_BASE_SHIFT,VLQ_BASE_MASK=VLQ_BASE-1,VLQ_CONTINUATION_BIT=VLQ_BASE;function toVLQSigned(e){return e<0?(-e<<1)+1:(e<<1)+0}base64Vlq.encode=function(r){let t="",n,i=toVLQSigned(r);do n=i&VLQ_BASE_MASK,i>>>=VLQ_BASE_SHIFT,i>0&&(n|=VLQ_CONTINUATION_BIT),t+=base64.encode(n);while(i>0);return t};var util$3={};function getArg(e,r,t){if(r in e)return e[r];if(arguments.length===3)return t;throw new Error('"'+r+'" is a required argument.')}util$3.getArg=getArg;const supportsNullProto=function(){return!("__proto__"in Object.create(null))}();function identity(e){return e}function toSetString(e){return isProtoString(e)?"$"+e:e}util$3.toSetString=supportsNullProto?identity:toSetString;function fromSetString(e){return isProtoString(e)?e.slice(1):e}util$3.fromSetString=supportsNullProto?identity:fromSetString;function isProtoString(e){if(!e)return!1;const r=e.length;if(r<9||e.charCodeAt(r-1)!==95||e.charCodeAt(r-2)!==95||e.charCodeAt(r-3)!==111||e.charCodeAt(r-4)!==116||e.charCodeAt(r-5)!==111||e.charCodeAt(r-6)!==114||e.charCodeAt(r-7)!==112||e.charCodeAt(r-8)!==95||e.charCodeAt(r-9)!==95)return!1;for(let t=r-10;t>=0;t--)if(e.charCodeAt(t)!==36)return!1;return!0}function strcmp(e,r){return e===r?0:e===null?1:r===null?-1:e>r?1:-1}function compareByGeneratedPositionsInflated(e,r){let t=e.generatedLine-r.generatedLine;return t!==0||(t=e.generatedColumn-r.generatedColumn,t!==0)||(t=strcmp(e.source,r.source),t!==0)||(t=e.originalLine-r.originalLine,t!==0)||(t=e.originalColumn-r.originalColumn,t!==0)?t:strcmp(e.name,r.name)}util$3.compareByGeneratedPositionsInflated=compareByGeneratedPositionsInflated;const PROTOCOL="http:",PROTOCOL_AND_HOST=`${PROTOCOL}//host`;function createSafeHandler(e){return r=>{const t=getURLType(r),n=buildSafeBase(r),i=new URL(r,n);e(i);const s=i.toString();return t==="absolute"?s:t==="scheme-relative"?s.slice(PROTOCOL.length):t==="path-absolute"?s.slice(PROTOCOL_AND_HOST.length):computeRelativeURL(n,s)}}function withBase(e,r){return new URL(e,r).toString()}function buildUniqueSegment(e,r){let t=0;do{const n=e+t++;if(r.indexOf(n)===-1)return n}while(!0)}function buildSafeBase(e){const r=e.split("..").length-1,t=buildUniqueSegment("p",e);let n=`${PROTOCOL_AND_HOST}/`;for(let i=0;i<r;i++)n+=`${t}/`;return n}const ABSOLUTE_SCHEME=/^[A-Za-z0-9\+\-\.]+:/;function getURLType(e){return e[0]==="/"?e[1]==="/"?"scheme-relative":"path-absolute":ABSOLUTE_SCHEME.test(e)?"absolute":"path-relative"}function computeRelativeURL(e,r){typeof e=="string"&&(e=new URL(e)),typeof r=="string"&&(r=new URL(r));const t=r.pathname.split("/"),n=e.pathname.split("/");for(n.length>0&&!n[n.length-1]&&n.pop();t.length>0&&n.length>0&&t[0]===n[0];)t.shift(),n.shift();return n.map(()=>"..").concat(t).join("/")+r.search+r.hash}const ensureDirectory=createSafeHandler(e=>{e.pathname=e.pathname.replace(/\/?$/,"/")}),normalize=createSafeHandler(e=>{});util$3.normalize=normalize;function join(e,r){const t=getURLType(r),n=getURLType(e);if(e=ensureDirectory(e),t==="absolute")return withBase(r,void 0);if(n==="absolute")return withBase(r,e);if(t==="scheme-relative")return normalize(r);if(n==="scheme-relative")return withBase(r,withBase(e,PROTOCOL_AND_HOST)).slice(PROTOCOL.length);if(t==="path-absolute")return normalize(r);if(n==="path-absolute")return withBase(r,withBase(e,PROTOCOL_AND_HOST)).slice(PROTOCOL_AND_HOST.length);const i=buildSafeBase(r+e),s=withBase(r,withBase(e,i));return computeRelativeURL(i,s)}util$3.join=join;function relative(e,r){const t=relativeIfPossible(e,r);return typeof t=="string"?t:normalize(r)}util$3.relative=relative;function relativeIfPossible(e,r){if(getURLType(e)!==getURLType(r))return null;const n=buildSafeBase(e+r),i=new URL(e,n),s=new URL(r,n);try{new URL("",s.toString())}catch{return null}return s.protocol!==i.protocol||s.user!==i.user||s.password!==i.password||s.hostname!==i.hostname||s.port!==i.port?null:computeRelativeURL(i,s)}var arraySet={};class ArraySet$1{constructor(){this._array=[],this._set=new Map}static fromArray(r,t){const n=new ArraySet$1;for(let i=0,s=r.length;i<s;i++)n.add(r[i],t);return n}size(){return this._set.size}add(r,t){const n=this.has(r),i=this._array.length;(!n||t)&&this._array.push(r),n||this._set.set(r,i)}has(r){return this._set.has(r)}indexOf(r){const t=this._set.get(r);if(t>=0)return t;throw new Error('"'+r+'" is not in the set.')}at(r){if(r>=0&&r<this._array.length)return this._array[r];throw new Error("No element indexed by "+r)}toArray(){return this._array.slice()}}arraySet.ArraySet=ArraySet$1;var mappingList={};const util$2=util$3;function generatedPositionAfter(e,r){const t=e.generatedLine,n=r.generatedLine,i=e.generatedColumn,s=r.generatedColumn;return n>t||n==t&&s>=i||util$2.compareByGeneratedPositionsInflated(e,r)<=0}class MappingList$1{constructor(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}unsortedForEach(r,t){this._array.forEach(r,t)}add(r){generatedPositionAfter(this._last,r)?(this._last=r,this._array.push(r)):(this._sorted=!1,this._array.push(r))}toArray(){return this._sorted||(this._array.sort(util$2.compareByGeneratedPositionsInflated),this._sorted=!0),this._array}}mappingList.MappingList=MappingList$1;const base64VLQ=base64Vlq,util$1=util$3,ArraySet=arraySet.ArraySet,MappingList=mappingList.MappingList;class SourceMapGenerator$1{constructor(r){r||(r={}),this._file=util$1.getArg(r,"file",null),this._sourceRoot=util$1.getArg(r,"sourceRoot",null),this._skipValidation=util$1.getArg(r,"skipValidation",!1),this._sources=new ArraySet,this._names=new ArraySet,this._mappings=new MappingList,this._sourcesContents=null}static fromSourceMap(r){const t=r.sourceRoot,n=new SourceMapGenerator$1({file:r.file,sourceRoot:t});return r.eachMapping(function(i){const s={generated:{line:i.generatedLine,column:i.generatedColumn}};i.source!=null&&(s.source=i.source,t!=null&&(s.source=util$1.relative(t,s.source)),s.original={line:i.originalLine,column:i.originalColumn},i.name!=null&&(s.name=i.name)),n.addMapping(s)}),r.sources.forEach(function(i){let s=i;t!=null&&(s=util$1.relative(t,i)),n._sources.has(s)||n._sources.add(s);const o=r.sourceContentFor(i);o!=null&&n.setSourceContent(i,o)}),n}addMapping(r){const t=util$1.getArg(r,"generated"),n=util$1.getArg(r,"original",null);let i=util$1.getArg(r,"source",null),s=util$1.getArg(r,"name",null);this._skipValidation||this._validateMapping(t,n,i,s),i!=null&&(i=String(i),this._sources.has(i)||this._sources.add(i)),s!=null&&(s=String(s),this._names.has(s)||this._names.add(s)),this._mappings.add({generatedLine:t.line,generatedColumn:t.column,originalLine:n&&n.line,originalColumn:n&&n.column,source:i,name:s})}setSourceContent(r,t){let n=r;this._sourceRoot!=null&&(n=util$1.relative(this._sourceRoot,n)),t!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[util$1.toSetString(n)]=t):this._sourcesContents&&(delete this._sourcesContents[util$1.toSetString(n)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))}applySourceMap(r,t,n){let i=t;if(t==null){if(r.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);i=r.file}const s=this._sourceRoot;s!=null&&(i=util$1.relative(s,i));const o=this._mappings.toArray().length>0?new ArraySet:this._sources,a=new ArraySet;this._mappings.unsortedForEach(function(u){if(u.source===i&&u.originalLine!=null){const f=r.originalPositionFor({line:u.originalLine,column:u.originalColumn});f.source!=null&&(u.source=f.source,n!=null&&(u.source=util$1.join(n,u.source)),s!=null&&(u.source=util$1.relative(s,u.source)),u.originalLine=f.line,u.originalColumn=f.column,f.name!=null&&(u.name=f.name))}const l=u.source;l!=null&&!o.has(l)&&o.add(l);const h=u.name;h!=null&&!a.has(h)&&a.add(h)},this),this._sources=o,this._names=a,r.sources.forEach(function(u){const l=r.sourceContentFor(u);l!=null&&(n!=null&&(u=util$1.join(n,u)),s!=null&&(u=util$1.relative(s,u)),this.setSourceContent(u,l))},this)}_validateMapping(r,t,n,i){if(t&&typeof t.line!="number"&&typeof t.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(r&&"line"in r&&"column"in r&&r.line>0&&r.column>=0&&!t&&!n&&!i)){if(!(r&&"line"in r&&"column"in r&&t&&"line"in t&&"column"in t&&r.line>0&&r.column>=0&&t.line>0&&t.column>=0&&n))throw new Error("Invalid mapping: "+JSON.stringify({generated:r,source:n,original:t,name:i}))}}_serializeMappings(){let r=0,t=1,n=0,i=0,s=0,o=0,a="",u,l,h,f;const d=this._mappings.toArray();for(let _=0,v=d.length;_<v;_++){if(l=d[_],u="",l.generatedLine!==t)for(r=0;l.generatedLine!==t;)u+=";",t++;else if(_>0){if(!util$1.compareByGeneratedPositionsInflated(l,d[_-1]))continue;u+=","}u+=base64VLQ.encode(l.generatedColumn-r),r=l.generatedColumn,l.source!=null&&(f=this._sources.indexOf(l.source),u+=base64VLQ.encode(f-o),o=f,u+=base64VLQ.encode(l.originalLine-1-i),i=l.originalLine-1,u+=base64VLQ.encode(l.originalColumn-n),n=l.originalColumn,l.name!=null&&(h=this._names.indexOf(l.name),u+=base64VLQ.encode(h-s),s=h)),a+=u}return a}_generateSourcesContent(r,t){return r.map(function(n){if(!this._sourcesContents)return null;t!=null&&(n=util$1.relative(t,n));const i=util$1.toSetString(n);return Object.prototype.hasOwnProperty.call(this._sourcesContents,i)?this._sourcesContents[i]:null},this)}toJSON(){const r={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(r.file=this._file),this._sourceRoot!=null&&(r.sourceRoot=this._sourceRoot),this._sourcesContents&&(r.sourcesContent=this._generateSourcesContent(r.sources,r.sourceRoot)),r}toString(){return JSON.stringify(this.toJSON())}}SourceMapGenerator$1.prototype._version=3;sourceMapGenerator.SourceMapGenerator=SourceMapGenerator$1;var sourceNode={};const SourceMapGenerator=sourceMapGenerator.SourceMapGenerator,util=util$3,REGEX_NEWLINE=/(\r?\n)/,NEWLINE_CODE=10,isSourceNode="$$$isSourceNode$$$";class SourceNode$1{constructor(r,t,n,i,s){this.children=[],this.sourceContents={},this.line=r==null?null:r,this.column=t==null?null:t,this.source=n==null?null:n,this.name=s==null?null:s,this[isSourceNode]=!0,i!=null&&this.add(i)}static fromStringWithSourceMap(r,t,n){const i=new SourceNode$1,s=r.split(REGEX_NEWLINE);let o=0;const a=function(){const _=m(),v=m()||"";return _+v;function m(){return o<s.length?s[o++]:void 0}};let u=1,l=0,h=null,f;return t.eachMapping(function(_){if(h!==null)if(u<_.generatedLine)d(h,a()),u++,l=0;else{f=s[o]||"";const v=f.substr(0,_.generatedColumn-l);s[o]=f.substr(_.generatedColumn-l),l=_.generatedColumn,d(h,v),h=_;return}for(;u<_.generatedLine;)i.add(a()),u++;l<_.generatedColumn&&(f=s[o]||"",i.add(f.substr(0,_.generatedColumn)),s[o]=f.substr(_.generatedColumn),l=_.generatedColumn),h=_},this),o<s.length&&(h&&d(h,a()),i.add(s.splice(o).join(""))),t.sources.forEach(function(_){const v=t.sourceContentFor(_);v!=null&&(n!=null&&(_=util.join(n,_)),i.setSourceContent(_,v))}),i;function d(_,v){if(_===null||_.source===void 0)i.add(v);else{const m=n?util.join(n,_.source):_.source;i.add(new SourceNode$1(_.originalLine,_.originalColumn,m,v,_.name))}}}add(r){if(Array.isArray(r))r.forEach(function(t){this.add(t)},this);else if(r[isSourceNode]||typeof r=="string")r&&this.children.push(r);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+r);return this}prepend(r){if(Array.isArray(r))for(let t=r.length-1;t>=0;t--)this.prepend(r[t]);else if(r[isSourceNode]||typeof r=="string")this.children.unshift(r);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+r);return this}walk(r){let t;for(let n=0,i=this.children.length;n<i;n++)t=this.children[n],t[isSourceNode]?t.walk(r):t!==""&&r(t,{source:this.source,line:this.line,column:this.column,name:this.name})}join(r){let t,n;const i=this.children.length;if(i>0){for(t=[],n=0;n<i-1;n++)t.push(this.children[n]),t.push(r);t.push(this.children[n]),this.children=t}return this}replaceRight(r,t){const n=this.children[this.children.length-1];return n[isSourceNode]?n.replaceRight(r,t):typeof n=="string"?this.children[this.children.length-1]=n.replace(r,t):this.children.push("".replace(r,t)),this}setSourceContent(r,t){this.sourceContents[util.toSetString(r)]=t}walkSourceContents(r){for(let n=0,i=this.children.length;n<i;n++)this.children[n][isSourceNode]&&this.children[n].walkSourceContents(r);const t=Object.keys(this.sourceContents);for(let n=0,i=t.length;n<i;n++)r(util.fromSetString(t[n]),this.sourceContents[t[n]])}toString(){let r="";return this.walk(function(t){r+=t}),r}toStringWithSourceMap(r){const t={code:"",line:1,column:0},n=new SourceMapGenerator(r);let i=!1,s=null,o=null,a=null,u=null;return this.walk(function(l,h){t.code+=l,h.source!==null&&h.line!==null&&h.column!==null?((s!==h.source||o!==h.line||a!==h.column||u!==h.name)&&n.addMapping({source:h.source,original:{line:h.line,column:h.column},generated:{line:t.line,column:t.column},name:h.name}),s=h.source,o=h.line,a=h.column,u=h.name,i=!0):i&&(n.addMapping({generated:{line:t.line,column:t.column}}),s=null,i=!1);for(let f=0,d=l.length;f<d;f++)l.charCodeAt(f)===NEWLINE_CODE?(t.line++,t.column=0,f+1===d?(s=null,i=!1):i&&n.addMapping({source:h.source,original:{line:h.line,column:h.column},generated:{line:t.line,column:t.column},name:h.name})):t.column++}),this.walkSourceContents(function(l,h){n.setSourceContent(l,h)}),{code:t.code,map:n}}}sourceNode.SourceNode=SourceNode$1;sourceMap.SourceMapGenerator=sourceMapGenerator.SourceMapGenerator;sourceMap.SourceNode=sourceNode.SourceNode;const asts$4=asts_1,op=opcodes_1,Stack=stack,VERSION$1=version,{stringEscape,regexpClassEscape}=utils,{SourceNode}=sourceMap;function toSourceNode(e,r,t){const n=r.start.line,i=r.start.column-1,s=e.split(`
`);return s.length===1?new SourceNode(n,i,r.source,e,t):new SourceNode(null,null,r.source,s.map((o,a)=>new SourceNode(n+a,a===0?i:0,r.source,a===s.length-1?o:[o,`
`],t)))}function wrapInSourceNode(e,r,t,n,i){return t?new SourceNode(null,null,t.source,[e,toSourceNode(r,t,i),new SourceNode(t.end.line,t.end.column-1,t.source,n)]):new SourceNode(null,null,null,[e,r,n])}function generateJS$1(e,r){function t(m){return m instanceof SourceNode?m:m.replace(/^(.+)$/gm,"  $1")}function n(m){return"peg$c"+m}function i(m){return"peg$r"+m}function s(m){return"peg$e"+m}function o(m){return"peg$f"+m}function a(m){return"peg$parse"+m}function u(){function m(C){return'"'+stringEscape(C)+'"'}function E(C){return"/^["+(C.inverted?"^":"")+C.value.map(R=>Array.isArray(R)?regexpClassEscape(R[0])+"-"+regexpClassEscape(R[1]):regexpClassEscape(R)).join("")+"]/"+(C.ignoreCase?"i":"")}function A(C){switch(C.type){case"rule":return'peg$otherExpectation("'+stringEscape(C.value)+'")';case"literal":return'peg$literalExpectation("'+stringEscape(C.value)+'", '+C.ignoreCase+")";case"class":{const R=C.value.map(b=>Array.isArray(b)?'["'+stringEscape(b[0])+'", "'+stringEscape(b[1])+'"]':'"'+stringEscape(b)+'"').join(", ");return"peg$classExpectation(["+R+"], "+C.inverted+", "+C.ignoreCase+")"}case"any":return"peg$anyExpectation()";default:throw new Error("Unknown expectation type ("+JSON.stringify(C)+")")}}function T(C,R){return wrapInSourceNode(`
  var ${o(R)} = function(${C.params.join(", ")}) {`,C.body,C.location,"};")}return new SourceNode(null,null,r.grammarSource,[e.literals.map((C,R)=>"  var "+n(R)+" = "+m(C)+";").concat("",e.classes.map((C,R)=>"  var "+i(R)+" = "+E(C)+";")).concat("",e.expectations.map((C,R)=>"  var "+s(R)+" = "+A(C)+";")).concat("").join(`
`),e.functions.map(T)])}function l(m,E){const A=[];return A.push(""),r.trace&&A.push("peg$tracer.trace({",'  type: "rule.enter",',"  rule: "+m+",","  location: peg$computeLocation(startPos, startPos)","});",""),r.cache&&(A.push("var key = peg$currPos * "+e.rules.length+" + "+E+";","var cached = peg$resultsCache[key];","","if (cached) {","  peg$currPos = cached.nextPos;",""),r.trace&&A.push("if (cached.result !== peg$FAILED) {","  peg$tracer.trace({",'    type: "rule.match",',"    rule: "+m+",","    result: cached.result,","    location: peg$computeLocation(startPos, peg$currPos)","  });","} else {","  peg$tracer.trace({",'    type: "rule.fail",',"    rule: "+m+",","    location: peg$computeLocation(startPos, startPos)","  });","}",""),A.push("  return cached.result;","}","")),A}function h(m,E){const A=[];return r.cache&&A.push("","peg$resultsCache[key] = { nextPos: peg$currPos, result: "+E+" };"),r.trace&&A.push("","if ("+E+" !== peg$FAILED) {","  peg$tracer.trace({",'    type: "rule.match",',"    rule: "+m+",","    result: "+E+",","    location: peg$computeLocation(startPos, peg$currPos)","  });","} else {","  peg$tracer.trace({",'    type: "rule.fail",',"    rule: "+m+",","    location: peg$computeLocation(startPos, startPos)","  });","}"),A.push("","return "+E+";"),A}function f(m){const E=[],A=new Stack(m.name,"s","var");function T(R){let b=0;const S=R.length,B=[];let M;function D(re,ne){const de=ne+3,q=R[b+de-2],z=R[b+de-1];let te,ue;A.checkedIf(b,()=>{b+=de,te=T(R.slice(b,b+q)),b+=q},z>0?()=>{ue=T(R.slice(b,b+z)),b+=z}:null),B.push("if ("+re+") {"),B.push(...te.map(t)),z>0&&(B.push("} else {"),B.push(...ue.map(t))),B.push("}")}function G(re){const de=R[b+2-1];let q;A.checkedLoop(b,()=>{b+=2,q=T(R.slice(b,b+de)),b+=de}),B.push("while ("+re+") {"),B.push(...q.map(t)),B.push("}")}function J(){const ne=R[b+4-1],de=o(R[b+1])+"("+R.slice(b+4,b+4+ne).map(q=>A.index(q)).join(", ")+")";A.pop(R[b+2]),B.push(A.push(de)),b+=4+ne}for(;b<S;)switch(R[b]){case op.PUSH_EMPTY_STRING:B.push(A.push("''")),b++;break;case op.PUSH_CURR_POS:B.push(A.push("peg$currPos")),b++;break;case op.PUSH_UNDEFINED:B.push(A.push("undefined")),b++;break;case op.PUSH_NULL:B.push(A.push("null")),b++;break;case op.PUSH_FAILED:B.push(A.push("peg$FAILED")),b++;break;case op.PUSH_EMPTY_ARRAY:B.push(A.push("[]")),b++;break;case op.POP:A.pop(),b++;break;case op.POP_CURR_POS:B.push("peg$currPos = "+A.pop()+";"),b++;break;case op.POP_N:A.pop(R[b+1]),b+=2;break;case op.NIP:M=A.pop(),A.pop(),B.push(A.push(M)),b++;break;case op.APPEND:M=A.pop(),B.push(A.top()+".push("+M+");"),b++;break;case op.WRAP:B.push(A.push("["+A.pop(R[b+1]).join(", ")+"]")),b+=2;break;case op.TEXT:B.push(A.push("input.substring("+A.pop()+", peg$currPos)")),b++;break;case op.PLUCK:{const ne=R[b+3-1],de=3+ne;M=R.slice(b+3,b+de),M=ne===1?A.index(M[0]):`[ ${M.map(q=>A.index(q)).join(", ")} ]`,A.pop(R[b+1]),B.push(A.push(M)),b+=de;break}case op.IF:D(A.top(),0);break;case op.IF_ERROR:D(A.top()+" === peg$FAILED",0);break;case op.IF_NOT_ERROR:D(A.top()+" !== peg$FAILED",0);break;case op.WHILE_NOT_ERROR:G(A.top()+" !== peg$FAILED");break;case op.MATCH_ANY:D("input.length > peg$currPos",0);break;case op.MATCH_STRING:D(e.literals[R[b+1]].length>1?"input.substr(peg$currPos, "+e.literals[R[b+1]].length+") === "+n(R[b+1]):"input.charCodeAt(peg$currPos) === "+e.literals[R[b+1]].charCodeAt(0),1);break;case op.MATCH_STRING_IC:D("input.substr(peg$currPos, "+e.literals[R[b+1]].length+").toLowerCase() === "+n(R[b+1]),1);break;case op.MATCH_CHAR_CLASS:D(i(R[b+1])+".test(input.charAt(peg$currPos))",1);break;case op.ACCEPT_N:B.push(A.push(R[b+1]>1?"input.substr(peg$currPos, "+R[b+1]+")":"input.charAt(peg$currPos)")),B.push(R[b+1]>1?"peg$currPos += "+R[b+1]+";":"peg$currPos++;"),b+=2;break;case op.ACCEPT_STRING:B.push(A.push(n(R[b+1]))),B.push(e.literals[R[b+1]].length>1?"peg$currPos += "+e.literals[R[b+1]].length+";":"peg$currPos++;"),b+=2;break;case op.FAIL:B.push(A.push("peg$FAILED")),B.push("if (peg$silentFails === 0) { peg$fail("+s(R[b+1])+"); }"),b+=2;break;case op.LOAD_SAVED_POS:B.push("peg$savedPos = "+A.index(R[b+1])+";"),b+=2;break;case op.UPDATE_SAVED_POS:B.push("peg$savedPos = peg$currPos;"),b++;break;case op.CALL:J();break;case op.RULE:B.push(A.push(a(e.rules[R[b+1]].name)+"()")),b+=2;break;case op.SILENT_FAILS_ON:B.push("peg$silentFails++;"),b++;break;case op.SILENT_FAILS_OFF:B.push("peg$silentFails--;"),b++;break;default:throw new Error("Invalid opcode: "+R[b]+".")}return B}const C=T(m.bytecode);return E.push(wrapInSourceNode("  function ",a(m.name),m.nameLocation,`() {
`,m.name)),r.trace&&E.push("  var startPos = peg$currPos;"),E.push(t(A.defines())),E.push(...l('"'+stringEscape(m.name)+'"',asts$4.indexOfRule(e,m.name)).map(t)),E.push(...C.map(t)),E.push(...h('"'+stringEscape(m.name)+'"',A.result()).map(t)),E.push("}"),E}function d(m){return m.codeLocation?toSourceNode(m.code,m.codeLocation,"$"+m.type):m.code}function _(){const m=[];e.topLevelInitializer&&(m.push(d(e.topLevelInitializer)),m.push("")),m.push("function peg$subclass(child, parent) {","  function C() { this.constructor = child; }","  C.prototype = parent.prototype;","  child.prototype = new C();","}","","function peg$SyntaxError(message, expected, found, location) {","  var self = Error.call(this, message);","  // istanbul ignore next Check is a necessary evil to support older environments","  if (Object.setPrototypeOf) {","    Object.setPrototypeOf(self, peg$SyntaxError.prototype);","  }","  self.expected = expected;","  self.found = found;","  self.location = location;",'  self.name = "SyntaxError";',"  return self;","}","","peg$subclass(peg$SyntaxError, Error);","","function peg$padEnd(str, targetLength, padString) {",'  padString = padString || " ";',"  if (str.length > targetLength) { return str; }","  targetLength -= str.length;","  padString += padString.repeat(targetLength);","  return str + padString.slice(0, targetLength);","}","","peg$SyntaxError.prototype.format = function(sources) {",'  var str = "Error: " + this.message;',"  if (this.location) {","    var src = null;","    var k;","    for (k = 0; k < sources.length; k++) {","      if (sources[k].source === this.location.source) {","        src = sources[k].text.split(/\\r\\n|\\n|\\r/g);","        break;","      }","    }","    var s = this.location.start;",'    var loc = this.location.source + ":" + s.line + ":" + s.column;',"    if (src) {","      var e = this.location.end;",`      var filler = peg$padEnd("", s.line.toString().length, ' ');`,"      var line = src[s.line - 1];","      var last = s.line === e.line ? e.column : line.length + 1;","      var hatLen = (last - s.column) || 1;",'      str += "\\n --> " + loc + "\\n"','          + filler + " |\\n"','          + s.line + " | " + line + "\\n"',`          + filler + " | " + peg$padEnd("", s.column - 1, ' ')`,'          + peg$padEnd("", hatLen, "^");',"    } else {",'      str += "\\n at " + loc;',"    }","  }","  return str;","};","","peg$SyntaxError.buildMessage = function(expected, found) {","  var DESCRIBE_EXPECTATION_FNS = {","    literal: function(expectation) {",'      return "\\"" + literalEscape(expectation.text) + "\\"";',"    },","","    class: function(expectation) {","      var escapedParts = expectation.parts.map(function(part) {","        return Array.isArray(part)",'          ? classEscape(part[0]) + "-" + classEscape(part[1])',"          : classEscape(part);","      });","",'      return "[" + (expectation.inverted ? "^" : "") + escapedParts.join("") + "]";',"    },","","    any: function() {",'      return "any character";',"    },","","    end: function() {",'      return "end of input";',"    },","","    other: function(expectation) {","      return expectation.description;","    }","  };","","  function hex(ch) {","    return ch.charCodeAt(0).toString(16).toUpperCase();","  }","","  function literalEscape(s) {","    return s",'      .replace(/\\\\/g, "\\\\\\\\")','      .replace(/"/g,  "\\\\\\"")','      .replace(/\\0/g, "\\\\0")','      .replace(/\\t/g, "\\\\t")','      .replace(/\\n/g, "\\\\n")','      .replace(/\\r/g, "\\\\r")','      .replace(/[\\x00-\\x0F]/g,          function(ch) { return "\\\\x0" + hex(ch); })','      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return "\\\\x"  + hex(ch); });',"  }","","  function classEscape(s) {","    return s",'      .replace(/\\\\/g, "\\\\\\\\")','      .replace(/\\]/g, "\\\\]")','      .replace(/\\^/g, "\\\\^")','      .replace(/-/g,  "\\\\-")','      .replace(/\\0/g, "\\\\0")','      .replace(/\\t/g, "\\\\t")','      .replace(/\\n/g, "\\\\n")','      .replace(/\\r/g, "\\\\r")','      .replace(/[\\x00-\\x0F]/g,          function(ch) { return "\\\\x0" + hex(ch); })','      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return "\\\\x"  + hex(ch); });',"  }","","  function describeExpectation(expectation) {","    return DESCRIBE_EXPECTATION_FNS[expectation.type](expectation);","  }","","  function describeExpected(expected) {","    var descriptions = expected.map(describeExpectation);","    var i, j;","","    descriptions.sort();","","    if (descriptions.length > 0) {","      for (i = 1, j = 1; i < descriptions.length; i++) {","        if (descriptions[i - 1] !== descriptions[i]) {","          descriptions[j] = descriptions[i];","          j++;","        }","      }","      descriptions.length = j;","    }","","    switch (descriptions.length) {","      case 1:","        return descriptions[0];","","      case 2:",'        return descriptions[0] + " or " + descriptions[1];',"","      default:",'        return descriptions.slice(0, -1).join(", ")','          + ", or "',"          + descriptions[descriptions.length - 1];","    }","  }","","  function describeFound(found) {",'    return found ? "\\"" + literalEscape(found) + "\\"" : "end of input";',"  }","",'  return "Expected " + describeExpected(expected) + " but " + describeFound(found) + " found.";',"};",""),r.trace&&m.push("function peg$DefaultTracer() {","  this.indentLevel = 0;","}","","peg$DefaultTracer.prototype.trace = function(event) {","  var that = this;","","  function log(event) {","    function repeat(string, n) {",'       var result = "", i;',"","       for (i = 0; i < n; i++) {","         result += string;","       }","","       return result;","    }","","    function pad(string, length) {",'      return string + repeat(" ", length - string.length);',"    }","",'    if (typeof console === "object") {',"      console.log(",'        event.location.start.line + ":" + event.location.start.column + "-"','          + event.location.end.line + ":" + event.location.end.column + " "','          + pad(event.type, 10) + " "','          + repeat("  ", that.indentLevel) + event.rule',"      );","    }","  }","","  switch (event.type) {",'    case "rule.enter":',"      log(event);","      this.indentLevel++;","      break;","",'    case "rule.match":',"      this.indentLevel--;","      log(event);","      break;","",'    case "rule.fail":',"      this.indentLevel--;","      log(event);","      break;","","    default:",'      throw new Error("Invalid event type: " + event.type + ".");',"  }","};","");const E="{ "+r.allowedStartRules.map(T=>T+": "+a(T)).join(", ")+" }",A=a(r.allowedStartRules[0]);return m.push("function peg$parse(input, options) {","  options = options !== undefined ? options : {};","","  var peg$FAILED = {};","  var peg$source = options.grammarSource;","","  var peg$startRuleFunctions = "+E+";","  var peg$startRuleFunction = "+A+";","",u(),"","  var peg$currPos = 0;","  var peg$savedPos = 0;","  var peg$posDetailsCache = [{ line: 1, column: 1 }];","  var peg$maxFailPos = 0;","  var peg$maxFailExpected = [];","  var peg$silentFails = 0;",""),r.cache&&m.push("  var peg$resultsCache = {};",""),r.trace&&m.push('  var peg$tracer = "tracer" in options ? options.tracer : new peg$DefaultTracer();',""),m.push("  var peg$result;","",'  if ("startRule" in options) {',"    if (!(options.startRule in peg$startRuleFunctions)) {",`      throw new Error("Can't start parsing from rule \\"" + options.startRule + "\\".");`,"    }","","    peg$startRuleFunction = peg$startRuleFunctions[options.startRule];","  }","","  function text() {","    return input.substring(peg$savedPos, peg$currPos);","  }","","  function offset() {","    return peg$savedPos;","  }","","  function range() {","    return {","      source: peg$source,","      start: peg$savedPos,","      end: peg$currPos","    };","  }","","  function location() {","    return peg$computeLocation(peg$savedPos, peg$currPos);","  }","","  function expected(description, location) {","    location = location !== undefined","      ? location","      : peg$computeLocation(peg$savedPos, peg$currPos);","","    throw peg$buildStructuredError(","      [peg$otherExpectation(description)],","      input.substring(peg$savedPos, peg$currPos),","      location","    );","  }","","  function error(message, location) {","    location = location !== undefined","      ? location","      : peg$computeLocation(peg$savedPos, peg$currPos);","","    throw peg$buildSimpleError(message, location);","  }","","  function peg$literalExpectation(text, ignoreCase) {",'    return { type: "literal", text: text, ignoreCase: ignoreCase };',"  }","","  function peg$classExpectation(parts, inverted, ignoreCase) {",'    return { type: "class", parts: parts, inverted: inverted, ignoreCase: ignoreCase };',"  }","","  function peg$anyExpectation() {",'    return { type: "any" };',"  }","","  function peg$endExpectation() {",'    return { type: "end" };',"  }","","  function peg$otherExpectation(description) {",'    return { type: "other", description: description };',"  }","","  function peg$computePosDetails(pos) {","    var details = peg$posDetailsCache[pos];","    var p;","","    if (details) {","      return details;","    } else {","      p = pos - 1;","      while (!peg$posDetailsCache[p]) {","        p--;","      }","","      details = peg$posDetailsCache[p];","      details = {","        line: details.line,","        column: details.column","      };","","      while (p < pos) {","        if (input.charCodeAt(p) === 10) {","          details.line++;","          details.column = 1;","        } else {","          details.column++;","        }","","        p++;","      }","","      peg$posDetailsCache[pos] = details;","","      return details;","    }","  }","","  function peg$computeLocation(startPos, endPos) {","    var startPosDetails = peg$computePosDetails(startPos);","    var endPosDetails = peg$computePosDetails(endPos);","","    return {","      source: peg$source,","      start: {","        offset: startPos,","        line: startPosDetails.line,","        column: startPosDetails.column","      },","      end: {","        offset: endPos,","        line: endPosDetails.line,","        column: endPosDetails.column","      }","    };","  }","","  function peg$fail(expected) {","    if (peg$currPos < peg$maxFailPos) { return; }","","    if (peg$currPos > peg$maxFailPos) {","      peg$maxFailPos = peg$currPos;","      peg$maxFailExpected = [];","    }","","    peg$maxFailExpected.push(expected);","  }","","  function peg$buildSimpleError(message, location) {","    return new peg$SyntaxError(message, null, null, location);","  }","","  function peg$buildStructuredError(expected, found, location) {","    return new peg$SyntaxError(","      peg$SyntaxError.buildMessage(expected, found),","      expected,","      found,","      location","    );","  }",""),e.rules.forEach(T=>{m.push(...f(T).map(t)),m.push("")}),e.initializer&&(m.push(d(e.initializer)),m.push("")),m.push("  peg$result = peg$startRuleFunction();","","  if (peg$result !== peg$FAILED && peg$currPos === input.length) {","    return peg$result;","  } else {","    if (peg$result !== peg$FAILED && peg$currPos < input.length) {","      peg$fail(peg$endExpectation());","    }","","    throw peg$buildStructuredError(","      peg$maxFailExpected,","      peg$maxFailPos < input.length ? input.charAt(peg$maxFailPos) : null,","      peg$maxFailPos < input.length","        ? peg$computeLocation(peg$maxFailPos, peg$maxFailPos + 1)","        : peg$computeLocation(peg$maxFailPos, peg$maxFailPos)","    );","  }","}"),new SourceNode(null,null,r.grammarSource,m.map(T=>T instanceof SourceNode?T:T+`
`))}function v(m){function E(){return[`// Generated by Peggy ${VERSION$1}.`,"//","// https://peggyjs.org/"]}function A(){return r.trace?["{","  SyntaxError: peg$SyntaxError,","  DefaultTracer: peg$DefaultTracer,","  parse: peg$parse","}"].join(`
`):["{","  SyntaxError: peg$SyntaxError,","  parse: peg$parse","}"].join(`
`)}const C={bare(){return[...E(),"(function() {",'  "use strict";',"",m,"",t("return "+A()+";"),"})()"]},commonjs(){const R=Object.keys(r.dependencies),b=E();return b.push("",'"use strict";',""),R.length>0&&(R.forEach(S=>{b.push("var "+S+' = require("'+stringEscape(r.dependencies[S])+'");')}),b.push("")),b.push(m,"","module.exports = "+A()+";"),b},es(){const R=Object.keys(r.dependencies),b=E();return b.push(""),R.length>0&&(R.forEach(S=>{b.push("import "+S+' from "'+stringEscape(r.dependencies[S])+'";')}),b.push("")),b.push(m,"","export {","  peg$SyntaxError as SyntaxError,",r.trace?"  peg$DefaultTracer as DefaultTracer,":"","  peg$parse as parse","};"),b},amd(){const R=Object.keys(r.dependencies),b=R.map(M=>r.dependencies[M]),S="["+b.map(M=>'"'+stringEscape(M)+'"').join(", ")+"]",B=R.join(", ");return[...E(),"define("+S+", function("+B+") {",'  "use strict";',"",m,"",t("return "+A()+";"),"});"]},globals(){return[...E(),"(function(root) {",'  "use strict";',"",m,"",t("root."+r.exportVar+" = "+A()+";"),"})(this);"]},umd(){const R=Object.keys(r.dependencies),b=R.map(G=>r.dependencies[G]),S="["+b.map(G=>'"'+stringEscape(G)+'"').join(", ")+"]",B=b.map(G=>'require("'+stringEscape(G)+'")').join(", "),M=R.join(", "),D=E();return D.push("(function(root, factory) {",'  if (typeof define === "function" && define.amd) {',"    define("+S+", factory);",'  } else if (typeof module === "object" && module.exports) {',"    module.exports = factory("+B+");"),r.exportVar!==null&&D.push("  } else {","    root."+r.exportVar+" = factory();"),D.push("  }","})(this, function("+M+") {",'  "use strict";',"",m,"",t("return "+A()+";"),"});"),D}}[r.format]();return new SourceNode(null,null,r.grammarSource,C.map(R=>R instanceof SourceNode?R:R+`
`))}e.code=v(_())}var generateJs=generateJS$1;const asts$3=asts_1,visitor$7=visitor_1;function removeProxyRules$1(e,r,t){function n(o){return o.type==="rule"&&o.expression.type==="rule_ref"}function i(o,a,u){visitor$7.build({rule_ref(h){h.name===a&&(h.name=u,t.info(`Proxy rule "${a}" replaced by the rule "${u}"`,h.location,[{message:"This rule will be used",location:asts$3.findRule(o,u).nameLocation}]))}})(o)}const s=[];e.rules.forEach((o,a)=>{n(o)&&(i(e,o.name,o.expression.name),r.allowedStartRules.indexOf(o.name)===-1&&s.push(a))}),s.reverse(),s.forEach(o=>{e.rules.splice(o,1)})}var removeProxyRules_1=removeProxyRules$1;const visitor$6=visitor_1;function reportDuplicateLabels$1(e,r,t){function n(o){const a={};return Object.keys(o).forEach(u=>{a[u]=o[u]}),a}function i(o,a){s(o.expression,n(a))}const s=visitor$6.build({rule(o){s(o.expression,{})},choice(o,a){o.alternatives.forEach(u=>{s(u,n(a))})},action:i,labeled(o,a){const u=o.label;u&&Object.prototype.hasOwnProperty.call(a,u)&&t.error(`Label "${o.label}" is already defined`,o.labelLocation,[{message:"Original label location",location:a[u]}]),s(o.expression,a),a[o.label]=o.labelLocation},text:i,simple_and:i,simple_not:i,optional:i,zero_or_more:i,one_or_more:i,group:i});s(e)}var reportDuplicateLabels_1=reportDuplicateLabels$1;const visitor$5=visitor_1;function reportDuplicateRules$1(e,r,t){const n={};visitor$5.build({rule(s){if(Object.prototype.hasOwnProperty.call(n,s.name)){t.error(`Rule "${s.name}" is already defined`,s.nameLocation,[{message:"Original rule location",location:n[s.name]}]);return}n[s.name]=s.nameLocation}})(e)}var reportDuplicateRules_1=reportDuplicateRules$1;const asts$2=asts_1,visitor$4=visitor_1;function reportInfiniteRecursion$1(e,r,t){const n=[],i=[],s=visitor$4.build({rule(o){n.push(o.name),s(o.expression),n.pop()},sequence(o){o.elements.every(a=>(s(a),!asts$2.alwaysConsumesOnSuccess(e,a)))},rule_ref(o){i.push(o);const a=asts$2.findRule(e,o.name);if(n.indexOf(o.name)!==-1){n.push(o.name),t.error("Possible infinite loop when parsing (left recursion: "+n.join(" -> ")+")",a.nameLocation,i.map((u,l,h)=>({message:l+1!==h.length?`Step ${l+1}: call of the rule "${u.name}" without input consumption`:`Step ${l+1}: call itself without input consumption - left recursion`,location:u.location})));return}a&&s(a),i.pop()}});s(e)}var reportInfiniteRecursion_1=reportInfiniteRecursion$1;const asts$1=asts_1,visitor$3=visitor_1;function reportInfiniteRepetition$1(e,r,t){visitor$3.build({zero_or_more(i){asts$1.alwaysConsumesOnSuccess(e,i.expression)||t.error("Possible infinite loop when parsing (repetition used with an expression that may not consume any input)",i.location)},one_or_more(i){asts$1.alwaysConsumesOnSuccess(e,i.expression)||t.error("Possible infinite loop when parsing (repetition used with an expression that may not consume any input)",i.location)}})(e)}var reportInfiniteRepetition_1=reportInfiniteRepetition$1;const asts=asts_1,visitor$2=visitor_1;function reportUndefinedRules$1(e,r,t){visitor$2.build({rule_ref(i){asts.findRule(e,i.name)||t.error(`Rule "${i.name}" is not defined`,i.location)}})(e)}var reportUndefinedRules_1=reportUndefinedRules$1;const visitor$1=visitor_1;function reportIncorrectPlucking$1(e,r,t){const n=visitor$1.build({action(i){n(i.expression,i)},labeled(i,s){i.pick&&s&&t.error('"@" cannot be used with an action block',i.labelLocation,[{message:"Action block location",location:s.codeLocation}]),n(i.expression)}});n(e)}var reportIncorrectPlucking_1=reportIncorrectPlucking$1;const GrammarError$1=grammarError;class Defaults{constructor(r){r=typeof r<"u"?r:{},typeof r.error=="function"&&(this.error=r.error),typeof r.warning=="function"&&(this.warning=r.warning),typeof r.info=="function"&&(this.info=r.info)}error(){}warning(){}info(){}}class Session$1{constructor(r){this._callbacks=new Defaults(r),this._firstError=null,this.errors=0,this.problems=[],this.stage=null}error(...r){++this.errors,this._firstError===null&&(this._firstError=new GrammarError$1(...r),this._firstError.stage=this.stage,this._firstError.problems=this.problems),this.problems.push(["error",...r]),this._callbacks.error(this.stage,...r)}warning(...r){this.problems.push(["warning",...r]),this._callbacks.warning(this.stage,...r)}info(...r){this.problems.push(["info",...r]),this._callbacks.info(this.stage,...r)}checkErrors(){if(this.errors!==0)throw this._firstError}}var session=Session$1;const generateBytecode=generateBytecode_1,generateJS=generateJs,inferenceMatchResult=inferenceMatchResult_1,removeProxyRules=removeProxyRules_1,reportDuplicateLabels=reportDuplicateLabels_1,reportDuplicateRules=reportDuplicateRules_1,reportInfiniteRecursion=reportInfiniteRecursion_1,reportInfiniteRepetition=reportInfiniteRepetition_1,reportUndefinedRules=reportUndefinedRules_1,reportIncorrectPlucking=reportIncorrectPlucking_1,Session=session,visitor=visitor_1;function processOptions(e,r){const t={};return Object.keys(e).forEach(n=>{t[n]=e[n]}),Object.keys(r).forEach(n=>{Object.prototype.hasOwnProperty.call(t,n)||(t[n]=r[n])}),t}const compiler$1={visitor,passes:{check:[reportUndefinedRules,reportDuplicateRules,reportDuplicateLabels,reportInfiniteRecursion,reportInfiniteRepetition,reportIncorrectPlucking],transform:[removeProxyRules,inferenceMatchResult],generate:[generateBytecode,generateJS]},compile(ast,passes,options){if(options=options!==void 0?options:{},options=processOptions(options,{allowedStartRules:[ast.rules[0].name],cache:!1,dependencies:{},exportVar:null,format:"bare",output:"parser",trace:!1}),!Array.isArray(options.allowedStartRules))throw new Error("allowedStartRules must be an array");if(options.allowedStartRules.length===0)throw new Error("Must have at least one start rule");const allRules=ast.rules.map(e=>e.name);for(const e of options.allowedStartRules)if(allRules.indexOf(e)===-1)throw new Error(`Unknown start rule "${e}"`);const session=new Session(options);switch(Object.keys(passes).forEach(e=>{session.stage=e,session.info(`Process stage ${e}`),passes[e].forEach(r=>{session.info(`Process pass ${e}.${r.name}`),r(ast,options,session)}),session.checkErrors()}),options.output){case"parser":return eval(ast.code.toString());case"source":return ast.code.toString();case"source-and-map":return ast.code;default:throw new Error("Invalid output format: "+options.output+".")}}};var compiler_1=compiler$1;const OPS_TO_PREFIXED_TYPES={$:"text","&":"simple_and","!":"simple_not"},OPS_TO_SUFFIXED_TYPES={"?":"optional","*":"zero_or_more","+":"one_or_more"},OPS_TO_SEMANTIC_PREDICATE_TYPES={"&":"semantic_and","!":"semantic_not"};function peg$subclass(e,r){function t(){this.constructor=e}t.prototype=r.prototype,e.prototype=new t}function peg$SyntaxError(e,r,t,n){var i=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(i,peg$SyntaxError.prototype),i.expected=r,i.found=t,i.location=n,i.name="SyntaxError",i}peg$subclass(peg$SyntaxError,Error);function peg$padEnd(e,r,t){return t=t||" ",e.length>r?e:(r-=e.length,t+=t.repeat(r),e+t.slice(0,r))}peg$SyntaxError.prototype.format=function(e){var r="Error: "+this.message;if(this.location){var t=null,n;for(n=0;n<e.length;n++)if(e[n].source===this.location.source){t=e[n].text.split(/\r\n|\n|\r/g);break}var i=this.location.start,s=this.location.source+":"+i.line+":"+i.column;if(t){var o=this.location.end,a=peg$padEnd("",i.line.toString().length," "),u=t[i.line-1],l=i.line===o.line?o.column:u.length+1,h=l-i.column||1;r+=`
 --> `+s+`
`+a+` |
`+i.line+" | "+u+`
`+a+" | "+peg$padEnd("",i.column-1," ")+peg$padEnd("",h,"^")}else r+=`
 at `+s}return r};peg$SyntaxError.buildMessage=function(e,r){var t={literal:function(l){return'"'+i(l.text)+'"'},class:function(l){var h=l.parts.map(function(f){return Array.isArray(f)?s(f[0])+"-"+s(f[1]):s(f)});return"["+(l.inverted?"^":"")+h.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(l){return l.description}};function n(l){return l.charCodeAt(0).toString(16).toUpperCase()}function i(l){return l.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(h){return"\\x0"+n(h)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(h){return"\\x"+n(h)})}function s(l){return l.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(h){return"\\x0"+n(h)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(h){return"\\x"+n(h)})}function o(l){return t[l.type](l)}function a(l){var h=l.map(o),f,d;if(h.sort(),h.length>0){for(f=1,d=1;f<h.length;f++)h[f-1]!==h[f]&&(h[d]=h[f],d++);h.length=d}switch(h.length){case 1:return h[0];case 2:return h[0]+" or "+h[1];default:return h.slice(0,-1).join(", ")+", or "+h[h.length-1]}}function u(l){return l?'"'+i(l)+'"':"end of input"}return"Expected "+a(e)+" but "+u(r)+" found."};function peg$parse(e,r){r=r!==void 0?r:{};var t={},n=r.grammarSource,i={Grammar:xt},s=xt,o="{",a="}",u="=",l="/",h="@",f=":",d="$",_="&",v="!",m="?",E="*",A="+",T="(",C=")",R="	",b="\v",S="\f",B=" ",M="\xA0",D="\uFEFF",G=`
`,J=`\r
`,re="\r",ne="\u2028",de="\u2029",q="/*",z="*/",te="//",ue="_",le="\\",O="\u200C",V="\u200D",Z="i",ee='"',oe="'",ge="[",ce="^",pe="]",Ae="-",Ee="0",me="b",he="f",ve="n",P="r",N="t",$="v",U="x",k="u",W=".",Q=";",Y=/^[\n\r\u2028\u2029]/,K=/^[0-9]/,j=/^[0-9a-f]/i,se=/^[{}]/,ie=/^[a-z\xB5\xDF-\xF6\xF8-\xFF\u0101\u0103\u0105\u0107\u0109\u010B\u010D\u010F\u0111\u0113\u0115\u0117\u0119\u011B\u011D\u011F\u0121\u0123\u0125\u0127\u0129\u012B\u012D\u012F\u0131\u0133\u0135\u0137-\u0138\u013A\u013C\u013E\u0140\u0142\u0144\u0146\u0148-\u0149\u014B\u014D\u014F\u0151\u0153\u0155\u0157\u0159\u015B\u015D\u015F\u0161\u0163\u0165\u0167\u0169\u016B\u016D\u016F\u0171\u0173\u0175\u0177\u017A\u017C\u017E-\u0180\u0183\u0185\u0188\u018C-\u018D\u0192\u0195\u0199-\u019B\u019E\u01A1\u01A3\u01A5\u01A8\u01AA-\u01AB\u01AD\u01B0\u01B4\u01B6\u01B9-\u01BA\u01BD-\u01BF\u01C6\u01C9\u01CC\u01CE\u01D0\u01D2\u01D4\u01D6\u01D8\u01DA\u01DC-\u01DD\u01DF\u01E1\u01E3\u01E5\u01E7\u01E9\u01EB\u01ED\u01EF-\u01F0\u01F3\u01F5\u01F9\u01FB\u01FD\u01FF\u0201\u0203\u0205\u0207\u0209\u020B\u020D\u020F\u0211\u0213\u0215\u0217\u0219\u021B\u021D\u021F\u0221\u0223\u0225\u0227\u0229\u022B\u022D\u022F\u0231\u0233-\u0239\u023C\u023F-\u0240\u0242\u0247\u0249\u024B\u024D\u024F-\u0293\u0295-\u02AF\u0371\u0373\u0377\u037B-\u037D\u0390\u03AC-\u03CE\u03D0-\u03D1\u03D5-\u03D7\u03D9\u03DB\u03DD\u03DF\u03E1\u03E3\u03E5\u03E7\u03E9\u03EB\u03ED\u03EF-\u03F3\u03F5\u03F8\u03FB-\u03FC\u0430-\u045F\u0461\u0463\u0465\u0467\u0469\u046B\u046D\u046F\u0471\u0473\u0475\u0477\u0479\u047B\u047D\u047F\u0481\u048B\u048D\u048F\u0491\u0493\u0495\u0497\u0499\u049B\u049D\u049F\u04A1\u04A3\u04A5\u04A7\u04A9\u04AB\u04AD\u04AF\u04B1\u04B3\u04B5\u04B7\u04B9\u04BB\u04BD\u04BF\u04C2\u04C4\u04C6\u04C8\u04CA\u04CC\u04CE-\u04CF\u04D1\u04D3\u04D5\u04D7\u04D9\u04DB\u04DD\u04DF\u04E1\u04E3\u04E5\u04E7\u04E9\u04EB\u04ED\u04EF\u04F1\u04F3\u04F5\u04F7\u04F9\u04FB\u04FD\u04FF\u0501\u0503\u0505\u0507\u0509\u050B\u050D\u050F\u0511\u0513\u0515\u0517\u0519\u051B\u051D\u051F\u0521\u0523\u0525\u0527\u0529\u052B\u052D\u052F\u0561-\u0587\u13F8-\u13FD\u1D00-\u1D2B\u1D6B-\u1D77\u1D79-\u1D9A\u1E01\u1E03\u1E05\u1E07\u1E09\u1E0B\u1E0D\u1E0F\u1E11\u1E13\u1E15\u1E17\u1E19\u1E1B\u1E1D\u1E1F\u1E21\u1E23\u1E25\u1E27\u1E29\u1E2B\u1E2D\u1E2F\u1E31\u1E33\u1E35\u1E37\u1E39\u1E3B\u1E3D\u1E3F\u1E41\u1E43\u1E45\u1E47\u1E49\u1E4B\u1E4D\u1E4F\u1E51\u1E53\u1E55\u1E57\u1E59\u1E5B\u1E5D\u1E5F\u1E61\u1E63\u1E65\u1E67\u1E69\u1E6B\u1E6D\u1E6F\u1E71\u1E73\u1E75\u1E77\u1E79\u1E7B\u1E7D\u1E7F\u1E81\u1E83\u1E85\u1E87\u1E89\u1E8B\u1E8D\u1E8F\u1E91\u1E93\u1E95-\u1E9D\u1E9F\u1EA1\u1EA3\u1EA5\u1EA7\u1EA9\u1EAB\u1EAD\u1EAF\u1EB1\u1EB3\u1EB5\u1EB7\u1EB9\u1EBB\u1EBD\u1EBF\u1EC1\u1EC3\u1EC5\u1EC7\u1EC9\u1ECB\u1ECD\u1ECF\u1ED1\u1ED3\u1ED5\u1ED7\u1ED9\u1EDB\u1EDD\u1EDF\u1EE1\u1EE3\u1EE5\u1EE7\u1EE9\u1EEB\u1EED\u1EEF\u1EF1\u1EF3\u1EF5\u1EF7\u1EF9\u1EFB\u1EFD\u1EFF-\u1F07\u1F10-\u1F15\u1F20-\u1F27\u1F30-\u1F37\u1F40-\u1F45\u1F50-\u1F57\u1F60-\u1F67\u1F70-\u1F7D\u1F80-\u1F87\u1F90-\u1F97\u1FA0-\u1FA7\u1FB0-\u1FB4\u1FB6-\u1FB7\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FC7\u1FD0-\u1FD3\u1FD6-\u1FD7\u1FE0-\u1FE7\u1FF2-\u1FF4\u1FF6-\u1FF7\u210A\u210E-\u210F\u2113\u212F\u2134\u2139\u213C-\u213D\u2146-\u2149\u214E\u2184\u2C30-\u2C5E\u2C61\u2C65-\u2C66\u2C68\u2C6A\u2C6C\u2C71\u2C73-\u2C74\u2C76-\u2C7B\u2C81\u2C83\u2C85\u2C87\u2C89\u2C8B\u2C8D\u2C8F\u2C91\u2C93\u2C95\u2C97\u2C99\u2C9B\u2C9D\u2C9F\u2CA1\u2CA3\u2CA5\u2CA7\u2CA9\u2CAB\u2CAD\u2CAF\u2CB1\u2CB3\u2CB5\u2CB7\u2CB9\u2CBB\u2CBD\u2CBF\u2CC1\u2CC3\u2CC5\u2CC7\u2CC9\u2CCB\u2CCD\u2CCF\u2CD1\u2CD3\u2CD5\u2CD7\u2CD9\u2CDB\u2CDD\u2CDF\u2CE1\u2CE3-\u2CE4\u2CEC\u2CEE\u2CF3\u2D00-\u2D25\u2D27\u2D2D\uA641\uA643\uA645\uA647\uA649\uA64B\uA64D\uA64F\uA651\uA653\uA655\uA657\uA659\uA65B\uA65D\uA65F\uA661\uA663\uA665\uA667\uA669\uA66B\uA66D\uA681\uA683\uA685\uA687\uA689\uA68B\uA68D\uA68F\uA691\uA693\uA695\uA697\uA699\uA69B\uA723\uA725\uA727\uA729\uA72B\uA72D\uA72F-\uA731\uA733\uA735\uA737\uA739\uA73B\uA73D\uA73F\uA741\uA743\uA745\uA747\uA749\uA74B\uA74D\uA74F\uA751\uA753\uA755\uA757\uA759\uA75B\uA75D\uA75F\uA761\uA763\uA765\uA767\uA769\uA76B\uA76D\uA76F\uA771-\uA778\uA77A\uA77C\uA77F\uA781\uA783\uA785\uA787\uA78C\uA78E\uA791\uA793-\uA795\uA797\uA799\uA79B\uA79D\uA79F\uA7A1\uA7A3\uA7A5\uA7A7\uA7A9\uA7B5\uA7B7\uA7FA\uAB30-\uAB5A\uAB60-\uAB65\uAB70-\uABBF\uFB00-\uFB06\uFB13-\uFB17\uFF41-\uFF5A]/,ae=/^[\u02B0-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0374\u037A\u0559\u0640\u06E5-\u06E6\u07F4-\u07F5\u07FA\u081A\u0824\u0828\u0971\u0E46\u0EC6\u10FC\u17D7\u1843\u1AA7\u1C78-\u1C7D\u1D2C-\u1D6A\u1D78\u1D9B-\u1DBF\u2071\u207F\u2090-\u209C\u2C7C-\u2C7D\u2D6F\u2E2F\u3005\u3031-\u3035\u303B\u309D-\u309E\u30FC-\u30FE\uA015\uA4F8-\uA4FD\uA60C\uA67F\uA69C-\uA69D\uA717-\uA71F\uA770\uA788\uA7F8-\uA7F9\uA9CF\uA9E6\uAA70\uAADD\uAAF3-\uAAF4\uAB5C-\uAB5F\uFF70\uFF9E-\uFF9F]/,_e=/^[\xAA\xBA\u01BB\u01C0-\u01C3\u0294\u05D0-\u05EA\u05F0-\u05F2\u0620-\u063F\u0641-\u064A\u066E-\u066F\u0671-\u06D3\u06D5\u06EE-\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u0800-\u0815\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0972-\u0980\u0985-\u098C\u098F-\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC-\u09DD\u09DF-\u09E1\u09F0-\u09F1\u0A05-\u0A0A\u0A0F-\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32-\u0A33\u0A35-\u0A36\u0A38-\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2-\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0-\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F-\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32-\u0B33\u0B35-\u0B39\u0B3D\u0B5C-\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99-\u0B9A\u0B9C\u0B9E-\u0B9F\u0BA3-\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60-\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0-\u0CE1\u0CF1-\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32-\u0E33\u0E40-\u0E45\u0E81-\u0E82\u0E84\u0E87-\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA-\u0EAB\u0EAD-\u0EB0\u0EB2-\u0EB3\u0EBD\u0EC0-\u0EC4\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065-\u1066\u106E-\u1070\u1075-\u1081\u108E\u10D0-\u10FA\u10FD-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17DC\u1820-\u1842\u1844-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE-\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C77\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5-\u1CF6\u2135-\u2138\u2D30-\u2D67\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3006\u303C\u3041-\u3096\u309F\u30A1-\u30FA\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA014\uA016-\uA48C\uA4D0-\uA4F7\uA500-\uA60B\uA610-\uA61F\uA62A-\uA62B\uA66E\uA6A0-\uA6E5\uA78F\uA7F7\uA7FB-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9E0-\uA9E4\uA9E7-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA6F\uAA71-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5-\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADC\uAAE0-\uAAEA\uAAF2\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40-\uFB41\uFB43-\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF66-\uFF6F\uFF71-\uFF9D\uFFA0-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,Te=/^[\u01C5\u01C8\u01CB\u01F2\u1F88-\u1F8F\u1F98-\u1F9F\u1FA8-\u1FAF\u1FBC\u1FCC\u1FFC]/,Ce=/^[A-Z\xC0-\xD6\xD8-\xDE\u0100\u0102\u0104\u0106\u0108\u010A\u010C\u010E\u0110\u0112\u0114\u0116\u0118\u011A\u011C\u011E\u0120\u0122\u0124\u0126\u0128\u012A\u012C\u012E\u0130\u0132\u0134\u0136\u0139\u013B\u013D\u013F\u0141\u0143\u0145\u0147\u014A\u014C\u014E\u0150\u0152\u0154\u0156\u0158\u015A\u015C\u015E\u0160\u0162\u0164\u0166\u0168\u016A\u016C\u016E\u0170\u0172\u0174\u0176\u0178-\u0179\u017B\u017D\u0181-\u0182\u0184\u0186-\u0187\u0189-\u018B\u018E-\u0191\u0193-\u0194\u0196-\u0198\u019C-\u019D\u019F-\u01A0\u01A2\u01A4\u01A6-\u01A7\u01A9\u01AC\u01AE-\u01AF\u01B1-\u01B3\u01B5\u01B7-\u01B8\u01BC\u01C4\u01C7\u01CA\u01CD\u01CF\u01D1\u01D3\u01D5\u01D7\u01D9\u01DB\u01DE\u01E0\u01E2\u01E4\u01E6\u01E8\u01EA\u01EC\u01EE\u01F1\u01F4\u01F6-\u01F8\u01FA\u01FC\u01FE\u0200\u0202\u0204\u0206\u0208\u020A\u020C\u020E\u0210\u0212\u0214\u0216\u0218\u021A\u021C\u021E\u0220\u0222\u0224\u0226\u0228\u022A\u022C\u022E\u0230\u0232\u023A-\u023B\u023D-\u023E\u0241\u0243-\u0246\u0248\u024A\u024C\u024E\u0370\u0372\u0376\u037F\u0386\u0388-\u038A\u038C\u038E-\u038F\u0391-\u03A1\u03A3-\u03AB\u03CF\u03D2-\u03D4\u03D8\u03DA\u03DC\u03DE\u03E0\u03E2\u03E4\u03E6\u03E8\u03EA\u03EC\u03EE\u03F4\u03F7\u03F9-\u03FA\u03FD-\u042F\u0460\u0462\u0464\u0466\u0468\u046A\u046C\u046E\u0470\u0472\u0474\u0476\u0478\u047A\u047C\u047E\u0480\u048A\u048C\u048E\u0490\u0492\u0494\u0496\u0498\u049A\u049C\u049E\u04A0\u04A2\u04A4\u04A6\u04A8\u04AA\u04AC\u04AE\u04B0\u04B2\u04B4\u04B6\u04B8\u04BA\u04BC\u04BE\u04C0-\u04C1\u04C3\u04C5\u04C7\u04C9\u04CB\u04CD\u04D0\u04D2\u04D4\u04D6\u04D8\u04DA\u04DC\u04DE\u04E0\u04E2\u04E4\u04E6\u04E8\u04EA\u04EC\u04EE\u04F0\u04F2\u04F4\u04F6\u04F8\u04FA\u04FC\u04FE\u0500\u0502\u0504\u0506\u0508\u050A\u050C\u050E\u0510\u0512\u0514\u0516\u0518\u051A\u051C\u051E\u0520\u0522\u0524\u0526\u0528\u052A\u052C\u052E\u0531-\u0556\u10A0-\u10C5\u10C7\u10CD\u13A0-\u13F5\u1E00\u1E02\u1E04\u1E06\u1E08\u1E0A\u1E0C\u1E0E\u1E10\u1E12\u1E14\u1E16\u1E18\u1E1A\u1E1C\u1E1E\u1E20\u1E22\u1E24\u1E26\u1E28\u1E2A\u1E2C\u1E2E\u1E30\u1E32\u1E34\u1E36\u1E38\u1E3A\u1E3C\u1E3E\u1E40\u1E42\u1E44\u1E46\u1E48\u1E4A\u1E4C\u1E4E\u1E50\u1E52\u1E54\u1E56\u1E58\u1E5A\u1E5C\u1E5E\u1E60\u1E62\u1E64\u1E66\u1E68\u1E6A\u1E6C\u1E6E\u1E70\u1E72\u1E74\u1E76\u1E78\u1E7A\u1E7C\u1E7E\u1E80\u1E82\u1E84\u1E86\u1E88\u1E8A\u1E8C\u1E8E\u1E90\u1E92\u1E94\u1E9E\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6\u1EC8\u1ECA\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u1EF2\u1EF4\u1EF6\u1EF8\u1EFA\u1EFC\u1EFE\u1F08-\u1F0F\u1F18-\u1F1D\u1F28-\u1F2F\u1F38-\u1F3F\u1F48-\u1F4D\u1F59\u1F5B\u1F5D\u1F5F\u1F68-\u1F6F\u1FB8-\u1FBB\u1FC8-\u1FCB\u1FD8-\u1FDB\u1FE8-\u1FEC\u1FF8-\u1FFB\u2102\u2107\u210B-\u210D\u2110-\u2112\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u2130-\u2133\u213E-\u213F\u2145\u2183\u2C00-\u2C2E\u2C60\u2C62-\u2C64\u2C67\u2C69\u2C6B\u2C6D-\u2C70\u2C72\u2C75\u2C7E-\u2C80\u2C82\u2C84\u2C86\u2C88\u2C8A\u2C8C\u2C8E\u2C90\u2C92\u2C94\u2C96\u2C98\u2C9A\u2C9C\u2C9E\u2CA0\u2CA2\u2CA4\u2CA6\u2CA8\u2CAA\u2CAC\u2CAE\u2CB0\u2CB2\u2CB4\u2CB6\u2CB8\u2CBA\u2CBC\u2CBE\u2CC0\u2CC2\u2CC4\u2CC6\u2CC8\u2CCA\u2CCC\u2CCE\u2CD0\u2CD2\u2CD4\u2CD6\u2CD8\u2CDA\u2CDC\u2CDE\u2CE0\u2CE2\u2CEB\u2CED\u2CF2\uA640\uA642\uA644\uA646\uA648\uA64A\uA64C\uA64E\uA650\uA652\uA654\uA656\uA658\uA65A\uA65C\uA65E\uA660\uA662\uA664\uA666\uA668\uA66A\uA66C\uA680\uA682\uA684\uA686\uA688\uA68A\uA68C\uA68E\uA690\uA692\uA694\uA696\uA698\uA69A\uA722\uA724\uA726\uA728\uA72A\uA72C\uA72E\uA732\uA734\uA736\uA738\uA73A\uA73C\uA73E\uA740\uA742\uA744\uA746\uA748\uA74A\uA74C\uA74E\uA750\uA752\uA754\uA756\uA758\uA75A\uA75C\uA75E\uA760\uA762\uA764\uA766\uA768\uA76A\uA76C\uA76E\uA779\uA77B\uA77D-\uA77E\uA780\uA782\uA784\uA786\uA78B\uA78D\uA790\uA792\uA796\uA798\uA79A\uA79C\uA79E\uA7A0\uA7A2\uA7A4\uA7A6\uA7A8\uA7AA-\uA7AD\uA7B0-\uA7B4\uA7B6\uFF21-\uFF3A]/,xe=/^[\u0903\u093B\u093E-\u0940\u0949-\u094C\u094E-\u094F\u0982-\u0983\u09BE-\u09C0\u09C7-\u09C8\u09CB-\u09CC\u09D7\u0A03\u0A3E-\u0A40\u0A83\u0ABE-\u0AC0\u0AC9\u0ACB-\u0ACC\u0B02-\u0B03\u0B3E\u0B40\u0B47-\u0B48\u0B4B-\u0B4C\u0B57\u0BBE-\u0BBF\u0BC1-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD7\u0C01-\u0C03\u0C41-\u0C44\u0C82-\u0C83\u0CBE\u0CC0-\u0CC4\u0CC7-\u0CC8\u0CCA-\u0CCB\u0CD5-\u0CD6\u0D02-\u0D03\u0D3E-\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D57\u0D82-\u0D83\u0DCF-\u0DD1\u0DD8-\u0DDF\u0DF2-\u0DF3\u0F3E-\u0F3F\u0F7F\u102B-\u102C\u1031\u1038\u103B-\u103C\u1056-\u1057\u1062-\u1064\u1067-\u106D\u1083-\u1084\u1087-\u108C\u108F\u109A-\u109C\u17B6\u17BE-\u17C5\u17C7-\u17C8\u1923-\u1926\u1929-\u192B\u1930-\u1931\u1933-\u1938\u1A19-\u1A1A\u1A55\u1A57\u1A61\u1A63-\u1A64\u1A6D-\u1A72\u1B04\u1B35\u1B3B\u1B3D-\u1B41\u1B43-\u1B44\u1B82\u1BA1\u1BA6-\u1BA7\u1BAA\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2-\u1BF3\u1C24-\u1C2B\u1C34-\u1C35\u1CE1\u1CF2-\u1CF3\u302E-\u302F\uA823-\uA824\uA827\uA880-\uA881\uA8B4-\uA8C3\uA952-\uA953\uA983\uA9B4-\uA9B5\uA9BA-\uA9BB\uA9BD-\uA9C0\uAA2F-\uAA30\uAA33-\uAA34\uAA4D\uAA7B\uAA7D\uAAEB\uAAEE-\uAAEF\uAAF5\uABE3-\uABE4\uABE6-\uABE7\uABE9-\uABEA\uABEC]/,be=/^[\u0300-\u036F\u0483-\u0487\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962-\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2-\u09E3\u0A01-\u0A02\u0A3C\u0A41-\u0A42\u0A47-\u0A48\u0A4B-\u0A4D\u0A51\u0A70-\u0A71\u0A75\u0A81-\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7-\u0AC8\u0ACD\u0AE2-\u0AE3\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B56\u0B62-\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55-\u0C56\u0C62-\u0C63\u0C81\u0CBC\u0CBF\u0CC6\u0CCC-\u0CCD\u0CE2-\u0CE3\u0D01\u0D41-\u0D44\u0D4D\u0D62-\u0D63\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB-\u0EBC\u0EC8-\u0ECD\u0F18-\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86-\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039-\u103A\u103D-\u103E\u1058-\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17B4-\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u18A9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193B\u1A17-\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ABD\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80-\u1B81\u1BA2-\u1BA5\u1BA8-\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8-\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8-\u1CF9\u1DC0-\u1DF5\u1DFC-\u1DFF\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099-\u309A\uA66F\uA674-\uA67D\uA69E-\uA69F\uA6F0-\uA6F1\uA802\uA806\uA80B\uA825-\uA826\uA8C4\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9E5\uAA29-\uAA2E\uAA31-\uAA32\uAA35-\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7-\uAAB8\uAABE-\uAABF\uAAC1\uAAEC-\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/,Oe=/^[0-9\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u1090-\u1099\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\uA620-\uA629\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]/,Le=/^[\u16EE-\u16F0\u2160-\u2182\u2185-\u2188\u3007\u3021-\u3029\u3038-\u303A\uA6E6-\uA6EF]/,ze=/^[_\u203F-\u2040\u2054\uFE33-\uFE34\uFE4D-\uFE4F\uFF3F]/,Ge=/^[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,ke=fe("{",!1),Pe=fe("}",!1),we=fe("=",!1),je=fe("/",!1),kt=fe("@",!1),Ht=fe(":",!1),pt=fe("$",!1),_t=fe("&",!1),vt=fe("!",!1),Xt=fe("?",!1),Vt=fe("*",!1),jt=fe("+",!1),zt=fe("(",!1),Wt=fe(")",!1),gt=bn(),Yt=Ue("whitespace"),qt=fe("	",!1),Kt=fe("\v",!1),Zt=fe("\f",!1),Jt=fe(" ",!1),Qt=fe("\xA0",!1),er=fe("\uFEFF",!1),tr=Fe([`
`,"\r","\u2028","\u2029"],!1,!1),rr=Ue("end of line"),nr=fe(`
`,!1),ir=fe(`\r
`,!1),sr=fe("\r",!1),or=fe("\u2028",!1),ar=fe("\u2029",!1),ur=Ue("comment"),mt=fe("/*",!1),He=fe("*/",!1),lr=fe("//",!1),hr=Ue("identifier"),cr=fe("_",!1),$e=fe("\\",!1),fr=fe("\u200C",!1),dr=fe("\u200D",!1),pr=Ue("literal"),Et=fe("i",!1),_r=Ue("string"),We=fe('"',!1),Ye=fe("'",!1),vr=Ue("character class"),gr=fe("[",!1),mr=fe("^",!1),At=fe("]",!1),Er=fe("-",!1),Ar=fe("0",!1),yr=fe("b",!1),Tr=fe("f",!1),Cr=fe("n",!1),xr=fe("r",!1),br=fe("t",!1),Rr=fe("v",!1),yt=fe("x",!1),Tt=fe("u",!1),Ir=Fe([["0","9"]],!1,!1),Pr=Fe([["0","9"],["a","f"]],!1,!0),Fr=fe(".",!1),Sr=Ue("code block"),qe=Fe(["{","}"],!1,!1),Nr=Fe([["a","z"],"\xB5",["\xDF","\xF6"],["\xF8","\xFF"],"\u0101","\u0103","\u0105","\u0107","\u0109","\u010B","\u010D","\u010F","\u0111","\u0113","\u0115","\u0117","\u0119","\u011B","\u011D","\u011F","\u0121","\u0123","\u0125","\u0127","\u0129","\u012B","\u012D","\u012F","\u0131","\u0133","\u0135",["\u0137","\u0138"],"\u013A","\u013C","\u013E","\u0140","\u0142","\u0144","\u0146",["\u0148","\u0149"],"\u014B","\u014D","\u014F","\u0151","\u0153","\u0155","\u0157","\u0159","\u015B","\u015D","\u015F","\u0161","\u0163","\u0165","\u0167","\u0169","\u016B","\u016D","\u016F","\u0171","\u0173","\u0175","\u0177","\u017A","\u017C",["\u017E","\u0180"],"\u0183","\u0185","\u0188",["\u018C","\u018D"],"\u0192","\u0195",["\u0199","\u019B"],"\u019E","\u01A1","\u01A3","\u01A5","\u01A8",["\u01AA","\u01AB"],"\u01AD","\u01B0","\u01B4","\u01B6",["\u01B9","\u01BA"],["\u01BD","\u01BF"],"\u01C6","\u01C9","\u01CC","\u01CE","\u01D0","\u01D2","\u01D4","\u01D6","\u01D8","\u01DA",["\u01DC","\u01DD"],"\u01DF","\u01E1","\u01E3","\u01E5","\u01E7","\u01E9","\u01EB","\u01ED",["\u01EF","\u01F0"],"\u01F3","\u01F5","\u01F9","\u01FB","\u01FD","\u01FF","\u0201","\u0203","\u0205","\u0207","\u0209","\u020B","\u020D","\u020F","\u0211","\u0213","\u0215","\u0217","\u0219","\u021B","\u021D","\u021F","\u0221","\u0223","\u0225","\u0227","\u0229","\u022B","\u022D","\u022F","\u0231",["\u0233","\u0239"],"\u023C",["\u023F","\u0240"],"\u0242","\u0247","\u0249","\u024B","\u024D",["\u024F","\u0293"],["\u0295","\u02AF"],"\u0371","\u0373","\u0377",["\u037B","\u037D"],"\u0390",["\u03AC","\u03CE"],["\u03D0","\u03D1"],["\u03D5","\u03D7"],"\u03D9","\u03DB","\u03DD","\u03DF","\u03E1","\u03E3","\u03E5","\u03E7","\u03E9","\u03EB","\u03ED",["\u03EF","\u03F3"],"\u03F5","\u03F8",["\u03FB","\u03FC"],["\u0430","\u045F"],"\u0461","\u0463","\u0465","\u0467","\u0469","\u046B","\u046D","\u046F","\u0471","\u0473","\u0475","\u0477","\u0479","\u047B","\u047D","\u047F","\u0481","\u048B","\u048D","\u048F","\u0491","\u0493","\u0495","\u0497","\u0499","\u049B","\u049D","\u049F","\u04A1","\u04A3","\u04A5","\u04A7","\u04A9","\u04AB","\u04AD","\u04AF","\u04B1","\u04B3","\u04B5","\u04B7","\u04B9","\u04BB","\u04BD","\u04BF","\u04C2","\u04C4","\u04C6","\u04C8","\u04CA","\u04CC",["\u04CE","\u04CF"],"\u04D1","\u04D3","\u04D5","\u04D7","\u04D9","\u04DB","\u04DD","\u04DF","\u04E1","\u04E3","\u04E5","\u04E7","\u04E9","\u04EB","\u04ED","\u04EF","\u04F1","\u04F3","\u04F5","\u04F7","\u04F9","\u04FB","\u04FD","\u04FF","\u0501","\u0503","\u0505","\u0507","\u0509","\u050B","\u050D","\u050F","\u0511","\u0513","\u0515","\u0517","\u0519","\u051B","\u051D","\u051F","\u0521","\u0523","\u0525","\u0527","\u0529","\u052B","\u052D","\u052F",["\u0561","\u0587"],["\u13F8","\u13FD"],["\u1D00","\u1D2B"],["\u1D6B","\u1D77"],["\u1D79","\u1D9A"],"\u1E01","\u1E03","\u1E05","\u1E07","\u1E09","\u1E0B","\u1E0D","\u1E0F","\u1E11","\u1E13","\u1E15","\u1E17","\u1E19","\u1E1B","\u1E1D","\u1E1F","\u1E21","\u1E23","\u1E25","\u1E27","\u1E29","\u1E2B","\u1E2D","\u1E2F","\u1E31","\u1E33","\u1E35","\u1E37","\u1E39","\u1E3B","\u1E3D","\u1E3F","\u1E41","\u1E43","\u1E45","\u1E47","\u1E49","\u1E4B","\u1E4D","\u1E4F","\u1E51","\u1E53","\u1E55","\u1E57","\u1E59","\u1E5B","\u1E5D","\u1E5F","\u1E61","\u1E63","\u1E65","\u1E67","\u1E69","\u1E6B","\u1E6D","\u1E6F","\u1E71","\u1E73","\u1E75","\u1E77","\u1E79","\u1E7B","\u1E7D","\u1E7F","\u1E81","\u1E83","\u1E85","\u1E87","\u1E89","\u1E8B","\u1E8D","\u1E8F","\u1E91","\u1E93",["\u1E95","\u1E9D"],"\u1E9F","\u1EA1","\u1EA3","\u1EA5","\u1EA7","\u1EA9","\u1EAB","\u1EAD","\u1EAF","\u1EB1","\u1EB3","\u1EB5","\u1EB7","\u1EB9","\u1EBB","\u1EBD","\u1EBF","\u1EC1","\u1EC3","\u1EC5","\u1EC7","\u1EC9","\u1ECB","\u1ECD","\u1ECF","\u1ED1","\u1ED3","\u1ED5","\u1ED7","\u1ED9","\u1EDB","\u1EDD","\u1EDF","\u1EE1","\u1EE3","\u1EE5","\u1EE7","\u1EE9","\u1EEB","\u1EED","\u1EEF","\u1EF1","\u1EF3","\u1EF5","\u1EF7","\u1EF9","\u1EFB","\u1EFD",["\u1EFF","\u1F07"],["\u1F10","\u1F15"],["\u1F20","\u1F27"],["\u1F30","\u1F37"],["\u1F40","\u1F45"],["\u1F50","\u1F57"],["\u1F60","\u1F67"],["\u1F70","\u1F7D"],["\u1F80","\u1F87"],["\u1F90","\u1F97"],["\u1FA0","\u1FA7"],["\u1FB0","\u1FB4"],["\u1FB6","\u1FB7"],"\u1FBE",["\u1FC2","\u1FC4"],["\u1FC6","\u1FC7"],["\u1FD0","\u1FD3"],["\u1FD6","\u1FD7"],["\u1FE0","\u1FE7"],["\u1FF2","\u1FF4"],["\u1FF6","\u1FF7"],"\u210A",["\u210E","\u210F"],"\u2113","\u212F","\u2134","\u2139",["\u213C","\u213D"],["\u2146","\u2149"],"\u214E","\u2184",["\u2C30","\u2C5E"],"\u2C61",["\u2C65","\u2C66"],"\u2C68","\u2C6A","\u2C6C","\u2C71",["\u2C73","\u2C74"],["\u2C76","\u2C7B"],"\u2C81","\u2C83","\u2C85","\u2C87","\u2C89","\u2C8B","\u2C8D","\u2C8F","\u2C91","\u2C93","\u2C95","\u2C97","\u2C99","\u2C9B","\u2C9D","\u2C9F","\u2CA1","\u2CA3","\u2CA5","\u2CA7","\u2CA9","\u2CAB","\u2CAD","\u2CAF","\u2CB1","\u2CB3","\u2CB5","\u2CB7","\u2CB9","\u2CBB","\u2CBD","\u2CBF","\u2CC1","\u2CC3","\u2CC5","\u2CC7","\u2CC9","\u2CCB","\u2CCD","\u2CCF","\u2CD1","\u2CD3","\u2CD5","\u2CD7","\u2CD9","\u2CDB","\u2CDD","\u2CDF","\u2CE1",["\u2CE3","\u2CE4"],"\u2CEC","\u2CEE","\u2CF3",["\u2D00","\u2D25"],"\u2D27","\u2D2D","\uA641","\uA643","\uA645","\uA647","\uA649","\uA64B","\uA64D","\uA64F","\uA651","\uA653","\uA655","\uA657","\uA659","\uA65B","\uA65D","\uA65F","\uA661","\uA663","\uA665","\uA667","\uA669","\uA66B","\uA66D","\uA681","\uA683","\uA685","\uA687","\uA689","\uA68B","\uA68D","\uA68F","\uA691","\uA693","\uA695","\uA697","\uA699","\uA69B","\uA723","\uA725","\uA727","\uA729","\uA72B","\uA72D",["\uA72F","\uA731"],"\uA733","\uA735","\uA737","\uA739","\uA73B","\uA73D","\uA73F","\uA741","\uA743","\uA745","\uA747","\uA749","\uA74B","\uA74D","\uA74F","\uA751","\uA753","\uA755","\uA757","\uA759","\uA75B","\uA75D","\uA75F","\uA761","\uA763","\uA765","\uA767","\uA769","\uA76B","\uA76D","\uA76F",["\uA771","\uA778"],"\uA77A","\uA77C","\uA77F","\uA781","\uA783","\uA785","\uA787","\uA78C","\uA78E","\uA791",["\uA793","\uA795"],"\uA797","\uA799","\uA79B","\uA79D","\uA79F","\uA7A1","\uA7A3","\uA7A5","\uA7A7","\uA7A9","\uA7B5","\uA7B7","\uA7FA",["\uAB30","\uAB5A"],["\uAB60","\uAB65"],["\uAB70","\uABBF"],["\uFB00","\uFB06"],["\uFB13","\uFB17"],["\uFF41","\uFF5A"]],!1,!1),Or=Fe([["\u02B0","\u02C1"],["\u02C6","\u02D1"],["\u02E0","\u02E4"],"\u02EC","\u02EE","\u0374","\u037A","\u0559","\u0640",["\u06E5","\u06E6"],["\u07F4","\u07F5"],"\u07FA","\u081A","\u0824","\u0828","\u0971","\u0E46","\u0EC6","\u10FC","\u17D7","\u1843","\u1AA7",["\u1C78","\u1C7D"],["\u1D2C","\u1D6A"],"\u1D78",["\u1D9B","\u1DBF"],"\u2071","\u207F",["\u2090","\u209C"],["\u2C7C","\u2C7D"],"\u2D6F","\u2E2F","\u3005",["\u3031","\u3035"],"\u303B",["\u309D","\u309E"],["\u30FC","\u30FE"],"\uA015",["\uA4F8","\uA4FD"],"\uA60C","\uA67F",["\uA69C","\uA69D"],["\uA717","\uA71F"],"\uA770","\uA788",["\uA7F8","\uA7F9"],"\uA9CF","\uA9E6","\uAA70","\uAADD",["\uAAF3","\uAAF4"],["\uAB5C","\uAB5F"],"\uFF70",["\uFF9E","\uFF9F"]],!1,!1),wr=Fe(["\xAA","\xBA","\u01BB",["\u01C0","\u01C3"],"\u0294",["\u05D0","\u05EA"],["\u05F0","\u05F2"],["\u0620","\u063F"],["\u0641","\u064A"],["\u066E","\u066F"],["\u0671","\u06D3"],"\u06D5",["\u06EE","\u06EF"],["\u06FA","\u06FC"],"\u06FF","\u0710",["\u0712","\u072F"],["\u074D","\u07A5"],"\u07B1",["\u07CA","\u07EA"],["\u0800","\u0815"],["\u0840","\u0858"],["\u08A0","\u08B4"],["\u0904","\u0939"],"\u093D","\u0950",["\u0958","\u0961"],["\u0972","\u0980"],["\u0985","\u098C"],["\u098F","\u0990"],["\u0993","\u09A8"],["\u09AA","\u09B0"],"\u09B2",["\u09B6","\u09B9"],"\u09BD","\u09CE",["\u09DC","\u09DD"],["\u09DF","\u09E1"],["\u09F0","\u09F1"],["\u0A05","\u0A0A"],["\u0A0F","\u0A10"],["\u0A13","\u0A28"],["\u0A2A","\u0A30"],["\u0A32","\u0A33"],["\u0A35","\u0A36"],["\u0A38","\u0A39"],["\u0A59","\u0A5C"],"\u0A5E",["\u0A72","\u0A74"],["\u0A85","\u0A8D"],["\u0A8F","\u0A91"],["\u0A93","\u0AA8"],["\u0AAA","\u0AB0"],["\u0AB2","\u0AB3"],["\u0AB5","\u0AB9"],"\u0ABD","\u0AD0",["\u0AE0","\u0AE1"],"\u0AF9",["\u0B05","\u0B0C"],["\u0B0F","\u0B10"],["\u0B13","\u0B28"],["\u0B2A","\u0B30"],["\u0B32","\u0B33"],["\u0B35","\u0B39"],"\u0B3D",["\u0B5C","\u0B5D"],["\u0B5F","\u0B61"],"\u0B71","\u0B83",["\u0B85","\u0B8A"],["\u0B8E","\u0B90"],["\u0B92","\u0B95"],["\u0B99","\u0B9A"],"\u0B9C",["\u0B9E","\u0B9F"],["\u0BA3","\u0BA4"],["\u0BA8","\u0BAA"],["\u0BAE","\u0BB9"],"\u0BD0",["\u0C05","\u0C0C"],["\u0C0E","\u0C10"],["\u0C12","\u0C28"],["\u0C2A","\u0C39"],"\u0C3D",["\u0C58","\u0C5A"],["\u0C60","\u0C61"],["\u0C85","\u0C8C"],["\u0C8E","\u0C90"],["\u0C92","\u0CA8"],["\u0CAA","\u0CB3"],["\u0CB5","\u0CB9"],"\u0CBD","\u0CDE",["\u0CE0","\u0CE1"],["\u0CF1","\u0CF2"],["\u0D05","\u0D0C"],["\u0D0E","\u0D10"],["\u0D12","\u0D3A"],"\u0D3D","\u0D4E",["\u0D5F","\u0D61"],["\u0D7A","\u0D7F"],["\u0D85","\u0D96"],["\u0D9A","\u0DB1"],["\u0DB3","\u0DBB"],"\u0DBD",["\u0DC0","\u0DC6"],["\u0E01","\u0E30"],["\u0E32","\u0E33"],["\u0E40","\u0E45"],["\u0E81","\u0E82"],"\u0E84",["\u0E87","\u0E88"],"\u0E8A","\u0E8D",["\u0E94","\u0E97"],["\u0E99","\u0E9F"],["\u0EA1","\u0EA3"],"\u0EA5","\u0EA7",["\u0EAA","\u0EAB"],["\u0EAD","\u0EB0"],["\u0EB2","\u0EB3"],"\u0EBD",["\u0EC0","\u0EC4"],["\u0EDC","\u0EDF"],"\u0F00",["\u0F40","\u0F47"],["\u0F49","\u0F6C"],["\u0F88","\u0F8C"],["\u1000","\u102A"],"\u103F",["\u1050","\u1055"],["\u105A","\u105D"],"\u1061",["\u1065","\u1066"],["\u106E","\u1070"],["\u1075","\u1081"],"\u108E",["\u10D0","\u10FA"],["\u10FD","\u1248"],["\u124A","\u124D"],["\u1250","\u1256"],"\u1258",["\u125A","\u125D"],["\u1260","\u1288"],["\u128A","\u128D"],["\u1290","\u12B0"],["\u12B2","\u12B5"],["\u12B8","\u12BE"],"\u12C0",["\u12C2","\u12C5"],["\u12C8","\u12D6"],["\u12D8","\u1310"],["\u1312","\u1315"],["\u1318","\u135A"],["\u1380","\u138F"],["\u1401","\u166C"],["\u166F","\u167F"],["\u1681","\u169A"],["\u16A0","\u16EA"],["\u16F1","\u16F8"],["\u1700","\u170C"],["\u170E","\u1711"],["\u1720","\u1731"],["\u1740","\u1751"],["\u1760","\u176C"],["\u176E","\u1770"],["\u1780","\u17B3"],"\u17DC",["\u1820","\u1842"],["\u1844","\u1877"],["\u1880","\u18A8"],"\u18AA",["\u18B0","\u18F5"],["\u1900","\u191E"],["\u1950","\u196D"],["\u1970","\u1974"],["\u1980","\u19AB"],["\u19B0","\u19C9"],["\u1A00","\u1A16"],["\u1A20","\u1A54"],["\u1B05","\u1B33"],["\u1B45","\u1B4B"],["\u1B83","\u1BA0"],["\u1BAE","\u1BAF"],["\u1BBA","\u1BE5"],["\u1C00","\u1C23"],["\u1C4D","\u1C4F"],["\u1C5A","\u1C77"],["\u1CE9","\u1CEC"],["\u1CEE","\u1CF1"],["\u1CF5","\u1CF6"],["\u2135","\u2138"],["\u2D30","\u2D67"],["\u2D80","\u2D96"],["\u2DA0","\u2DA6"],["\u2DA8","\u2DAE"],["\u2DB0","\u2DB6"],["\u2DB8","\u2DBE"],["\u2DC0","\u2DC6"],["\u2DC8","\u2DCE"],["\u2DD0","\u2DD6"],["\u2DD8","\u2DDE"],"\u3006","\u303C",["\u3041","\u3096"],"\u309F",["\u30A1","\u30FA"],"\u30FF",["\u3105","\u312D"],["\u3131","\u318E"],["\u31A0","\u31BA"],["\u31F0","\u31FF"],["\u3400","\u4DB5"],["\u4E00","\u9FD5"],["\uA000","\uA014"],["\uA016","\uA48C"],["\uA4D0","\uA4F7"],["\uA500","\uA60B"],["\uA610","\uA61F"],["\uA62A","\uA62B"],"\uA66E",["\uA6A0","\uA6E5"],"\uA78F","\uA7F7",["\uA7FB","\uA801"],["\uA803","\uA805"],["\uA807","\uA80A"],["\uA80C","\uA822"],["\uA840","\uA873"],["\uA882","\uA8B3"],["\uA8F2","\uA8F7"],"\uA8FB","\uA8FD",["\uA90A","\uA925"],["\uA930","\uA946"],["\uA960","\uA97C"],["\uA984","\uA9B2"],["\uA9E0","\uA9E4"],["\uA9E7","\uA9EF"],["\uA9FA","\uA9FE"],["\uAA00","\uAA28"],["\uAA40","\uAA42"],["\uAA44","\uAA4B"],["\uAA60","\uAA6F"],["\uAA71","\uAA76"],"\uAA7A",["\uAA7E","\uAAAF"],"\uAAB1",["\uAAB5","\uAAB6"],["\uAAB9","\uAABD"],"\uAAC0","\uAAC2",["\uAADB","\uAADC"],["\uAAE0","\uAAEA"],"\uAAF2",["\uAB01","\uAB06"],["\uAB09","\uAB0E"],["\uAB11","\uAB16"],["\uAB20","\uAB26"],["\uAB28","\uAB2E"],["\uABC0","\uABE2"],["\uAC00","\uD7A3"],["\uD7B0","\uD7C6"],["\uD7CB","\uD7FB"],["\uF900","\uFA6D"],["\uFA70","\uFAD9"],"\uFB1D",["\uFB1F","\uFB28"],["\uFB2A","\uFB36"],["\uFB38","\uFB3C"],"\uFB3E",["\uFB40","\uFB41"],["\uFB43","\uFB44"],["\uFB46","\uFBB1"],["\uFBD3","\uFD3D"],["\uFD50","\uFD8F"],["\uFD92","\uFDC7"],["\uFDF0","\uFDFB"],["\uFE70","\uFE74"],["\uFE76","\uFEFC"],["\uFF66","\uFF6F"],["\uFF71","\uFF9D"],["\uFFA0","\uFFBE"],["\uFFC2","\uFFC7"],["\uFFCA","\uFFCF"],["\uFFD2","\uFFD7"],["\uFFDA","\uFFDC"]],!1,!1),Br=Fe(["\u01C5","\u01C8","\u01CB","\u01F2",["\u1F88","\u1F8F"],["\u1F98","\u1F9F"],["\u1FA8","\u1FAF"],"\u1FBC","\u1FCC","\u1FFC"],!1,!1),Dr=Fe([["A","Z"],["\xC0","\xD6"],["\xD8","\xDE"],"\u0100","\u0102","\u0104","\u0106","\u0108","\u010A","\u010C","\u010E","\u0110","\u0112","\u0114","\u0116","\u0118","\u011A","\u011C","\u011E","\u0120","\u0122","\u0124","\u0126","\u0128","\u012A","\u012C","\u012E","\u0130","\u0132","\u0134","\u0136","\u0139","\u013B","\u013D","\u013F","\u0141","\u0143","\u0145","\u0147","\u014A","\u014C","\u014E","\u0150","\u0152","\u0154","\u0156","\u0158","\u015A","\u015C","\u015E","\u0160","\u0162","\u0164","\u0166","\u0168","\u016A","\u016C","\u016E","\u0170","\u0172","\u0174","\u0176",["\u0178","\u0179"],"\u017B","\u017D",["\u0181","\u0182"],"\u0184",["\u0186","\u0187"],["\u0189","\u018B"],["\u018E","\u0191"],["\u0193","\u0194"],["\u0196","\u0198"],["\u019C","\u019D"],["\u019F","\u01A0"],"\u01A2","\u01A4",["\u01A6","\u01A7"],"\u01A9","\u01AC",["\u01AE","\u01AF"],["\u01B1","\u01B3"],"\u01B5",["\u01B7","\u01B8"],"\u01BC","\u01C4","\u01C7","\u01CA","\u01CD","\u01CF","\u01D1","\u01D3","\u01D5","\u01D7","\u01D9","\u01DB","\u01DE","\u01E0","\u01E2","\u01E4","\u01E6","\u01E8","\u01EA","\u01EC","\u01EE","\u01F1","\u01F4",["\u01F6","\u01F8"],"\u01FA","\u01FC","\u01FE","\u0200","\u0202","\u0204","\u0206","\u0208","\u020A","\u020C","\u020E","\u0210","\u0212","\u0214","\u0216","\u0218","\u021A","\u021C","\u021E","\u0220","\u0222","\u0224","\u0226","\u0228","\u022A","\u022C","\u022E","\u0230","\u0232",["\u023A","\u023B"],["\u023D","\u023E"],"\u0241",["\u0243","\u0246"],"\u0248","\u024A","\u024C","\u024E","\u0370","\u0372","\u0376","\u037F","\u0386",["\u0388","\u038A"],"\u038C",["\u038E","\u038F"],["\u0391","\u03A1"],["\u03A3","\u03AB"],"\u03CF",["\u03D2","\u03D4"],"\u03D8","\u03DA","\u03DC","\u03DE","\u03E0","\u03E2","\u03E4","\u03E6","\u03E8","\u03EA","\u03EC","\u03EE","\u03F4","\u03F7",["\u03F9","\u03FA"],["\u03FD","\u042F"],"\u0460","\u0462","\u0464","\u0466","\u0468","\u046A","\u046C","\u046E","\u0470","\u0472","\u0474","\u0476","\u0478","\u047A","\u047C","\u047E","\u0480","\u048A","\u048C","\u048E","\u0490","\u0492","\u0494","\u0496","\u0498","\u049A","\u049C","\u049E","\u04A0","\u04A2","\u04A4","\u04A6","\u04A8","\u04AA","\u04AC","\u04AE","\u04B0","\u04B2","\u04B4","\u04B6","\u04B8","\u04BA","\u04BC","\u04BE",["\u04C0","\u04C1"],"\u04C3","\u04C5","\u04C7","\u04C9","\u04CB","\u04CD","\u04D0","\u04D2","\u04D4","\u04D6","\u04D8","\u04DA","\u04DC","\u04DE","\u04E0","\u04E2","\u04E4","\u04E6","\u04E8","\u04EA","\u04EC","\u04EE","\u04F0","\u04F2","\u04F4","\u04F6","\u04F8","\u04FA","\u04FC","\u04FE","\u0500","\u0502","\u0504","\u0506","\u0508","\u050A","\u050C","\u050E","\u0510","\u0512","\u0514","\u0516","\u0518","\u051A","\u051C","\u051E","\u0520","\u0522","\u0524","\u0526","\u0528","\u052A","\u052C","\u052E",["\u0531","\u0556"],["\u10A0","\u10C5"],"\u10C7","\u10CD",["\u13A0","\u13F5"],"\u1E00","\u1E02","\u1E04","\u1E06","\u1E08","\u1E0A","\u1E0C","\u1E0E","\u1E10","\u1E12","\u1E14","\u1E16","\u1E18","\u1E1A","\u1E1C","\u1E1E","\u1E20","\u1E22","\u1E24","\u1E26","\u1E28","\u1E2A","\u1E2C","\u1E2E","\u1E30","\u1E32","\u1E34","\u1E36","\u1E38","\u1E3A","\u1E3C","\u1E3E","\u1E40","\u1E42","\u1E44","\u1E46","\u1E48","\u1E4A","\u1E4C","\u1E4E","\u1E50","\u1E52","\u1E54","\u1E56","\u1E58","\u1E5A","\u1E5C","\u1E5E","\u1E60","\u1E62","\u1E64","\u1E66","\u1E68","\u1E6A","\u1E6C","\u1E6E","\u1E70","\u1E72","\u1E74","\u1E76","\u1E78","\u1E7A","\u1E7C","\u1E7E","\u1E80","\u1E82","\u1E84","\u1E86","\u1E88","\u1E8A","\u1E8C","\u1E8E","\u1E90","\u1E92","\u1E94","\u1E9E","\u1EA0","\u1EA2","\u1EA4","\u1EA6","\u1EA8","\u1EAA","\u1EAC","\u1EAE","\u1EB0","\u1EB2","\u1EB4","\u1EB6","\u1EB8","\u1EBA","\u1EBC","\u1EBE","\u1EC0","\u1EC2","\u1EC4","\u1EC6","\u1EC8","\u1ECA","\u1ECC","\u1ECE","\u1ED0","\u1ED2","\u1ED4","\u1ED6","\u1ED8","\u1EDA","\u1EDC","\u1EDE","\u1EE0","\u1EE2","\u1EE4","\u1EE6","\u1EE8","\u1EEA","\u1EEC","\u1EEE","\u1EF0","\u1EF2","\u1EF4","\u1EF6","\u1EF8","\u1EFA","\u1EFC","\u1EFE",["\u1F08","\u1F0F"],["\u1F18","\u1F1D"],["\u1F28","\u1F2F"],["\u1F38","\u1F3F"],["\u1F48","\u1F4D"],"\u1F59","\u1F5B","\u1F5D","\u1F5F",["\u1F68","\u1F6F"],["\u1FB8","\u1FBB"],["\u1FC8","\u1FCB"],["\u1FD8","\u1FDB"],["\u1FE8","\u1FEC"],["\u1FF8","\u1FFB"],"\u2102","\u2107",["\u210B","\u210D"],["\u2110","\u2112"],"\u2115",["\u2119","\u211D"],"\u2124","\u2126","\u2128",["\u212A","\u212D"],["\u2130","\u2133"],["\u213E","\u213F"],"\u2145","\u2183",["\u2C00","\u2C2E"],"\u2C60",["\u2C62","\u2C64"],"\u2C67","\u2C69","\u2C6B",["\u2C6D","\u2C70"],"\u2C72","\u2C75",["\u2C7E","\u2C80"],"\u2C82","\u2C84","\u2C86","\u2C88","\u2C8A","\u2C8C","\u2C8E","\u2C90","\u2C92","\u2C94","\u2C96","\u2C98","\u2C9A","\u2C9C","\u2C9E","\u2CA0","\u2CA2","\u2CA4","\u2CA6","\u2CA8","\u2CAA","\u2CAC","\u2CAE","\u2CB0","\u2CB2","\u2CB4","\u2CB6","\u2CB8","\u2CBA","\u2CBC","\u2CBE","\u2CC0","\u2CC2","\u2CC4","\u2CC6","\u2CC8","\u2CCA","\u2CCC","\u2CCE","\u2CD0","\u2CD2","\u2CD4","\u2CD6","\u2CD8","\u2CDA","\u2CDC","\u2CDE","\u2CE0","\u2CE2","\u2CEB","\u2CED","\u2CF2","\uA640","\uA642","\uA644","\uA646","\uA648","\uA64A","\uA64C","\uA64E","\uA650","\uA652","\uA654","\uA656","\uA658","\uA65A","\uA65C","\uA65E","\uA660","\uA662","\uA664","\uA666","\uA668","\uA66A","\uA66C","\uA680","\uA682","\uA684","\uA686","\uA688","\uA68A","\uA68C","\uA68E","\uA690","\uA692","\uA694","\uA696","\uA698","\uA69A","\uA722","\uA724","\uA726","\uA728","\uA72A","\uA72C","\uA72E","\uA732","\uA734","\uA736","\uA738","\uA73A","\uA73C","\uA73E","\uA740","\uA742","\uA744","\uA746","\uA748","\uA74A","\uA74C","\uA74E","\uA750","\uA752","\uA754","\uA756","\uA758","\uA75A","\uA75C","\uA75E","\uA760","\uA762","\uA764","\uA766","\uA768","\uA76A","\uA76C","\uA76E","\uA779","\uA77B",["\uA77D","\uA77E"],"\uA780","\uA782","\uA784","\uA786","\uA78B","\uA78D","\uA790","\uA792","\uA796","\uA798","\uA79A","\uA79C","\uA79E","\uA7A0","\uA7A2","\uA7A4","\uA7A6","\uA7A8",["\uA7AA","\uA7AD"],["\uA7B0","\uA7B4"],"\uA7B6",["\uFF21","\uFF3A"]],!1,!1),$r=Fe(["\u0903","\u093B",["\u093E","\u0940"],["\u0949","\u094C"],["\u094E","\u094F"],["\u0982","\u0983"],["\u09BE","\u09C0"],["\u09C7","\u09C8"],["\u09CB","\u09CC"],"\u09D7","\u0A03",["\u0A3E","\u0A40"],"\u0A83",["\u0ABE","\u0AC0"],"\u0AC9",["\u0ACB","\u0ACC"],["\u0B02","\u0B03"],"\u0B3E","\u0B40",["\u0B47","\u0B48"],["\u0B4B","\u0B4C"],"\u0B57",["\u0BBE","\u0BBF"],["\u0BC1","\u0BC2"],["\u0BC6","\u0BC8"],["\u0BCA","\u0BCC"],"\u0BD7",["\u0C01","\u0C03"],["\u0C41","\u0C44"],["\u0C82","\u0C83"],"\u0CBE",["\u0CC0","\u0CC4"],["\u0CC7","\u0CC8"],["\u0CCA","\u0CCB"],["\u0CD5","\u0CD6"],["\u0D02","\u0D03"],["\u0D3E","\u0D40"],["\u0D46","\u0D48"],["\u0D4A","\u0D4C"],"\u0D57",["\u0D82","\u0D83"],["\u0DCF","\u0DD1"],["\u0DD8","\u0DDF"],["\u0DF2","\u0DF3"],["\u0F3E","\u0F3F"],"\u0F7F",["\u102B","\u102C"],"\u1031","\u1038",["\u103B","\u103C"],["\u1056","\u1057"],["\u1062","\u1064"],["\u1067","\u106D"],["\u1083","\u1084"],["\u1087","\u108C"],"\u108F",["\u109A","\u109C"],"\u17B6",["\u17BE","\u17C5"],["\u17C7","\u17C8"],["\u1923","\u1926"],["\u1929","\u192B"],["\u1930","\u1931"],["\u1933","\u1938"],["\u1A19","\u1A1A"],"\u1A55","\u1A57","\u1A61",["\u1A63","\u1A64"],["\u1A6D","\u1A72"],"\u1B04","\u1B35","\u1B3B",["\u1B3D","\u1B41"],["\u1B43","\u1B44"],"\u1B82","\u1BA1",["\u1BA6","\u1BA7"],"\u1BAA","\u1BE7",["\u1BEA","\u1BEC"],"\u1BEE",["\u1BF2","\u1BF3"],["\u1C24","\u1C2B"],["\u1C34","\u1C35"],"\u1CE1",["\u1CF2","\u1CF3"],["\u302E","\u302F"],["\uA823","\uA824"],"\uA827",["\uA880","\uA881"],["\uA8B4","\uA8C3"],["\uA952","\uA953"],"\uA983",["\uA9B4","\uA9B5"],["\uA9BA","\uA9BB"],["\uA9BD","\uA9C0"],["\uAA2F","\uAA30"],["\uAA33","\uAA34"],"\uAA4D","\uAA7B","\uAA7D","\uAAEB",["\uAAEE","\uAAEF"],"\uAAF5",["\uABE3","\uABE4"],["\uABE6","\uABE7"],["\uABE9","\uABEA"],"\uABEC"],!1,!1),Lr=Fe([["\u0300","\u036F"],["\u0483","\u0487"],["\u0591","\u05BD"],"\u05BF",["\u05C1","\u05C2"],["\u05C4","\u05C5"],"\u05C7",["\u0610","\u061A"],["\u064B","\u065F"],"\u0670",["\u06D6","\u06DC"],["\u06DF","\u06E4"],["\u06E7","\u06E8"],["\u06EA","\u06ED"],"\u0711",["\u0730","\u074A"],["\u07A6","\u07B0"],["\u07EB","\u07F3"],["\u0816","\u0819"],["\u081B","\u0823"],["\u0825","\u0827"],["\u0829","\u082D"],["\u0859","\u085B"],["\u08E3","\u0902"],"\u093A","\u093C",["\u0941","\u0948"],"\u094D",["\u0951","\u0957"],["\u0962","\u0963"],"\u0981","\u09BC",["\u09C1","\u09C4"],"\u09CD",["\u09E2","\u09E3"],["\u0A01","\u0A02"],"\u0A3C",["\u0A41","\u0A42"],["\u0A47","\u0A48"],["\u0A4B","\u0A4D"],"\u0A51",["\u0A70","\u0A71"],"\u0A75",["\u0A81","\u0A82"],"\u0ABC",["\u0AC1","\u0AC5"],["\u0AC7","\u0AC8"],"\u0ACD",["\u0AE2","\u0AE3"],"\u0B01","\u0B3C","\u0B3F",["\u0B41","\u0B44"],"\u0B4D","\u0B56",["\u0B62","\u0B63"],"\u0B82","\u0BC0","\u0BCD","\u0C00",["\u0C3E","\u0C40"],["\u0C46","\u0C48"],["\u0C4A","\u0C4D"],["\u0C55","\u0C56"],["\u0C62","\u0C63"],"\u0C81","\u0CBC","\u0CBF","\u0CC6",["\u0CCC","\u0CCD"],["\u0CE2","\u0CE3"],"\u0D01",["\u0D41","\u0D44"],"\u0D4D",["\u0D62","\u0D63"],"\u0DCA",["\u0DD2","\u0DD4"],"\u0DD6","\u0E31",["\u0E34","\u0E3A"],["\u0E47","\u0E4E"],"\u0EB1",["\u0EB4","\u0EB9"],["\u0EBB","\u0EBC"],["\u0EC8","\u0ECD"],["\u0F18","\u0F19"],"\u0F35","\u0F37","\u0F39",["\u0F71","\u0F7E"],["\u0F80","\u0F84"],["\u0F86","\u0F87"],["\u0F8D","\u0F97"],["\u0F99","\u0FBC"],"\u0FC6",["\u102D","\u1030"],["\u1032","\u1037"],["\u1039","\u103A"],["\u103D","\u103E"],["\u1058","\u1059"],["\u105E","\u1060"],["\u1071","\u1074"],"\u1082",["\u1085","\u1086"],"\u108D","\u109D",["\u135D","\u135F"],["\u1712","\u1714"],["\u1732","\u1734"],["\u1752","\u1753"],["\u1772","\u1773"],["\u17B4","\u17B5"],["\u17B7","\u17BD"],"\u17C6",["\u17C9","\u17D3"],"\u17DD",["\u180B","\u180D"],"\u18A9",["\u1920","\u1922"],["\u1927","\u1928"],"\u1932",["\u1939","\u193B"],["\u1A17","\u1A18"],"\u1A1B","\u1A56",["\u1A58","\u1A5E"],"\u1A60","\u1A62",["\u1A65","\u1A6C"],["\u1A73","\u1A7C"],"\u1A7F",["\u1AB0","\u1ABD"],["\u1B00","\u1B03"],"\u1B34",["\u1B36","\u1B3A"],"\u1B3C","\u1B42",["\u1B6B","\u1B73"],["\u1B80","\u1B81"],["\u1BA2","\u1BA5"],["\u1BA8","\u1BA9"],["\u1BAB","\u1BAD"],"\u1BE6",["\u1BE8","\u1BE9"],"\u1BED",["\u1BEF","\u1BF1"],["\u1C2C","\u1C33"],["\u1C36","\u1C37"],["\u1CD0","\u1CD2"],["\u1CD4","\u1CE0"],["\u1CE2","\u1CE8"],"\u1CED","\u1CF4",["\u1CF8","\u1CF9"],["\u1DC0","\u1DF5"],["\u1DFC","\u1DFF"],["\u20D0","\u20DC"],"\u20E1",["\u20E5","\u20F0"],["\u2CEF","\u2CF1"],"\u2D7F",["\u2DE0","\u2DFF"],["\u302A","\u302D"],["\u3099","\u309A"],"\uA66F",["\uA674","\uA67D"],["\uA69E","\uA69F"],["\uA6F0","\uA6F1"],"\uA802","\uA806","\uA80B",["\uA825","\uA826"],"\uA8C4",["\uA8E0","\uA8F1"],["\uA926","\uA92D"],["\uA947","\uA951"],["\uA980","\uA982"],"\uA9B3",["\uA9B6","\uA9B9"],"\uA9BC","\uA9E5",["\uAA29","\uAA2E"],["\uAA31","\uAA32"],["\uAA35","\uAA36"],"\uAA43","\uAA4C","\uAA7C","\uAAB0",["\uAAB2","\uAAB4"],["\uAAB7","\uAAB8"],["\uAABE","\uAABF"],"\uAAC1",["\uAAEC","\uAAED"],"\uAAF6","\uABE5","\uABE8","\uABED","\uFB1E",["\uFE00","\uFE0F"],["\uFE20","\uFE2F"]],!1,!1),Ur=Fe([["0","9"],["\u0660","\u0669"],["\u06F0","\u06F9"],["\u07C0","\u07C9"],["\u0966","\u096F"],["\u09E6","\u09EF"],["\u0A66","\u0A6F"],["\u0AE6","\u0AEF"],["\u0B66","\u0B6F"],["\u0BE6","\u0BEF"],["\u0C66","\u0C6F"],["\u0CE6","\u0CEF"],["\u0D66","\u0D6F"],["\u0DE6","\u0DEF"],["\u0E50","\u0E59"],["\u0ED0","\u0ED9"],["\u0F20","\u0F29"],["\u1040","\u1049"],["\u1090","\u1099"],["\u17E0","\u17E9"],["\u1810","\u1819"],["\u1946","\u194F"],["\u19D0","\u19D9"],["\u1A80","\u1A89"],["\u1A90","\u1A99"],["\u1B50","\u1B59"],["\u1BB0","\u1BB9"],["\u1C40","\u1C49"],["\u1C50","\u1C59"],["\uA620","\uA629"],["\uA8D0","\uA8D9"],["\uA900","\uA909"],["\uA9D0","\uA9D9"],["\uA9F0","\uA9F9"],["\uAA50","\uAA59"],["\uABF0","\uABF9"],["\uFF10","\uFF19"]],!1,!1),Mr=Fe([["\u16EE","\u16F0"],["\u2160","\u2182"],["\u2185","\u2188"],"\u3007",["\u3021","\u3029"],["\u3038","\u303A"],["\uA6E6","\uA6EF"]],!1,!1),Gr=Fe(["_",["\u203F","\u2040"],"\u2054",["\uFE33","\uFE34"],["\uFE4D","\uFE4F"],"\uFF3F"],!1,!1),kr=Fe([" ","\xA0","\u1680",["\u2000","\u200A"],"\u202F","\u205F","\u3000"],!1,!1),Hr=fe(";",!1),Xr=function(c,y,F){return{type:"grammar",topLevelInitializer:c,initializer:y,rules:F,location:Ie()}},Vr=function(c){return{type:"top_level_initializer",code:c[0],codeLocation:c[1],location:Ie()}},jr=function(c){return{type:"initializer",code:c[0],codeLocation:c[1],location:Ie()}},zr=function(c,y,F){return{type:"rule",name:c[0],nameLocation:c[1],expression:y!==null?{type:"named",name:y,expression:F,location:Ie()}:F,location:Ie()}},Wr=function(c,y){return y.length>0?{type:"choice",alternatives:[c].concat(y),location:Ie()}:c},Yr=function(c,y){return y!==null?{type:"action",expression:c,code:y[0],codeLocation:y[1],location:Ie()}:c},qr=function(c,y){return y.length>0||c.type==="labeled"&&c.pick?{type:"sequence",elements:[c].concat(y),location:Ie()}:c},Kr=function(c,y,F){return F.type.startsWith("semantic_")&&it('"@" cannot be used on a semantic predicate',c),{type:"labeled",label:y!==null?y[0]:null,labelLocation:y!==null?y[1]:c,pick:!0,expression:F,location:Ie()}},Zr=function(c,y){return{type:"labeled",label:c[0],labelLocation:c[1],expression:y,location:Ie()}},Jr=function(){return Ie()},Qr=function(c){return ui.indexOf(c[0])>=0&&it(`Label can't be a reserved word "${c[0]}"`,c[1]),c},en=function(c,y){return{type:OPS_TO_PREFIXED_TYPES[c],expression:y,location:Ie()}},tn=function(c,y){return{type:OPS_TO_SUFFIXED_TYPES[y],expression:c,location:Ie()}},rn=function(c){return c.type==="labeled"||c.type==="sequence"?{type:"group",expression:c,location:Ie()}:c},nn=function(c){return{type:"rule_ref",name:c[0],location:Ie()}},sn=function(c,y){return{type:OPS_TO_SEMANTIC_PREDICATE_TYPES[c],code:y[0],codeLocation:y[1],location:Ie()}},on=function(c,y){return[c+y.join(""),Ie()]},an=function(c,y){return{type:"literal",value:c,ignoreCase:y!==null,location:Ie()}},un=function(c){return c.join("")},ln=function(c){return c.join("")},hn=function(c,y,F){return{type:"class",parts:y.filter(I=>I!==""),inverted:c!==null,ignoreCase:F!==null,location:Ie()}},cn=function(c,y){return c.charCodeAt(0)>y.charCodeAt(0)&&it("Invalid character range: "+xn()+"."),[c,y]},fn=function(){return""},dn=function(){return"\0"},pn=function(){return"\b"},_n=function(){return"\f"},vn=function(){return`
`},gn=function(){return"\r"},mn=function(){return"	"},En=function(){return"\v"},An=function(c){return String.fromCharCode(parseInt(c,16))},yn=function(c){return String.fromCharCode(parseInt(c,16))},Tn=function(){return{type:"any",location:Ie()}},Cn=function(c){return[c,Ie()]},g=0,ye=0,Ke=[{line:1,column:1}],De=0,nt=[],w=0,Ze;if("startRule"in r){if(!(r.startRule in i))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');s=i[r.startRule]}function xn(){return e.substring(ye,g)}function Ie(){return Je(ye,g)}function it(c,y){throw y=y!==void 0?y:Je(ye,g),In(c,y)}function fe(c,y){return{type:"literal",text:c,ignoreCase:y}}function Fe(c,y,F){return{type:"class",parts:c,inverted:y,ignoreCase:F}}function bn(){return{type:"any"}}function Rn(){return{type:"end"}}function Ue(c){return{type:"other",description:c}}function Ct(c){var y=Ke[c],F;if(y)return y;for(F=c-1;!Ke[F];)F--;for(y=Ke[F],y={line:y.line,column:y.column};F<c;)e.charCodeAt(F)===10?(y.line++,y.column=1):y.column++,F++;return Ke[c]=y,y}function Je(c,y){var F=Ct(c),I=Ct(y);return{source:n,start:{offset:c,line:F.line,column:F.column},end:{offset:y,line:I.line,column:I.column}}}function H(c){g<De||(g>De&&(De=g,nt=[]),nt.push(c))}function In(c,y){return new peg$SyntaxError(c,null,null,y)}function Pn(c,y,F){return new peg$SyntaxError(peg$SyntaxError.buildMessage(c,y),c,y,F)}function xt(){var c,y,F,I,L,X;if(c=g,Re(),y=g,F=Fn(),F!==t?(I=Re(),y=F):(g=y,y=t),y===t&&(y=null),F=g,I=Sn(),I!==t?(L=Re(),F=I):(g=F,F=t),F===t&&(F=null),I=[],L=g,X=bt(),X!==t?(Re(),L=X):(g=L,L=t),L!==t)for(;L!==t;)I.push(L),L=g,X=bt(),X!==t?(Re(),L=X):(g=L,L=t);else I=t;return I!==t?(ye=c,c=Xr(y,F,I)):(g=c,c=t),c}function Fn(){var c,y,F,I,L;return c=g,e.charCodeAt(g)===123?(y=o,g++):(y=t,w===0&&H(ke)),y!==t?(F=rt(),F!==t?(e.charCodeAt(g)===125?(I=a,g++):(I=t,w===0&&H(Pe)),I!==t?(L=dt(),L!==t?(ye=c,c=Vr(F)):(g=c,c=t)):(g=c,c=t)):(g=c,c=t)):(g=c,c=t),c}function Sn(){var c,y,F;return c=g,y=rt(),y!==t?(F=dt(),F!==t?(ye=c,c=jr(y)):(g=c,c=t)):(g=c,c=t),c}function bt(){var c,y,F,I,L,X;return c=g,y=ut(),y!==t?(Re(),F=g,I=lt(),I!==t?(Re(),F=I):(g=F,F=t),F===t&&(F=null),e.charCodeAt(g)===61?(I=u,g++):(I=t,w===0&&H(we)),I!==t?(Re(),L=Rt(),L!==t?(X=dt(),X!==t?(ye=c,c=zr(y,F,L)):(g=c,c=t)):(g=c,c=t)):(g=c,c=t)):(g=c,c=t),c}function Rt(){var c,y,F,I,L,X;if(c=g,y=st(),y!==t){for(F=[],I=g,Re(),e.charCodeAt(g)===47?(L=l,g++):(L=t,w===0&&H(je)),L!==t?(Re(),X=st(),X!==t?I=X:(g=I,I=t)):(g=I,I=t);I!==t;)F.push(I),I=g,Re(),e.charCodeAt(g)===47?(L=l,g++):(L=t,w===0&&H(je)),L!==t?(Re(),X=st(),X!==t?I=X:(g=I,I=t)):(g=I,I=t);ye=c,c=Wr(y,F)}else g=c,c=t;return c}function st(){var c,y,F,I;return c=g,y=Nn(),y!==t?(F=g,Re(),I=rt(),I!==t?F=I:(g=F,F=t),F===t&&(F=null),ye=c,c=Yr(y,F)):(g=c,c=t),c}function Nn(){var c,y,F,I,L;if(c=g,y=ot(),y!==t){for(F=[],I=g,Re(),L=ot(),L!==t?I=L:(g=I,I=t);I!==t;)F.push(I),I=g,Re(),L=ot(),L!==t?I=L:(g=I,I=t);ye=c,c=qr(y,F)}else g=c,c=t;return c}function ot(){var c,y,F,I;return c=g,y=On(),y!==t?(F=It(),F===t&&(F=null),I=at(),I!==t?(ye=c,c=Kr(y,F,I)):(g=c,c=t)):(g=c,c=t),c===t&&(c=g,y=It(),y!==t?(F=Re(),I=at(),I!==t?(ye=c,c=Zr(y,I)):(g=c,c=t)):(g=c,c=t),c===t&&(c=at())),c}function On(){var c,y;return c=g,e.charCodeAt(g)===64?(y=h,g++):(y=t,w===0&&H(kt)),y!==t&&(ye=c,y=Jr()),c=y,c}function It(){var c,y,F;return c=g,y=ut(),y!==t?(Re(),e.charCodeAt(g)===58?(F=f,g++):(F=t,w===0&&H(Ht)),F!==t?(ye=c,c=Qr(y)):(g=c,c=t)):(g=c,c=t),c}function at(){var c,y,F;return c=g,y=wn(),y!==t?(Re(),F=Pt(),F!==t?(ye=c,c=en(y,F)):(g=c,c=t)):(g=c,c=t),c===t&&(c=Pt()),c}function wn(){var c;return e.charCodeAt(g)===36?(c=d,g++):(c=t,w===0&&H(pt)),c===t&&(e.charCodeAt(g)===38?(c=_,g++):(c=t,w===0&&H(_t)),c===t&&(e.charCodeAt(g)===33?(c=v,g++):(c=t,w===0&&H(vt)))),c}function Pt(){var c,y,F;return c=g,y=Ft(),y!==t?(Re(),F=Bn(),F!==t?(ye=c,c=tn(y,F)):(g=c,c=t)):(g=c,c=t),c===t&&(c=Ft()),c}function Bn(){var c;return e.charCodeAt(g)===63?(c=m,g++):(c=t,w===0&&H(Xt)),c===t&&(e.charCodeAt(g)===42?(c=E,g++):(c=t,w===0&&H(Vt)),c===t&&(e.charCodeAt(g)===43?(c=A,g++):(c=t,w===0&&H(jt)))),c}function Ft(){var c,y,F,I;return c=kn(),c===t&&(c=Hn(),c===t&&(c=Wn(),c===t&&(c=Dn(),c===t&&(c=$n(),c===t&&(c=g,e.charCodeAt(g)===40?(y=T,g++):(y=t,w===0&&H(zt)),y!==t?(Re(),F=Rt(),F!==t?(Re(),e.charCodeAt(g)===41?(I=C,g++):(I=t,w===0&&H(Wt)),I!==t?(ye=c,c=rn(F)):(g=c,c=t)):(g=c,c=t)):(g=c,c=t)))))),c}function Dn(){var c,y,F,I,L,X,Be,Ve;return c=g,y=ut(),y!==t?(F=g,w++,I=g,L=Re(),X=g,Be=lt(),Be!==t?(Ve=Re(),Be=[Be,Ve],X=Be):(g=X,X=t),X===t&&(X=null),e.charCodeAt(g)===61?(Be=u,g++):(Be=t,w===0&&H(we)),Be!==t?(L=[L,X,Be],I=L):(g=I,I=t),w--,I===t?F=void 0:(g=F,F=t),F!==t?(ye=c,c=nn(y)):(g=c,c=t)):(g=c,c=t),c}function $n(){var c,y,F;return c=g,y=Ln(),y!==t?(Re(),F=rt(),F!==t?(ye=c,c=sn(y,F)):(g=c,c=t)):(g=c,c=t),c}function Ln(){var c;return e.charCodeAt(g)===38?(c=_,g++):(c=t,w===0&&H(_t)),c===t&&(e.charCodeAt(g)===33?(c=v,g++):(c=t,w===0&&H(vt))),c}function Se(){var c;return e.length>g?(c=e.charAt(g),g++):(c=t,w===0&&H(gt)),c}function Qe(){var c;return w++,e.charCodeAt(g)===9?(c=R,g++):(c=t,w===0&&H(qt)),c===t&&(e.charCodeAt(g)===11?(c=b,g++):(c=t,w===0&&H(Kt)),c===t&&(e.charCodeAt(g)===12?(c=S,g++):(c=t,w===0&&H(Zt)),c===t&&(e.charCodeAt(g)===32?(c=B,g++):(c=t,w===0&&H(Jt)),c===t&&(e.charCodeAt(g)===160?(c=M,g++):(c=t,w===0&&H(Qt)),c===t&&(e.charCodeAt(g)===65279?(c=D,g++):(c=t,w===0&&H(er)),c===t&&(c=si())))))),w--,c===t&&w===0&&H(Yt),c}function Me(){var c;return Y.test(e.charAt(g))?(c=e.charAt(g),g++):(c=t,w===0&&H(tr)),c}function et(){var c;return w++,e.charCodeAt(g)===10?(c=G,g++):(c=t,w===0&&H(nr)),c===t&&(e.substr(g,2)===J?(c=J,g+=2):(c=t,w===0&&H(ir)),c===t&&(e.charCodeAt(g)===13?(c=re,g++):(c=t,w===0&&H(sr)),c===t&&(e.charCodeAt(g)===8232?(c=ne,g++):(c=t,w===0&&H(or)),c===t&&(e.charCodeAt(g)===8233?(c=de,g++):(c=t,w===0&&H(ar)))))),w--,c===t&&w===0&&H(rr),c}function St(){var c;return w++,c=Un(),c===t&&(c=Ot()),w--,c===t&&w===0&&H(ur),c}function Un(){var c,y,F,I,L,X;if(c=g,e.substr(g,2)===q?(y=q,g+=2):(y=t,w===0&&H(mt)),y!==t){for(F=[],I=g,L=g,w++,e.substr(g,2)===z?(X=z,g+=2):(X=t,w===0&&H(He)),w--,X===t?L=void 0:(g=L,L=t),L!==t?(X=Se(),X!==t?(L=[L,X],I=L):(g=I,I=t)):(g=I,I=t);I!==t;)F.push(I),I=g,L=g,w++,e.substr(g,2)===z?(X=z,g+=2):(X=t,w===0&&H(He)),w--,X===t?L=void 0:(g=L,L=t),L!==t?(X=Se(),X!==t?(L=[L,X],I=L):(g=I,I=t)):(g=I,I=t);e.substr(g,2)===z?(I=z,g+=2):(I=t,w===0&&H(He)),I!==t?(y=[y,F,I],c=y):(g=c,c=t)}else g=c,c=t;return c}function Nt(){var c,y,F,I,L,X;if(c=g,e.substr(g,2)===q?(y=q,g+=2):(y=t,w===0&&H(mt)),y!==t){for(F=[],I=g,L=g,w++,e.substr(g,2)===z?(X=z,g+=2):(X=t,w===0&&H(He)),X===t&&(X=Me()),w--,X===t?L=void 0:(g=L,L=t),L!==t?(X=Se(),X!==t?(L=[L,X],I=L):(g=I,I=t)):(g=I,I=t);I!==t;)F.push(I),I=g,L=g,w++,e.substr(g,2)===z?(X=z,g+=2):(X=t,w===0&&H(He)),X===t&&(X=Me()),w--,X===t?L=void 0:(g=L,L=t),L!==t?(X=Se(),X!==t?(L=[L,X],I=L):(g=I,I=t)):(g=I,I=t);e.substr(g,2)===z?(I=z,g+=2):(I=t,w===0&&H(He)),I!==t?(y=[y,F,I],c=y):(g=c,c=t)}else g=c,c=t;return c}function Ot(){var c,y,F,I,L,X;if(c=g,e.substr(g,2)===te?(y=te,g+=2):(y=t,w===0&&H(lr)),y!==t){for(F=[],I=g,L=g,w++,X=Me(),w--,X===t?L=void 0:(g=L,L=t),L!==t?(X=Se(),X!==t?(L=[L,X],I=L):(g=I,I=t)):(g=I,I=t);I!==t;)F.push(I),I=g,L=g,w++,X=Me(),w--,X===t?L=void 0:(g=L,L=t),L!==t?(X=Se(),X!==t?(L=[L,X],I=L):(g=I,I=t)):(g=I,I=t);y=[y,F],c=y}else g=c,c=t;return c}function ut(){var c,y,F,I;if(w++,c=g,y=wt(),y!==t){for(F=[],I=Bt();I!==t;)F.push(I),I=Bt();ye=c,c=on(y,F)}else g=c,c=t;return w--,c===t&&(y=t,w===0&&H(hr)),c}function wt(){var c,y,F;return c=Mn(),c===t&&(e.charCodeAt(g)===36?(c=d,g++):(c=t,w===0&&H(pt)),c===t&&(e.charCodeAt(g)===95?(c=ue,g++):(c=t,w===0&&H(cr)),c===t&&(c=g,e.charCodeAt(g)===92?(y=le,g++):(y=t,w===0&&H($e)),y!==t?(F=Mt(),F!==t?c=F:(g=c,c=t)):(g=c,c=t)))),c}function Bt(){var c;return c=wt(),c===t&&(c=Gn(),c===t&&(c=ri(),c===t&&(c=ii(),c===t&&(e.charCodeAt(g)===8204?(c=O,g++):(c=t,w===0&&H(fr)),c===t&&(e.charCodeAt(g)===8205?(c=V,g++):(c=t,w===0&&H(dr))))))),c}function Mn(){var c;return c=Qn(),c===t&&(c=qn(),c===t&&(c=Jn(),c===t&&(c=Kn(),c===t&&(c=Zn(),c===t&&(c=ni()))))),c}function Gn(){var c;return c=ti(),c===t&&(c=ei()),c}function kn(){var c,y,F;return w++,c=g,y=lt(),y!==t?(e.charCodeAt(g)===105?(F=Z,g++):(F=t,w===0&&H(Et)),F===t&&(F=null),ye=c,c=an(y,F)):(g=c,c=t),w--,c===t&&(y=t,w===0&&H(pr)),c}function lt(){var c,y,F,I;if(w++,c=g,e.charCodeAt(g)===34?(y=ee,g++):(y=t,w===0&&H(We)),y!==t){for(F=[],I=Dt();I!==t;)F.push(I),I=Dt();e.charCodeAt(g)===34?(I=ee,g++):(I=t,w===0&&H(We)),I!==t?(ye=c,c=un(F)):(g=c,c=t)}else g=c,c=t;if(c===t)if(c=g,e.charCodeAt(g)===39?(y=oe,g++):(y=t,w===0&&H(Ye)),y!==t){for(F=[],I=$t();I!==t;)F.push(I),I=$t();e.charCodeAt(g)===39?(I=oe,g++):(I=t,w===0&&H(Ye)),I!==t?(ye=c,c=ln(F)):(g=c,c=t)}else g=c,c=t;return w--,c===t&&(y=t,w===0&&H(_r)),c}function Dt(){var c,y,F,I;return c=g,y=g,F=g,w++,e.charCodeAt(g)===34?(I=ee,g++):(I=t,w===0&&H(We)),I===t&&(e.charCodeAt(g)===92?(I=le,g++):(I=t,w===0&&H($e)),I===t&&(I=Me())),w--,I===t?F=void 0:(g=F,F=t),F!==t?(I=Se(),I!==t?(F=[F,I],y=F):(g=y,y=t)):(g=y,y=t),y!==t?c=e.substring(c,g):c=y,c===t&&(c=g,e.charCodeAt(g)===92?(y=le,g++):(y=t,w===0&&H($e)),y!==t?(F=ct(),F!==t?c=F:(g=c,c=t)):(g=c,c=t),c===t&&(c=ht())),c}function $t(){var c,y,F,I;return c=g,y=g,F=g,w++,e.charCodeAt(g)===39?(I=oe,g++):(I=t,w===0&&H(Ye)),I===t&&(e.charCodeAt(g)===92?(I=le,g++):(I=t,w===0&&H($e)),I===t&&(I=Me())),w--,I===t?F=void 0:(g=F,F=t),F!==t?(I=Se(),I!==t?(F=[F,I],y=F):(g=y,y=t)):(g=y,y=t),y!==t?c=e.substring(c,g):c=y,c===t&&(c=g,e.charCodeAt(g)===92?(y=le,g++):(y=t,w===0&&H($e)),y!==t?(F=ct(),F!==t?c=F:(g=c,c=t)):(g=c,c=t),c===t&&(c=ht())),c}function Hn(){var c,y,F,I,L,X;if(w++,c=g,e.charCodeAt(g)===91?(y=ge,g++):(y=t,w===0&&H(gr)),y!==t){for(e.charCodeAt(g)===94?(F=ce,g++):(F=t,w===0&&H(mr)),F===t&&(F=null),I=[],L=Lt(),L===t&&(L=tt());L!==t;)I.push(L),L=Lt(),L===t&&(L=tt());e.charCodeAt(g)===93?(L=pe,g++):(L=t,w===0&&H(At)),L!==t?(e.charCodeAt(g)===105?(X=Z,g++):(X=t,w===0&&H(Et)),X===t&&(X=null),ye=c,c=hn(F,I,X)):(g=c,c=t)}else g=c,c=t;return w--,c===t&&(y=t,w===0&&H(vr)),c}function Lt(){var c,y,F,I;return c=g,y=tt(),y!==t?(e.charCodeAt(g)===45?(F=Ae,g++):(F=t,w===0&&H(Er)),F!==t?(I=tt(),I!==t?(ye=c,c=cn(y,I)):(g=c,c=t)):(g=c,c=t)):(g=c,c=t),c}function tt(){var c,y,F,I;return c=g,y=g,F=g,w++,e.charCodeAt(g)===93?(I=pe,g++):(I=t,w===0&&H(At)),I===t&&(e.charCodeAt(g)===92?(I=le,g++):(I=t,w===0&&H($e)),I===t&&(I=Me())),w--,I===t?F=void 0:(g=F,F=t),F!==t?(I=Se(),I!==t?(F=[F,I],y=F):(g=y,y=t)):(g=y,y=t),y!==t?c=e.substring(c,g):c=y,c===t&&(c=g,e.charCodeAt(g)===92?(y=le,g++):(y=t,w===0&&H($e)),y!==t?(F=ct(),F!==t?c=F:(g=c,c=t)):(g=c,c=t),c===t&&(c=ht())),c}function ht(){var c,y,F;return c=g,e.charCodeAt(g)===92?(y=le,g++):(y=t,w===0&&H($e)),y!==t?(F=et(),F!==t?(ye=c,c=fn()):(g=c,c=t)):(g=c,c=t),c}function ct(){var c,y,F,I;return c=Xn(),c===t&&(c=g,e.charCodeAt(g)===48?(y=Ee,g++):(y=t,w===0&&H(Ar)),y!==t?(F=g,w++,I=Gt(),w--,I===t?F=void 0:(g=F,F=t),F!==t?(ye=c,c=dn()):(g=c,c=t)):(g=c,c=t),c===t&&(c=zn(),c===t&&(c=Mt()))),c}function Xn(){var c;return c=Ut(),c===t&&(c=Vn()),c}function Ut(){var c,y;return e.charCodeAt(g)===39?(c=oe,g++):(c=t,w===0&&H(Ye)),c===t&&(e.charCodeAt(g)===34?(c=ee,g++):(c=t,w===0&&H(We)),c===t&&(e.charCodeAt(g)===92?(c=le,g++):(c=t,w===0&&H($e)),c===t&&(c=g,e.charCodeAt(g)===98?(y=me,g++):(y=t,w===0&&H(yr)),y!==t&&(ye=c,y=pn()),c=y,c===t&&(c=g,e.charCodeAt(g)===102?(y=he,g++):(y=t,w===0&&H(Tr)),y!==t&&(ye=c,y=_n()),c=y,c===t&&(c=g,e.charCodeAt(g)===110?(y=ve,g++):(y=t,w===0&&H(Cr)),y!==t&&(ye=c,y=vn()),c=y,c===t&&(c=g,e.charCodeAt(g)===114?(y=P,g++):(y=t,w===0&&H(xr)),y!==t&&(ye=c,y=gn()),c=y,c===t&&(c=g,e.charCodeAt(g)===116?(y=N,g++):(y=t,w===0&&H(br)),y!==t&&(ye=c,y=mn()),c=y,c===t&&(c=g,e.charCodeAt(g)===118?(y=$,g++):(y=t,w===0&&H(Rr)),y!==t&&(ye=c,y=En()),c=y)))))))),c}function Vn(){var c,y,F,I;return c=g,y=g,F=g,w++,I=jn(),I===t&&(I=Me()),w--,I===t?F=void 0:(g=F,F=t),F!==t?(I=Se(),I!==t?(F=[F,I],y=F):(g=y,y=t)):(g=y,y=t),y!==t?c=e.substring(c,g):c=y,c}function jn(){var c;return c=Ut(),c===t&&(c=Gt(),c===t&&(e.charCodeAt(g)===120?(c=U,g++):(c=t,w===0&&H(yt)),c===t&&(e.charCodeAt(g)===117?(c=k,g++):(c=t,w===0&&H(Tt))))),c}function zn(){var c,y,F,I,L,X;return c=g,e.charCodeAt(g)===120?(y=U,g++):(y=t,w===0&&H(yt)),y!==t?(F=g,I=g,L=Xe(),L!==t?(X=Xe(),X!==t?(L=[L,X],I=L):(g=I,I=t)):(g=I,I=t),I!==t?F=e.substring(F,g):F=I,F!==t?(ye=c,c=An(F)):(g=c,c=t)):(g=c,c=t),c}function Mt(){var c,y,F,I,L,X,Be,Ve;return c=g,e.charCodeAt(g)===117?(y=k,g++):(y=t,w===0&&H(Tt)),y!==t?(F=g,I=g,L=Xe(),L!==t?(X=Xe(),X!==t?(Be=Xe(),Be!==t?(Ve=Xe(),Ve!==t?(L=[L,X,Be,Ve],I=L):(g=I,I=t)):(g=I,I=t)):(g=I,I=t)):(g=I,I=t),I!==t?F=e.substring(F,g):F=I,F!==t?(ye=c,c=yn(F)):(g=c,c=t)):(g=c,c=t),c}function Gt(){var c;return K.test(e.charAt(g))?(c=e.charAt(g),g++):(c=t,w===0&&H(Ir)),c}function Xe(){var c;return j.test(e.charAt(g))?(c=e.charAt(g),g++):(c=t,w===0&&H(Pr)),c}function Wn(){var c,y;return c=g,e.charCodeAt(g)===46?(y=W,g++):(y=t,w===0&&H(Fr)),y!==t&&(ye=c,y=Tn()),c=y,c}function rt(){var c,y,F,I;return w++,c=g,e.charCodeAt(g)===123?(y=o,g++):(y=t,w===0&&H(ke)),y!==t?(F=Yn(),e.charCodeAt(g)===125?(I=a,g++):(I=t,w===0&&H(Pe)),I!==t?c=F:(g=c,c=t)):(g=c,c=t),w--,c===t&&(y=t,w===0&&H(Sr)),c}function Yn(){var c,y;return c=g,y=ft(),ye=c,y=Cn(y),c=y,c}function ft(){var c,y,F,I,L,X;if(c=g,y=[],F=[],I=g,L=g,w++,se.test(e.charAt(g))?(X=e.charAt(g),g++):(X=t,w===0&&H(qe)),w--,X===t?L=void 0:(g=L,L=t),L!==t?(X=Se(),X!==t?(L=[L,X],I=L):(g=I,I=t)):(g=I,I=t),I!==t)for(;I!==t;)F.push(I),I=g,L=g,w++,se.test(e.charAt(g))?(X=e.charAt(g),g++):(X=t,w===0&&H(qe)),w--,X===t?L=void 0:(g=L,L=t),L!==t?(X=Se(),X!==t?(L=[L,X],I=L):(g=I,I=t)):(g=I,I=t);else F=t;for(F===t&&(F=g,e.charCodeAt(g)===123?(I=o,g++):(I=t,w===0&&H(ke)),I!==t?(L=ft(),e.charCodeAt(g)===125?(X=a,g++):(X=t,w===0&&H(Pe)),X!==t?(I=[I,L,X],F=I):(g=F,F=t)):(g=F,F=t));F!==t;){if(y.push(F),F=[],I=g,L=g,w++,se.test(e.charAt(g))?(X=e.charAt(g),g++):(X=t,w===0&&H(qe)),w--,X===t?L=void 0:(g=L,L=t),L!==t?(X=Se(),X!==t?(L=[L,X],I=L):(g=I,I=t)):(g=I,I=t),I!==t)for(;I!==t;)F.push(I),I=g,L=g,w++,se.test(e.charAt(g))?(X=e.charAt(g),g++):(X=t,w===0&&H(qe)),w--,X===t?L=void 0:(g=L,L=t),L!==t?(X=Se(),X!==t?(L=[L,X],I=L):(g=I,I=t)):(g=I,I=t);else F=t;F===t&&(F=g,e.charCodeAt(g)===123?(I=o,g++):(I=t,w===0&&H(ke)),I!==t?(L=ft(),e.charCodeAt(g)===125?(X=a,g++):(X=t,w===0&&H(Pe)),X!==t?(I=[I,L,X],F=I):(g=F,F=t)):(g=F,F=t))}return c=e.substring(c,g),c}function qn(){var c;return ie.test(e.charAt(g))?(c=e.charAt(g),g++):(c=t,w===0&&H(Nr)),c}function Kn(){var c;return ae.test(e.charAt(g))?(c=e.charAt(g),g++):(c=t,w===0&&H(Or)),c}function Zn(){var c;return _e.test(e.charAt(g))?(c=e.charAt(g),g++):(c=t,w===0&&H(wr)),c}function Jn(){var c;return Te.test(e.charAt(g))?(c=e.charAt(g),g++):(c=t,w===0&&H(Br)),c}function Qn(){var c;return Ce.test(e.charAt(g))?(c=e.charAt(g),g++):(c=t,w===0&&H(Dr)),c}function ei(){var c;return xe.test(e.charAt(g))?(c=e.charAt(g),g++):(c=t,w===0&&H($r)),c}function ti(){var c;return be.test(e.charAt(g))?(c=e.charAt(g),g++):(c=t,w===0&&H(Lr)),c}function ri(){var c;return Oe.test(e.charAt(g))?(c=e.charAt(g),g++):(c=t,w===0&&H(Ur)),c}function ni(){var c;return Le.test(e.charAt(g))?(c=e.charAt(g),g++):(c=t,w===0&&H(Mr)),c}function ii(){var c;return ze.test(e.charAt(g))?(c=e.charAt(g),g++):(c=t,w===0&&H(Gr)),c}function si(){var c;return Ge.test(e.charAt(g))?(c=e.charAt(g),g++):(c=t,w===0&&H(kr)),c}function Re(){var c,y;for(c=[],y=Qe(),y===t&&(y=et(),y===t&&(y=St()));y!==t;)c.push(y),y=Qe(),y===t&&(y=et(),y===t&&(y=St()));return c}function oi(){var c,y;for(c=[],y=Qe(),y===t&&(y=Nt());y!==t;)c.push(y),y=Qe(),y===t&&(y=Nt());return c}function dt(){var c,y,F,I;return c=g,y=Re(),e.charCodeAt(g)===59?(F=Q,g++):(F=t,w===0&&H(Hr)),F!==t?(y=[y,F],c=y):(g=c,c=t),c===t&&(c=g,y=oi(),F=Ot(),F===t&&(F=null),I=et(),I!==t?(y=[y,F,I],c=y):(g=c,c=t),c===t&&(c=g,y=Re(),F=ai(),F!==t?(y=[y,F],c=y):(g=c,c=t))),c}function ai(){var c,y;return c=g,w++,e.length>g?(y=e.charAt(g),g++):(y=t,w===0&&H(gt)),w--,y===t?c=void 0:(g=c,c=t),c}const ui=r.reservedWords||[];if(Ze=s(),Ze!==t&&g===e.length)return Ze;throw Ze!==t&&g<e.length&&H(Rn()),Pn(nt,De<e.length?e.charAt(De):null,De<e.length?Je(De,De+1):Je(De,De))}var parser$2={SyntaxError:peg$SyntaxError,parse:peg$parse};const GrammarError=grammarError,compiler=compiler_1,parser$1=parser$2,VERSION=version,RESERVED_WORDS=["break","case","catch","class","const","continue","debugger","default","delete","do","else","export","extends","finally","for","function","if","import","in","instanceof","new","return","super","switch","this","throw","try","typeof","var","void","while","with","null","true","false","enum","implements","interface","let","package","private","protected","public","static","yield","await"],peg={VERSION,RESERVED_WORDS,GrammarError,parser:parser$1,compiler,generate(e,r){r=r!==void 0?r:{};function t(s){const o={};return Object.keys(s).forEach(a=>{o[a]=s[a].slice()}),o}const n="plugins"in r?r.plugins:[],i={parser:peg.parser,passes:t(peg.compiler.passes),reservedWords:peg.RESERVED_WORDS.slice()};return n.forEach(s=>{s.use(i,r)}),peg.compiler.compile(i.parser.parse(e,{grammarSource:r.grammarSource,reservedWords:i.reservedWords}),i.passes,r)}};var peg_1=peg;const GRAMMAR=`Top = Line

Zs = [\\u0020\\u00A0\\u1680\\u2000-\\u200A\\u202F\\u205F\\u3000]

WhiteSpace "whitespace"
  = "\\t"
  / "\\v"
  / "\\f"
  / " "
  / "\\u00A0"
  / "\\uFEFF"
  / Zs

_ = (WhiteSpace)*

Num = [0-9]
EngChar = [_a-zA-Z]
Punctuation = [\\(\\)\\+\\\\\\-\\*\\.]
HansChar = [\\u3000-\\u30ff\\u3400-\\u4dbf\\u4e00-\\u9fff\\uf900-\\ufaff\\uff00-\\uff9f]
Char = EngChar / HansChar / Num / Punctuation

Symbol = "{" key:(Num / EngChar)+ "}" {
	return {
    	type: 'symbol',
        key: key.join('')
    }
}

Chars = (Char / WhiteSpace)+ {
	return text()
}

Content = (FStrong / FItalic / Symbol / Chars)+

FBook = '\`' c:(Content) '\`' {
	return {
    	type: 'book',
        content: c
    }
}

FStrong = "#" c:(Content) "#" {
	return {
    	type: 'strong',
        content: c
    }
}

FItalic = '%' c:(Content) '%' {
	return {
    	type: 'italic',
        content: c
    }
}

Flavor = "<f>" {
	return {
    	type: 'flavor'
    }
}

Line = _ body:(FBook / Flavor / FStrong / FItalic / Symbol / Chars)* _ {
	return body || []
}
`,parser=peg_1.generate(GRAMMAR);function parseRuleText(e){const r=e.split(`
`).map(t=>t?parser.parse(t):null);return console.log(r),r}function getLineHeight(e){return 36}function getEmptyLineHeight(e){return 20}function flattenParseResult(e){return e.map(r=>{if(!r)return r;const t=[];function n(i,s){if(typeof i=="string")t.push({type:"text",content:i,...s});else if(i.type==="symbol")t.push({type:"symbol",key:i.key});else if(i.type==="flavor")t.push({type:"flavor"});else{const o={...s};o[i.type]=!0,i.content.forEach(a=>n(a,o))}}return r.forEach(i=>n(i,{})),t})}const IMG_BAR="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAkgAAAACCAYAAACjQiOMAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAArwAAAK8AFCrDSYAAAAB3RJTUUH4goUARISiByj7AAAAKpJREFUWMPt1jEOgzAMheE/dkAZOAH3PxsnYECQOB1KpAS1HTr7W55svUgZHYDIm/S5rqsAXNclADlnBTAzAViWRQBKKdLvu1SAlNKwr7UO8zzPQ7/WGu7Uvh9jHN4/U1W1//+3nnPOOef+F0KwTwnYfReUX72c83Pf+hVARArAeZ52z0O/zcdxWN9v+5aqagD7vg/7GGMBmKbJALZtG/7f0o8G55xzzrmHFyxOawhndBTqAAAAAElFTkSuQmCC",modules$1=Object.assign({"../../assets/attack.png":__vite_glob_0_0,"../../assets/defense.png":__vite_glob_0_1,"../../assets/intellect.png":__vite_glob_0_2,"../../assets/life.png":__vite_glob_0_3,"../../assets/none.png":__vite_glob_0_4,"../../assets/pitch.png":__vite_glob_0_5,"../../assets/resource.png":__vite_glob_0_6});function buildSymbol(e,r,t,n){const i=Texture.from(modules$1[`../../assets/${e.key}.png`].default),s=new Sprite(i),o=30;s.y=(t.lineHeight-o+2)/2,s.width=o,s.height=o;const a=!!n&&n.type==="symbol",u=5,l=a?0:u,h=l+s.width+u;return s.x=r+l,{part:s,width:h}}function buildText(e,r,t){const n=e.book?30:32,i=new TextStyle({fontFamily:e.book?"Magic\u534E\u6587\u6977\u4F53":"\u65B9\u6B63\u7B49\u7EC6\u7EBF_GBK_FIX",fontStyle:e.italic?"italic":"normal",fontSize:n,fill:0,stroke:0,lineJoin:"round",fontWeight:"lighter",letterSpacing:e.book?0:2,strokeThickness:e.strong?2:e.book?0:1});function s(l,h,f){return h<f||Math.abs(h-f)<=.2*n?!1:!(/[，。」]$/.test(l)&&h-f<n/2)}let o=e.content.length-1,a=0;do{const l=e.content.slice(0,o+1),h=TextMetrics.measureText(l,i);if(s(l,r+h.width,t.maxWidth))o--;else{a=h.width;break}}while(o>=0);const u=new Text(e.content.slice(0,o+1),i);return u.x=r,{part:u,width:a,oversize:o===e.content.length-1?void 0:{...e,content:e.content.slice(o+1)}}}function buildFlavorLine(e,r,t){const n=Texture.from(IMG_BAR),i=new Sprite(n);return i.x=0,i.y=t.lineHeight/2,i.width=t.maxWidth,i.height=2,{part:i,width:t.maxWidth,oversize:!0}}function buildFactory(e,r,t,n){if(e.type==="symbol")return buildSymbol(e,r,t,n);if(e.type==="text")return buildText(e,r,t);if(e.type==="flavor")return buildFlavorLine(e,r,t);throw new Error(`unknown type: ${e}`)}function fixed(e,r=2){return+(+e.toPrecision(10)).toFixed(r)}function buildRuleText(e,r){const t=parseRuleText(r.content),n=flattenParseResult(t),i={posY:0,lineHeight:getLineHeight(r.scale),maxWidth:resize(r.width),maxHeight:resize(r.height)},s=[...n],o=[];function a(u){if(!u.length)return;const l=new Container;l.x=0,l.y=i.posY,o.push(l);const h=[...u];let f=0,d=null;do{const _=h.shift(),{part:v,width:m,oversize:E}=buildFactory(_,f,i,d);if(d=_,l.addChild(v),f+=m,E){const A=[...h];typeof E=="object"&&A.unshift(E),A.length&&s.unshift(A);return}}while(h.length);if(r.align==="center"&&i.maxWidth>l.width){const _=(i.maxWidth-l.width)/2;l.children.forEach(v=>{v.x+=_})}}do{const u=s.shift();Array.isArray(u)?(a(u),i.posY+=i.lineHeight):i.posY+=getEmptyLineHeight(r.scale)}while(s.length);if(o.length){const u=i.posY;if(i.maxHeight-u>10){const l=fixed((i.maxHeight-u)/2);o.forEach(h=>{h.y+=l})}e.addChild(...o)}}const EXP=/^(\{[\d\w]+\})?([\d\w\-\s]+)(\{[\d]+\})?$/;function removeBracket(e){return e&&e.replace("{","").replace("}","")}function parseCollectText(e){var t;const r=e.trim().match(EXP);return console.log(r),r?{rarity:removeBracket(r[1]),series:(t=r[2])==null?void 0:t.trim(),year:removeBracket(r[3])}:{}}const BACKGROUND_COLOR={c:11184810,r:35534,m:12912393,l:15113286,p:2336307},RADIUS=8;function buildRaritySymbol(e){const r=new Container,t=new Graphics;t.x=RADIUS,t.y=RADIUS+2,t.beginFill(BACKGROUND_COLOR[e]||BACKGROUND_COLOR.c),t.drawCircle(0,0,RADIUS),t.endFill(),r.addChild(t);const n=buildSingleLineText(e.toUpperCase(),{fontFamily:"Fira Sans",fontSize:14,fill:16777215});return n.y=1,n.width<RADIUS*2&&(n.x+=(RADIUS*2-n.width)/2),r.addChild(n),{object:r,width:2.5*RADIUS}}const GAP=2;function buildCollectText(e,r){const{rarity:t,series:n,year:i}=parseCollectText(r.content),s=resize(r.width);let o=0;const a=[];if(t){const{object:l,width:h}=buildRaritySymbol(t);a.push(l),o=h+GAP}const u=new Container;if(a.push(u),u.x=o,buildTextObjects(u,r,n,i),s-o<u.width&&(u.width=s-o),s>o+u.width){const l=(s-(o+u.width))/2;a.forEach(h=>{h.x+=l})}a.length&&e.addChild(...a)}function buildTextObjects(e,r,t,n){const i={fontFamily:"Fira Sans",fontSize:16,letterSpacing:0,fill:r.color||0};if(t){const s=buildSingleLineText(t,i);s.x=0,e.addChild(s)}if(n){const s=buildSingleLineText("\xA9",i);s.x=e.width+GAP,s.y=1.5,e.addChild(s);const o=buildSingleLineText(`${n} Legendary Story Studios`,i);o.x=e.width+GAP,e.addChild(o)}}function buildTextContent(e,r){r.displayType==="collect"?buildCollectText(e,r):r.displayType==="rule"?buildRuleText(e,r):buildTitleText(e,r)}const buildTitleText=(e,r)=>{const t=resize(r.width);let n;switch(r.displayType){case"name":{n={fontSize:48,letterSpacing:2,fontFamily:"\u534E\u5EB7\u9B4F\u7891 Std W7"};break}case"type":{n={fontSize:30,letterSpacing:0,fontFamily:"\u534E\u5EB7\u9B4F\u7891 Std W7"};break}case"number":{n={fontSize:36,letterSpacing:-2,fontFamily:"\u534E\u5EB7\u9B4F\u7891 Std W7"};break}default:{n={fontSize:10,letterSpacing:0,fontFamily:"\u534E\u5EB7\u9B4F\u7891 Std W7"};break}}n={...n,fill:r.color||0};const i=buildSingleLineText(r.content,n,{maxWidth:t,align:r.align});e.addChild(i)},modules=Object.assign({"./assets/attack.png":__vite_glob_0_0,"./assets/defense.png":__vite_glob_0_1,"./assets/intellect.png":__vite_glob_0_2,"./assets/life.png":__vite_glob_0_3,"./assets/none.png":__vite_glob_0_4,"./assets/pitch.png":__vite_glob_0_5,"./assets/resource.png":__vite_glob_0_6});class FABDomain extends BaseDomain{constructor(){super(...arguments);Ne(this,"footerIcons",[]);Ne(this,"footerLeftIcon","none");Ne(this,"footerRightIcon","none");Ne(this,"pitchValue","0");Ne(this,"pitchIconContainer",null);Ne(this,"pitchColorBar",null)}destroy(){var t,n;this.footerIcons.forEach(i=>i.destroy()),this.footerIcons=[],(t=this.pitchIconContainer)==null||t.destroy(),(n=this.pitchColorBar)==null||n.destroy(),super.destroy()}buildTextContent(t,n){buildTextContent(t,n)}triggerInitBuildText(){this.rawTextList.forEach(t=>{const{container:n,info:i}=this.findTextBlockById(t.id);this.reBuildTextContent(n,i)})}initExtraPart(){this.initFooterIcon(),this.initPitchValue()}initFooterIcon(){[this.footerLeftIcon,this.footerRightIcon].forEach((n,i)=>{var a;const s=Texture.from(modules[`./assets/${n}.png`].default),o=new Sprite(s);o.width=resize(138),o.height=resize(138),o.x=resize(i===0?93:1268),o.y=resize(1864),o.zIndex=0,this.footerIcons[i]||(this.footerIcons[i]=o),(a=this.pixiApp)==null||a.stage.addChild(o)})}updateFooterIcon(t,n){const i=Texture.from(modules[`./assets/${n}.png`].default),s=this.footerIcons[t==="left"?0:1];s.texture=i,t==="left"?this.footerLeftIcon=n:this.footerRightIcon=n}initPitchValue(){var t,n;this.pitchIconContainer=new Container,this.pitchIconContainer.zIndex=11,this.pitchIconContainer.x=0,this.pitchIconContainer.y=0,this.pitchColorBar=new Graphics,this.pitchColorBar.x=resize(217),this.pitchColorBar.y=resize(79),this.pitchColorBar.zIndex=0,(t=this.pixiApp)==null||t.stage.addChild(this.pitchIconContainer),(n=this.pixiApp)==null||n.stage.addChild(this.pitchColorBar),this.updatePitchValue(this.pitchValue)}updatePitchValue(t){var o,a,u,l,h,f;const n=+t||0,i={1:12517384,2:16772608,3:40678};(o=this.pitchColorBar)==null||o.clear(),t in i&&((a=this.pitchColorBar)==null||a.beginFill(i[t]),(u=this.pitchColorBar)==null||u.drawRect(0,0,resize(1064),resize(46)),(l=this.pitchColorBar)==null||l.endFill()),(h=this.pitchIconContainer)==null||h.removeChildren();const s=[[156,116],[118,181],[192,181]];for(let d=1;d<=n;d++){const[_,v]=s[d-1],m=Texture.from(modules["./assets/pitch.png"].default),E=new Sprite(m);E.width=resize(52),E.height=resize(52),E.x=resize(_),E.y=resize(v),(f=this.pitchIconContainer)==null||f.addChild(E)}}}const PRESET_BLOCK=[{name:"\u82F1\u96C4\u540D\u79F0",id:100,x:0,y:120,width:1500,height:114,displayType:"name",align:"center"},{name:"\u884C\u52A8\u540D\u79F0",id:105,x:0,y:134,width:1500,height:114,displayType:"name",align:"center"},{name:"\u5361\u724C\u7C7B\u578B",id:101,x:0,y:1880,width:1500,height:114,displayType:"type",align:"center"},{name:"\u6548\u679C",id:102,x:172,y:1330,width:1155,height:510,displayType:"rule"},{name:"\u5DE6\u6570\u503C",id:103,x:234,y:1910,width:104,height:104,displayType:"number",align:"center"},{name:"\u53F3\u6570\u503C",id:104,x:1164,y:1910,width:104,height:104,displayType:"number",align:"center"},{name:"\u8D39\u7528\u503C",id:106,x:1291,y:142,width:60,height:80,displayType:"number",align:"center"},{name:"\u7F16\u53F7",id:107,x:400,y:1980,width:700,height:36,displayType:"collect",color:"#ffffff",align:"center"}],CCard_vue_vue_type_style_index_0_scoped_8ac9b1c2_lang="",_export_sfc=(e,r)=>{const t=e.__vccOpts||e;for(const[n,i]of r)t[n]=i;return t},_sfc_main$5={},_hoisted_1$3={class:"card"};function _sfc_render(e,r){return openBlock(),createElementBlock("div",_hoisted_1$3,[renderSlot(e.$slots,"default",{},void 0,!0)])}const CCard=_export_sfc(_sfc_main$5,[["render",_sfc_render],["__scopeId","data-v-8ac9b1c2"]]),_sfc_main$4=defineComponent({__name:"CButton",emits:["click"],setup(e,{emit:r}){return(t,n)=>(openBlock(),createElementBlock("div",{class:"button",onClick:n[0]||(n[0]=i=>r("click"))},[renderSlot(t.$slots,"default",{},void 0,!0)]))}}),CButton_vue_vue_type_style_index_0_scoped_8c68d2e7_lang="",CButton=_export_sfc(_sfc_main$4,[["__scopeId","data-v-8c68d2e7"]]),_withScopeId$2=e=>(pushScopeId("data-v-8b56374b"),e=e(),popScopeId(),e),_hoisted_1$2={key:0},_hoisted_2$2={class:"position-info"},_hoisted_3$2=["name","value","onBlur"],_hoisted_4$2={class:"position-info"},_hoisted_5$2={class:"field"},_hoisted_6$2=_withScopeId$2(()=>createBaseVNode("span",null,"type:",-1)),_hoisted_7$2=["value"],_hoisted_8$2=["value"],_hoisted_9$2={class:"field"},_hoisted_10$2=_withScopeId$2(()=>createBaseVNode("span",null,"color:",-1)),_hoisted_11$1=["value"],_hoisted_12$1={class:"field"},_hoisted_13$1=_withScopeId$2(()=>createBaseVNode("span",null,"scale:",-1)),_hoisted_14=["value"],_hoisted_15=_withScopeId$2(()=>createBaseVNode("option",{value:"1"},"normal",-1)),_hoisted_16=_withScopeId$2(()=>createBaseVNode("option",{value:"2"},"small",-1)),_hoisted_17=_withScopeId$2(()=>createBaseVNode("option",{value:"3"},"middle",-1)),_hoisted_18=_withScopeId$2(()=>createBaseVNode("option",{value:"4"},"middle-s",-1)),_hoisted_19=[_hoisted_15,_hoisted_16,_hoisted_17,_hoisted_18],_hoisted_20={class:"field"},_hoisted_21=_withScopeId$2(()=>createBaseVNode("span",null,"align:",-1)),_hoisted_22=["value"],_hoisted_23=_withScopeId$2(()=>createBaseVNode("option",{value:"left"},"left",-1)),_hoisted_24=_withScopeId$2(()=>createBaseVNode("option",{value:"center"},"center",-1)),_hoisted_25=_withScopeId$2(()=>createBaseVNode("option",{value:"right"},"right",-1)),_hoisted_26=[_hoisted_23,_hoisted_24,_hoisted_25],_hoisted_27={class:"content"},_hoisted_28=["value"],_hoisted_29=createTextVNode("\u79FB\u9664"),_sfc_main$3=defineComponent({__name:"CTextBlock",props:{block:null,options:null,title:null,hideRemove:{type:Boolean}},emits:["position","content","color","display-type","scale","align","remove"],setup(e,{emit:r}){const t=l=>{if(l.target)return l.target.value},n=(l,h)=>{const f=+t(l);r("position",{[h]:f})},i=l=>{r("content",t(l)||"")},s=l=>{r("display-type",t(l)||"title")},o=l=>{r("color",t(l)||0)},a=l=>{r("scale",+t(l)||FONT_SCALE.Normal)},u=l=>{r("align",t(l)||"left")};return(l,h)=>(openBlock(),createBlock(CCard,null,{default:withCtx(()=>[e.title?(openBlock(),createElementBlock("strong",_hoisted_1$2,toDisplayString(e.title),1)):createCommentVNode("",!0),createBaseVNode("div",_hoisted_2$2,[(openBlock(!0),createElementBlock(Fragment,null,renderList(["x","y","width","height"],f=>(openBlock(),createElementBlock("div",{key:f,class:"field"},[createBaseVNode("span",null,toDisplayString(f==="x"||f==="y"?f:f[0].toUpperCase())+": ",1),createBaseVNode("input",{type:"number",name:f,value:e.block[f],onBlur:d=>n(d,f)},null,40,_hoisted_3$2)]))),128))]),createBaseVNode("div",_hoisted_4$2,[createBaseVNode("div",_hoisted_5$2,[_hoisted_6$2,createBaseVNode("select",{value:e.block.displayType,onChange:s},[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.options,f=>(openBlock(),createElementBlock("option",{key:f,value:f},toDisplayString(f),9,_hoisted_8$2))),128))],40,_hoisted_7$2)]),createBaseVNode("div",_hoisted_9$2,[_hoisted_10$2,createBaseVNode("input",{type:"text",value:e.block.color,onBlur:o},null,40,_hoisted_11$1)]),createBaseVNode("div",_hoisted_12$1,[_hoisted_13$1,createBaseVNode("select",{value:e.block.scale,onChange:a},_hoisted_19,40,_hoisted_14)]),createBaseVNode("div",_hoisted_20,[_hoisted_21,createBaseVNode("select",{value:e.block.align,onChange:u},_hoisted_26,40,_hoisted_22)])]),createBaseVNode("div",_hoisted_27,[createBaseVNode("textarea",{rows:"10",name:"content",value:e.block.content,onBlur:i},null,40,_hoisted_28)]),e.hideRemove?createCommentVNode("",!0):(openBlock(),createBlock(CButton,{key:1,onClick:h[0]||(h[0]=f=>r("remove"))},{default:withCtx(()=>[_hoisted_29]),_:1}))]),_:1}))}}),CTextBlock_vue_vue_type_style_index_0_scoped_8b56374b_lang="",CTextBlock=_export_sfc(_sfc_main$3,[["__scopeId","data-v-8b56374b"]]),_withScopeId$1=e=>(pushScopeId("data-v-ddc8f5cc"),e=e(),popScopeId(),e),_hoisted_1$1={class:"footer-block"},_hoisted_2$1={class:"field"},_hoisted_3$1=_withScopeId$1(()=>createBaseVNode("span",null,"left icon:",-1)),_hoisted_4$1=["value"],_hoisted_5$1=["value"],_hoisted_6$1={class:"field"},_hoisted_7$1=_withScopeId$1(()=>createBaseVNode("span",null,"right icon:",-1)),_hoisted_8$1=["value"],_hoisted_9$1=["value"],_hoisted_10$1={class:"field"},_hoisted_11=_withScopeId$1(()=>createBaseVNode("span",null,"pitch:",-1)),_hoisted_12=["value"],_hoisted_13=["value"],_sfc_main$2=defineComponent({__name:"CStatController",props:{leftValue:null,rightValue:null,pitchValue:null},emits:["update-left","update-right","update-pitch"],setup(e,{emit:r}){const t=a=>{if(a.target)return a.target.value},n=a=>{r("update-left",t(a)||"none")},i=a=>{r("update-right",t(a)||"none")},s=a=>{r("update-pitch",t(a)||"1")},o=["none","attack","defense","life","resource","intellect"];return(a,u)=>(openBlock(),createBlock(CCard,null,{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$1,[createBaseVNode("div",_hoisted_2$1,[_hoisted_3$1,createBaseVNode("select",{value:e.leftValue,onChange:n},[(openBlock(),createElementBlock(Fragment,null,renderList(o,l=>createBaseVNode("option",{key:l,value:l},toDisplayString(l),9,_hoisted_5$1)),64))],40,_hoisted_4$1)]),createBaseVNode("div",_hoisted_6$1,[_hoisted_7$1,createBaseVNode("select",{value:e.rightValue,onChange:i},[(openBlock(),createElementBlock(Fragment,null,renderList(o,l=>createBaseVNode("option",{key:l,value:l},toDisplayString(l),9,_hoisted_9$1)),64))],40,_hoisted_8$1)]),createBaseVNode("div",_hoisted_10$1,[_hoisted_11,createBaseVNode("select",{value:e.pitchValue,onChange:s},[(openBlock(),createElementBlock(Fragment,null,renderList(["0","1","2","3"],l=>createBaseVNode("option",{key:l,value:l},toDisplayString(l),9,_hoisted_13)),64))],40,_hoisted_12)])])]),_:1}))}}),CStatController_vue_vue_type_style_index_0_scoped_ddc8f5cc_lang="",CStatController=_export_sfc(_sfc_main$2,[["__scopeId","data-v-ddc8f5cc"]]),_withScopeId=e=>(pushScopeId("data-v-63f0caf5"),e=e(),popScopeId(),e),_hoisted_1={class:"container"},_hoisted_2={class:"part preview-part"},_hoisted_3={class:"scale-preview"},_hoisted_4={class:"part action-part"},_hoisted_5={class:"grid-container"},_hoisted_6=_withScopeId(()=>createBaseVNode("hr",null,null,-1)),_hoisted_7=createTextVNode("\u589E\u52A0\u65B0\u6587\u672C"),_hoisted_8=_withScopeId(()=>createBaseVNode("hr",null,null,-1)),_hoisted_9=createTextVNode("\u6E05\u7A7A\u7F13\u5B58"),_hoisted_10=_withScopeId(()=>createBaseVNode("div",{class:"hint"},[createBaseVNode("p",null,"\uFF5E"),createBaseVNode("p",null,"\xA9")],-1)),_sfc_main$1=defineComponent({__name:"index",setup(e){const r="FAB_TEXT_CACHED",t=ref(),n=reactive(new FABDomain({debug:!1}));watch(n.rawTextList,f=>{f&&localStorage.setItem(r,JSON.stringify(f))}),window.domain=n;const i=f=>{const d=f.target;if(d.files&&d.files.length){const[_]=d.files;n.initFile(_)}};onMounted(()=>{t.value&&n.initCanvas(t.value),setTimeout(()=>{const f=JSON.parse(localStorage.getItem(r)||"[]"),d=[];PRESET_BLOCK.forEach(({name:_,...v})=>{const m=f.findIndex(E=>E.id===v.id);m>-1?(d.push(f[m]),f.splice(m,1)):d.push({...v})}),console.log(d,f),d.concat(f).forEach(_=>n.addRawTextBlock(_)),n.triggerInitBuildText(),n.initExtraPart()},0)}),onBeforeUnmount(()=>{n.destroy()});const s=["name","type","rule","number","collect"];function o(){n.addRawTextBlock({x:100,y:100,width:100,height:100,displayType:"title"})}function a(){window.localStorage.removeItem(r)}const u=ref(100),l=computed(()=>PRESET_BLOCK.find(f=>f.id===u.value).name),h=computed(()=>n.rawTextList.find(f=>f.id===u.value));return(f,d)=>(openBlock(),createElementBlock("div",_hoisted_1,[createBaseVNode("div",_hoisted_2,[createBaseVNode("div",_hoisted_3,[createBaseVNode("canvas",{ref_key:"canvasRef",ref:t,width:"1500",height:"2100"},null,512)])]),createBaseVNode("div",_hoisted_4,[createVNode(CCard,null,{default:withCtx(()=>[createBaseVNode("input",{type:"file",accept:"image/jpeg,image/png",onChange:i},null,32)]),_:1}),createVNode(CStatController,{"pitch-value":n.pitchValue,"left-value":n.footerLeftIcon,"right-value":n.footerRightIcon,onUpdateLeft:d[0]||(d[0]=_=>n.updateFooterIcon("left",_)),onUpdateRight:d[1]||(d[1]=_=>n.updateFooterIcon("right",_)),onUpdatePitch:d[2]||(d[2]=_=>n.updatePitchValue(_))},null,8,["pitch-value","left-value","right-value"]),createBaseVNode("div",_hoisted_5,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(PRESET_BLOCK),_=>(openBlock(),createBlock(CButton,{key:_.id,onClick:v=>u.value=_.id},{default:withCtx(()=>[createTextVNode(toDisplayString(_.name),1)]),_:2},1032,["onClick"]))),128))]),createVNode(CCard,null,{default:withCtx(()=>[createBaseVNode("strong",null,toDisplayString(unref(l)),1)]),_:1}),unref(h)?(openBlock(),createBlock(CTextBlock,{key:0,block:unref(h),options:s,onPosition:d[3]||(d[3]=_=>n.updateTextBlockPosition(u.value,_)),onContent:d[4]||(d[4]=_=>n.updateTextContent(u.value,_)),onColor:d[5]||(d[5]=_=>n.updateRawTextInfo(u.value,{color:_})),onScale:d[6]||(d[6]=_=>n.updateRawTextInfo(u.value,{scale:_})),onAlign:d[7]||(d[7]=_=>n.updateRawTextInfo(u.value,{align:_})),onDisplayType:d[8]||(d[8]=_=>n.updateRawTextInfo(u.value,{displayType:_})),onRemove:d[9]||(d[9]=_=>n.removeTextBlock(u.value))},null,8,["block"])):createCommentVNode("",!0),_hoisted_6,createVNode(CCard,null,{default:withCtx(()=>[createVNode(CButton,{onClick:o},{default:withCtx(()=>[_hoisted_7]),_:1})]),_:1}),(openBlock(!0),createElementBlock(Fragment,null,renderList(n.rawTextList.filter(_=>_.id<100),_=>(openBlock(),createBlock(CTextBlock,{block:_,options:s,onPosition:v=>n.updateTextBlockPosition(_.id,v),onContent:v=>n.updateTextContent(_.id,v),onColor:v=>n.updateRawTextInfo(_.id,{color:v}),onScale:v=>n.updateRawTextInfo(_.id,{scale:v}),onAlign:v=>n.updateRawTextInfo(_.id,{align:v}),onDisplayType:v=>n.updateRawTextInfo(_.id,{displayType:v}),onRemove:v=>n.removeTextBlock(_.id)},null,8,["block","onPosition","onContent","onColor","onScale","onAlign","onDisplayType","onRemove"]))),256)),_hoisted_8,createVNode(CCard,null,{default:withCtx(()=>[createVNode(CButton,{onClick:a},{default:withCtx(()=>[_hoisted_9]),_:1})]),_:1}),_hoisted_10])]))}}),index_vue_vue_type_style_index_0_lang="",index_vue_vue_type_style_index_1_scoped_63f0caf5_lang="",FabView=_export_sfc(_sfc_main$1,[["__scopeId","data-v-63f0caf5"]]),_sfc_main=defineComponent({__name:"App",setup(e){return(r,t)=>(openBlock(),createBlock(FabView))}}),main="";createApp(_sfc_main).mount("#app");
